!function(a){var b,c=String.prototype.trim,d=/^\s+|\s+$/g,e="$1"==="B".replace(/A(.)|B/,"$1"),f={majorVersion:"3",minorVersion:"5.10",releaseDate:"2013-10-24",_init:function(){function b(a){return a.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(a.src)?(/_(src|dev)\.js/g.test(a.src)&&(i.suffix="_src"),-1!=(g=a.src.indexOf("?"))&&(i.query=a.src.substring(g+1)),i.baseURL=a.src.substring(0,a.src.lastIndexOf("/")),f&&-1==i.baseURL.indexOf("://")&&0!==i.baseURL.indexOf("/")&&(i.baseURL=f+i.baseURL),i.baseURL):null}var c,d,e,f,g,h,i=this,j=document,k=navigator,l=k.userAgent;if(i.isIE11=-1!=l.indexOf("Trident/")&&(-1!=l.indexOf("rv:")||-1!=k.appName.indexOf("Netscape")),i.isOpera=a.opera&&opera.buildNumber,i.isWebKit=/WebKit/.test(l),i.isIE=!i.isWebKit&&!i.isOpera&&/MSIE/gi.test(l)&&/Explorer/gi.test(k.appName)||i.isIE11,i.isIE6=i.isIE&&/MSIE [56]/.test(l),i.isIE7=i.isIE&&/MSIE [7]/.test(l),i.isIE8=i.isIE&&/MSIE [8]/.test(l),i.isIE9=i.isIE&&/MSIE [9]/.test(l),i.isIE10=i.isIE&&/MSIE [10]/.test(l),i.isGecko=!i.isWebKit&&!i.isIE11&&/Gecko/.test(l),i.isMac=-1!=l.indexOf("Mac"),i.isAir=/adobeair/i.test(l),i.isIDevice=/(iPad|iPhone)/.test(l),i.isIOS5=i.isIDevice&&l.match(/AppleWebKit\/(\d*)/)[1]>=534,i.isAndroid=/(Android)/.test(l),a.tinyMCEPreInit)return i.suffix=tinyMCEPreInit.suffix,i.baseURL=tinyMCEPreInit.base,void(i.query=tinyMCEPreInit.query);for(i.suffix="",d=j.getElementsByTagName("base"),c=0;c<d.length;c++)h=d[c].href,h&&(/^https?:\/\/[^\/]+$/.test(h)&&(h+="/"),f=h?h.match(/.*\//)[0]:"");for(d=j.getElementsByTagName("script"),c=0;c<d.length;c++)if(b(d[c]))return;if(e=j.getElementsByTagName("head")[0])for(d=e.getElementsByTagName("script"),c=0;c<d.length;c++)if(b(d[c]))return},is:function(a,c){return c?"array"==c&&f.isArray(a)?!0:typeof a==c:a!==b},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},makeMap:function(a,b,c){var d;for(a=a||[],b=b||",","string"==typeof a&&(a=a.split(b)),c=c||{},d=a.length;d--;)c[a[d]]={};return c},each:function(a,c,d){var e,f;if(!a)return 0;if(d=d||a,a.length!==b){for(e=0,f=a.length;f>e;e++)if(c.call(d,a[e],e,a)===!1)return 0}else for(e in a)if(Object.prototype.hasOwnProperty.call(a,e)&&c.call(d,a[e],e,a)===!1)return 0;return 1},map:function(a,b){var c=[];return f.each(a,function(a){c.push(b(a))}),c},grep:function(a,b){var c=[];return f.each(a,function(a){b&&!b(a)||c.push(a)}),c},inArray:function(a,b){var c,d;if(a)for(c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},extend:function(a,c){var d,e,f,g,h=arguments;for(d=1,e=h.length;e>d;d++){c=h[d];for(f in c)c.hasOwnProperty(f)&&(g=c[f],g!==b&&(a[f]=g))}return a},trim:c?function(a){return a?c.call(a+""):""}:function(a){return(a?""+a:"").replace(d,"")},create:function(a,b,c){var d,e,f,g,h,i=this,j=0;if(a=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(a),f=a[3].match(/(^|\.)(\w+)$/i)[2],e=i.createNS(a[3].replace(/\.\w+$/,""),c),!e[f]){if("static"==a[2])return e[f]=b,void(this.onCreate&&this.onCreate(a[2],a[3],e[f]));b[f]||(b[f]=function(){},j=1),e[f]=b[f],i.extend(e[f].prototype,b),a[5]&&(d=i.resolve(a[5]).prototype,g=a[5].match(/\.(\w+)$/i)[1],h=e[f],j?e[f]=function(){return d[g].apply(this,arguments)}:e[f]=function(){return this.parent=d[g],h.apply(this,arguments)},e[f].prototype[f]=e[f],i.each(d,function(a,b){e[f].prototype[b]=d[b]}),i.each(b,function(a,b){d[b]?e[f].prototype[b]=function(){return this.parent=d[b],a.apply(this,arguments)}:b!=f&&(e[f].prototype[b]=a)})),i.each(b["static"],function(a,b){e[f][b]=a}),this.onCreate&&this.onCreate(a[2],a[3],e[f].prototype)}},walk:function(a,b,c,d){d=d||this,a&&(c&&(a=a[c]),f.each(a,function(a,e){return b.call(d,a,e,c)===!1?!1:void f.walk(a,b,c,d)}))},createNS:function(b,c){var d,e;for(c=c||a,b=b.split("."),d=0;d<b.length;d++)e=b[d],c[e]||(c[e]={}),c=c[e];return c},resolve:function(b,c){var d,e;for(c=c||a,b=b.split("."),d=0,e=b.length;e>d&&(c=c[b[d]],c);d++);return c},addUnload:function(b,c){function d(){function b(){c.detachEvent("onstop",b),e&&e(),c=0}var c=document;"interactive"==c.readyState&&(c&&c.attachEvent("onstop",b),a.setTimeout(function(){c&&c.detachEvent("onstop",b)},0))}var e,f=this;return e=function(){var b,c,g=f.unloads;if(g){for(c in g)b=g[c],b&&b.func&&b.func.call(b.scope,1);a.detachEvent?(a.detachEvent("onbeforeunload",d),a.detachEvent("onunload",e)):a.removeEventListener&&a.removeEventListener("unload",e,!1),f.unloads=b=g=w=e=0,a.CollectGarbage&&CollectGarbage()}},b={func:b,scope:c||this},f.unloads?f.unloads.push(b):(a.attachEvent?(a.attachEvent("onunload",e),a.attachEvent("onbeforeunload",d)):a.addEventListener&&a.addEventListener("unload",e,!1),f.unloads=[b]),b},removeUnload:function(a){var b=this.unloads,c=null;return f.each(b,function(d,e){return d&&d.func==a?(b.splice(e,1),c=a,!1):void 0}),c},explode:function(a,b){return!a||f.is(a,"array")?a:f.map(a.split(b||","),f.trim)},_addVer:function(a){var b;return this.query?(b=(-1==a.indexOf("?")?"?":"&")+this.query,-1==a.indexOf("#")?a+b:a.replace("#",b+"#")):a},_replace:function(a,c,d){return e?d.replace(a,function(){var a,d=c,e=arguments;for(a=0;a<e.length-2;a++)d=e[a]===b?d.replace(new RegExp("\\$"+a,"g"),""):d.replace(new RegExp("\\$"+a,"g"),e[a]);return d}):d.replace(a,c)}};f._init(),a.tinymce=a.tinyMCE=f}(window),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,inDispatch:!1,Dispatcher:function(a){this.scope=a||this,this.listeners=[]},add:function(a,b){return this.listeners.push({cb:a,scope:b||this.scope}),a},addToTop:function(a,b){var c=this,d={cb:a,scope:b||c.scope};return c.inDispatch?c.listeners=[d].concat(c.listeners):c.listeners.unshift(d),a},remove:function(a){var b=this.listeners,c=null;return tinymce.each(b,function(d,e){return a==d.cb?(c=d,b.splice(e,1),!1):void 0}),c},dispatch:function(){var a,b,c,d=this,e=arguments,f=d.listeners;for(d.inDispatch=!0,b=0;b<f.length&&(c=f[b],a=c.cb.apply(c.scope,e.length>0?e:[c.scope]),a!==!1);b++);return d.inDispatch=!1,a}}),function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(b,c){var d,e,f=this;return b=tinymce.trim(b),c=f.settings=c||{},/^([\w\-\+\.]+):/i.test(b)&&!/^https?:/i.test(b)||/^\s*#/.test(b)?void(f.source=b):(0===b.indexOf("/")&&0!==b.indexOf("//")&&(b=(c.base_uri?c.base_uri.protocol||"http":"http")+"://mce_host"+b),/^[\w\-]*:?\/\//.test(b)||(e=c.base_uri?c.base_uri.path:new tinymce.util.URI(location.href).directory,b=(c.base_uri&&c.base_uri.protocol||"http")+"://mce_host"+f.toAbsPath(e,b)),b=b.replace(/@@/g,"(mce_at)"),b=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(b),a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(a,c){var d=b[c];d&&(d=d.replace(/\(mce_at\)/g,"@@")),f[a]=d}),d=c.base_uri,void(d&&(f.protocol||(f.protocol=d.protocol),f.userInfo||(f.userInfo=d.userInfo),f.port||"mce_host"!==f.host||(f.port=d.port),f.host&&"mce_host"!==f.host||(f.host=d.host),f.source="")))},setPath:function(a){var b=this;a=/^(.*?)\/?(\w+)?$/.exec(a),b.path=a[0],b.directory=a[1],b.file=a[2],b.source="",b.getURI()},toRelative:function(a){var b,c=this;if("./"===a)return a;if(a=new tinymce.util.URI(a,{base_uri:c}),"mce_host"!=a.host&&c.host!=a.host&&a.host||c.port!=a.port||c.protocol!=a.protocol)return a.getURI();var d=c.getURI(),e=a.getURI();return d==e||"/"==d.charAt(d.length-1)&&d.substr(0,d.length-1)==e?d:(b=c.toRelPath(c.path,a.path),a.query&&(b+="?"+a.query),a.anchor&&(b+="#"+a.anchor),b)},toAbsolute:function(a,b){return a=new tinymce.util.URI(a,{base_uri:this}),a.getURI(this.host==a.host&&this.protocol==a.protocol?b:0)},toRelPath:function(a,b){var c,d,e,f=0,g="";if(a=a.substring(0,a.lastIndexOf("/")),a=a.split("/"),c=b.split("/"),a.length>=c.length)for(d=0,e=a.length;e>d;d++)if(d>=c.length||a[d]!=c[d]){f=d+1;break}if(a.length<c.length)for(d=0,e=c.length;e>d;d++)if(d>=a.length||a[d]!=c[d]){f=d+1;break}if(1===f)return b;for(d=0,e=a.length-(f-1);e>d;d++)g+="../";for(d=f-1,e=c.length;e>d;d++)g+=d!=f-1?"/"+c[d]:c[d];return g},toAbsPath:function(b,c){var d,e,f,g=0,h=[];for(e=/\/$/.test(c)?"/":"",b=b.split("/"),c=c.split("/"),a(b,function(a){a&&h.push(a)}),b=h,d=c.length-1,h=[];d>=0;d--)0!==c[d].length&&"."!==c[d]&&(".."!==c[d]?g>0?g--:h.push(c[d]):g++);return d=b.length-g,f=0>=d?h.reverse().join("/"):b.slice(0,d).join("/")+"/"+h.reverse().join("/"),0!==f.indexOf("/")&&(f="/"+f),e&&f.lastIndexOf("/")!==f.length-1&&(f+=e),f},getURI:function(a){var b,c=this;return c.source&&!a||(b="",a||(c.protocol&&(b+=c.protocol+"://"),c.userInfo&&(b+=c.userInfo+"@"),c.host&&(b+=c.host),c.port&&(b+=":"+c.port)),b+=c.path?c.path:"/",c.query&&(b+="?"+c.query),c.anchor&&(b+="#"+c.anchor),c.source=b),c.source}})}(),function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(b){var c,d=this.get(b);return d&&a(d.split("&"),function(a){a=a.split("="),c=c||{},c[unescape(a[0])]=unescape(a[1])}),c},setHash:function(b,c,d,e,f,g){var h="";a(c,function(a,b){h+=(h?"&":"")+escape(b)+"="+escape(a)}),this.set(b,h,d,e,f,g)},get:function(a){var b,c,d=document.cookie,e=a+"=";if(d){if(c=d.indexOf("; "+e),-1==c){if(c=d.indexOf(e),0!==c)return null}else c+=2;return b=d.indexOf(";",c),-1==b&&(b=d.length),unescape(d.substring(c+e.length,b))}},set:function(a,b,c,d,e,f){document.cookie=a+"="+escape(b)+(c?"; expires="+c.toGMTString():"")+(d?"; path="+escape(d):"")+(e?"; domain="+e:"")+(f?"; secure":"")},remove:function(a,b,c){var d=new Date;d.setTime(d.getTime()-1e3),this.set(a,"",d,b,c)}})}(),function(){function serialize(a,b){var c,d,e,f;if(b=b||'"',null==a)return"null";if(e=typeof a,"string"==e)return d="\bb	t\nn\ff\rr\"\"''\\\\",b+a.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,e){return'"'===b&&"'"===a?a:(c=d.indexOf(e),c+1?"\\"+d.charAt(c+1):(a=e.charCodeAt().toString(16),"\\u"+"0000".substring(a.length)+a))})+b;if("object"==e){if(a.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(a)){for(c=0,d="[";c<a.length;c++)d+=(c>0?",":"")+serialize(a[c],b);return d+"]"}d="{";for(f in a)a.hasOwnProperty(f)&&(d+="function"!=typeof a[f]?(d.length>1?","+b:b)+f+b+":"+serialize(a[f],b):"");return d+"}"}return""+a}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}}(),tinymce.create("static tinymce.util.XHR",{send:function(a){function b(){!a.async||4==d.readyState||g++>1e4?(a.success&&1e4>g&&200==d.status?a.success.call(a.success_scope,""+d.responseText,d,a):a.error&&a.error.call(a.error_scope,g>1e4?"TIMED_OUT":"GENERAL",d,a),d=null):f.setTimeout(b,10)}function c(a){d=0;try{d=new ActiveXObject(a)}catch(b){}return d}var d,e,f=window,g=0;if(a.scope=a.scope||this,a.success_scope=a.success_scope||a.scope,a.error_scope=a.error_scope||a.scope,a.async=a.async!==!1,a.data=a.data||"",d=f.XMLHttpRequest?new XMLHttpRequest:c("Microsoft.XMLHTTP")||c("Msxml2.XMLHTTP")){if(d.overrideMimeType&&d.overrideMimeType(a.content_type),d.open(a.type||(a.data?"POST":"GET"),a.url,a.async),a.content_type&&d.setRequestHeader("Content-Type",a.content_type),d.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.send(a.data),!a.async)return b();e=f.setTimeout(b,10)}}}),function(){var a=tinymce.extend,b=tinymce.util.JSON,c=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(b){this.settings=a({},b),this.count=0},send:function(d){var e=d.error,f=d.success;d=a(this.settings,d),d.success=function(a,c){a=b.parse(a),"undefined"==typeof a&&(a={error:"JSON Parse error."}),a.error?e.call(d.error_scope||d.scope,a.error,c):f.call(d.success_scope||d.scope,a.result)},d.error=function(a,b){e&&e.call(d.error_scope||d.scope,a,b)},d.data=b.serialize({id:d.id||"c"+this.count++,method:d.method,params:d.params}),d.content_type="application/json",c.send(d)},"static":{sendRPC:function(a){return(new tinymce.util.JSONRequest).send(a)}}})}(),function(a){a.VK={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(a){return a.shiftKey||a.ctrlKey||a.altKey},metaKeyPressed:function(b){return a.isMac?b.metaKey:b.ctrlKey&&!b.altKey}}}(tinymce),tinymce.util.Quirks=function(a){function b(b,c){try{a.getDoc().execCommand(b,!1,c)}catch(d){}}function c(){var b=a.getDoc().documentMode;return b?b:6}function d(a){return a.isDefaultPrevented()}function e(a,b){var c,d,e,f,g;if(a)if(c=a.length,c===f){for(d in a)if(a.hasOwnProperty(d)&&(g=a[d],b.call(g,g,d)===!1))break}else for(e=0;c>e&&(g=a[e],b.call(g,g,d)!==!1);e++);return a}function f(){function b(b){function c(){if(3==i.nodeType){if(b&&j==i.length)return!0;if(!b&&0===j)return!0}}var d,f,g,h,i,j,k;d=I.getRng();var l=[d.startContainer,d.startOffset,d.endContainer,d.endOffset];if(d.collapsed||(b=!0),i=d[(b?"start":"end")+"Container"],j=d[(b?"start":"end")+"Offset"],3==i.nodeType&&(f=H.getParent(d.startContainer,H.isBlock),b&&(f=H.getNext(f,H.isBlock)),!f||!c()&&d.collapsed||(g=H.create("em",{id:"__mceDel"}),e(tinymce.grep(f.childNodes),function(a){g.appendChild(a)}),f.appendChild(g))),d=H.createRng(),d.setStart(l[0],l[1]),d.setEnd(l[2],l[3]),I.setRng(d),a.getDoc().execCommand(b?"ForwardDelete":"Delete",!1,null),g){for(h=I.getBookmark();k=H.get("__mceDel");)H.remove(k,!0);I.moveToBookmark(h)}}a.onKeyDown.add(function(a,c){var e;e=c.keyCode==G,d(c)||!e&&c.keyCode!=F||E.modifierPressed(c)||(c.preventDefault(),b(e))}),a.addCommand("Delete",function(){b()})}function g(){function b(a){var b=H.create("body"),c=a.cloneContents();return b.appendChild(c),I.serializer.serialize(b,{format:"html"})}function c(c){var d=b(c),e=H.createRng();e.selectNode(a.getBody());var f=b(e);return d===f}a.onKeyDown.add(function(a,b){var e,f=b.keyCode;if(!d(b)&&(f==G||f==F)){if(e=a.selection.isCollapsed(),e&&!H.isEmpty(a.getBody()))return;if(tinymce.isIE&&!e)return;if(!e&&!c(a.selection.getRng()))return;a.setContent(""),a.selection.setCursorLocation(a.getBody(),0),a.nodeChanged()}})}function h(){a.onKeyDown.add(function(a,b){!d(b)&&65==b.keyCode&&E.metaKeyPressed(b)&&(b.preventDefault(),a.execCommand("SelectAll"))})}function i(){a.settings.content_editable||(H.bind(a.getDoc(),"focusin",function(a){I.setRng(I.getRng())}),H.bind(a.getDoc(),"mousedown",function(b){b.target==a.getDoc().documentElement&&(a.getWin().focus(),I.setRng(I.getRng()))}))}function j(){a.onKeyDown.add(function(a,b){if(!d(b)&&b.keyCode===F&&I.isCollapsed()&&0===I.getRng(!0).startOffset){var c=I.getNode(),e=c.previousSibling;e&&e.nodeName&&"hr"===e.nodeName.toLowerCase()&&(H.remove(e),tinymce.dom.Event.cancel(b))}})}function k(){Range.prototype.getClientRects||a.onMouseDown.add(function(a,b){if(!d(b)&&"HTML"===b.target.nodeName){var c=a.getBody();c.blur(),setTimeout(function(){c.focus()},0)}})}function l(){a.onClick.add(function(a,b){b=b.target,/^(IMG|HR)$/.test(b.nodeName)&&I.getSel().setBaseAndExtent(b,0,b,1),"A"==b.nodeName&&H.hasClass(b,"mceItemAnchor")&&I.select(b),a.nodeChanged()})}function m(){function b(){var b=H.getAttribs(I.getStart().cloneNode(!1));return function(){var c=I.getStart();c!==a.getBody()&&(H.setAttrib(c,"style",null),e(b,function(a){c.setAttributeNode(a.cloneNode(!0))}))}}function c(){return!I.isCollapsed()&&H.getParent(I.getStart(),H.isBlock)!=H.getParent(I.getEnd(),H.isBlock)}function f(a,b){return b.preventDefault(),!1}a.onKeyPress.add(function(a,e){var f;return d(e)||8!=e.keyCode&&46!=e.keyCode||!c()?void 0:(f=b(),a.getDoc().execCommand("delete",!1,null),f(),e.preventDefault(),!1)}),H.bind(a.getDoc(),"cut",function(e){var g;!d(e)&&c()&&(g=b(),a.onKeyUp.addToTop(f),setTimeout(function(){g(),a.onKeyUp.remove(f)},0))})}function n(){var b,c;H.bind(a.getDoc(),"selectionchange",function(){c&&(clearTimeout(c),c=0),c=window.setTimeout(function(){var c=I.getRng();b&&tinymce.dom.RangeUtils.compareRanges(c,b)||(a.nodeChanged(),b=c)},50)})}function o(){document.body.setAttribute("role","application")}function p(){a.onKeyDown.add(function(a,b){if(!d(b)&&b.keyCode===F&&I.isCollapsed()&&0===I.getRng(!0).startOffset){var c=I.getNode().previousSibling;if(c&&c.nodeName&&"table"===c.nodeName.toLowerCase())return tinymce.dom.Event.cancel(b)}})}function q(){c()>7||(b("RespectVisibilityInDesign",!0),a.contentStyles.push(".mceHideBrInPre pre br {display: none}"),H.addClass(a.getBody(),"mceHideBrInPre"),K.addNodeFilter("pre",function(a,b){for(var c,d,e,f,g=a.length;g--;)for(c=a[g].getAll("br"),d=c.length;d--;)e=c[d],f=e.prev,f&&3===f.type&&"\n"!=f.value.charAt(f.value-1)?f.value+="\n":e.parent.insert(new tinymce.html.Node("#text",3),e,!0).value="\n"}),L.addNodeFilter("pre",function(a,b){for(var c,d,e,f,g=a.length;g--;)for(c=a[g].getAll("br"),d=c.length;d--;)e=c[d],f=e.prev,f&&3==f.type&&(f.value=f.value.replace(/\r?\n$/,""))}))}function r(){H.bind(a.getBody(),"mouseup",function(a){var b,c=I.getNode();"IMG"==c.nodeName&&((b=H.getStyle(c,"width"))&&(H.setAttrib(c,"width",b.replace(/[^0-9%]+/g,"")),H.setStyle(c,"width","")),(b=H.getStyle(c,"height"))&&(H.setAttrib(c,"height",b.replace(/[^0-9%]+/g,"")),H.setStyle(c,"height","")))})}function s(){a.onKeyDown.add(function(a,b){var c,e,f,g,h,i,j;if(c=b.keyCode==G,!d(b)&&(c||b.keyCode==F)&&!E.modifierPressed(b)&&(e=I.getRng(),f=e.startContainer,g=e.startOffset,j=e.collapsed,3==f.nodeType&&f.nodeValue.length>0&&(0===g&&!j||j&&g===(c?0:1)))){if(i=f.previousSibling,i&&"IMG"==i.nodeName)return;nonEmptyElements=a.schema.getNonEmptyElements(),b.preventDefault(),h=H.create("br",{id:"__tmp"}),f.parentNode.insertBefore(h,f),a.getDoc().execCommand(c?"ForwardDelete":"Delete",!1,null),f=I.getRng().startContainer,i=f.previousSibling,i&&1==i.nodeType&&!H.isBlock(i)&&H.isEmpty(i)&&!nonEmptyElements[i.nodeName.toLowerCase()]&&H.remove(i),H.remove("__tmp")}})}function t(){a.onKeyDown.add(function(a,b){var c,e,f,g,h;if(!d(b)&&b.keyCode==E.BACKSPACE&&(c=I.getRng(),e=c.startContainer,f=c.startOffset,g=H.getRoot(),h=e,c.collapsed&&0===f)){for(;h&&h.parentNode&&h.parentNode.firstChild==h&&h.parentNode!=g;)h=h.parentNode;"BLOCKQUOTE"===h.tagName&&(a.formatter.toggle("blockquote",null,h),c=H.createRng(),c.setStart(e,0),c.setEnd(e,0),I.setRng(c))}})}function u(){function c(){a._refreshContentEditable(),b("StyleWithCSS",!1),b("enableInlineTableEditing",!1),J.object_resizing||b("enableObjectResizing",!1)}J.readonly||(a.onBeforeExecCommand.add(c),a.onMouseDown.add(c))}function v(){function b(a,b){e(H.select("a"),function(a){var b=a.parentNode,c=H.getRoot();if(b.lastChild===a){for(;b&&!H.isBlock(b);){if(b.parentNode.lastChild!==b||b===c)return;b=b.parentNode}H.add(b,"br",{"data-mce-bogus":1})}})}a.onExecCommand.add(function(a,c){"CreateLink"===c&&b(a)}),a.onSetContent.add(I.onSetContent.add(b))}function w(){J.forced_root_block&&a.onInit.add(function(){b("DefaultParagraphSeparator",J.forced_root_block)})}function x(){function b(b,c){b&&c.initial||a.execCommand("mceRepaint")}a.onUndo.add(b),a.onRedo.add(b),a.onSetContent.add(b)}function y(){a.onKeyDown.add(function(a,b){var c;d(b)||b.keyCode!=F||(c=a.getDoc().selection.createRange(),c&&c.item&&(b.preventDefault(),a.undoManager.beforeChange(),H.remove(c.item(0)),a.undoManager.add()))})}function z(){var b;c()>=10&&(b="",e("p div h1 h2 h3 h4 h5 h6".split(" "),function(a,c){b+=(c>0?",":"")+a+":empty"}),a.contentStyles.push(b+"{padding-right: 1px !important}"))}function A(){function c(a){var b,c;b=a.screenX-n,c=a.screenY-o,t=b*m[2]+p,u=c*m[3]+q,t=5>t?5:t,u=5>u?5:u,(E.modifierPressed(a)||"IMG"==k.nodeName&&m[2]*m[3]!==0)&&(t=Math.round(u/r),u=Math.round(t*r)),H.setStyles(l,{width:t,height:u}),m[2]<0&&l.clientWidth<=t&&H.setStyle(l,"left",i+(p-t)),m[3]<0&&l.clientHeight<=u&&H.setStyle(l,"top",j+(q-u))}function d(){function b(b,c){c&&(k.style[b]||!a.schema.isValid(k.nodeName.toLowerCase(),b)?H.setStyle(k,b,c):H.setAttrib(k,b,c))}b("width",t),b("height",u),H.unbind(w,"mousemove",c),H.unbind(w,"mouseup",d),v!=w&&(H.unbind(v,"mousemove",c),H.unbind(v,"mouseup",d)),H.remove(l),f(k)}function f(a){var b,f,h;g(),b=H.getPos(a),i=b.x,j=b.y,f=a.offsetWidth,h=a.offsetHeight,k!=a&&(k=a,t=u=0),e(s,function(a,b){var e;e=H.get("mceResizeHandle"+b),e?H.show(e):(e=H.add(w.documentElement,"div",{id:"mceResizeHandle"+b,"class":"mceResizeHandle",style:"cursor:"+b+"-resize; margin:0; padding:0"}),H.bind(e,"mousedown",function(b){b.preventDefault(),d(),n=b.screenX,o=b.screenY,p=k.clientWidth,q=k.clientHeight,r=q/p,m=a,l=k.cloneNode(!0),H.addClass(l,"mceClonedResizable"),H.setStyles(l,{left:i,top:j,margin:0}),w.documentElement.appendChild(l),H.bind(w,"mousemove",c),H.bind(w,"mouseup",d),v!=w&&(H.bind(v,"mousemove",c),H.bind(v,"mouseup",d))})),H.setStyles(e,{left:f*a[0]+i-e.offsetWidth/2,top:h*a[1]+j-e.offsetHeight/2})}),tinymce.isOpera||"IMG"!=k.nodeName||k.setAttribute("data-mce-selected","1")}function g(){k&&k.removeAttribute("data-mce-selected");for(var a in s)H.hide("mceResizeHandle"+a)}function h(){var a=H.getParent(I.getNode(),"table,img");e(H.select("img[data-mce-selected]"),function(a){a.removeAttribute("data-mce-selected")}),a?f(a):g()}var i,j,k,l,m,n,o,p,q,r,s,t,u,v=document,w=a.getDoc();J.object_resizing&&J.webkit_fake_resize!==!1&&(b("enableObjectResizing",!1),s={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},a.contentStyles.push(".mceResizeHandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}.mceResizeHandle:hover {background: #000}img[data-mce-selected] {outline: 1px solid black}img.mceClonedResizable, table.mceClonedResizable {position: absolute;outline: 1px dashed black;opacity: .5;z-index: 10000}"),a.onNodeChange.add(h),H.bind(w,"selectionchange",h),a.serializer.addAttributeFilter("data-mce-selected",function(a,b){for(var c=a.length;c--;)a[c].attr(b,null)}))}function B(){c()<9&&(K.addNodeFilter("noscript",function(a){for(var b,c,d=a.length;d--;)b=a[d],c=b.firstChild,c&&b.attr("data-mce-innertext",c.value)}),L.addNodeFilter("noscript",function(a){for(var b,c,d,e=a.length;e--;)b=a[e],c=a[e].firstChild,c?c.value=tinymce.html.Entities.decode(c.value):(d=b.attributes.map["data-mce-innertext"],d&&(b.attr("data-mce-innertext",null),c=new tinymce.html.Node("#text",3),c.value=d,c.raw=!0,b.append(c)))}))}function C(){a.contentStyles.push("body {min-height: 250px}"),a.onClick.add(function(b,c){"HTML"==c.target.nodeName&&(a.execCommand("SelectAll"),a.selection.collapse(!0),a.nodeChanged())})}function D(){a.inline||a.onKeyDown.add(function(a,b){document.activeElement==document.body&&a.getWin().focus()})}var E=tinymce.VK,F=E.BACKSPACE,G=E.DELETE,H=a.dom,I=a.selection,J=a.settings,K=a.parser,L=a.serializer,e=tinymce.each;p(),t(),g(),tinymce.isWebKit&&(s(),f(),i(),l(),w(),tinymce.isIDevice?(n(),D(),C()):(A(),h())),tinymce.isIE&&!tinymce.isIE11&&(j(),o(),q(),r(),y(),z(),B()),tinymce.isIE11&&C(),tinymce.isGecko&&!tinymce.isIE11&&(j(),k(),m(),u(),v(),x()),tinymce.isOpera&&A()},function(a){function b(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.textContent||b.innerText||a}function c(a,b){var c,d,f,g={};if(a){for(a=a.split(","),b=b||10,c=0;c<a.length;c+=2)d=String.fromCharCode(parseInt(a[c],b)),e[d]||(f="&"+a[c+1]+";",g[d]=f,g[f]=d);return g}}var d,e,f,g=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,h=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,i=/[<>&\"\']/g,j=/&(#x|#)?([\w]+);/g,k={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};e={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},f={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},d=c("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),a.html=a.html||{},a.html.Entities={encodeRaw:function(a,b){return a.replace(b?g:h,function(a){return e[a]||a})},encodeAllRaw:function(a){return(""+a).replace(i,function(a){return e[a]||a})},encodeNumeric:function(a,b){return a.replace(b?g:h,function(a){return a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":e[a]||"&#"+a.charCodeAt(0)+";"})},encodeNamed:function(a,b,c){return c=c||d,a.replace(b?g:h,function(a){return e[a]||c[a]||a})},getEncodeFunc:function(b,f){function i(a,b){return a.replace(b?g:h,function(a){return e[a]||f[a]||"&#"+a.charCodeAt(0)+";"||a})}function j(a,b){return k.encodeNamed(a,b,f)}var k=a.html.Entities;return f=c(f)||d,b=a.makeMap(b.replace(/\+/g,",")),b.named&&b.numeric?i:b.named?f?j:k.encodeNamed:b.numeric?k.encodeNumeric:k.encodeRaw},decode:function(a){return a.replace(j,function(a,c,e){return c?(e=parseInt(e,2===c.length?16:10),e>65535?(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e))):k[e]||String.fromCharCode(e)):f[a]||d[a]||b(a)})}}}(tinymce),tinymce.html.Styles=function(a,b){function c(a,b,c,d){function e(a){return a=parseInt(a).toString(16),a.length>1?a:"0"+a}return"#"+e(b)+e(c)+e(d)}var d,e,f,g=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,h=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,i=/\s*([^:]+):\s*([^;]+);?/g,j=/\s+$/,k={};for(a=a||{},f="\\\" \\' \\; \\: ; : \ufeff".split(" "),e=0;e<f.length;e++)k[f[e]]="\ufeff"+e,k["\ufeff"+e]=f[e];return{toHex:function(a){return a.replace(g,c)},parse:function(b){function d(a,b){var c,d,e,f;"none"===s["border-image"]&&delete s["border-image"],c=s[a+"-top"+b],c&&(d=s[a+"-right"+b],c==d&&(e=s[a+"-bottom"+b],d==e&&(f=s[a+"-left"+b],e==f&&(s[a+b]=f,delete s[a+"-top"+b],delete s[a+"-right"+b],delete s[a+"-bottom"+b],delete s[a+"-left"+b]))))}function e(a){var b,c=s[a];if(c&&!(c.indexOf(" ")<0)){for(c=c.split(" "),b=c.length;b--;)if(c[b]!==c[0])return!1;return s[a]=c[0],!0}}function f(a,b,c,d){e(b)&&e(c)&&e(d)&&(s[a]=s[b]+" "+s[c]+" "+s[d],delete s[b],delete s[c],delete s[d])}function l(a){return r=!0,k[a]}function m(a,b){return r&&(a=a.replace(/\uFEFF[0-9]/g,function(a){return k[a]})),b||(a=a.replace(/\\([\'\";:])/g,"$1")),a}function n(a,b,c,d,e,f){return(e=e||f)?(e=m(e),"'"+e.replace(/\'/g,"\\'")+"'"):(b=m(b||c||d),t&&(b=t.call(u,b,"style")),"url('"+b.replace(/\'/g,"\\'")+"')")}var o,p,q,r,s={},t=a.url_converter,u=a.url_converter_scope||this;if(b){for(b=b.replace(/\\[\"\';:\uFEFF]/g,l).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(a){return a.replace(/[;:]/g,l)});o=i.exec(b);)p=o[1].replace(j,"").toLowerCase(),q=o[2].replace(j,""),p&&q.length>0&&("font-weight"===p&&"700"===q?q="bold":"color"!==p&&"background-color"!==p||(q=q.toLowerCase()),q=q.replace(g,c),q=q.replace(h,n),s[p]=r?m(q,!0):q),i.lastIndex=o.index+o[0].length;d("border",""),d("border","-width"),d("border","-color"),d("border","-style"),d("padding",""),d("margin",""),f("border","border-width","border-style","border-color"),"medium none"===s.border&&delete s.border}return s},serialize:function(a,c){function e(c){var e,f,g,i;if(e=b.styles[c])for(f=0,g=e.length;g>f;f++)c=e[f],i=a[c],i!==d&&i.length>0&&(h+=(h.length>0?" ":"")+c+": "+i+";")}var f,g,h="";if(c&&b&&b.styles)e("*"),e(c);else for(f in a)g=a[f],g!==d&&g.length>0&&(h+=(h.length>0?" ":"")+f+": "+g+";");return h}}},function(a){function b(a,b){return a.split(b||",")}function c(a,c){function d(b){return b.replace(/[A-Z]+/g,function(b){return d(a[b])})}var e,f={};for(e in a)a.hasOwnProperty(e)&&(a[e]=d(a[e]));return d(c).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(a,c,d,e){d=b(d,"|"),f[c]={attributes:g(d),attributesOrder:d,children:g(e,"|",{"#comment":{}})}}),f}function d(){var a=f.html5;return a||(a=f.html5=c({A:"id|accesskey|class|dir|draggable|item|hidden|itemprop|role|spellcheck|style|subject|title|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"#|a|abbr|area|audio|b|bdo|br|button|canvas|cite|code|command|datalist|del|dfn|em|embed|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|meta|meter|noscript|object|output|progress|q|ruby|samp|script|select|small|span|strong|sub|sup|svg|textarea|time|var|video|wbr",C:"#|a|abbr|area|address|article|aside|audio|b|bdo|blockquote|br|button|canvas|cite|code|command|datalist|del|details|dfn|dialog|div|dl|em|embed|fieldset|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|menu|meta|meter|nav|noscript|ol|object|output|p|pre|progress|q|ruby|samp|script|section|select|small|span|strong|style|sub|sup|svg|table|textarea|time|ul|var|video"},"html[A|manifest][body|head]head[A][base|command|link|meta|noscript|script|style|title]title[A][#]base[A|href|target][]link[A|href|rel|media|type|sizes][]meta[A|http-equiv|name|content|charset][]style[A|type|media|scoped][#]script[A|charset|type|src|defer|async][#]noscript[A][C]body[A][C]section[A][C]nav[A][C]article[A][C]aside[A][C]h1[A][B]h2[A][B]h3[A][B]h4[A][B]h5[A][B]h6[A][B]hgroup[A][h1|h2|h3|h4|h5|h6]header[A][C]footer[A][C]address[A][C]p[A][B]br[A][]pre[A][B]dialog[A][dd|dt]blockquote[A|cite][C]ol[A|start|reversed][li]ul[A][li]li[A|value][C]dl[A][dd|dt]dt[A][B]dd[A][C]a[A|href|target|ping|rel|media|type][B]em[A][B]strong[A][B]small[A][B]cite[A][B]q[A|cite][B]dfn[A][B]abbr[A][B]code[A][B]var[A][B]samp[A][B]kbd[A][B]sub[A][B]sup[A][B]i[A][B]b[A][B]mark[A][B]progress[A|value|max][B]meter[A|value|min|max|low|high|optimum][B]time[A|datetime][B]ruby[A][B|rt|rp]rt[A][B]rp[A][B]bdo[A][B]span[A][B]ins[A|cite|datetime][B]del[A|cite|datetime][B]figure[A][C|legend|figcaption]figcaption[A][C]img[A|alt|src|height|width|usemap|ismap][]iframe[A|name|src|height|width|sandbox|seamless][]embed[A|src|height|width|type][]object[A|data|type|height|width|usemap|name|form|classid][param]param[A|name|value][]details[A|open][C|legend]command[A|type|label|icon|disabled|checked|radiogroup][]menu[A|type|label][C|li]legend[A][C|B]div[A][C]source[A|src|type|media][]audio[A|src|autobuffer|autoplay|loop|controls][source]video[A|src|autobuffer|autoplay|loop|controls|width|height|poster][source]hr[A][]form[A|accept-charset|action|autocomplete|enctype|method|name|novalidate|target][C]fieldset[A|disabled|form|name][C|legend]label[A|form|for][B]input[A|type|accept|alt|autocomplete|autofocus|checked|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|height|list|max|maxlength|min|multiple|pattern|placeholder|readonly|required|size|src|step|width|files|value|name][]button[A|autofocus|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|name|value|type][B]select[A|autofocus|disabled|form|multiple|name|size][option|optgroup]datalist[A][B|option]optgroup[A|disabled|label][option]option[A|disabled|selected|label|value][]textarea[A|autofocus|disabled|form|maxlength|name|placeholder|readonly|required|rows|cols|wrap][]keygen[A|autofocus|challenge|disabled|form|keytype|name][]output[A|for|form|name][B]canvas[A|width|height][]map[A|name][B|C]area[A|shape|coords|href|alt|target|media|rel|ping|type][]mathml[A][]svg[A][]table[A|border][caption|colgroup|thead|tfoot|tbody|tr]caption[A][C]colgroup[A|span][col]col[A|span][]thead[A][tr]tfoot[A][tr]tbody[A][tr]tr[A][th|td]th[A|headers|rowspan|colspan|scope][B]td[A|headers|rowspan|colspan][C]wbr[A][]")),
a}function e(){var a=f.html4;return a||(a=f.html4=c({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]")),a}var f={},g=a.makeMap,h=a.each;a.html.Schema=function(c){function i(b,d,e){var h=c[b];return h?h=g(h,",",g(h.toUpperCase()," ")):(h=f[b],h||(h=g(d," ",g(d.toUpperCase()," ")),h=a.extend(h,e),f[b]=h)),h}function j(a){return new RegExp("^"+a.replace(/([?+*])/g,".$1")+"$")}function k(c){var d,e,f,h,i,k,l,m,n,o,p,q,r,s,t,u,v,w,x,z=/^([#+\-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,B=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,C=/[*?+]/;if(c)for(c=b(c),y["@"]&&(u=y["@"].attributes,v=y["@"].attributesOrder),d=0,e=c.length;e>d;d++)if(i=z.exec(c[d])){if(s=i[1],n=i[2],t=i[3],m=i[4],q={},r=[],k={attributes:q,attributesOrder:r},"#"===s&&(k.paddEmpty=!0),"-"===s&&(k.removeEmpty=!0),u){for(w in u)q[w]=u[w];r.push.apply(r,v)}if(m)for(m=b(m,"|"),f=0,h=m.length;h>f;f++)if(i=B.exec(m[f])){if(l={},p=i[1],o=i[2].replace(/::/g,":"),s=i[3],x=i[4],"!"===p&&(k.attributesRequired=k.attributesRequired||[],k.attributesRequired.push(o),l.required=!0),"-"===p){delete q[o],r.splice(a.inArray(r,o),1);continue}s&&("="===s&&(k.attributesDefault=k.attributesDefault||[],k.attributesDefault.push({name:o,value:x}),l.defaultValue=x),":"===s&&(k.attributesForced=k.attributesForced||[],k.attributesForced.push({name:o,value:x}),l.forcedValue=x),"<"===s&&(l.validValues=g(x,"?"))),C.test(o)?(k.attributePatterns=k.attributePatterns||[],l.pattern=j(o),k.attributePatterns.push(l)):(q[o]||r.push(o),q[o]=l)}u||"@"!=n||(u=q,v=r),t&&(k.outputName=n,y[t]=k),C.test(n)?(k.pattern=j(n),A.push(k)):y[n]=k}}function l(a){y={},A=[],k(a),h(q,function(a,b){z[b]=a.children})}function m(a){var c=/^(~)?(.+)$/;a&&h(b(a),function(a){var b=c.exec(a),d="~"===b[1],e=d?"span":"div",f=b[2];z[f]=z[e],B[f]=e,d||(v[f.toUpperCase()]={},v[f]={}),y[f]||(y[f]=y[e]),h(z,function(a,b){a[e]&&(a[f]=a[e])})})}function n(a){var c=/^([+\-]?)(\w+)\[([^\]]+)\]$/;a&&h(b(a),function(a){var d,e,f=c.exec(a);f&&(e=f[1],d=e?z[f[2]]:z[f[2]]={"#comment":{}},d=z[f[2]],h(b(f[3],"|"),function(a){"-"===e?delete d[a]:d[a]={}}))})}function o(a){var b,c=y[a];if(c)return c;for(b=A.length;b--;)if(c=A[b],c.pattern.test(a))return c}var p,q,r,s,t,u,v,w,x=this,y={},z={},A=[],B={};c=c||{},q="html5"==c.schema?d():e(),c.verify_html===!1&&(c.valid_elements="*[*]"),c.valid_styles&&(p={},h(c.valid_styles,function(b,c){p[c]=a.explode(b)})),r=i("whitespace_elements","pre script noscript style textarea"),s=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),t=i("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr"),u=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),w=i("non_empty_elements","td th iframe video audio object script",t),textBlockElementsMap=i("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),v=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex samp option datalist select optgroup",textBlockElementsMap),c.valid_elements?l(c.valid_elements):(h(q,function(a,b){y[b]={attributes:a.attributes,attributesOrder:a.attributesOrder},z[b]=a.children}),"html5"!=c.schema&&h(b("strong/b,em/i"),function(a){a=b(a,"/"),y[a[1]].outputName=a[0]}),y.img.attributesDefault=[{name:"alt",value:""}],h(b("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr,strong,em,b,i"),function(a){y[a]&&(y[a].removeEmpty=!0)}),h(b("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(a){y[a].paddEmpty=!0})),m(c.custom_elements),n(c.valid_children),k(c.extended_valid_elements),n("+ol[ul|ol],+ul[ul|ol]"),c.invalid_elements&&a.each(a.explode(c.invalid_elements),function(a){y[a]&&delete y[a]}),o("span")||k("span[!data-mce-type|*]"),x.children=z,x.styles=p,x.getBoolAttrs=function(){return u},x.getBlockElements=function(){return v},x.getTextBlockElements=function(){return textBlockElementsMap},x.getShortEndedElements=function(){return t},x.getSelfClosingElements=function(){return s},x.getNonEmptyElements=function(){return w},x.getWhiteSpaceElements=function(){return r},x.isValidChild=function(a,b){var c=z[a];return!(!c||!c[b])},x.isValid=function(a,b){var c,d,e=o(a);if(e){if(!b)return!0;if(e.attributes[b])return!0;if(c=e.attributePatterns)for(d=c.length;d--;)if(c[d].pattern.test(a))return!0}return!1},x.getElementRule=o,x.getCustomElements=function(){return B},x.addValidElements=k,x.setValidElements=l,x.addCustomElements=m,x.addValidChildren=n,x.elements=y}}(tinymce),function(a){a.html.SaxParser=function(b,c){var d=this,e=function(){};b=b||{},d.schema=c=c||new a.html.Schema,b.fix_self_closing!==!1&&(b.fix_self_closing=!0),a.each("comment cdata text start end pi doctype".split(" "),function(a){a&&(d[a]=b[a]||e)}),d.parse=function(d){function e(a){var b,c;for(b=M.length;b--&&M[b].name!==a;);if(b>=0){for(c=M.length-1;c>=b;c--)a=M[c],a.valid&&K.end(a.name);M.length=b}}function f(a,b,c,d,e){var f,g;if(b=b.toLowerCase(),c=b in q?b:O(c||d||e||""),s&&!n&&0!==b.indexOf("data-")){if(f=y[b],!f&&z){for(g=z.length;g--&&(f=z[g],!f.pattern.test(b)););-1===g&&(f=null)}if(!f)return;if(f.validValues&&!(c in f.validValues))return}j.map[b]=c,j.push({name:b,value:c})}var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K=this,L=0,M=[],N=0,O=a.html.Entities.decode;for(E=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),F=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,G={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi},p=c.getShortEndedElements(),D=b.self_closing_elements||c.getSelfClosingElements(),q=c.getBoolAttrs(),s=b.validate,o=b.remove_internals,I=b.fix_self_closing,J=a.isIE,x=/^:/;g=E.exec(d);){if(L<g.index&&K.text(O(d.substr(L,g.index-L))),h=g[6])h=h.toLowerCase(),J&&x.test(h)&&(h=h.substr(1)),e(h);else if(h=g[7]){if(h=h.toLowerCase(),J&&x.test(h)&&(h=h.substr(1)),r=h in p,I&&D[h]&&M.length>0&&M[M.length-1].name===h&&e(h),!s||(t=c.getElementRule(h))){if(u=!0,s&&(y=t.attributes,z=t.attributePatterns),(w=g[8])?(n=-1!==w.indexOf("data-mce-type"),n&&o&&(u=!1),j=[],j.map={},w.replace(F,f)):(j=[],j.map={}),s&&!n){if(A=t.attributesRequired,B=t.attributesDefault,C=t.attributesForced)for(k=C.length;k--;)v=C[k],m=v.name,H=v.value,"{$uid}"===H&&(H="mce_"+N++),j.map[m]=H,j.push({name:m,value:H});if(B)for(k=B.length;k--;)v=B[k],m=v.name,m in j.map||(H=v.value,"{$uid}"===H&&(H="mce_"+N++),j.map[m]=H,j.push({name:m,value:H}));if(A){for(k=A.length;k--&&!(A[k]in j.map););-1===k&&(u=!1)}j.map["data-mce-bogus"]&&(u=!1)}u&&K.start(h,j,r)}else u=!1;if(i=G[h]){i.lastIndex=L=g.index+g[0].length,(g=i.exec(d))?(u&&(l=d.substr(L,g.index-L)),L=g.index+g[0].length):(l=d.substr(L),L=d.length),u&&l.length>0&&K.text(l,!0),u&&K.end(h),E.lastIndex=L;continue}r||(w&&w.indexOf("/")==w.length-1?u&&K.end(h):M.push({name:h,valid:u}))}else(h=g[1])?K.comment(h):(h=g[2])?K.cdata(h):(h=g[3])?K.doctype(h):(h=g[4])&&K.pi(h,g[5]);L=g.index+g[0].length}for(L<d.length&&K.text(O(d.substr(L))),k=M.length-1;k>=0;k--)h=M[k],h.valid&&K.end(h.name)}}}(tinymce),function(a){function b(a,b,c){var d,e,f=c?"lastChild":"firstChild",g=c?"prev":"next";if(a[f])return a[f];if(a!==b){if(d=a[g])return d;for(e=a.parent;e&&e!==b;e=e.parent)if(d=e[g])return d}}function c(a,b){this.name=a,this.type=b,1===b&&(this.attributes=[],this.attributes.map={})}var d=/^[ \t\r\n]*$/,e={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};a.extend(c.prototype,{replace:function(a){var b=this;return a.parent&&a.remove(),b.insert(a,b),b.remove(),b},attr:function(a,b){var c,d,e,f=this;if("string"!=typeof a){for(d in a)f.attr(d,a[d]);return f}if(c=f.attributes){if(b!==e){if(null===b){if(a in c.map)for(delete c.map[a],d=c.length;d--;)if(c[d].name===a)return c=c.splice(d,1),f;return f}if(a in c.map){for(d=c.length;d--;)if(c[d].name===a){c[d].value=b;break}}else c.push({name:a,value:b});return c.map[a]=b,f}return c.map[a]}},clone:function(){var a,b,d,e,f,g=this,h=new c(g.name,g.type);if(d=g.attributes){for(f=[],f.map={},a=0,b=d.length;b>a;a++)e=d[a],"id"!==e.name&&(f[f.length]={name:e.name,value:e.value},f.map[e.name]=e.value);h.attributes=f}return h.value=g.value,h.shortEnded=g.shortEnded,h},wrap:function(a){var b=this;return b.parent.insert(a,b),a.append(b),b},unwrap:function(){var a,b,c=this;for(a=c.firstChild;a;)b=a.next,c.insert(a,c,!0),a=b;c.remove()},remove:function(){var a=this,b=a.parent,c=a.next,d=a.prev;return b&&(b.firstChild===a?(b.firstChild=c,c&&(c.prev=null)):d.next=c,b.lastChild===a?(b.lastChild=d,d&&(d.next=null)):c.prev=d,a.parent=a.next=a.prev=null),a},append:function(a){var b,c=this;return a.parent&&a.remove(),b=c.lastChild,b?(b.next=a,a.prev=b,c.lastChild=a):c.lastChild=c.firstChild=a,a.parent=c,a},insert:function(a,b,c){var d;return a.parent&&a.remove(),d=b.parent||this,c?(b===d.firstChild?d.firstChild=a:b.prev.next=a,a.prev=b.prev,a.next=b,b.prev=a):(b===d.lastChild?d.lastChild=a:b.next.prev=a,a.next=b.next,a.prev=b,b.next=a),a.parent=d,a},getAll:function(a){var c,d=this,e=[];for(c=d.firstChild;c;c=b(c,d))c.name===a&&e.push(c);return e},empty:function(){var a,c,d,e=this;if(e.firstChild){for(a=[],d=e.firstChild;d;d=b(d,e))a.push(d);for(c=a.length;c--;)d=a[c],d.parent=d.firstChild=d.lastChild=d.next=d.prev=null}return e.firstChild=e.lastChild=null,e},isEmpty:function(a){var c,e,f=this,g=f.firstChild;if(g)do{if(1===g.type){if(g.attributes.map["data-mce-bogus"])continue;if(a[g.name])return!1;for(c=g.attributes.length;c--;)if(e=g.attributes[c].name,"name"===e||0===e.indexOf("data-mce-"))return!1}if(8===g.type)return!1;if(3===g.type&&!d.test(g.value))return!1}while(g=b(g,f));return!0},walk:function(a){return b(this,null,a)}}),a.extend(c,{create:function(a,b){var d,f;if(d=new c(a,e[a]||1),b)for(f in b)d.attr(f,b[f]);return d}}),a.html.Node=c}(tinymce),function(a){var b=a.html.Node;a.html.DomParser=function(c,d){function e(c){var e,g,h,i,j,k,l,m,n,o,p,q,r,s;for(p=a.makeMap("tr,td,th,tbody,thead,tfoot,table"),o=d.getNonEmptyElements(),q=d.getTextBlockElements(),e=0;e<c.length;e++)if(g=c[e],g.parent&&!g.fixed)if(q[g.name]&&"li"==g.parent.name){for(r=g.next;r&&q[r.name];)r.name="li",r.fixed=!0,g.parent.insert(r,g.parent),r=r.next;g.unwrap(g)}else{for(i=[g],h=g.parent;h&&!d.isValidChild(h.name,g.name)&&!p[h.name];h=h.parent)i.push(h);if(h&&i.length>1){for(i.reverse(),j=k=f.filterNode(i[0].clone()),n=0;n<i.length-1;n++){for(d.isValidChild(k.name,i[n].name)?(l=f.filterNode(i[n].clone()),k.append(l)):l=k,m=i[n].firstChild;m&&m!=i[n+1];)s=m.next,l.append(m),m=s;k=l}j.isEmpty(o)?h.insert(g,i[0],!0):(h.insert(j,i[0],!0),h.insert(g,j)),h=i[0],(h.isEmpty(o)||h.firstChild===h.lastChild&&"br"===h.firstChild.name)&&h.empty().remove()}else if(g.parent){if("li"===g.name){if(r=g.prev,r&&("ul"===r.name||"ul"===r.name)){r.append(g);continue}if(r=g.next,r&&("ul"===r.name||"ul"===r.name)){r.insert(g,r.firstChild,!0);continue}g.wrap(f.filterNode(new b("ul",1)));continue}d.isValidChild(g.parent.name,"div")&&d.isValidChild("div",g.name)?g.wrap(f.filterNode(new b("div",1))):"style"===g.name||"script"===g.name?g.empty().remove():g.unwrap()}}}var f=this,g={},h=[],i={},j={};c=c||{},c.validate="validate"in c?c.validate:!0,c.root_name=c.root_name||"body",f.schema=d=d||new a.html.Schema,f.filterNode=function(a){var b,c,d;c in g&&(d=i[c],d?d.push(a):i[c]=[a]),b=h.length;for(;b--;)c=h[b].name,c in a.attributes.map&&(d=j[c],d?d.push(a):j[c]=[a]);return a},f.addNodeFilter=function(b,c){a.each(a.explode(b),function(a){var b=g[a];b||(g[a]=b=[]),b.push(c)})},f.addAttributeFilter=function(b,c){a.each(a.explode(b),function(a){var b;for(b=0;b<h.length;b++)if(h[b].name===a)return void h[b].callbacks.push(c);h.push({name:a,callbacks:[c]})})},f.parse=function(f,k){function l(){for(var a,b,c=q.firstChild;c;)a=c.next,3==c.type||1==c.type&&"p"!==c.name&&!A[c.name]&&!c.attr("data-mce-type")?b?b.append(c):(b=m(J,1),q.insert(b,c),b.append(c)):b=null,c=a}function m(a,c){var d,e=new b(a,c);return a in g&&(d=i[a],d?d.push(e):i[a]=[e]),e}function n(a){var b,c,d;for(b=a.prev;b&&3===b.type;)c=b.value.replace(D,""),c.length>0?(b.value=c,b=b.prev):(d=b.prev,b.remove(),b=d)}function o(a){var b,c={};for(b in a)"li"!==b&&"p"!=b&&(c[b]=a[b]);return c}var p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K=[];if(k=k||{},i={},j={},A=a.extend(a.makeMap("script,style,head,html,body,title,meta,param"),d.getBlockElements()),I=d.getNonEmptyElements(),H=d.children,z=c.validate,J="forced_root_block"in k?k.forced_root_block:c.forced_root_block,G=d.getWhiteSpaceElements(),B=/^[ \t\r\n]+/,D=/[ \t\r\n]+$/,E=/[ \t\r\n]+/g,F=/^[ \t\r\n]+$/,p=new a.html.SaxParser({validate:z,self_closing_elements:o(d.getSelfClosingElements()),cdata:function(a){r.append(m("#cdata",4)).value=a},text:function(a,b){var c;C||(a=a.replace(E," "),r.lastChild&&A[r.lastChild.name]&&(a=a.replace(B,""))),0!==a.length&&(c=m("#text",3),c.raw=!!b,r.append(c).value=a)},comment:function(a){r.append(m("#comment",8)).value=a},pi:function(a,b){r.append(m(a,7)).value=b,n(r)},doctype:function(a){var b;b=r.append(m("#doctype",10)),b.value=a,n(r)},start:function(a,b,c){var e,f,g,i,k;if(g=z?d.getElementRule(a):{}){for(e=m(g.outputName||a,1),e.attributes=b,e.shortEnded=c,r.append(e),k=H[r.name],k&&H[e.name]&&!k[e.name]&&K.push(e),f=h.length;f--;)i=h[f].name,i in b.map&&(x=j[i],x?x.push(e):j[i]=[e]);A[a]&&n(e),c||(r=e),!C&&G[a]&&(C=!0)}},end:function(a){var c,e,f,g,h;if(e=z?d.getElementRule(a):{}){if(A[a]&&!C){if(c=r.firstChild,c&&3===c.type)for(f=c.value.replace(B,""),f.length>0?(c.value=f,c=c.next):(g=c.next,c.remove(),c=g);c&&3===c.type;)f=c.value,g=c.next,(0===f.length||F.test(f))&&(c.remove(),c=g),c=g;if(c=r.lastChild,c&&3===c.type)for(f=c.value.replace(D,""),f.length>0?(c.value=f,c=c.prev):(g=c.prev,c.remove(),c=g);c&&3===c.type;)f=c.value,g=c.prev,(0===f.length||F.test(f))&&(c.remove(),c=g),c=g}if(C&&G[a]&&(C=!1),(e.removeEmpty||e.paddEmpty)&&r.isEmpty(I))if(e.paddEmpty)r.empty().append(new b("#text","3")).value=" ";else if(!r.attributes.map.name&&!r.attributes.map.id)return h=r.parent,r.empty().remove(),void(r=h);r=r.parent}}},d),q=r=new b(k.context||c.root_name,11),p.parse(f),z&&K.length&&(k.context?k.invalid=!0:e(K)),J&&"body"==q.name&&l(),!k.invalid){for(y in i){for(x=g[y],s=i[y],v=s.length;v--;)s[v].parent||s.splice(v,1);for(t=0,u=x.length;u>t;t++)x[t](s,y,k)}for(t=0,u=h.length;u>t;t++)if(x=h[t],x.name in j){for(s=j[x.name],v=s.length;v--;)s[v].parent||s.splice(v,1);for(v=0,w=x.callbacks.length;w>v;v++)x.callbacks[v](s,x.name,k)}}return q},c.remove_trailing_brs&&f.addNodeFilter("br",function(b,c){var e,f,g,h,i,j,k=b.length,l=a.extend({},d.getBlockElements()),m=d.getNonEmptyElements();for(l.body=1,e=0;k>e;e++)if(f=b[e],g=f.parent,l[f.parent.name]&&f===g.lastChild){for(i=f.prev;i;){if(j=i.name,"span"!==j||"bookmark"!==i.attr("data-mce-type")){if("br"!==j)break;if("br"===j){f=null;break}}i=i.prev}f&&(f.remove(),g.isEmpty(m)&&(elementRule=d.getElementRule(g.name),elementRule&&(elementRule.removeEmpty?g.remove():elementRule.paddEmpty&&(g.empty().append(new a.html.Node("#text",3)).value=" "))))}else{for(h=f;g.firstChild===h&&g.lastChild===h&&(h=g,!l[g.name]);)g=g.parent;h===g&&(textNode=new a.html.Node("#text",3),textNode.value=" ",f.replace(textNode))}}),c.allow_html_in_named_anchor||f.addAttributeFilter("id,name",function(a,b){for(var c,d,e,f,g=a.length;g--;)if(f=a[g],"a"===f.name&&f.firstChild&&!f.attr("href")){e=f.parent,c=f.lastChild;do d=c.prev,e.insert(c,f),c=d;while(c)}})}}(tinymce),tinymce.html.Writer=function(a){var b,c,d,e,f,g=[];return a=a||{},b=a.indent,c=tinymce.makeMap(a.indent_before||""),d=tinymce.makeMap(a.indent_after||""),e=tinymce.html.Entities.getEncodeFunc(a.entity_encoding||"raw",a.entities),f="html"==a.element_format,{start:function(a,h,i){var j,k,l,m;if(b&&c[a]&&g.length>0&&(m=g[g.length-1],m.length>0&&"\n"!==m&&g.push("\n")),g.push("<",a),h)for(j=0,k=h.length;k>j;j++)l=h[j],g.push(" ",l.name,'="',e(l.value,!0),'"');!i||f?g[g.length]=">":g[g.length]=" />",i&&b&&d[a]&&g.length>0&&(m=g[g.length-1],m.length>0&&"\n"!==m&&g.push("\n"))},end:function(a){var c;g.push("</",a,">"),b&&d[a]&&g.length>0&&(c=g[g.length-1],c.length>0&&"\n"!==c&&g.push("\n"))},text:function(a,b){a.length>0&&(g[g.length]=b?a:e(a))},cdata:function(a){g.push("<![CDATA[",a,"]]>")},comment:function(a){g.push("<!--",a,"-->")},pi:function(a,c){c?g.push("<?",a," ",c,"?>"):g.push("<?",a,"?>"),b&&g.push("\n")},doctype:function(a){g.push("<!DOCTYPE",a,">",b?"\n":"")},reset:function(){g.length=0},getContent:function(){return g.join("").replace(/\n$/,"")}}},function(a){a.html.Serializer=function(b,c){var d=this,e=new a.html.Writer(b);b=b||{},b.validate="validate"in b?b.validate:!0,d.schema=c=c||new a.html.Schema,d.writer=e,d.serialize=function(a){function d(a){var b,h,i,j,k,l,m,n,o,p=f[a.type];if(p)p(a);else{if(b=a.name,h=a.shortEnded,i=a.attributes,g&&i&&i.length>1){for(l=[],l.map={},o=c.getElementRule(a.name),m=0,n=o.attributesOrder.length;n>m;m++)j=o.attributesOrder[m],j in i.map&&(k=i.map[j],l.map[j]=k,l.push({name:j,value:k}));for(m=0,n=i.length;n>m;m++)j=i[m].name,j in l.map||(k=i.map[j],l.map[j]=k,l.push({name:j,value:k}));i=l}if(e.start(a.name,i,h),!h){if(a=a.firstChild)do d(a);while(a=a.next);e.end(b)}}}var f,g;return g=b.validate,f={3:function(a,b){e.text(a.value,a.raw)},8:function(a){e.comment(a.value)},7:function(a){e.pi(a.name,a.value)},10:function(a){e.doctype(a.value)},4:function(a){e.cdata(a.value)},11:function(a){if(a=a.firstChild)do d(a);while(a=a.next)}},e.reset(),1!=a.type||b.inner?f[11](a):d(a),e.getContent()}}}(tinymce),tinymce.dom={},function(a,b){function c(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c)}function d(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d||!1):a.detachEvent&&a.detachEvent("on"+b,c)}function e(a,b){function c(){return!1}function d(){return!0}var e,f=b||{};for(e in a)"layerX"!==e&&"layerY"!==e&&(f[e]=a[e]);return f.target||(f.target=f.srcElement||document),f.preventDefault=function(){f.isDefaultPrevented=d,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},f.stopPropagation=function(){f.isPropagationStopped=d,a&&(a.stopPropagation?a.stopPropagation():a.cancelBubble=!0)},f.stopImmediatePropagation=function(){f.isImmediatePropagationStopped=d,f.stopPropagation()},f.isDefaultPrevented||(f.isDefaultPrevented=c,f.isPropagationStopped=c,f.isImmediatePropagationStopped=c),f}function f(a,b,e){function f(){e.domLoaded||(e.domLoaded=!0,b(i))}var g=a.document,i={type:"ready"};return"complete"==g.readyState?void f():(h?c(a,"DOMContentLoaded",f):(c(g,"readystatechange",function(){"complete"===g.readyState&&(d(g,"readystatechange",arguments.callee),f())}),g.documentElement.doScroll&&a===a.top&&!function(){try{g.documentElement.doScroll("left")}catch(a){return void setTimeout(arguments.callee,0)}f()}()),void c(a,"load",f))}function g(a){function g(a,b){var c,d,e,f;if(c=n[b][a.type])for(d=0,e=c.length;e>d;d++)if(f=c[d],f&&f.func.call(f.scope,a)===!1&&a.preventDefault(),a.isImmediatePropagationStopped())return}var i,j,k,l,m=this,n={};k="onmouseenter"in document.documentElement,j="onfocusin"in document.documentElement,l={mouseenter:"mouseover",mouseleave:"mouseout"},i=1,m.domLoaded=!1,m.events=n,m.bind=function(d,o,p,q){function r(a){g(e(a||z.event),s)}var s,t,u,v,w,x,y,z=window;if(d&&3!==d.nodeType&&8!==d.nodeType){for(d[b]?(s=d[b],n[s]||(n[s]={})):(s=i++,d[b]=s,n[s]={}),q=q||d,o=o.split(" "),u=o.length;u--;)v=o[u],x=r,w=y=!1,"DOMContentLoaded"===v&&(v="ready"),!m.domLoaded&&"complete"!=d.readyState||"ready"!==v?(k||(w=l[v],w&&(x=function(a){var b,c;if(b=a.currentTarget,c=a.relatedTarget,c&&b.contains)c=b.contains(c);else for(;c&&c!==b;)c=c.parentNode;c||(a=e(a||z.event),a.type="mouseout"===a.type?"mouseleave":"mouseenter",a.target=b,g(a,s))})),j||"focusin"!==v&&"focusout"!==v||(y=!0,w="focusin"===v?"focus":"blur",x=function(a){a=e(a||z.event),a.type="focus"===a.type?"focusin":"focusout",g(a,s)}),t=n[s][v],t?t.push({func:p,scope:q}):(n[s][v]=t=[{func:p,scope:q}],t.fakeName=w,t.capture=y,t.nativeHandler=x,h||(t.proxyHandler=a(s)),"ready"===v?f(d,x,m):c(d,w||v,h?x:t.proxyHandler,y))):(m.domLoaded=!0,p.call(q,e({type:v})));return d=t=0,p}},m.unbind=function(a,c,e){var f,g,i,j,k,l;if(!a||3===a.nodeType||8===a.nodeType)return m;if(f=a[b]){if(l=n[f],c){for(c=c.split(" "),i=c.length;i--;)if(k=c[i],g=l[k]){if(e)for(j=g.length;j--;)g[j].func===e&&g.splice(j,1);e&&0!==g.length||(delete l[k],d(a,g.fakeName||k,h?g.nativeHandler:g.proxyHandler,g.capture))}}else{for(k in l)g=l[k],d(a,g.fakeName||k,h?g.nativeHandler:g.proxyHandler,g.capture);l={}}for(k in l)return m;delete n[f];try{delete a[b]}catch(o){a[b]=null}}return m},m.fire=function(a,c,d){var f,h;if(!a||3===a.nodeType||8===a.nodeType)return m;h=e(null,d),h.type=c;do f=a[b],f&&g(h,f),a=a.parentNode||a.ownerDocument||a.defaultView||a.parentWindow;while(a&&!h.isPropagationStopped());return m},m.clean=function(a){var c,d,e=m.unbind;if(!a||3===a.nodeType||8===a.nodeType)return m;if(a[b]&&e(a),a.getElementsByTagName||(a=a.document),a&&a.getElementsByTagName)for(e(a),d=a.getElementsByTagName("*"),c=d.length;c--;)a=d[c],a[b]&&e(a);return m},m.callNativeHandler=function(a,b){n&&n[a][b.type].nativeHandler(b)},m.destory=function(){n={}},m.add=function(a,b,c,d){"string"==typeof a&&(a=document.getElementById(a));{if(!(a&&a instanceof Array))return"init"===b&&(b="ready"),m.bind(a,b instanceof Array?b.join(" "):b,c,d);for(var e=a.length;e--;)m.add(a[e],b,c,d)}},m.remove=function(a,b,c,d){if(!a)return m;if("string"==typeof a&&(a=document.getElementById(a)),a instanceof Array){for(var e=a.length;e--;)m.remove(a[e],b,c,d);return m}return m.unbind(a,b instanceof Array?b.join(" "):b,c)},m.clear=function(a){return"string"==typeof a&&(a=document.getElementById(a)),m.clean(a)},m.cancel=function(a){return a&&(m.prevent(a),m.stop(a)),!1},m.prevent=function(a){return a.preventDefault||(a=e(a)),a.preventDefault(),!1},m.stop=function(a){return a.stopPropagation||(a=e(a)),a.stopPropagation(),!1}}var h=!!document.addEventListener;a.EventUtils=g,a.Event=new g(function(a){return function(b){tinymce.dom.Event.callNativeHandler(a,b)}}),a.Event.bind(window,"ready",function(){}),a=0}(tinymce.dom,"data-mce-expando"),tinymce.dom.TreeWalker=function(a,b){function c(a,c,d,e){var f,g;if(a){if(!e&&a[c])return a[c];if(a!=b){if(f=a[d])return f;for(g=a.parentNode;g&&g!=b;g=g.parentNode)if(f=g[d])return f}}}var d=a;this.current=function(){return d},this.next=function(a){return d=c(d,"firstChild","nextSibling",a)},this.prev=function(a){return d=c(d,"lastChild","previousSibling",a)}},function(a){var b=a.each,c=a.is,d=a.isWebKit,e=a.isIE,f=a.html.Entities,g=/^([a-z0-9],?)+$/i,h=/^[ \t\r\n]*$/;a.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(b,c){var d,e=this;if(e.doc=b,e.win=window,e.files={},e.cssFlicker=!1,e.counter=0,e.stdMode=!a.isIE||b.documentMode>=8,e.boxModel=!a.isIE||"CSS1Compat"==b.compatMode||e.stdMode,e.hasOuterHTML="outerHTML"in b.createElement("a"),e.settings=c=a.extend({keep_values:!1,hex_colors:1},c),e.schema=c.schema,e.styles=new a.html.Styles({url_converter:c.url_converter,url_converter_scope:c.url_converter_scope},c.schema),a.isIE6)try{b.execCommand("BackgroundImageCache",!1,!0)}catch(f){e.cssFlicker=!0}e.fixDoc(b),e.events=c.ownEvents?new a.dom.EventUtils(c.proxy):a.dom.Event,a.addUnload(e.destroy,e),d=c.schema?c.schema.getBlockElements():{},e.isBlock=function(a){if(!a)return!1;var b=a.nodeType;return b?!(1!==b||!d[a.nodeName]):!!d[a]}},fixDoc:function(b){var c,d=this.settings;if(e&&!a.isIE11&&d.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(a){b.createElement(a)});for(c in d.schema.getCustomElements())b.createElement(c)}},clone:function(c,d){var f,g,h=this;return!e||a.isIE11||1!==c.nodeType||d?c.cloneNode(d):(g=h.doc,d?f.firstChild:(f=g.createElement(c.nodeName),b(h.getAttribs(c),function(a){h.setAttrib(f,a.nodeName,h.getAttrib(c,a.nodeName))}),f))},getRoot:function(){var a=this,b=a.settings;return b&&a.get(b.root_element)||a.doc.body},getViewPort:function(a){var b,c;return a=a?a:this.win,b=a.document,c=this.boxModel?b.documentElement:b.body,{x:a.pageXOffset||c.scrollLeft,y:a.pageYOffset||c.scrollTop,w:a.innerWidth||c.clientWidth,h:a.innerHeight||c.clientHeight}},getRect:function(a){var b,c,d=this;return a=d.get(a),b=d.getPos(a),c=d.getSize(a),{x:b.x,y:b.y,w:c.w,h:c.h}},getSize:function(a){var b,c,d=this;return a=d.get(a),b=d.getStyle(a,"width"),c=d.getStyle(a,"height"),-1===b.indexOf("px")&&(b=0),-1===c.indexOf("px")&&(c=0),{w:parseInt(b,10)||a.offsetWidth||a.clientWidth,h:parseInt(c,10)||a.offsetHeight||a.clientHeight}},getParent:function(a,b,c){return this.getParents(a,b,c,!1)},getParents:function(a,b,d,e){var f,g=this,h=g.settings,i=[];for(a=g.get(a),e=void 0===e,h.strict_root&&(d=d||g.getRoot()),c(b,"string")&&(f=b,b="*"===b?function(a){return 1==a.nodeType}:function(a){return g.is(a,f)});a&&a!=d&&a.nodeType&&9!==a.nodeType;){if(!b||b(a)){if(!e)return a;i.push(a)}a=a.parentNode}return e?i:null},get:function(a){var b;return a&&this.doc&&"string"==typeof a&&(b=a,a=this.doc.getElementById(a),a&&a.id!==b)?this.doc.getElementsByName(b)[1]:a},getNext:function(a,b){return this._findSib(a,b,"nextSibling")},getPrev:function(a,b){return this._findSib(a,b,"previousSibling")},select:function(b,c){var d=this;return a.dom.Sizzle(b,d.get(c)||d.get(d.settings.root_element)||d.doc,[])},is:function(b,c){var d;if(void 0===b.length){if("*"===c)return 1==b.nodeType;if(g.test(c)){for(c=c.toLowerCase().split(/,/),b=b.nodeName.toLowerCase(),d=c.length-1;d>=0;d--)if(c[d]==b)return!0;return!1}}return a.dom.Sizzle.matches(c,b.nodeType?[b]:b).length>0},add:function(a,b,d,e,f){var g=this;return this.run(a,function(a){var h;return h=c(b,"string")?g.doc.createElement(b):b,g.setAttribs(h,d),e&&(e.nodeType?h.appendChild(e):g.setHTML(h,e)),f?h:a.appendChild(h)})},create:function(a,b,c){return this.add(this.doc.createElement(a),a,b,c,1)},createHTML:function(a,b,c){var d,e="",f=this;e+="<"+a;for(d in b)b.hasOwnProperty(d)&&(e+=" "+d+'="'+f.encode(b[d])+'"');return"undefined"!=typeof c?e+">"+c+"</"+a+">":e+" />"},remove:function(b,c){return this.run(b,function(b){var d,e=b.parentNode;if(!e)return null;if(c)for(;d=b.firstChild;)!a.isIE||3!==d.nodeType||d.nodeValue?e.insertBefore(d,b):b.removeChild(d);return e.removeChild(b)})},setStyle:function(b,c,d){var f=this;return f.run(b,function(g){var h;switch(h=g.style,c=c.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),f.pixelStyles.test(c)&&(a.is(d,"number")||/^[\-0-9\.]+$/.test(d))&&(d+="px"),c){case"opacity":e&&!a.isIE11&&(h.filter=""===d?"":"alpha(opacity="+100*d+")",b.currentStyle&&b.currentStyle.hasLayout||(h.display="inline-block")),h[c]=h["-moz-opacity"]=h["-khtml-opacity"]=d||"";break;case"float":e&&!a.isIE11?h.styleFloat=d:h.cssFloat=d;break;default:h[c]=d||""}f.settings.update_styles&&f.setAttrib(g,"data-mce-style")})},getStyle:function(a,b,c){if(a=this.get(a)){if(this.doc.defaultView&&c){b=b.replace(/[A-Z]/g,function(a){return"-"+a});try{return this.doc.defaultView.getComputedStyle(a,null).getPropertyValue(b)}catch(d){return null}}return b=b.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),"float"==b&&(b=e?"styleFloat":"cssFloat"),a.currentStyle&&c?a.currentStyle[b]:a.style?a.style[b]:void 0}},setStyles:function(a,c){var d,e=this,f=e.settings;d=f.update_styles,f.update_styles=0,b(c,function(b,c){e.setStyle(a,c,b)}),f.update_styles=d,f.update_styles&&e.setAttrib(a,f.cssText)},removeAllAttribs:function(a){return this.run(a,function(a){var b,c=a.attributes;for(b=c.length-1;b>=0;b--)a.removeAttributeNode(c.item(b))})},setAttrib:function(a,d,e){var f=this;if(a&&d)return f.settings.strict&&(d=d.toLowerCase()),this.run(a,function(a){var g=f.settings,h=a.getAttribute(d);if(null!==e)switch(d){case"style":if(!c(e,"string"))return void b(e,function(b,c){f.setStyle(a,c,b)});g.keep_values&&(e&&!f._isRes(e)?a.setAttribute("data-mce-style",e,2):a.removeAttribute("data-mce-style",2)),
a.style.cssText=e;break;case"class":a.className=e||"";break;case"src":case"href":g.keep_values&&(g.url_converter&&(e=g.url_converter.call(g.url_converter_scope||f,e,d,a)),f.setAttrib(a,"data-mce-"+d,e,2));break;case"shape":a.setAttribute("data-mce-style",e)}if(c(e)&&null!==e&&0!==e.length?a.setAttribute(d,""+e,2):a.removeAttribute(d,2),tinyMCE.activeEditor&&h!=e){var i=tinyMCE.activeEditor;i.onSetAttrib.dispatch(i,a,d,e)}})},setAttribs:function(a,c){var d=this;return this.run(a,function(a){b(c,function(b,c){d.setAttrib(a,c,b)})})},getAttrib:function(b,f,g){var h,i,j=this;if(b=j.get(b),!b||1!==b.nodeType)return g===i?!1:g;if(c(g)||(g=""),/^(src|href|style|coords|shape)$/.test(f)&&(h=b.getAttribute("data-mce-"+f)))return h;if(e&&j.props[f]&&(h=b[j.props[f]],h=h&&h.nodeValue?h.nodeValue:h),h||(h=b.getAttribute(f,2)),/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(f))return b[j.props[f]]===!0&&""===h?f:h?f:"";if("FORM"===b.nodeName&&b.getAttributeNode(f))return b.getAttributeNode(f).nodeValue;if("style"===f&&(h=h||b.style.cssText,h&&(h=j.serializeStyle(j.parseStyle(h),b.nodeName),j.settings.keep_values&&!j._isRes(h)&&b.setAttribute("data-mce-style",h))),d&&"class"===f&&h&&(h=h.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),e)switch(f){case"rowspan":case"colspan":1===h&&(h="");break;case"size":"+0"!==h&&20!==h&&0!==h||(h="");break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":0===h&&(h="");break;case"hspace":-1===h&&(h="");break;case"maxlength":case"tabindex":32768!==h&&2147483647!==h&&"32768"!==h||(h="");break;case"multiple":case"compact":case"noshade":case"nowrap":return 65535===h?f:g;case"shape":h=h.toLowerCase();break;default:0===f.indexOf("on")&&h&&(h=a._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+h))}return h!==i&&null!==h&&""!==h?""+h:g},getPos:function(a,b){var c,d,e=this,f=0,g=0,h=e.doc;if(a=e.get(a),b=b||h.body,a){if(a.getBoundingClientRect)return a=a.getBoundingClientRect(),c=e.boxModel?h.documentElement:h.body,f=a.left+(h.documentElement.scrollLeft||h.body.scrollLeft)-c.clientTop,g=a.top+(h.documentElement.scrollTop||h.body.scrollTop)-c.clientLeft,{x:f,y:g};for(d=a;d&&d!=b&&d.nodeType;)f+=d.offsetLeft||0,g+=d.offsetTop||0,d=d.offsetParent;for(d=a.parentNode;d&&d!=b&&d.nodeType;)f-=d.scrollLeft||0,g-=d.scrollTop||0,d=d.parentNode}return{x:f,y:g}},parseStyle:function(a){return this.styles.parse(a)},serializeStyle:function(a,b){return this.styles.serialize(a,b)},addStyle:function(a){var b,c=this.doc;styleElm=c.getElementById("mceDefaultStyles"),styleElm||(styleElm=c.createElement("style"),styleElm.id="mceDefaultStyles",styleElm.type="text/css",b=c.getElementsByTagName("head")[0],b.firstChild?b.insertBefore(styleElm,b.firstChild):b.appendChild(styleElm)),styleElm.styleSheet?styleElm.styleSheet.cssText+=a:styleElm.appendChild(c.createTextNode(a))},loadCSS:function(c){var d,f=this,g=f.doc;c||(c=""),d=g.getElementsByTagName("head")[0],require(["jive/rtl"],function(h){h.isRtl&&(c=c.replace(".css",".rtl.css")),b(c.split(","),function(b){var c;f.files[b]||(f.files[b]=!0,c=f.create("link",{rel:"stylesheet",href:a._addVer(b)}),e&&!a.isIE11&&g.documentMode&&g.recalc&&(c.onload=function(){g.recalc&&g.recalc(),c.onload=null}),d.appendChild(c))})})},addClass:function(a,b){return this.run(a,function(a){var c;return b?this.hasClass(a,b)?a.className:(c=this.removeClass(a,b),a.className=(""!=c?c+" ":"")+b):0})},removeClass:function(b,c){var d,e=this;return e.run(b,function(b){var f;return e.hasClass(b,c)?(d||(d=new RegExp("(^|\\s+)"+c+"(\\s+|$)","g")),f=b.className.replace(d," "),f=a.trim(" "!=f?f:""),b.className=f,f||(b.removeAttribute("class"),b.removeAttribute("className")),f):b.className})},hasClass:function(a,b){return a=this.get(a),a&&b?-1!==(" "+a.className+" ").indexOf(" "+b+" "):!1},show:function(a){return this.setStyle(a,"display","block")},hide:function(a){return this.setStyle(a,"display","none")},isHidden:function(a){return a=this.get(a),!a||"none"==a.style.display||"none"==this.getStyle(a,"display")},uniqueId:function(a){return(a?a:"mce_")+this.counter++},setHTML:function(c,d){var f=this;return f.run(c,function(c){if(e){for(;c.firstChild;)c.removeChild(c.firstChild);try{c.innerHTML="<br />"+d,c.removeChild(c.firstChild)}catch(g){var h=f.create("div");h.innerHTML="<br />"+d,b(a.grep(h.childNodes),function(a,b){b&&c.canHaveHTML&&c.appendChild(a)})}}else c.innerHTML=d;return d})},getOuterHTML:function(a){var b,c=this;return(a=c.get(a))?1===a.nodeType&&c.hasOuterHTML?a.outerHTML:(b=(a.ownerDocument||c.doc).createElement("body"),b.appendChild(a.cloneNode(!0)),b.innerHTML):null},setOuterHTML:function(a,b,c){function d(a,b,c){var d,e;for(e=c.createElement("body"),e.innerHTML=b,d=e.lastChild;d;)f.insertAfter(d.cloneNode(!0),a),d=d.previousSibling;f.remove(a)}var f=this;return this.run(a,function(a){if(a=f.get(a),1==a.nodeType)if(c=c||a.ownerDocument||f.doc,e)try{e&&1==a.nodeType?a.outerHTML=b:d(a,b,c)}catch(g){d(a,b,c)}else d(a,b,c)})},decode:f.decode,encode:f.encodeAllRaw,insertAfter:function(a,b){return b=this.get(b),this.run(a,function(a){var c,d;return c=b.parentNode,d=b.nextSibling,d?c.insertBefore(a,d):c.appendChild(a),a})},replace:function(d,e,f){var g=this;return c(e,"array")&&(d=d.cloneNode(!0)),g.run(e,function(c){return f&&b(a.grep(c.childNodes),function(a){d.appendChild(a)}),c.parentNode.replaceChild(d,c)})},rename:function(a,c){var d,e=this;return a.nodeName!=c.toUpperCase()&&(d=e.create(c),b(e.getAttribs(a),function(b){e.setAttrib(d,b.nodeName,e.getAttrib(a,b.nodeName))}),e.replace(d,a,1)),d||a},findCommonAncestor:function(a,b){for(var c,d=a;d;){for(c=b;c&&d!=c;)c=c.parentNode;if(d==c)break;d=d.parentNode}return!d&&a.ownerDocument?a.ownerDocument.documentElement:d},toHex:function(a){function b(a){return a=parseInt(a,10).toString(16),a.length>1?a:"0"+a}var c=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(a);return c?a="#"+b(c[1])+b(c[2])+b(c[3]):a},getClasses:function(){function c(e){b(e.imports,function(a){c(a)}),b(e.cssRules||e.rules,function(e){switch(e.type||1){case 1:e.selectorText&&b(e.selectorText.split(","),function(b){b=b.replace(/^\s*|\s*$|^\s\./g,""),!/\.mce/.test(b)&&/\.[\w\-]+$/.test(b)&&(d=b,b=a._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",b),h&&!(b=h(b,d))||g[b]||(f.push({"class":b}),g[b]=1))});break;case 3:try{c(e.styleSheet)}catch(i){}}})}var d,e=this,f=[],g={},h=e.settings.class_filter;if(e.classes)return e.classes;try{b(e.doc.styleSheets,c)}catch(i){}return f.length>0&&(e.classes=f),f},run:function(a,c,d){var e,f=this;return f.doc&&"string"==typeof a&&(a=f.get(a)),a?(d=d||this,a.nodeType||!a.length&&0!==a.length?c.call(d,a):(e=[],b(a,function(a,b){a&&("string"==typeof a&&(a=f.doc.getElementById(a)),e.push(c.call(d,a,b)))}),e)):!1},getAttribs:function(a){var b;return a=this.get(a),a?e?(b=[],"OBJECT"==a.nodeName?a.attributes:("OPTION"===a.nodeName&&this.getAttrib(a,"selected")&&b.push({specified:1,nodeName:"selected"}),a.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(a){b.push({specified:1,nodeName:a})}),b)):a.attributes:[]},isEmpty:function(b,c){var d,e,f,g,i,j=this,k=0;if(b=b.firstChild){g=new a.dom.TreeWalker(b,b.parentNode),c=c||j.schema?j.schema.getNonEmptyElements():null;do{if(f=b.nodeType,1===f){if(b.getAttribute("data-mce-bogus"))continue;if(i=b.nodeName.toLowerCase(),c&&c[i]){if("br"===i){k++;continue}return!1}for(e=j.getAttribs(b),d=b.attributes.length;d--;)if(i=b.attributes[d].nodeName,"name"===i||"data-mce-bookmark"===i)return!1}if(8==f)return!1;if(3===f&&!h.test(b.nodeValue))return!1}while(b=g.next())}return 1>=k},destroy:function(b){var c=this;c.win=c.doc=c.root=c.events=c.frag=null,b||a.removeUnload(c.destroy)},createRng:function(){var b=this.doc;return b.createRange?b.createRange():new a.dom.Range(this)},nodeIndex:function(a,b){var c,d,e,f=0;if(a)for(c=a.nodeType,a=a.previousSibling,d=a;a;a=a.previousSibling)e=a.nodeType,(!b||3!=e||e!=c&&a.nodeValue.length)&&(f++,c=e);return f},split:function(b,c,d){function e(b){function c(a){var b=a.previousSibling&&"SPAN"==a.previousSibling.nodeName,c=a.nextSibling&&"SPAN"==a.nextSibling.nodeName;return b&&c}var d,f=b.childNodes,g=b.nodeType;if(1!=g||"bookmark"!=b.getAttribute("data-mce-type")){for(d=f.length-1;d>=0;d--)e(f[d]);if(9!=g){if(3==g&&b.nodeValue.length>0){var h=a.trim(b.nodeValue).length;if(!i.isBlock(b.parentNode)||h>0||0===h&&c(b))return}else if(1==g&&(f=b.childNodes,1==f.length&&f[0]&&1==f[0].nodeType&&"bookmark"==f[0].getAttribute("data-mce-type")&&b.parentNode.insertBefore(f[0],b),f.length||/^(br|hr|input|img)$/i.test(b.nodeName)))return;i.remove(b)}return b}}var f,g,h,i=this,j=i.createRng();return b&&c?(j.setStart(b.parentNode,i.nodeIndex(b)),j.setEnd(c.parentNode,i.nodeIndex(c)),f=j.extractContents(),j=i.createRng(),j.setStart(c.parentNode,i.nodeIndex(c)+1),j.setEnd(b.parentNode,i.nodeIndex(b)+1),g=j.extractContents(),h=b.parentNode,h.insertBefore(e(f),b),d?h.insertBefore(d,b):h.insertBefore(c,b),h.insertBefore(e(g),b),i.remove(b),d||c):void 0},bind:function(a,b,c,d){return this.events.add(a,b,c,d||this)},unbind:function(a,b,c){return this.events.remove(a,b,c)},fire:function(a,b,c){return this.events.fire(a,b,c)},getContentEditable:function(a){var b;return 1!=a.nodeType?null:(b=a.getAttribute("data-mce-contenteditable"),b&&"inherit"!==b?b:"inherit"!==a.contentEditable?a.contentEditable:null)},_findSib:function(a,b,d){var e=this,f=b;if(a)for(c(f,"string")&&(f=function(a){return e.is(a,b)}),a=a[d];a;a=a[d])if(f(a))return a;return null},_isRes:function(a){return/^(top|left|bottom|right|width|height)/i.test(a)||/;\s*(top|left|bottom|right|width|height)/i.test(a)}}),a.DOM=new a.dom.DOMUtils(document,{process_html:0})}(tinymce),function(a){function b(a){function c(){return I.createDocumentFragment()}function d(a,b){w(M,a,b)}function e(a,b){w(N,a,b)}function f(a){d(a.parentNode,T(a))}function g(a){d(a.parentNode,T(a)+1)}function h(a){e(a.parentNode,T(a))}function i(a){e(a.parentNode,T(a)+1)}function j(a){a?(H[Q]=H[P],H[R]=H[O]):(H[P]=H[Q],H[O]=H[R]),H.collapsed=M,H.commonAncestorContainer=H[P]}function k(a){f(a),i(a)}function l(a){d(a,0),e(a,1===a.nodeType?a.childNodes.length:a.nodeValue.length)}function m(a,b){var c=H[P],d=H[O],e=H[Q],f=H[R],g=b.startContainer,h=b.startOffset,i=b.endContainer,j=b.endOffset;return 0===a?v(c,d,g,h):1===a?v(e,f,g,h):2===a?v(e,f,i,j):3===a?v(c,d,i,j):void 0}function n(){x(L)}function o(){return x(J)}function p(){return x(K)}function q(b){var c,d,e=this[P],f=this[O];3!==e.nodeType&&4!==e.nodeType||!e.nodeValue?(e.childNodes.length>0&&(d=e.childNodes[f]),d?e.insertBefore(b,d):e.appendChild(b)):f?f>=e.nodeValue.length?a.insertAfter(b,e):(c=e.splitText(f),e.parentNode.insertBefore(b,c)):e.parentNode.insertBefore(b,e)}function r(a){var b=H.extractContents();H.insertNode(a),a.appendChild(b),H.selectNode(a)}function s(){return S(new b(a),{startContainer:H[P],startOffset:H[O],endContainer:H[Q],endOffset:H[R],collapsed:H.collapsed,commonAncestorContainer:H.commonAncestorContainer})}function t(a,b){var c;if(3==a.nodeType)return a;if(0>b)return a;for(c=a.firstChild;c&&b>0;)--b,c=c.nextSibling;return c?c:a}function u(){return H[P]==H[Q]&&H[O]==H[R]}function v(b,c,d,e){var f,g,h,i,j,k;if(b==d)return c==e?0:e>c?-1:1;for(f=d;f&&f.parentNode!=b;)f=f.parentNode;if(f){for(g=0,h=b.firstChild;h!=f&&c>g;)g++,h=h.nextSibling;return g>=c?-1:1}for(f=b;f&&f.parentNode!=d;)f=f.parentNode;if(f){for(g=0,h=d.firstChild;h!=f&&e>g;)g++,h=h.nextSibling;return e>g?-1:1}for(i=a.findCommonAncestor(b,d),j=b;j&&j.parentNode!=i;)j=j.parentNode;for(j||(j=i),k=d;k&&k.parentNode!=i;)k=k.parentNode;if(k||(k=i),j==k)return 0;for(h=i.firstChild;h;){if(h==j)return-1;if(h==k)return 1;h=h.nextSibling}}function w(b,c,d){var e,f;for(b?(H[P]=c,H[O]=d):(H[Q]=c,H[R]=d),e=H[Q];e.parentNode;)e=e.parentNode;for(f=H[P];f.parentNode;)f=f.parentNode;f==e?v(H[P],H[O],H[Q],H[R])>0&&H.collapse(b):H.collapse(b),H.collapsed=u(),H.commonAncestorContainer=a.findCommonAncestor(H[P],H[Q])}function x(a){var b,c,d,e,f,g,h,i=0,j=0;if(H[P]==H[Q])return y(a);for(b=H[Q],c=b.parentNode;c;b=c,c=c.parentNode){if(c==H[P])return z(b,a);++i}for(b=H[P],c=b.parentNode;c;b=c,c=c.parentNode){if(c==H[Q])return A(b,a);++j}for(d=j-i,e=H[P];d>0;)e=e.parentNode,d--;for(f=H[Q];0>d;)f=f.parentNode,d++;for(g=e.parentNode,h=f.parentNode;g!=h;g=g.parentNode,h=h.parentNode)e=g,f=h;return B(e,f,a)}function y(a){var b,d,e,f,g,h,i,j,k;if(a!=L&&(b=c()),H[O]==H[R])return b;if(3==H[P].nodeType){if(d=H[P].nodeValue,e=d.substring(H[O],H[R]),a!=K&&(f=H[P],j=H[O],k=H[R]-H[O],0===j&&k>=f.nodeValue.length-1?f.parentNode.removeChild(f):f.deleteData(j,k),H.collapse(M)),a==L)return;return e.length>0&&b.appendChild(I.createTextNode(e)),b}for(f=t(H[P],H[O]),g=H[R]-H[O];f&&g>0;)h=f.nextSibling,i=F(f,a),b&&b.appendChild(i),--g,f=h;return a!=K&&H.collapse(M),b}function z(a,b){var d,e,f,g,h,i;if(b!=L&&(d=c()),e=C(a,b),d&&d.appendChild(e),f=T(a),g=f-H[O],0>=g)return b!=K&&(H.setEndBefore(a),H.collapse(N)),d;for(e=a.previousSibling;g>0;)h=e.previousSibling,i=F(e,b),d&&d.insertBefore(i,d.firstChild),--g,e=h;return b!=K&&(H.setEndBefore(a),H.collapse(N)),d}function A(a,b){var d,e,f,g,h,i;for(b!=L&&(d=c()),f=D(a,b),d&&d.appendChild(f),e=T(a),++e,g=H[R]-e,f=a.nextSibling;f&&g>0;)h=f.nextSibling,i=F(f,b),d&&d.appendChild(i),--g,f=h;return b!=K&&(H.setStartAfter(a),H.collapse(M)),d}function B(a,b,d){var e,f,g,h,i,j,k,l;for(d!=L&&(f=c()),e=D(a,d),f&&f.appendChild(e),g=a.parentNode,h=T(a),i=T(b),++h,j=i-h,k=a.nextSibling;j>0;)l=k.nextSibling,e=F(k,d),f&&f.appendChild(e),k=l,--j;return e=C(b,d),f&&f.appendChild(e),d!=K&&(H.setStartAfter(a),H.collapse(M)),f}function C(a,b){var c,d,e,f,g,h=t(H[Q],H[R]-1),i=h!=H[Q];if(h==a)return E(h,i,N,b);for(c=h.parentNode,d=E(c,N,N,b);c;){for(;h;)e=h.previousSibling,f=E(h,i,N,b),b!=L&&d.insertBefore(f,d.firstChild),i=M,h=e;if(c==a)return d;h=c.previousSibling,c=c.parentNode,g=E(c,N,N,b),b!=L&&g.appendChild(d),d=g}}function D(a,b){var c,d,e,f,g,h=t(H[P],H[O]),i=h!=H[P];if(h==a)return E(h,i,M,b);for(c=h.parentNode,d=E(c,N,M,b);c;){for(;h;)e=h.nextSibling,f=E(h,i,M,b),b!=L&&d.appendChild(f),i=M,h=e;if(c==a)return d;h=c.nextSibling,c=c.parentNode,g=E(c,N,M,b),b!=L&&g.appendChild(d),d=g}}function E(b,c,d,e){var f,g,h,i,j;if(c)return F(b,e);if(3==b.nodeType){if(f=b.nodeValue,d?(i=H[O],g=f.substring(i),h=f.substring(0,i)):(i=H[R],g=f.substring(0,i),h=f.substring(i)),e!=K&&(b.nodeValue=h),e==L)return;return j=a.clone(b,N),j.nodeValue=g,j}if(e!=L)return a.clone(b,N)}function F(b,c){return c!=L?c==K?a.clone(b,M):b:void b.parentNode.removeChild(b)}function G(){return a.create("body",null,p()).outerText}var H=this,I=a.doc,J=0,K=1,L=2,M=!0,N=!1,O="startOffset",P="startContainer",Q="endContainer",R="endOffset",S=tinymce.extend,T=a.nodeIndex;return S(H,{startContainer:I,startOffset:0,endContainer:I,endOffset:0,collapsed:M,commonAncestorContainer:I,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:d,setEnd:e,setStartBefore:f,setStartAfter:g,setEndBefore:h,setEndAfter:i,collapse:j,selectNode:k,selectNodeContents:l,compareBoundaryPoints:m,deleteContents:n,extractContents:o,cloneContents:p,insertNode:q,surroundContents:r,cloneRange:s,toStringIE:G}),H}a.Range=b,b.prototype.toString=function(){return this.toStringIE()}}(tinymce.dom),function(){function a(a){function b(b,c){var d,e,f,g,h,i,j,k,l=0,m=-1;if(d=b.duplicate(),d.collapse(c),k=d.parentElement(),k.ownerDocument===a.dom.doc){for(;"false"===k.contentEditable;)k=k.parentNode;if(!k.hasChildNodes())return{node:k,inside:1};for(g=k.children,e=g.length-1;e>=l;)if(j=Math.floor((l+e)/2),h=g[j],d.moveToElementText(h),m=d.compareEndPoints(c?"StartToStart":"EndToEnd",b),m>0)e=j-1;else{if(!(0>m))return{node:h};l=j+1}if(0>m)for(h?d.collapse(!1):(d.moveToElementText(k),d.collapse(!0),h=k,f=!0),i=0;0!==d.compareEndPoints(c?"StartToStart":"StartToEnd",b)&&0!==d.move("character",1)&&k==d.parentElement();)i++;else for(d.collapse(!0),i=0;0!==d.compareEndPoints(c?"StartToStart":"StartToEnd",b)&&0!==d.move("character",-1)&&k==d.parentElement();)i++;return{node:h,position:m,offset:i,inside:f}}}function c(){function c(a){var c,d,e,f,g,h=b(k,a),i=0;if(c=h.node,d=h.offset,h.inside&&!c.hasChildNodes())return void l[a?"setStart":"setEnd"](c,0);if(d===f)return void l[a?"setStartBefore":"setEndAfter"](c);if(h.position<0){if(e=h.inside?c.firstChild:c.nextSibling,!e)return void l[a?"setStartAfter":"setEndAfter"](c);if(!d)return void(3==e.nodeType?l[a?"setStart":"setEnd"](e,0):l[a?"setStartBefore":"setEndBefore"](e));for(;e;){if(g=e.nodeValue,i+=g.length,i>=d){c=e,i-=d,i=g.length-i;break}e=e.nextSibling}}else{if(e=c.previousSibling,!e)return l[a?"setStartBefore":"setEndBefore"](c);if(!d)return void(3==c.nodeType?l[a?"setStart":"setEnd"](e,c.nodeValue.length):l[a?"setStartAfter":"setEndAfter"](e));for(;e;){if(i+=e.nodeValue.length,i>=d){c=e,i-=d;break}e=e.previousSibling}}l[a?"setStart":"setEnd"](c,i)}var f,g,h,i,j,k=a.getRng(),l=e.createRng();if(f=k.item?k.item(0):k.parentElement(),f.ownerDocument!=e.doc)return l;if(g=a.isCollapsed(),k.item)return l.setStart(f.parentNode,e.nodeIndex(f)),l.setEnd(l.startContainer,l.startOffset+1),l;try{c(!0),g||c()}catch(m){if(-2147024809!=m.number)throw m;j=d.getBookmark(2),h=k.duplicate(),h.collapse(!0),f=h.parentElement(),g||(h=k.duplicate(),h.collapse(!1),i=h.parentElement(),i.innerHTML=i.innerHTML),f.innerHTML=f.innerHTML,d.moveToBookmark(j),k=a.getRng(),c(!0),g||c()}return l}var d=this,e=a.dom,f=!1;this.getBookmark=function(c){function d(a){var b,c,d,f,g=[];for(b=a.parentNode,c=e.getRoot().parentNode;b!=c&&9!==b.nodeType;){for(d=b.children,f=d.length;f--;)if(a===d[f]){g.push(f);break}a=b,b=b.parentNode}return g}function f(a){var c;return c=b(g,a),c?{position:c.position,offset:c.offset,indexes:d(c.node),inside:c.inside}:void 0}var g=a.getRng(),h={};return 2===c&&(g.item?h.start={ctrl:!0,indexes:d(g.item(0))}:(h.start=f(!0),a.isCollapsed()||(h.end=f()))),h},this.moveToBookmark=function(a){function b(a){var b,c,d,f;for(b=e.getRoot(),c=a.length-1;c>=0;c--)f=b.children,d=a[c],d<=f.length-1&&(b=f[d]);return b}function c(c){var e,g,h,i=a[c?"start":"end"];i&&(e=i.position>0,g=f.createTextRange(),g.moveToElementText(b(i.indexes)),offset=i.offset,offset!==h?(g.collapse(i.inside||e),g.moveStart("character",e?-offset:offset)):g.collapse(c),d.setEndPoint(c?"StartToStart":"EndToStart",g),c&&d.collapse(!0))}var d,f=e.doc.body;a.start&&(a.start.ctrl?(d=f.createControlRange(),d.addElement(b(a.start.indexes)),d.select()):(d=f.createTextRange(),c(!0),c(),d.select()))},this.addRange=function(b){function c(a){var b,c,g,l,m;g=e.create("a"),b=a?h:j,c=a?i:k,l=d.duplicate(),b!=o&&b!=o.documentElement||(b=p,c=0),3==b.nodeType?(b.parentNode.insertBefore(g,b),l.moveToElementText(g),l.moveStart("character",c),e.remove(g),d.setEndPoint(a?"StartToStart":"EndToEnd",l)):(m=b.childNodes,m.length?(c>=m.length?e.insertAfter(g,m[m.length-1]):b.insertBefore(g,m[c]),l.moveToElementText(g)):b.canHaveHTML&&(b.innerHTML="<span>\ufeff</span>",g=b.firstChild,l.moveToElementText(g),l.collapse(f)),d.setEndPoint(a?"StartToStart":"EndToEnd",l),e.remove(g))}var d,g,h,i,j,k,l,m,n,o=a.dom.doc,p=o.body;if(h=b.startContainer,i=b.startOffset,j=b.endContainer,k=b.endOffset,d=p.createTextRange(),h==j&&1==h.nodeType){if(i==k&&!h.hasChildNodes()){if(h.canHaveHTML)return l=h.previousSibling,l&&!l.hasChildNodes()&&e.isBlock(l)?l.innerHTML="\ufeff":l=null,h.innerHTML="<span>\ufeff</span><span>\ufeff</span>",d.moveToElementText(h.lastChild),d.select(),e.doc.selection.clear(),h.innerHTML="",void(l&&(l.innerHTML=""));i=e.nodeIndex(h),h=h.parentNode}if(i==k-1)try{if(n=h.childNodes[i],g=p.createControlRange(),g.addElement(n),g.select(),m=a.getRng(),m.item&&n===m.item(0))return}catch(q){}}c(!0),c(),d.select()},this.getRangeAt=c}tinymce.dom.TridentSelection=a}(),function(){function a(a,b,c,e,f,g){for(var h=0,i=e.length;i>h;h++){var j=e[h];if(j){var k=!1;for(j=j[a];j;){if(j[d]===c){k=e[j.sizset];break}if(1!==j.nodeType||g||(j[d]=c,j.sizset=h),j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}function b(a,b,c,e,f,g){for(var h=0,i=e.length;i>h;h++){var j=e[h];if(j){var k=!1;for(j=j[a];j;){if(j[d]===c){k=e[j.sizset];break}if(1===j.nodeType)if(g||(j[d]=c,j.sizset=h),"string"!=typeof b){if(j===b){k=!0;break}}else if(l.filter(b,[j]).length>0){k=j;break}j=j[a]}e[h]=k}}}var c=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache",e=0,f=Object.prototype.toString,g=!1,h=!0,i=/\\/g,j=/\r\n/g,k=/\W/;[0,0].sort(function(){return h=!1,0});var l=function(a,b,d,e){d=d||[],b=b||document;var g=b;if(1!==b.nodeType&&9!==b.nodeType)return[];if(!a||"string"!=typeof a)return d;var h,i,j,k,m,p,q,s,t=!0,u=l.isXML(b),w=[],x=a;do if(c.exec(""),h=c.exec(x),h&&(x=h[3],w.push(h[1]),h[2])){k=h[3];break}while(h);if(w.length>1&&o.exec(a))if(2===w.length&&n.relative[w[0]])i=v(w[0]+w[1],b,e);else for(i=n.relative[w[0]]?[b]:l(w.shift(),b);w.length;)a=w.shift(),n.relative[a]&&(a+=w.shift()),i=v(a,i,e);else if(!e&&w.length>1&&9===b.nodeType&&!u&&n.match.ID.test(w[0])&&!n.match.ID.test(w[w.length-1])&&(m=l.find(w.shift(),b,u),b=m.expr?l.filter(m.expr,m.set)[0]:m.set[0]),b)for(m=e?{expr:w.pop(),set:r(e)}:l.find(w.pop(),1!==w.length||"~"!==w[0]&&"+"!==w[0]||!b.parentNode?b:b.parentNode,u),i=m.expr?l.filter(m.expr,m.set):m.set,w.length>0?j=r(i):t=!1;w.length;)p=w.pop(),q=p,n.relative[p]?q=w.pop():p="",null==q&&(q=b),n.relative[p](j,q,u);else j=w=[];if(j||(j=i),j||l.error(p||a),"[object Array]"===f.call(j))if(t)if(b&&1===b.nodeType)for(s=0;null!=j[s];s++)j[s]&&(j[s]===!0||1===j[s].nodeType&&l.contains(b,j[s]))&&d.push(i[s]);else for(s=0;null!=j[s];s++)j[s]&&1===j[s].nodeType&&d.push(i[s]);else d.push.apply(d,j);else r(j,d);return k&&(l(k,g,d,e),l.uniqueSort(d)),d};l.uniqueSort=function(a){if(t&&(g=h,a.sort(t),g))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a},l.matches=function(a,b){return l(a,null,null,b)},l.matchesSelector=function(a,b){return l(b,null,null,[a]).length>0},l.find=function(a,b,c){var d,e,f,g,h,j;if(!a)return[];for(e=0,f=n.order.length;f>e;e++)if(h=n.order[e],(g=n.leftMatch[h].exec(a))&&(j=g[1],g.splice(1,1),"\\"!==j.substr(j.length-1)&&(g[1]=(g[1]||"").replace(i,""),d=n.find[h](g,b,c),null!=d))){a=a.replace(n.match[h],"");break}return d||(d="undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName("*"):[]),{set:d,expr:a}},l.filter=function(a,b,c,d){for(var e,f,g,h,i,j,k,m,o,p=a,q=[],r=b,s=b&&b[0]&&l.isXML(b[0]);a&&b.length;){for(g in n.filter)if(null!=(e=n.leftMatch[g].exec(a))&&e[2]){if(j=n.filter[g],k=e[1],f=!1,e.splice(1,1),"\\"===k.substr(k.length-1))continue;if(r===q&&(q=[]),n.preFilter[g])if(e=n.preFilter[g](e,r,c,q,d,s)){if(e===!0)continue}else f=h=!0;if(e)for(m=0;null!=(i=r[m]);m++)i&&(h=j(i,e,m,r),o=d^h,c&&null!=h?o?f=!0:r[m]=!1:o&&(q.push(i),f=!0));if(void 0!==h){if(c||(r=q),a=a.replace(n.match[g],""),!f)return[];break}}if(a===p){if(null!=f)break;l.error(a)}p=a}return r},l.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var m=l.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(1===d||9===d||11===d){if("string"==typeof a.textContent)return a.textContent;if("string"==typeof a.innerText)return a.innerText.replace(j,"");for(a=a.firstChild;a;a=a.nextSibling)e+=m(a)}else if(3===d||4===d)return a.nodeValue}else for(b=0;c=a[b];b++)8!==c.nodeType&&(e+=m(c));return e},n=l.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c="string"==typeof b,d=c&&!k.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f,g=0,h=a.length;h>g;g++)if(f=a[g]){for(;(f=f.previousSibling)&&1!==f.nodeType;);a[g]=e||f&&f.nodeName.toLowerCase()===b?f||!1:f===b}e&&l.filter(b,a,!0)},">":function(a,b){var c,d="string"==typeof b,e=0,f=a.length;if(d&&!k.test(b)){for(b=b.toLowerCase();f>e;e++)if(c=a[e]){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}else{for(;f>e;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&l.filter(b,a,!0)}},"":function(c,d,f){var g,h=e++,i=b;"string"!=typeof d||k.test(d)||(d=d.toLowerCase(),g=d,i=a),i("parentNode",d,h,c,g,f)},"~":function(c,d,f){var g,h=e++,i=b;"string"!=typeof d||k.test(d)||(d=d.toLowerCase(),g=d,i=a),i("previousSibling",d,h,c,g,f)}},find:{ID:function(a,b,c){if("undefined"!=typeof b.getElementById&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if("undefined"!=typeof b.getElementsByName){for(var c=[],d=b.getElementsByName(a[1]),e=0,f=d.length;f>e;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return 0===c.length?null:c}},TAG:function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a[1]):void 0}},preFilter:{CLASS:function(a,b,c,d,e,f){if(a=" "+a[1].replace(i,"")+" ",f)return a;for(var g,h=0;null!=(g=b[h]);h++)g&&(e^(g.className&&(" "+g.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(g):c&&(b[h]=!1));return!1},ID:function(a){return a[1].replace(i,"")},TAG:function(a,b){return a[1].replace(i,"").toLowerCase()},CHILD:function(a){if("nth"===a[1]){a[2]||l.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&l.error(a[0]);return a[0]=e++,a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(i,"");return!f&&n.attrMap[g]&&(a[1]=n.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(i,""),"~="===a[2]&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(a,b,d,e,f){if("not"===a[1]){if(!((c.exec(a[3])||"").length>1||/^\w/.test(a[3]))){var g=l.filter(a[3],b,d,!0^f);return d||e.push.apply(e,g),!1}a[3]=l(a[3],null,null,b)}else if(n.match.POS.test(a[0])||n.match.CHILD.test(a[0]))return!0;return a},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&"hidden"!==a.type},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!l(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return"input"===a.nodeName.toLowerCase()&&"text"===c&&(b===c||null===b)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},password:function(a){return"input"===a.nodeName.toLowerCase()&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"submit"===a.type},image:function(a){return"input"===a.nodeName.toLowerCase()&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=n.filters[e];if(f)return f(a,c,b,d);if("contains"===e)return(a.textContent||a.innerText||m([a])||"").indexOf(b[3])>=0;if("not"===e){for(var g=b[3],h=0,i=g.length;i>h;h++)if(g[h]===a)return!1;return!0}l.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j=b[1],k=a;switch(j){case"only":case"first":for(;k=k.previousSibling;)if(1===k.nodeType)return!1;if("first"===j)return!0;k=a;case"last":for(;k=k.nextSibling;)if(1===k.nodeType)return!1;return!0;case"nth":if(c=b[2],e=b[3],1===c&&0===e)return!0;if(f=b[0],g=a.parentNode,g&&(g[d]!==f||!a.nodeIndex)){for(h=0,k=g.firstChild;k;k=k.nextSibling)1===k.nodeType&&(k.nodeIndex=++h);g[d]=f}return i=a.nodeIndex-e,0===c?0===i:i%c===0&&i/c>=0}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=l.attr?l.attr(a,c):n.attrHandle[c]?n.attrHandle[c](a):null!=a[c]?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return null==d?"!="===f:!f&&l.attr?null!=d:"="===f?e===g:"*="===f?e.indexOf(g)>=0:"~="===f?(" "+e+" ").indexOf(g)>=0:g?"!="===f?e!==g:"^="===f?0===e.indexOf(g):"$="===f?e.substr(e.length-g.length)===g:"|="===f?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=n.setFilters[e];return f?f(a,c,b,d):void 0}}},o=n.match.POS,p=function(a,b){return"\\"+(b-0+1)};for(var q in n.match)n.match[q]=new RegExp(n.match[q].source+/(?![^\[]*\])(?![^\(]*\))/.source),n.leftMatch[q]=new RegExp(/(^(?:.|\r|\n)*?)/.source+n.match[q].source.replace(/\\(\d+)/g,p));n.match.globalPOS=o;var r=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(s){r=function(a,b){var c=0,d=b||[];if("[object Array]"===f.call(a))Array.prototype.push.apply(d,a);else if("number"==typeof a.length)for(var e=a.length;e>c;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var t,u;document.documentElement.compareDocumentPosition?t=function(a,b){return a===b?(g=!0,0):a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b)?-1:1:a.compareDocumentPosition?-1:1}:(t=function(a,b){if(a===b)return g=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return u(a,b);if(!h)return-1;if(!i)return 1;for(;j;)e.unshift(j),j=j.parentNode;for(j=i;j;)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;c>k&&d>k;k++)if(e[k]!==f[k])return u(e[k],f[k]);return k===c?u(a,f[k],-1):u(e[k],b,1)},u=function(a,b,c){if(a===b)return c;for(var d=a.nextSibling;d;){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=document.createElement("div"),b="script"+(new Date).getTime(),c=document.documentElement;a.innerHTML="<a name='"+b+"'/>",c.insertBefore(a,c.firstChild),document.getElementById(b)&&(n.find.ID=function(a,b,c){if("undefined"!=typeof b.getElementById&&!c){var d=b.getElementById(a[1]);return d?d.id===a[1]||"undefined"!=typeof d.getAttributeNode&&d.getAttributeNode("id").nodeValue===a[1]?[d]:void 0:[]}},n.filter.ID=function(a,b){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===b}),c.removeChild(a),c=a=null}(),function(){var a=document.createElement("div");a.appendChild(document.createComment("")),a.getElementsByTagName("*").length>0&&(n.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if("*"===a[1]){for(var d=[],e=0;c[e];e++)1===c[e].nodeType&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&"undefined"!=typeof a.firstChild.getAttribute&&"#"!==a.firstChild.getAttribute("href")&&(n.attrHandle.href=function(a){
return a.getAttribute("href",2)}),a=null}(),document.querySelectorAll&&!function(){var a=l,b=document.createElement("div"),c="__sizzle__";if(b.innerHTML="<p class='TEST'></p>",!b.querySelectorAll||0!==b.querySelectorAll(".TEST").length){l=function(b,d,e,f){if(d=d||document,!f&&!l.isXML(d)){var g=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(g&&(1===d.nodeType||9===d.nodeType)){if(g[1])return r(d.getElementsByTagName(b),e);if(g[2]&&n.find.CLASS&&d.getElementsByClassName)return r(d.getElementsByClassName(g[2]),e)}if(9===d.nodeType){if("body"===b&&d.body)return r([d.body],e);if(g&&g[3]){var h=d.getElementById(g[3]);if(!h||!h.parentNode)return r([],e);if(h.id===g[3])return r([h],e)}try{return r(d.querySelectorAll(b),e)}catch(i){}}else if(1===d.nodeType&&"object"!==d.nodeName.toLowerCase()){var j=d,k=d.getAttribute("id"),m=k||c,o=d.parentNode,p=/^\s*[+~]/.test(b);k?m=m.replace(/'/g,"\\$&"):d.setAttribute("id",m),p&&o&&(d=d.parentNode);try{if(!p||o)return r(d.querySelectorAll("[id='"+m+"'] "+b),e)}catch(q){}finally{k||j.removeAttribute("id")}}}return a(b,d,e,f)};for(var d in a)l[d]=a[d];b=null}}(),function(){var a=document.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(document.createElement("div"),"div"),d=!1;try{b.call(document.documentElement,"[test!='']:sizzle")}catch(e){d=!0}l.matchesSelector=function(a,e){if(e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!l.isXML(a))try{if(d||!n.match.PSEUDO.test(e)&&!/!=/.test(e)){var f=b.call(a,e);if(f||!c||a.document&&11!==a.document.nodeType)return f}}catch(g){}return l(e,null,null,[a]).length>0}}}(),function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>",a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(n.order.splice(1,0,"CLASS"),n.find.CLASS=function(a,b,c){return"undefined"==typeof b.getElementsByClassName||c?void 0:b.getElementsByClassName(a[1])},a=null))}(),document.documentElement.contains?l.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:document.documentElement.compareDocumentPosition?l.contains=function(a,b){return!!(16&a.compareDocumentPosition(b))}:l.contains=function(){return!1},l.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?"HTML"!==b.nodeName:!1};var v=function(a,b,c){for(var d,e=[],f="",g=b.nodeType?[b]:b;d=n.match.PSEUDO.exec(a);)f+=d[0],a=a.replace(n.match.PSEUDO,"");a=n.relative[a]?a+"*":a;for(var h=0,i=g.length;i>h;h++)l(a,g[h],e,c);return l.filter(f,e)};window.tinymce.dom.Sizzle=l}(),function(a){a.dom.Element=function(b,c){var d,e,f=this;f.settings=c=c||{},f.id=b,f.dom=d=c.dom||a.DOM,a.isIE||(e=d.get(f.id)),a.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(a){f[a]=function(){var c,e=[b];for(c=0;c<arguments.length;c++)e.push(arguments[c]);return e=d[a].apply(d,e),f.update(a),e}}),a.extend(f,{on:function(b,c,d){return a.dom.Event.add(f.id,b,c,d)},getXY:function(){return{x:parseInt(f.getStyle("left")),y:parseInt(f.getStyle("top"))}},getSize:function(){var a=d.get(f.id);return{w:parseInt(f.getStyle("width")||a.clientWidth),h:parseInt(f.getStyle("height")||a.clientHeight)}},moveTo:function(a,b){f.setStyles({left:a,top:b})},moveBy:function(a,b){var c=f.getXY();f.moveTo(c.x+a,c.y+b)},resizeTo:function(a,b){f.setStyles({width:a,height:b})},resizeBy:function(a,b){var c=f.getSize();f.resizeTo(c.w+a,c.h+b)},update:function(b){var e;if(a.isIE6&&c.blocker){if(b=b||"",0===b.indexOf("get")||0===b.indexOf("has")||0===b.indexOf("is"))return;if("remove"==b)return void d.remove(f.blocker);f.blocker?e=d.get(f.blocker):(f.blocker=d.uniqueId(),e=d.add(c.container||d.getRoot(),"iframe",{id:f.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),d.setStyle(e,"opacity",0)),d.setStyles(e,{left:f.getStyle("left",1),top:f.getStyle("top",1),width:f.getStyle("width",1),height:f.getStyle("height",1),display:f.getStyle("display",1),zIndex:parseInt(f.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(a){var b=a.is,c=a.isIE,d=a.each,e=a.dom.TreeWalker;a.create("tinymce.dom.Selection",{Selection:function(b,c,e,f){var g=this;g.dom=b,g.win=c,g.serializer=e,g.editor=f,d(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(b){g[b]=new a.util.Dispatcher(g)}),g.win.getSelection||(g.tridentSel=new a.dom.TridentSelection(g)),a.isIE&&!a.isIE11&&b.boxModel&&this._fixIESelection(),a.addUnload(g.destroy,g)},setCursorLocation:function(a,b){var c=this,d=c.dom.createRng();d.setStart(a,b),d.setEnd(a,b),c.setRng(d),c.collapse(!1)},getContent:function(a){var c,d,e,f=this,g=f.getRng(),h=f.dom.create("body"),i=f.getSel();return a=a||{},c=d="",a.get=!0,a.format=a.format||"html",a.forced_root_block="",f.onBeforeGetContent.dispatch(f,a),"text"==a.format?f.isCollapsed()?"":g.text||(i.toString?i.toString():""):(g.cloneContents?(e=g.cloneContents(),e&&h.appendChild(e)):b(g.item)||b(g.htmlText)?(h.innerHTML="<br>"+(g.item?g.item(0).outerHTML:g.htmlText),h.removeChild(h.firstChild)):h.innerHTML=g.toString(),/^\s/.test(h.innerHTML)&&(c=" "),/\s+$/.test(h.innerHTML)&&(d=" "),a.getInner=!0,a.content=f.isCollapsed()?"":c+f.serializer.serialize(h,a)+d,f.onGetContent.dispatch(f,a),a.content)},setContent:function(a,b){var c,d,e,f=this,g=f.getRng(),h=f.win.document;if(b=b||{format:"html"},b.set=!0,a=b.content=a,b.no_events||f.onBeforeSetContent.dispatch(f,b),a=b.content,g.insertNode){a+='<span id="__caret">_</span>',g.startContainer==h&&g.endContainer==h?h.body.innerHTML=a:(g.deleteContents(),0===h.body.childNodes.length?h.body.innerHTML=a:g.createContextualFragment?g.insertNode(g.createContextualFragment(a)):(d=h.createDocumentFragment(),e=h.createElement("div"),d.appendChild(e),e.outerHTML=a,g.insertNode(d))),c=f.dom.get("__caret"),g=h.createRange(),g.setStartBefore(c),g.setEndBefore(c),f.setRng(g),f.dom.remove("__caret");try{f.setRng(g)}catch(i){}}else g.item&&(h.execCommand("Delete",!1,null),g=f.getRng()),/^\s+/.test(a)?(g.pasteHTML('<span id="__mce_tmp">_</span>'+a),f.dom.remove("__mce_tmp")):g.pasteHTML(a);b.no_events||f.onSetContent.dispatch(f,b)},getStart:function(){var a,b,c,d,e=this,f=e.getRng();if(f.duplicate||f.item){if(f.item)return f.item(0);for(c=f.duplicate(),c.collapse(1),a=c.parentElement(),a.ownerDocument!==e.dom.doc&&(a=e.dom.getRoot()),b=d=f.parentElement();d=d.parentNode;)if(d==a){a=b;break}return a&&"BODY"==a.nodeName?a.firstChild||a:a}return a=f.startContainer,1==a.nodeType&&a.hasChildNodes()&&(a=a.childNodes[Math.min(a.childNodes.length-1,f.startOffset)]),a&&3==a.nodeType?a.parentNode:a},getEnd:function(){var a,b,c=this,d=c.getRng();return d.duplicate||d.item?d.item?d.item(0):(d=d.duplicate(),d.collapse(0),a=d.parentElement(),a.ownerDocument!==c.dom.doc&&(a=c.dom.getRoot()),a&&"BODY"==a.nodeName?a.lastChild||a:a):(a=d.endContainer,b=d.endOffset,1==a.nodeType&&a.hasChildNodes()&&(a=a.childNodes[b>0?b-1:b]),a&&3==a.nodeType?a.parentNode:a)},getBookmark:function(a,b){function c(a,b){var c=0;return d(o.select(a),function(a,d){a==b&&(c=d)}),c}function e(a){function b(b){var c,d,e,f=b?"start":"end";c=a[f+"Container"],d=a[f+"Offset"],1==c.nodeType&&"TR"==c.nodeName&&(e=c.childNodes,c=e[Math.min(b?d:d-1,e.length-1)],c&&(d=b?0:c.childNodes.length,a["set"+(b?"Start":"End")](c,d)))}return b(!0),b(),a}function f(){function a(a,c){var e,f,g=a[c?"startContainer":"endContainer"],h=a[c?"startOffset":"endOffset"],i=[],j=0;if(3==g.nodeType){if(b)for(e=g.previousSibling;e&&3==e.nodeType;e=e.previousSibling)h+=e.nodeValue.length;i.push(h)}else f=g.childNodes,h>=f.length&&f.length&&(j=1,h=Math.max(0,f.length-1)),i.push(n.dom.nodeIndex(f[h],b)+j);for(;g&&g!=d;g=g.parentNode)i.push(n.dom.nodeIndex(g,b));return i}var c=n.getRng(!0),d=o.getRoot(),e={};return e.start=a(c,!0),n.isCollapsed()||(e.end=a(c)),e}var g,h,i,j,k,l,m,n=this,o=n.dom,p="\ufeff";if(2==a)return n.tridentSel?n.tridentSel.getBookmark(a):f();if(a)return g=n.getRng(),g.setStart&&(g={startContainer:g.startContainer,startOffset:g.startOffset,endContainer:g.endContainer,endOffset:g.endOffset}),{rng:g};if(g=n.getRng(),i=o.uniqueId(),j=tinyMCE.activeEditor.selection.isCollapsed(),m="overflow:hidden;line-height:0px",g.duplicate||g.item){if(g.item)return l=g.item(0),k=l.nodeName,{name:k,index:c(k,l)};h=g.duplicate();try{g.collapse(),g.pasteHTML('<span data-mce-type="bookmark" id="'+i+'_start" style="'+m+'">'+p+"</span>"),j||(h.collapse(!1),g.moveToElementText(h.parentElement()),0===g.compareEndPoints("StartToEnd",h)&&h.move("character",-1),h.pasteHTML('<span data-mce-type="bookmark" id="'+i+'_end" style="'+m+'">'+p+"</span>"))}catch(q){return null}}else{if(l=n.getNode(),k=l.nodeName,"IMG"==k&&""==g.toString())return{name:k,index:c(k,l)};h=e(g.cloneRange()),j||(h.collapse(!1),h.insertNode(o.create("span",{"data-mce-type":"bookmark",id:i+"_end",style:m},p))),g=e(g),g.collapse(!0),g.insertNode(o.create("span",{"data-mce-type":"bookmark",id:i+"_start",style:m},p))}return n.moveToBookmark({id:i,keep:1}),{id:i}},moveToBookmark:function(b){function e(a){var c,d,e,f,g=b[a?"start":"end"];if(g){for(e=g[0],d=j,c=g.length-1;c>=1;c--){if(f=d.childNodes,g[c]>f.length-1)return;d=f[g[c]]}3===d.nodeType&&(e=Math.min(g[0],d.nodeValue.length)),1===d.nodeType&&(e=Math.min(g[0],d.childNodes.length)),a?h.setStart(d,e):h.setEnd(d,e)}return!0}function f(c){var e,f,g,h,i=p.get(b.id+"_"+c),j=b.keep;if(i&&(e=i.parentNode,"start"==c?(j?(e=i.firstChild,f=1):f=p.nodeIndex(i),k=l=e,m=n=f):(j?(e=i.firstChild,f=1):f=p.nodeIndex(i),l=e,n=f),!j)){for(h=i.previousSibling,g=i.nextSibling,d(a.grep(i.childNodes),function(a){3==a.nodeType&&(a.nodeValue=a.nodeValue.replace(/\uFEFF/g,""))});i=p.get(b.id+"_"+c);)p.remove(i,1);h&&g&&h.nodeType==g.nodeType&&3==h.nodeType&&!a.isOpera&&(f=h.nodeValue.length,h.appendData(g.nodeValue),p.remove(g),"start"==c?(k=l=h,m=n=f):(l=h,n=f))}}function g(a){return!p.isBlock(a)||a.innerHTML||c||(a.innerHTML='<br data-mce-bogus="1" />'),a}var h,i,j,k,l,m,n,o=this,p=o.dom;if(b)if(b.start){if(h=p.createRng(),j=p.getRoot(),o.tridentSel)return o.tridentSel.moveToBookmark(b);e(!0)&&e()&&o.setRng(h)}else if(b.id)f("start"),f("end"),k&&(h=p.createRng(),h.setStart(g(k),m),h.setEnd(g(l),n),o.setRng(h));else if(b.name)o.select(p.select(b.name)[b.index]);else if(b.rng){if(h=b.rng,h.startContainer){i=o.dom.createRng();try{i.setStart(h.startContainer,h.startOffset),i.setEnd(h.endContainer,h.endOffset)}catch(q){}h=i}o.setRng(h)}},select:function(b,c){function d(b,c){var d=new e(b,b);do{if(3==b.nodeType&&0!==a.trim(b.nodeValue).length)return void(c?i.setStart(b,0):i.setEnd(b,b.nodeValue.length));if("BR"==b.nodeName)return void(c?i.setStartBefore(b):i.setEndBefore(b))}while(b=c?d.next():d.prev())}var f,g=this,h=g.dom,i=h.createRng();return b&&(f=h.nodeIndex(b),i.setStart(b.parentNode,f),i.setEnd(b.parentNode,f+1),c&&(d(b,1),d(b)),g.setRng(i)),b},isCollapsed:function(){var a=this,b=a.getRng(),c=a.getSel();return!b||b.item?!1:b.compareEndPoints?0===b.compareEndPoints("StartToEnd",b):!c||b.collapsed},collapse:function(a){var b,c=this,d=c.getRng();d.item&&(b=d.item(0),d=c.win.document.body.createTextRange(),d.moveToElementText(b)),d.collapse(!!a),c.setRng(d)},getSel:function(){var a=this.win;return a.getSelection?a.getSelection():a.document.selection},getRng:function(b){var c,d,e,f=this,g=f.win||f.editor.getWin(),h=g.document;if(b&&f.tridentSel)return f.tridentSel.getRangeAt(0);try{(c=f.getSel())&&(d=c.rangeCount>0?c.getRangeAt(0):c.createRange?c.createRange():h.createRange())}catch(i){}return a.isIE&&!a.isIE11&&d&&d.setStart&&h.selection.createRange().item&&(e=h.selection.createRange().item(0),d=h.createRange(),d.setStartBefore(e),d.setEndAfter(e)),d||(d=h.createRange?h.createRange():h.body.createTextRange()),d.setStart&&9===d.startContainer.nodeType&&d.collapsed&&(e=f.dom.getRoot(),d.setStart(e,0),d.setEnd(e,0)),f.selectedRange&&f.explicitRange&&(0===d.compareBoundaryPoints(d.START_TO_START,f.selectedRange)&&0===d.compareBoundaryPoints(d.END_TO_END,f.selectedRange)?d=f.explicitRange:(f.selectedRange=null,f.explicitRange=null)),d},setRng:function(a,b){var c,d=this;if(d.tridentSel){if(a.cloneRange)try{return void d.tridentSel.addRange(a)}catch(e){}try{a.select()}catch(e){}}else if(c=d.getSel()){d.explicitRange=a;try{c.removeAllRanges()}catch(e){}c.addRange(a),b===!1&&c.extend&&(c.collapse(a.endContainer,a.endOffset),c.extend(a.startContainer,a.startOffset)),d.selectedRange=c.rangeCount>0?c.getRangeAt(0):null}},setNode:function(a){var b=this;return b.setContent(b.dom.getOuterHTML(a)),a},getNode:function(){function a(a,b){for(var c=a;a&&3===a.nodeType&&0===a.length;)a=b?a.nextSibling:a.previousSibling;return a||c}var b,c=this,d=c.getRng(),e=(c.getSel(),d.startContainer),f=d.endContainer;return d?d.setStart?(b=d.commonAncestorContainer,!d.collapsed&&(d.startContainer==d.endContainer&&d.endOffset-d.startOffset<2&&d.startContainer.hasChildNodes()&&(b=d.startContainer.childNodes[d.startOffset]),3===e.nodeType&&3===f.nodeType&&(e=e.length===d.startOffset?a(e.nextSibling,!0):e.parentNode,f=0===d.endOffset?a(f.previousSibling,!1):f.parentNode,e&&e===f))?e:b&&3==b.nodeType?b.parentNode:b):d.item?d.item(0):d.parentElement():c.dom.getRoot()},getSelectedBlocks:function(a,b){var c,d,f,g=this,h=g.dom,i=[];if(c=h.getParent(a||g.getStart(),h.isBlock),d=h.getParent(b||g.getEnd(),h.isBlock),c&&i.push(c),c&&d&&c!=d){f=c;for(var j=new e(c,h.getRoot());(f=j.next())&&f!=d;)h.isBlock(f)&&i.push(f)}return d&&c!=d&&i.push(d),i},isForward:function(){var a,b,c=this.dom,d=this.getSel();if(!d||null==d.anchorNode||null==d.focusNode)return!0;try{return a=c.createRng(),a.setStart(d.anchorNode,d.anchorOffset),a.collapse(!0),b=c.createRng(),b.setStart(d.focusNode,d.focusOffset),b.collapse(!0),a.compareBoundaryPoints(a.START_TO_START,b)<=0}catch(e){return!0}},normalize:function(){function b(a){function b(a,b){for(var c=new e(a,o.getParent(a.parentNode,o.isBlock)||p);a=c[b?"prev":"next"]();)if("BR"===a.nodeName)return!0}function h(a,b){var c,g;for(b=b||i,c=new e(b,o.getParent(b.parentNode,o.isBlock)||p);l=c[a?"prev":"next"]();){if(3===l.nodeType&&l.nodeValue.length>0)return i=l,j=a?l.nodeValue.length:0,void(d=!0);if(o.isBlock(l)||m[l.nodeName.toLowerCase()])return;g=l}f&&g&&(i=g,d=!0,j=0)}var i,j,k,l,m,n,o=g.dom,p=o.getRoot();if(i=c[(a?"start":"end")+"Container"],j=c[(a?"start":"end")+"Offset"],m=o.schema.getNonEmptyElements(),9===i.nodeType&&(i=o.getRoot(),j=0),i===p){if(a&&(l=i.childNodes[j>0?j-1:0],l&&(n=l.nodeName.toLowerCase(),m[l.nodeName]||"TABLE"==l.nodeName)))return;if(i.hasChildNodes()&&(i=i.childNodes[Math.min(!a&&j>0?j-1:j,i.childNodes.length-1)],j=0,i.hasChildNodes()&&!/TABLE/.test(i.nodeName))){l=i,k=new e(i,p);do{if(3===l.nodeType&&l.nodeValue.length>0){j=a?0:l.nodeValue.length,i=l,d=!0;break}if(m[l.nodeName.toLowerCase()]){j=o.nodeIndex(l),i=l.parentNode,"IMG"!=l.nodeName||a||j++,d=!0;break}}while(l=a?k.next():k.prev())}}f&&1===i.nodeType&&(l=i.childNodes[j],!l||"BR"!==l.nodeName||b(l)||b(l,!0)||h(!0,i.childNodes[j])),a&&!f&&3===i.nodeType&&j===i.nodeValue.length&&h(!1),d&&c["set"+(a?"Start":"End")](i,j)}var c,d,f,g=this;a.isIE||(c=g.getRng(),f=c.collapsed,b(!0),f||b(),d&&(f&&c.collapse(!0),g.setRng(c,g.isForward())))},selectorChanged:function(a,b){var c,e=this;return e.selectorChangedData||(e.selectorChangedData={},c={},e.editor.onNodeChange.addToTop(function(a,b,f){var g=e.dom,h=g.getParents(f,null,g.getRoot()),i={};d(e.selectorChangedData,function(a,b){d(h,function(e){return g.is(e,b)?(c[b]||(d(a,function(a){a(!0,{node:e,selector:b,parents:h})}),c[b]=a),i[b]=a,!1):void 0})}),d(c,function(a,b){i[b]||(delete c[b],d(a,function(a){a(!1,{node:f,selector:b,parents:h})}))})})),e.selectorChangedData[a]||(e.selectorChangedData[a]=[]),e.selectorChangedData[a].push(b),e},scrollIntoView:function(a){var b,c,d=this,e=d.dom;c=e.getViewPort(d.editor.getWin()),b=e.getPos(a).y,(b<c.y||b+25>c.y+c.h)&&d.editor.getWin().scrollTo(0,b<c.y?b:b-c.h+25)},destroy:function(b){var c=this;c.win=null,b||a.removeUnload(c.destroy)},_fixIESelection:function(){function a(a,b){var c=i.createTextRange();try{c.moveToPoint(a,b)}catch(d){c=null}return c}function b(b){var d;return b.button?(d=a(b.x,b.y),d&&(d.compareEndPoints("StartToStart",e)>0?d.setEndPoint("StartToStart",e):d.setEndPoint("EndToEnd",e),d.select())):c(),!1}function c(){var a=h.selection.createRange();e&&!a.item&&0===a.compareEndPoints("StartToEnd",a)&&e.select(),g.unbind(h,"mouseup",c),g.unbind(h,"mousemove",b),e=d=0}var d,e,f,g=this.dom,h=g.doc,i=h.body;h.documentElement.unselectable=!0,g.bind(h,["mousedown","contextmenu"],function(i){if("HTML"===i.target.nodeName){if(d&&c(),f=h.documentElement,f.scrollHeight>f.clientHeight)return;return d=1,e=a(i.x,i.y),e&&(g.bind(h,"mouseup",c),g.bind(h,"mousemove",b),g.win.focus(),e.select()),!1}})}})}(tinymce),function(a){a.dom.Serializer=function(b,c,d){var e,f,g,h=a.isIE,i=a.each;return b.apply_source_formatting||(b.indent=!1),c=c||a.DOM,d=d||new a.html.Schema(b),b.entity_encoding=b.entity_encoding||"named",b.remove_trailing_brs="remove_trailing_brs"in b?b.remove_trailing_brs:!0,e=new a.util.Dispatcher(self),f=new a.util.Dispatcher(self),g=new a.html.DomParser(b,d),g.addAttributeFilter("src,href,style",function(a,d){for(var e,f,g,h=a.length,i="data-mce-"+d,j=b.url_converter,k=b.url_converter_scope;h--;)e=a[h],f=e.attributes.map[i],f!==g?(e.attr(d,f.length>0?f:null),e.attr(i,null)):(f=e.attributes.map[d],"style"===d?f=c.serializeStyle(c.parseStyle(f),e.name):j&&(f=j.call(k,f,d,e.name)),e.attr(d,f.length>0?f:null))}),g.addAttributeFilter("class",function(a,b){for(var c,d,e=a.length;e--;)c=a[e],d=c.attr("class").replace(/(?:^|\s)mce(Item\w+|Selected)(?!\S)/g,""),c.attr("class",d.length>0?d:null)}),g.addAttributeFilter("data-mce-type",function(a,b,c){for(var d,e=a.length;e--;)d=a[e],"bookmark"!==d.attributes.map["data-mce-type"]||c.cleanup||d.remove()}),g.addAttributeFilter("data-mce-expando",function(a,b,c){for(var d=a.length;d--;)a[d].attr(b,null)}),g.addNodeFilter("noscript",function(b){for(var c,d=b.length;d--;)c=b[d].firstChild,c&&(c.value=a.html.Entities.decode(c.value))}),g.addNodeFilter("script,style",function(a,b){function c(a){return a.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var d,e,f=a.length;f--;)d=a[f],e=d.firstChild?d.firstChild.value:"","script"===b?(d.attr("type",(d.attr("type")||"text/javascript").replace(/^mce\-/,"")),e.length>0&&(d.firstChild.value="// <![CDATA[\n"+c(e)+"\n// ]]>")):e.length>0&&(d.firstChild.value="<!--\n"+c(e)+"\n-->")}),g.addNodeFilter("#comment",function(a,b){for(var c,d=a.length;d--;)c=a[d],0===c.value.indexOf("[CDATA[")?(c.name="#cdata",c.type=4,c.value=c.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===c.value.indexOf("mce:protected ")&&(c.name="#text",c.type=3,c.raw=!0,c.value=unescape(c.value).substr(14))}),g.addNodeFilter("xml:namespace,input",function(a,b){for(var c,d=a.length;d--;)c=a[d],7===c.type?c.remove():1===c.type&&("input"!==b||"type"in c.attributes.map||c.attr("type","text"))}),b.fix_list_elements&&g.addNodeFilter("ul,ol",function(a,b){for(var c,d,e=a.length;e--;)c=a[e],d=c.parent,"ul"!==d.name&&"ol"!==d.name||c.prev&&"li"===c.prev.name&&c.prev.append(c)}),g.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(a,b){for(var c=a.length;c--;)a[c].attr(b,null)}),{schema:d,addNodeFilter:g.addNodeFilter,addAttributeFilter:g.addAttributeFilter,onPreProcess:e,onPostProcess:f,serialize:function(j,k){var l,m,n,o,p;return h&&c.select("script,style,select,map").length>0?(p=j.innerHTML,j=j.cloneNode(!1),c.setHTML(j,p)):j=j.cloneNode(!0),l=j.ownerDocument.implementation,l.createHTMLDocument&&(m=l.createHTMLDocument(""),i("BODY"==j.nodeName?j.childNodes:[j],function(a){m.body.appendChild(m.importNode(a,!0))}),j="BODY"!=j.nodeName?m.body.firstChild:m.body,n=c.doc,c.doc=m),k=k||{},k.format=k.format||"html",k.no_events||(k.node=j,e.dispatch(self,k)),o=new a.html.Serializer(b,d),k.content=o.serialize(g.parse(a.trim(k.getInner?j.innerHTML:c.getOuterHTML(j)),k)),k.cleanup||(k.content=k.content.replace(/\uFEFF/g,"")),k.no_events||f.dispatch(self,k),n&&(c.doc=n),k.node=null,k.content},addRules:function(a){d.addValidElements(a)},setRules:function(a){d.setValidElements(a)}}}}(tinymce),function(a){a.dom.ScriptLoader=function(b){function c(b,c){function d(){j.remove(i),f&&(f.onreadystatechange=f.onload=f=null),c()}function e(){"undefined"!=typeof console&&console.log}var f,g,h,i,j=a.DOM;return i=j.uniqueId(),a.isIE6&&(g=new a.util.URI(b),h=location,g.host==h.hostname&&g.port==h.port&&g.protocol+":"==h.protocol&&"file"!=g.protocol.toLowerCase())?void a.util.XHR.send({url:a._addVer(g.getURI()),success:function(a){var b=j.create("script",{type:"text/javascript"});b.text=a,document.getElementsByTagName("head")[0].appendChild(b),j.remove(b),d()},error:e}):(f=document.createElement("script"),f.id=i,f.type="text/javascript",f.src=a._addVer(b),a.isIE&&!a.isIE11||(f.onload=d),f.onerror=e,a.isOpera||(f.onreadystatechange=function(){var a=f.readyState;"complete"!=a&&"loaded"!=a||d()}),void(document.getElementsByTagName("head")[0]||document.body).appendChild(f))}var d,e=0,f=1,g=2,h={},i=[],j={},k=[],l=0;this.isDone=function(a){return h[a]==g},this.markDone=function(a){h[a]=g},this.add=this.load=function(a,b,c){var f=h[a];f==d&&(i.push(a),h[a]=e),b&&(j[a]||(j[a]=[]),j[a].push({func:b,scope:c||this}))},this.loadQueue=function(a,b){this.loadScripts(i,a,b)},this.loadScripts=function(b,e,i){function m(b){a.each(j[b],function(a){a.func.call(a.scope)}),j[b]=d}var n;k.push({func:e,scope:i||this}),(n=function(){var d=a.grep(b);b.length=0,a.each(d,function(a){return h[a]==g?void m(a):void(h[a]!=f&&(h[a]=f,l++,c(a,function(){h[a]=g,l--,m(a),n()})))}),l||(a.each(k,function(a){a.func.call(a.scope)}),k.length=0)})()}},a.ScriptLoader=new a.dom.ScriptLoader}(tinymce),function(a){a.dom.RangeUtils=function(b){this.walk=function(c,d){function e(a){var b;return b=a[0],3===b.nodeType&&b===p&&q>=b.nodeValue.length&&a.splice(0,1),b=a[a.length-1],0===s&&a.length>0&&b===r&&3===b.nodeType&&a.splice(a.length-1,1),a}function f(a,b,c){for(var d=[];a&&a!=c;a=a[b])d.push(a);return d}function g(a,b){do{if(a.parentNode==b)return a;a=a.parentNode}while(a)}function h(a,b,c){var g=c?"nextSibling":"previousSibling";for(l=a,m=l.parentNode;l&&l!=b;l=m)m=l.parentNode,n=f(l==a?l:l[g],g),n.length&&(c||n.reverse(),d(e(n)))}var i,j,k,l,m,n,o,p=c.startContainer,q=c.startOffset,r=c.endContainer,s=c.endOffset;if(o=b.select("td.mceSelected,th.mceSelected"),o.length>0)return void a.each(o,function(a){d([a])});if(1==p.nodeType&&p.hasChildNodes()&&(p=p.childNodes[q]),1==r.nodeType&&r.hasChildNodes()&&(r=r.childNodes[Math.min(q==s?s:s-1,r.childNodes.length-1)]),p==r)return d(e([p]));for(i=b.findCommonAncestor(p,r),l=p;l;l=l.parentNode){if(l===r)return h(p,i,!0);if(l===i)break}for(l=r;l;l=l.parentNode){if(l===p)return h(r,i);if(l===i)break}j=g(p,i)||p,k=g(r,i)||r,h(p,j,!0),n=f(j==p?j:j.nextSibling,"nextSibling",k==r?k.nextSibling:k),n.length&&d(e(n)),h(r,k)},this.split=function(a){function b(a,b){return a.splitText(b)}var c=a.startContainer,d=a.startOffset,e=a.endContainer,f=a.endOffset;return c==e&&3==c.nodeType?d>0&&d<c.nodeValue.length&&(e=b(c,d),c=e.previousSibling,f>d?(f-=d,c=e=b(e,f).previousSibling,f=e.nodeValue.length,d=0):f=0):(3==c.nodeType&&d>0&&d<c.nodeValue.length&&(c=b(c,d),d=0),3==e.nodeType&&f>0&&f<e.nodeValue.length&&(e=b(e,f).previousSibling,f=e.nodeValue.length)),{startContainer:c,startOffset:d,endContainer:e,endOffset:f}}},a.dom.RangeUtils.compareRanges=function(a,b){if(a&&b){if(!a.item&&!a.duplicate)return a.startContainer==b.startContainer&&a.startOffset==b.startOffset;if(a.item&&b.item&&a.item(0)===b.item(0))return!0;if(a.isEqual&&b.isEqual&&b.isEqual(a))return!0}return!1}}(tinymce),function(a){var b=a.dom.Event,c=a.each;a.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(d,e){var f,g,h,i,j,k=this,l=d.root,m=d.items,n=d.enableUpDown,o=d.enableLeftRight||!d.enableUpDown,p=d.excludeFromTabOrder;e=e||a.DOM,f=function(a){j=a.target.id},g=function(a){e.setAttrib(a.target.id,"tabindex","-1")},i=function(a){var b=e.get(j);e.setAttrib(b,"tabindex","0"),b.focus()},k.focus=function(){e.get(j).focus()},k.destroy=function(){c(m,function(a){var b=e.get(a.id);e.unbind(b,"focus",f),e.unbind(b,"blur",g)});var a=e.get(l);e.unbind(a,"focus",i),e.unbind(a,"keydown",h),m=e=l=k.focus=f=g=h=i=null,k.destroy=function(){}},k.moveFocus=function(a,f){var g,h=-1;k.controls;j&&(c(m,function(a,b){return a.id===j?(h=b,!1):void 0}),h+=a,0>h?h=m.length-1:h>=m.length&&(h=0),g=m[h],e.setAttrib(j,"tabindex","-1"),e.setAttrib(g.id,"tabindex","0"),e.get(g.id).focus(),d.actOnFocus&&d.onAction(g.id),f&&b.cancel(f))},h=function(a){var c=37,e=39,f=38,g=40,h=27,i=14,l=13,m=32;switch(a.keyCode){case c:o&&k.moveFocus(-1),b.cancel(a);break;case e:o&&k.moveFocus(1),b.cancel(a);break;case f:n&&k.moveFocus(-1),b.cancel(a);break;case g:n&&k.moveFocus(1),b.cancel(a);break;case h:d.onCancel&&(d.onCancel(),b.cancel(a));break;case i:case l:case m:d.onAction&&(d.onAction(j),b.cancel(a))}},c(m,function(a,b){var c,d;a.id||(a.id=e.uniqueId("_mce_item_")),d=e.get(a.id),p?(e.bind(d,"blur",g),c="-1"):c=0===b?"0":"-1",d.setAttribute("tabindex",c),e.bind(d,"focus",f)}),m[0]&&(j=m[0].id),e.setAttrib(l,"tabindex","-1");var q=e.get(l);e.bind(q,"focus",i),e.bind(q,"keydown",h)}})}(tinymce),function(a){var b=a.DOM,c=a.is;a.create("tinymce.ui.Control",{Control:function(b,c,d){this.id=b,this.settings=c=c||{},this.rendered=!1,this.onRender=new a.util.Dispatcher(this),this.classPrefix="",this.scope=c.scope||this,this.disabled=0,this.active=0,this.editor=d},setAriaProperty:function(a,c){var d=b.get(this.id+"_aria")||b.get(this.id);d&&b.setAttrib(d,"aria-"+a,!!c)},focus:function(){b.get(this.id).focus()},setDisabled:function(a){a!=this.disabled&&(this.setAriaProperty("disabled",a),this.setState("Disabled",a),this.setState("Enabled",!a),this.disabled=a)},isDisabled:function(){return this.disabled},setActive:function(a){a!=this.active&&(this.setState("Active",a),this.active=a,this.setAriaProperty("pressed",a))},isActive:function(){return this.active},setState:function(a,c){var d=b.get(this.id);a=this.classPrefix+a,c?b.addClass(d,a):b.removeClass(d,a)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(a){b.setHTML(a,this.renderHTML())},postRender:function(){var a,b=this;c(b.disabled)&&(a=b.disabled,b.disabled=-1,b.setDisabled(a)),c(b.active)&&(a=b.active,b.active=-1,b.setActive(a))},remove:function(){b.remove(this.id),this.destroy()},destroy:function(){a.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(a,b,c){this.parent(a,b,c),this.controls=[],this.lookup={}},add:function(a){return this.lookup[a.id]=a,this.controls.push(a),a},get:function(a){return this.lookup[a]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(a,b){this.parent(a,b),this.classPrefix="mceSeparator",this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}}),function(a){var b=a.is;a.DOM,a.each,a.walk;a.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(a,b){this.parent(a,b),this.classPrefix="mceMenuItem"},setSelected:function(a){this.setState("Selected",a),this.setAriaProperty("checked",!!a),this.selected=a},isSelected:function(){return this.selected},postRender:function(){var a=this;a.parent(),b(a.selected)&&a.setSelected(a.selected)}})}(tinymce),function(a){var b=(a.is,a.DOM),c=(a.each,a.walk);a.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(b,c){var d=this;d.parent(b,c),d.items={},d.collapsed=!1,d.menuCount=0,d.onAddItem=new a.util.Dispatcher(this)},expand:function(a){var b=this;a&&c(b,function(a){a.expand&&a.expand()},"items",b),b.collapsed=!1},collapse:function(a){var b=this;a&&c(b,function(a){a.collapse&&a.collapse()},"items",b),b.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(c){return c.settings||(c=new a.ui.MenuItem(c.id||b.uniqueId(),c)),this.onAddItem.dispatch(this,c),this.items[c.id]=c},addSeparator:function(){return this.add({separator:!0})},addMenu:function(a){return a.collapse||(a=this.createMenu(a)),this.menuCount++,this.add(a)},hasMenus:function(){return 0!==this.menuCount},remove:function(a){delete this.items[a.id]},removeAll:function(){var a=this;c(a,function(a){a.removeAll?a.removeAll():a.remove(),a.destroy()},"items",a),a.items={}},createMenu:function(c){var d=new a.ui.Menu(c.id||b.uniqueId(),c);return d.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),d}})}(tinymce),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.dom.Event,f=a.dom.Element;a.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(d,e){e=e||{},e.container=e.container||c.doc.body,e.offset_x=e.offset_x||0,e.offset_y=e.offset_y||0,e.vp_offset_x=e.vp_offset_x||0,e.vp_offset_y=e.vp_offset_y||0,b(e.icons)&&!e.icons&&(e["class"]+=" mceNoIcons"),this.parent(d,e),this.onShowMenu=new a.util.Dispatcher(this),this.onHideMenu=new a.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(b){var d,e=this,f=e.settings;return b.container=b.container||f.container,b.parent=e,b.constrain=b.constrain||f.constrain,b["class"]=b["class"]||f["class"],b.vp_offset_x=b.vp_offset_x||f.vp_offset_x,b.vp_offset_y=b.vp_offset_y||f.vp_offset_y,b.keyboard_focus=f.keyboard_focus,d=new a.ui.DropMenu(b.id||c.uniqueId(),b),d.onAddItem.add(e.onAddItem.dispatch,e.onAddItem),d},focus:function(){var a=this;a.keyboardNav&&a.keyboardNav.focus()},update:function(){var a,b,d=this,e=d.settings,f=c.get("menu_"+d.id+"_tbl"),g=c.get("menu_"+d.id+"_co");a=e.max_width?Math.min(f.offsetWidth,e.max_width):f.offsetWidth,b=e.max_height?Math.min(f.offsetHeight,e.max_height):f.offsetHeight,c.boxModel?d.element.setStyles({width:a,height:b}):d.element.setStyles({width:a+2,height:b+2}),e.max_width&&c.setStyle(g,"width",a),e.max_height&&(c.setStyle(g,"height",b),f.clientHeight<e.max_height&&c.setStyle(g,"overflow","hidden"))},showMenu:function(b,g,h){var i,j,k,l,m,n,o=this,p=o.settings,q=c.getViewPort(),r=2,s=o.classPrefix;o.collapse(1),o.isMenuVisible||(o.rendered?i=c.get("menu_"+o.id):(i=c.add(o.settings.container,o.renderNode()),d(o.items,function(a){a.postRender()}),o.element=new f("menu_"+o.id,{blocker:1,container:p.container})),a.isOpera||c.setStyles(i,{left:-65535,top:-65535}),c.show(i),o.update(),b+=p.offset_x||0,g+=p.offset_y||0,q.w-=4,q.h-=4,p.constrain&&(j=i.clientWidth-r,k=i.clientHeight-r,l=q.x+q.w,m=q.y+q.h,b+p.vp_offset_x+j>l&&(b=h?h-j:Math.max(0,l-p.vp_offset_x-j)),g+p.vp_offset_y+k>m&&(g=Math.max(0,m-p.vp_offset_y-k))),c.setStyles(i,{left:b,top:g}),o.element.update(),o.isMenuVisible=1,o.mouseClickFunc=e.add(i,"click",function(a){var b;if(a=a.target,a&&(a=c.getParent(a,"tr"))&&!c.hasClass(a,s+"ItemSub")){if(b=o.items[a.id],b.isDisabled())return;for(n=o;n;)n.hideMenu&&n.hideMenu(),n=n.settings.parent;return b.settings.onclick&&b.settings.onclick(a),!1}}),o.hasMenus()&&(o.mouseOverFunc=e.add(i,"mouseover",function(a){var b,d;if(a=a.target,a&&(a=c.getParent(a,"tr"))){if(b=o.items[a.id],o.lastMenu&&o.lastMenu.collapse(1),b.isDisabled())return;a&&c.hasClass(a,s+"ItemSub")&&(d=c.getRect(a),b.showMenu(d.x+d.w-r,d.y-r,d.x),o.lastMenu=b,c.addClass(c.get(b.id).firstChild,s+"ItemActive"))}})),e.add(i,"keydown",o._keyHandler,o),o.onShowMenu.dispatch(o),p.keyboard_focus&&o._setupKeyboardNav())},hideMenu:function(a){var b,d=this,f=c.get("menu_"+d.id);d.isMenuVisible&&(d.keyboardNav&&d.keyboardNav.destroy(),
e.remove(f,"mouseover",d.mouseOverFunc),e.remove(f,"click",d.mouseClickFunc),e.remove(f,"keydown",d._keyHandler),c.hide(f),d.isMenuVisible=0,a||d.collapse(1),d.element&&d.element.hide(),(b=c.get(d.id))&&c.removeClass(b.firstChild,d.classPrefix+"ItemActive"),d.onHideMenu.dispatch(d))},add:function(a){var b,d=this;return a=d.parent(a),d.isRendered&&(b=c.get("menu_"+d.id))&&d._add(c.select("tbody",b)[0],a),a},collapse:function(a){this.parent(a),this.hideMenu(1)},remove:function(a){return c.remove(a.id),this.destroy(),this.parent(a)},destroy:function(){var a=this,b=c.get("menu_"+a.id);a.keyboardNav&&a.keyboardNav.destroy(),e.remove(b,"mouseover",a.mouseOverFunc),e.remove(c.select("a",b),"focus",a.mouseOverFunc),e.remove(b,"click",a.mouseClickFunc),e.remove(b,"keydown",a._keyHandler),a.element&&a.element.remove(),c.remove(b)},renderNode:function(){var a,b,e,g,h=this,i=h.settings;return g=c.create("div",{role:"listbox",id:"menu_"+h.id,"class":i["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"}),h.settings.parent&&c.setAttrib(g,"aria-parent","menu_"+h.settings.parent.id),e=c.add(g,"div",{role:"presentation",id:"menu_"+h.id+"_co","class":h.classPrefix+(i["class"]?" "+i["class"]:"")}),h.element=new f("menu_"+h.id,{blocker:1,container:i.container}),i.menu_line&&c.add(e,"span",{"class":h.classPrefix+"Line"}),a=c.add(e,"table",{role:"presentation",id:"menu_"+h.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),b=c.add(a,"tbody"),d(h.items,function(a){h._add(b,a)}),h.rendered=!0,g},_setupKeyboardNav:function(){var b,d,e=this;b=c.get("menu_"+e.id),d=c.select("a[role=option]","menu_"+e.id),d.splice(0,0,b),e.keyboardNav=new a.ui.KeyboardNavigation({root:"menu_"+e.id,items:d,onCancel:function(){e.hideMenu()},enableUpDown:!0}),b.focus()},_keyHandler:function(a){var b=this;switch(a.keyCode){case 37:b.settings.parent&&(b.hideMenu(),b.settings.parent.focus(),e.cancel(a));break;case 39:b.mouseOverFunc&&b.mouseOverFunc(a)}},_add:function(a,b){var d,e,f,g,h,i=b.settings,j=this.classPrefix;return i.separator?(f=c.add(a,"tr",{id:b.id,"class":j+"ItemSeparator"}),c.add(f,"td",{"class":j+"ItemSeparator"}),void((d=f.previousSibling)&&c.addClass(d,"mceLast"))):(d=f=c.add(a,"tr",{id:b.id,"class":j+"Item "+j+"ItemEnabled"}),d=g=c.add(d,i.titleItem?"th":"td"),d=e=c.add(d,"a",{id:b.id+"_aria",role:i.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),i.parent&&(c.setAttrib(e,"aria-haspopup","true"),c.setAttrib(e,"aria-owns","menu_"+b.id)),c.addClass(g,i["class"]),h=c.add(d,"span",{"class":"mceIcon"+(i.icon?" mce_"+i.icon:"")}),i.icon_src&&c.add(h,"img",{src:i.icon_src}),d=c.add(d,i.element||"span",{"class":"mceText",title:b.settings.title},b.settings.title),b.settings.style&&("function"==typeof b.settings.style&&(b.settings.style=b.settings.style()),c.setAttrib(d,"style",b.settings.style)),1==a.childNodes.length&&c.addClass(f,"mceFirst"),(d=f.previousSibling)&&c.hasClass(d,j+"ItemSeparator")&&c.addClass(f,"mceFirst"),b.collapse&&c.addClass(f,j+"ItemSub"),(d=f.previousSibling)&&c.removeClass(d,"mceLast"),void c.addClass(f,"mceLast"))}})}(tinymce),function(a){var b=a.DOM;a.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(a,b,c){this.parent(a,b,c),this.classPrefix="mceButton"},renderHTML:function(){var a,c,d=this.classPrefix,e=this.settings;return c=b.encode(e.label||""),a='<a role="button" id="'+this.id+'" href="javascript:;" class="'+d+" "+d+"Enabled "+e["class"]+(c?" "+d+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+b.encode(e.title)+'">',a+=!e.image||this.editor&&this.editor.forcedHighContrastMode?'<span class="mceIcon '+e["class"]+'"></span>'+(c?'<span class="'+d+'Label">'+c+"</span>":""):'<span class="mceIcon '+e["class"]+'"><img class="mceIcon" src="'+e.image+'" alt="'+b.encode(e.title)+'" /></span>'+(c?'<span class="'+d+'Label">'+c+"</span>":""),a+='<label class="mceVoiceLabel mceIconOnly j-508-label" id="'+this.id+'_voice">'+e.title+"</span>",a+="</label>"},postRender:function(){var b,c=this,d=c.settings;a.isIE&&c.editor&&a.dom.Event.add(c.id,"mousedown",function(a){var d=c.editor.selection.getNode().nodeName;b="IMG"===d?c.editor.selection.getBookmark():null}),a.dom.Event.add(c.id,"click",function(e){return c.isDisabled()?void 0:(a.isIE&&c.editor&&null!==b&&c.editor.selection.moveToBookmark(b),d.onclick.call(d.scope,e))}),a.dom.Event.add(c.id,"keydown",function(b){return c.isDisabled()||b.keyCode!=a.VK.SPACEBAR?void 0:(a.dom.Event.cancel(b),d.onclick.call(d.scope,b))}),a.dom.Event.add(c.id,"keyup",function(b){return c.isDisabled()||b.keyCode!=a.VK.SPACEBAR?void 0:d.onclick.call(d.scope,b)})}})}(tinymce),function(a){var b,c=a.DOM,d=a.dom.Event,e=a.each,f=a.util.Dispatcher;a.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(b,c,d){var e=this;e.parent(b,c,d),e.items=[],e.onChange=new f(e),e.onPostRender=new f(e),e.onAdd=new f(e),e.onRenderMenu=new a.util.Dispatcher(this),e.classPrefix="mceListBox",e.marked={}},select:function(a){var c,d,f=this;return f.marked={},a==b?f.selectByIndex(-1):(d=a&&"function"==typeof a?a:function(b){return b==a},void(a!=f.selectedValue&&(e(f.items,function(a,b){return d(a.value)?(c=1,f.selectByIndex(b),!1):void 0}),c||f.selectByIndex(-1))))},selectByIndex:function(a){var b,d,e,f=this;f.marked={},a!=f.selectedIndex&&(b=c.get(f.id+"_text"),e=c.get(f.id+"_voiceDesc"),d=f.items[a],d?(f.selectedValue=d.value,f.selectedIndex=a,c.setHTML(b,c.encode(d.title)),c.setHTML(e,f.settings.title+" - "+d.title),c.removeClass(b,"mceTitle"),c.setAttrib(f.id,"aria-valuenow",d.title)):(c.setHTML(b,c.encode(f.settings.title)),c.setHTML(e,c.encode(f.settings.title)),c.addClass(b,"mceTitle"),f.selectedValue=f.selectedIndex=null,c.setAttrib(f.id,"aria-valuenow",f.settings.title)),b=0)},mark:function(a){this.marked[a]=!0},add:function(b,c,d){var e=this;d=d||{},d=a.extend(d,{title:b,value:c}),e.items.push(d),e.onAdd.dispatch(e,d)},getLength:function(){return this.items.length},renderHTML:function(){var a="",b=this,d=b.settings,e=b.classPrefix;return a='<span role="listbox" aria-haspopup="true" aria-labelledby="'+b.id+'_voiceDesc" aria-describedby="'+b.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+b.id+'" cellpadding="0" cellspacing="0" class="'+e+" "+e+"Enabled"+(d["class"]?" "+d["class"]:"")+'"><tbody><tr>',a+="<td>"+c.createHTML("span",{id:b.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},b.settings.title),a+=c.createHTML("a",{id:b.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},c.encode(b.settings.title))+"</td>",a+="<td>"+c.createHTML("a",{id:b.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</td>",a+="</tr></tbody></table></span>"},showMenu:function(){var b,f,g=this,h=c.get(this.id);if(!g.isDisabled()&&0!==g.items.length){if(g.menu&&g.menu.isMenuVisible)return g.hideMenu();g.isMenuRendered||(g.renderMenu(),g.isMenuRendered=!0),b=c.getPos(h),f=g.menu,f.settings.offset_x=b.x,f.settings.offset_y=b.y,f.settings.keyboard_focus=!a.isOpera,e(g.items,function(a){f.items[a.id]&&f.items[a.id].setSelected(0)}),e(g.items,function(a){f.items[a.id]&&g.marked[a.value]&&f.items[a.id].setSelected(1),a.value===g.selectedValue&&f.items[a.id].setSelected(1)}),f.showMenu(0,h.clientHeight),d.add(c.doc,"mousedown",g.hideMenu,g),c.addClass(g.id,g.classPrefix+"Selected")}},hideMenu:function(a){var b=this;if(b.menu&&b.menu.isMenuVisible){if(c.removeClass(b.id,b.classPrefix+"Selected"),a&&"mousedown"==a.type&&(a.target.id==b.id+"_text"||a.target.id==b.id+"_open"))return;a&&c.getParent(a.target,".mceMenu")||(c.removeClass(b.id,b.classPrefix+"Selected"),d.remove(c.doc,"mousedown",b.hideMenu,b),b.menu.hideMenu())}},renderMenu:function(){var a,d=this;a=d.settings.control_manager.createDropMenu(d.id+"_menu",{menu_line:1,"class":d.classPrefix+"Menu mceNoIcons",max_width:250,max_height:150}),a.onHideMenu.add(function(){d.hideMenu(),d.focus()}),a.add({title:d.settings.title,"class":"mceMenuItemTitle",onclick:function(){d.settings.onselect("")!==!1&&d.select("")}}),e(d.items,function(e){e.value===b?a.add({title:e.title,role:"option","class":"mceMenuItemTitle",onclick:function(){d.settings.onselect("")!==!1&&d.select("")}}):(e.id=c.uniqueId(),e.role="option",e.onclick=function(){d.settings.onselect(e.value)!==!1&&d.select(e.value)},a.add(e))}),d.onRenderMenu.dispatch(d,a),d.menu=a},postRender:function(){var b=this,e=b.classPrefix;d.add(b.id,"click",b.showMenu,b),d.add(b.id,"keydown",function(a){32==a.keyCode&&(b.showMenu(a),d.cancel(a))}),d.add(b.id,"focus",function(){b._focused||(b.keyDownHandler=d.add(b.id,"keydown",function(a){40==a.keyCode&&(b.showMenu(),d.cancel(a))}),b.keyPressHandler=d.add(b.id,"keypress",function(a){var c;13==a.keyCode&&(c=b.selectedValue,b.selectedValue=null,d.cancel(a),b.settings.onselect(c))})),b._focused=1}),d.add(b.id,"blur",function(){d.remove(b.id,"keydown",b.keyDownHandler),d.remove(b.id,"keypress",b.keyPressHandler),b._focused=0}),!a.isIE6&&c.boxModel||(d.add(b.id,"mouseover",function(){c.hasClass(b.id,e+"Disabled")||c.addClass(b.id,e+"Hover")}),d.add(b.id,"mouseout",function(){c.hasClass(b.id,e+"Disabled")||c.removeClass(b.id,e+"Hover")})),b.onPostRender.dispatch(b,c.get(b.id))},destroy:function(){this.parent(),d.clear(this.id+"_text"),d.clear(this.id+"_open")}})}(tinymce),function(a){var b,c=a.DOM,d=a.dom.Event,e=a.each;a.util.Dispatcher;a.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(a,b){this.parent(a,b),this.classPrefix="mceNativeListBox"},setDisabled:function(a){c.get(this.id).disabled=a,this.setAriaProperty("disabled",a)},isDisabled:function(){return c.get(this.id).disabled},select:function(a){var c,d,f=this;return a==b?f.selectByIndex(-1):(d=a&&"function"==typeof a?a:function(b){return b==a},void(a!=f.selectedValue&&(e(f.items,function(a,b){return d(a.value)?(c=1,f.selectByIndex(b),!1):void 0}),c||f.selectByIndex(-1))))},selectByIndex:function(a){c.get(this.id).selectedIndex=a+1,this.selectedValue=this.items[a]?this.items[a].value:null},add:function(a,b,d){var e,f=this;d=d||{},d.value=b,f.isRendered()&&c.add(c.get(this.id),"option",d,a),e={title:a,value:b,attribs:d},f.items.push(e),f.onAdd.dispatch(f,e)},getLength:function(){return this.items.length},renderHTML:function(){var a,b=this;return a=c.createHTML("option",{value:""},"-- "+b.settings.title+" --"),e(b.items,function(b){a+=c.createHTML("option",{value:b.value},b.title)}),a=c.createHTML("select",{id:b.id,"class":"mceNativeListBox","aria-labelledby":b.id+"_aria"},a),a+=c.createHTML("span",{id:b.id+"_aria",style:"display: none"},b.settings.title)},postRender:function(){function a(a){var b=e.items[a.target.selectedIndex-1];b&&(b=b.value)&&(e.onChange.dispatch(e,b),e.settings.onselect&&e.settings.onselect(b))}var b,e=this,f=!0;e.rendered=!0,d.add(e.id,"change",a),d.add(e.id,"keydown",function(c){var g,h=38,i=40,j=13,k=32;return d.remove(e.id,"change",b),f=!1,g=d.add(e.id,"blur",function(){f||(f=!0,d.add(e.id,"change",a),d.remove(e.id,"blur",g))}),c.keyCode==j||c.keyCode==k?(a(c),d.cancel(c)):void(c.keyCode!=i&&c.keyCode!=h||c.stopImmediatePropagation())}),e.onPostRender.dispatch(e,c.get(e.id))}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event;a.each;a.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(c,d,e){this.parent(c,d,e),this.onRenderMenu=new a.util.Dispatcher(this),d.menu_container=d.menu_container||b.doc.body},showMenu:function(){var a,d,e,f=this,g=b.get(f.id);if(!f.isDisabled()){if(f.isMenuRendered||(f.renderMenu(),f.isMenuRendered=!0),f.isMenuVisible)return f.hideMenu();a=b.getPos(f.settings.menu_container),d=b.getPos(g),e=f.menu,e.settings.offset_x=d.x,e.settings.offset_y=d.y,e.settings.vp_offset_x=d.x,e.settings.vp_offset_y=d.y,e.settings.keyboard_focus=f._focused,e.showMenu(0,g.firstChild.clientHeight),c.add(b.doc,"mousedown",f.hideMenu,f),f.setState("Selected",1),f.isMenuVisible=1}},renderMenu:function(){var a,b=this;a=b.settings.control_manager.createDropMenu(b.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:b.settings.icons}),a.onHideMenu.add(function(){b.hideMenu(),b.focus()}),b.onRenderMenu.dispatch(b,a),b.menu=a},hideMenu:function(a){var d=this;a&&"mousedown"==a.type&&b.getParent(a.target,function(a){return a.id===d.id||a.id===d.id+"_open"})||(a&&b.getParent(a.target,".mceMenu")||(d.setState("Selected",0),c.remove(b.doc,"mousedown",d.hideMenu,d),d.menu&&d.menu.hideMenu()),d.isMenuVisible=0)},postRender:function(){var a=this,b=a.settings;c.add(a.id,"click",function(){a.isDisabled()||(b.onclick&&b.onclick(a.value),a.showMenu())})}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event;a.each;a.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(a,b,c){this.parent(a,b,c),this.classPrefix="mceSplitButton"},renderHTML:function(){var a,c,d=this,e=d.settings;return a="<tbody><tr>",c=e.image?b.createHTML("img ",{src:e.image,role:"presentation","class":"mceAction "+e["class"]}):b.createHTML("span",{"class":"mceAction "+e["class"]},""),c+=b.createHTML("label",{"class":"mceVoiceLabel mceIconOnly j-508-label",id:d.id+"_voice"},e.title),a+="<td >"+b.createHTML("a",{role:"button",id:d.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+e["class"],onclick:"return false;",onmousedown:"return false;",title:e.title},c)+"</td>",c=b.createHTML("span",{"class":"mceOpen "+e["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>'),a+="<td >"+b.createHTML("a",{role:"button",id:d.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+e["class"],onclick:"return false;",onmousedown:"return false;",title:e.title},c)+"</td>",a+="</tr></tbody>",a=b.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+e["class"],cellpadding:"0",cellspacing:"0",title:e.title},a),b.createHTML("div",{id:d.id,role:"button",tabindex:"0","aria-labelledby":d.id+"_voice","aria-haspopup":"true"},a)},postRender:function(){var d,e=this,f=e.settings;f.onclick&&(d=function(a){e.isDisabled()||(f.onclick(e.value),c.cancel(a))},c.add(e.id+"_action","click",d),c.add(e.id,["click","keydown"],function(a){var b=40;32!==a.keyCode&&13!==a.keyCode&&14!==a.keyCode||a.altKey||a.ctrlKey||a.metaKey?"click"!==a.type&&a.keyCode!==b||(e.showMenu(),c.cancel(a)):(d(),c.cancel(a))})),c.add(e.id+"_open","click",function(a){e.showMenu(),c.cancel(a)}),c.add([e.id,e.id+"_open"],"focus",function(){e._focused=1}),c.add([e.id,e.id+"_open"],"blur",function(){e._focused=0}),!a.isIE6&&b.boxModel||(c.add(e.id,"mouseover",function(){b.hasClass(e.id,"mceSplitButtonDisabled")||b.addClass(e.id,"mceSplitButtonHover")}),c.add(e.id,"mouseout",function(){b.hasClass(e.id,"mceSplitButtonDisabled")||b.removeClass(e.id,"mceSplitButtonHover")}))},destroy:function(){this.parent(),c.clear(this.id+"_action"),c.clear(this.id+"_open"),c.clear(this.id)}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.is,e=a.each;a.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(b,c,d){var e=this;e.parent(b,c,d),e.settings=c=a.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},e.settings),e.onShowMenu=new a.util.Dispatcher(e),e.onHideMenu=new a.util.Dispatcher(e),e.value=c.default_color},showMenu:function(){var d,e,f=this;if(!f.isDisabled()){if(f.isMenuRendered||(f.renderMenu(),f.isMenuRendered=!0),f.isMenuVisible)return f.hideMenu();d=b.get(f.id),b.show(f.id+"_menu"),b.addClass(d,"mceSplitButtonSelected"),e=b.getPos(d),b.setStyles(f.id+"_menu",{left:e.x,top:e.y+d.firstChild.clientHeight,zIndex:2e5}),d=0,c.add(b.doc,"mousedown",f.hideMenu,f),f.onShowMenu.dispatch(f),f._focused&&(f._keyHandler=c.add(f.id+"_menu","keydown",function(a){27==a.keyCode&&f.hideMenu()}),b.select("a",f.id+"_menu")[0].focus()),f.keyboardNav=new a.ui.KeyboardNavigation({root:f.id+"_menu",items:b.select("a",f.id+"_menu"),onCancel:function(){f.hideMenu(),f.focus()}}),f.keyboardNav.focus(),f.isMenuVisible=1}},hideMenu:function(a){var d=this;if(d.isMenuVisible){if(a&&"mousedown"==a.type&&b.getParent(a.target,function(a){return a.id===d.id+"_open"}))return;a&&b.getParent(a.target,".mceSplitButtonMenu")||(b.removeClass(d.id,"mceSplitButtonSelected"),c.remove(b.doc,"mousedown",d.hideMenu,d),c.remove(d.id+"_menu","keydown",d._keyHandler),b.hide(d.id+"_menu")),d.isMenuVisible=0,d.onHideMenu.dispatch(),d.keyboardNav.destroy()}},renderMenu:function(){var f,g,h,i,j,k,l=this,m=0,n=l.settings;return j=b.add(n.menu_container,"div",{role:"listbox",id:l.id+"_menu","class":n.menu_class+" "+n["class"],style:"position:absolute;left:0;top:-1000px;"}),f=b.add(j,"div",{"class":n["class"]+" mceSplitButtonMenu"}),b.add(f,"span",{"class":"mceMenuLine"}),g=b.add(f,"table",{role:"presentation","class":"mceColorSplitMenu"}),h=b.add(g,"tbody"),m=0,e(d(n.colors,"array")?n.colors:n.colors.split(","),function(c){c=c.replace(/^#/,""),m--||(i=b.add(h,"tr"),m=n.grid_width-1),g=b.add(i,"td");var d={href:"javascript:;",style:{backgroundColor:"#"+c},title:l.editor.getLang("colors."+c,c),"data-mce-color":"#"+c};a.isIE||(d.role="option"),g=b.add(g,"div",{"class":"mceColorWrapper"}),g=b.add(g,"a",d),l.editor.forcedHighContrastMode&&(g=b.add(g,"canvas",{width:16,height:16,"aria-hidden":"true"}),g.getContext&&(k=g.getContext("2d"))?(k.fillStyle="#"+c,k.fillRect(0,0,16,16)):b.remove(g))}),n.more_colors_func&&(g=b.add(h,"tr"),g=b.add(g,"td",{colspan:n.grid_width,"class":"mceMoreColors"}),g=b.add(g,"div"),g=b.add(g,"a",{role:"option",id:l.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},n.more_colors_title),c.add(g,"click",function(a){return n.more_colors_func.call(n.more_colors_scope||this),c.cancel(a)})),b.addClass(f,"mceColorSplitMenu"),c.add(l.id+"_menu","mousedown",function(a){return c.cancel(a)}),c.add(l.id+"_menu","click",function(a){var c;return a=b.getParent(a.target,"a",h),a&&"a"==a.nodeName.toLowerCase()&&(c=a.getAttribute("data-mce-color"))&&l.setColor(c),!1}),j},setColor:function(a){this.displayColor(a),this.hideMenu(),this.settings.onselect(a)},displayColor:function(a){var c=this;b.setStyle(c.id+"_preview","backgroundColor",a),c.value=a},postRender:function(){var a=this,c=a.id;a.parent(),b.add(c+"_action","div",{id:c+"_preview","class":"mceColorPreview"}),b.setStyle(a.id+"_preview","backgroundColor",a.value)},destroy:function(){var a=this;a.parent(),c.clear(a.id+"_menu"),c.clear(a.id+"_more"),b.remove(a.id+"_menu"),a.keyboardNav&&a.keyboardNav.destroy()}})}(tinymce),function(a){var b=a.DOM,c=a.each,d=a.dom.Event;a.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var c=this,d=[],e=c.controls,f=a.each,g=c.settings;return d.push('<div id="'+c.id+'" role="group" aria-labelledby="'+c.id+'_voice">'),d.push("<span role='application'>"),d.push('<label id="'+c.id+'_voice" class="mceVoiceLabel j-508-label">'+b.encode(g.name)+"</label>"),f(e,function(a){d.push(a.renderHTML())}),d.push("</span>"),d.push("</div>"),d.join("")},focus:function(){var a=this;b.get(a.id).focus()},postRender:function(){var d=this,e=[];c(d.controls,function(a){c(a.controls,function(a){a.id&&e.push(a)})}),d.keyNav=new a.ui.KeyboardNavigation({root:d.id,items:e,onCancel:function(){a.isWebKit&&b.get(d.editor.id+"_ifr").focus(),d.editor.focus()},excludeFromTabOrder:!d.settings.tab_focus_toolbar})},destroy:function(){var a=this;a.parent(),a.keyNav.destroy(),d.clear(a.id)}})}(tinymce),function(a){var b=a.DOM;a.each;a.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var a,c,d,e,f,g,h=this,i="",j=h.settings;for(g=h.controls,d=0;d<g.length;d++)c=g[d],e=g[d-1],f=g[d+1],0===d&&(a="mceToolbarStart",c.Button?a+=" mceToolbarStartButton":c.SplitButton?a+=" mceToolbarStartSplitButton":c.ListBox&&(a+=" mceToolbarStartListBox"),i+=b.createHTML("td",{"class":a},b.createHTML("span",null,"<!-- IE -->"))),e&&c.ListBox&&(e.Button||e.SplitButton)&&(i+=b.createHTML("td",{"class":"mceToolbarEnd"},b.createHTML("span",null,"<!-- IE -->"))),i+=b.stdMode?'<td style="position: relative">'+c.renderHTML()+"</td>":"<td>"+c.renderHTML()+"</td>",f&&c.ListBox&&(f.Button||f.SplitButton)&&(i+=b.createHTML("td",{"class":"mceToolbarStart"},b.createHTML("span",null,"<!-- IE -->")));return a="mceToolbarEnd",c.Button?a+=" mceToolbarEndButton":c.SplitButton?a+=" mceToolbarEndSplitButton":c.ListBox&&(a+=" mceToolbarEndListBox"),i+=b.createHTML("td",{"class":a},b.createHTML("span",null,"<!-- IE -->")),b.createHTML("table",{id:h.id,"class":"mceToolbar"+(j["class"]?" "+j["class"]:""),cellpadding:"0",cellspacing:"0",align:h.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+i+"</tr></tbody>")}})}(tinymce),function(a){var b=a.util.Dispatcher;a.each;a.create("tinymce.AddOnManager",{AddOnManager:function(){var a=this;a.items=[],a.urls={},a.lookup={},a.onAdd=new b(a)},get:function(a){return this.lookup[a]?this.lookup[a].instance:void 0},dependencies:function(a){var b;return this.lookup[a]&&(b=this.lookup[a].dependencies),b||[]},requireLangPack:function(b){var c=a.settings;c&&c.language&&c.language_load!==!1&&a.ScriptLoader.add(this.urls[b]+"/langs/"+c.language+".js")},add:function(a,b,c){return this.items.push(b),this.lookup[a]={instance:b,dependencies:c},this.onAdd.dispatch(this,a,b),b},createUrl:function(a,b){return"object"==typeof b?b:{prefix:a.prefix,resource:b,suffix:a.suffix}},addComponents:function(b,c){var d=this.urls[b];a.each(c,function(b){a.ScriptLoader.add(d+"/"+b)})},load:function(b,c,d,e){function f(){var f=g.dependencies(b);a.each(f,function(a){var b=g.createUrl(c,a);g.load(b.resource,b,void 0,void 0)}),d&&(e?d.call(e):d.call(a.ScriptLoader))}var g=this,h=c;g.urls[b]||("object"==typeof c&&(h=c.prefix+c.resource+c.suffix),0!==h.indexOf("/")&&-1==h.indexOf("://")&&(h=a.baseURL+"/"+h),g.urls[b]=h.substring(0,h.lastIndexOf("/")),g.lookup[b]?f():a.ScriptLoader.add(h,f,e))}}),a.PluginManager=new a.AddOnManager,a.ThemeManager=new a.AddOnManager}(tinymce),function(a){var b,c=a.each,d=a.extend,e=a.DOM,f=a.dom.Event,g=(a.ThemeManager,a.PluginManager,a.explode),h=a.util.Dispatcher,i=0;a.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a.documentBaseURL)||(a.documentBaseURL+="/"),a.baseURL=new a.util.URI(a.documentBaseURL).toAbsolute(a.baseURL),a.baseURI=new a.util.URI(a.baseURL),a.onBeforeUnload=new h(a),f.add(window,"beforeunload",function(b){a.onBeforeUnload.dispatch(a,b)}),a.onAddEditor=new h(a),a.onRemoveEditor=new h(a),a.EditorManager=d(a,{editors:[],i18n:{},activeEditor:null,init:function(b){function d(a){var b=a.id;return b||(b=a.name,b=b&&!e.get(b)?a.name:e.uniqueId(),a.setAttribute("id",b)),b}function h(b,c,d){var e=b[c];if(e)return a.is(e,"string")&&(d=e.replace(/\.\w+$/,""),d=d?a.resolve(d):0,e=a.resolve(e)),e.apply(d||this,Array.prototype.slice.call(arguments,2))}function j(a,b){return b.constructor===RegExp?b.test(a.className):e.hasClass(a,b)}var k,l=this,m=(a.ScriptLoader,[]);l.settings=b,f.bind(window,"ready",function(){var f,l;switch(h(b,"onpageload"),b.mode){case"exact":f=b.elements||"",f.length>0&&c(g(f),function(d){e.get(d)?(k=new a.Editor(d,b),m.push(k),k.render(1)):c(document.forms,function(f){c(f.elements,function(c){c.name===d&&(d="mce_editor_"+i++,e.setAttrib(c,"id",d),k=new a.Editor(d,b),m.push(k),k.render(1))})})});break;case"textareas":case"specific_textareas":c(e.select("textarea"),function(c){b.editor_deselector&&j(c,b.editor_deselector)||b.editor_selector&&!j(c,b.editor_selector)||(k=new a.Editor(d(c),b),m.push(k),k.render(1))});break;default:b.types?c(b.types,function(f){c(e.select(f.selector),function(c){var e=new a.Editor(d(c),a.extend({},b,f));m.push(e),e.render(1)})}):b.selector&&c(e.select(b.selector),function(c){var e=new a.Editor(d(c),b);m.push(e),e.render(1)})}b.oninit&&(f=l=0,c(m,function(a){l++,a.initialized?f++:a.onInit.add(function(){f++,f==l&&h(b,"oninit")}),f==l&&h(b,"oninit")}))})},get:function(a){return a===b?this.editors:this.editors.hasOwnProperty(a)?this.editors[a]:b},getInstanceById:function(a){return this.get(a)},add:function(a){var b=this,c=b.editors;return c[a.id]=a,c.push(a),b._setActive(a),b.onAddEditor.dispatch(b,a),a},remove:function(a){var b,c=this,d=c.editors;if(!d[a.id])return null;for(delete d[a.id],b=0;b<d.length;b++)if(d[b]==a){d.splice(b,1);break}return c.activeEditor==a&&c._setActive(d[0]),a.destroy(),c.onRemoveEditor.dispatch(c,a),a},execCommand:function(b,c,d){function e(){h.destroy(),f.detachEvent("onunload",e),f=f.tinyMCE=f.tinymce=null}var f,g=this,h=g.get(d);switch(b){case"mceFocus":return h.focus(),!0;case"mceAddEditor":case"mceAddControl":return g.get(d)||new a.Editor(d,g.settings).render(),!0;case"mceAddFrameControl":return f=d.window,f.tinyMCE=tinyMCE,f.tinymce=a,a.DOM.doc=f.document,a.DOM.win=f,h=new a.Editor(d.element_id,d),h.render(),a.isIE&&!a.isIE11&&f.attachEvent("onunload",e),d.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return h&&h.remove(),!0;case"mceToggleEditor":return h?(h.isHidden()?h.show():h.hide(),!0):(g.execCommand("mceAddControl",0,d),!0)}return g.activeEditor?g.activeEditor.execCommand(b,c,d):!1},execInstanceCommand:function(a,b,c,d){var e=this.get(a);return e?e.execCommand(b,c,d):!1},triggerSave:function(){c(this.editors,function(a){a.save()})},addI18n:function(b,d){var e=this.i18n;a.is(b,"string")?c(d,function(a,c){e[b+"."+c]=a}):c(b,function(a,b){c(a,function(a,d){c(a,function(a,c){"common"===d?e[b+"."+c]=a:e[b+"."+d+"."+c]=a})})})},_setActive:function(a){this.selectedInstance=this.activeEditor=a}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.extend,e=a.each,f=a.isGecko,g=a.isIE,h=(a.isWebKit,a.is),i=a.ThemeManager,j=a.PluginManager,k=a.explode;a.create("tinymce.Editor",{Editor:function(b,c){var e=this,f=!0;e.settings=c=d({id:b,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:a.documentBaseURL,add_form_submit_trigger:f,submit_patch:f,add_unload_trigger:f,convert_urls:f,relative_urls:f,remove_script_host:f,table_inline_editing:!1,object_resizing:!1,accessibility_focus:f,doctype:a.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:f,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",apply_source_formatting:f,directionality:"ltr",forced_root_block:"p",hidden_input:f,padd_empty_editor:f,render_ui:f,init_theme:f,force_p_newlines:f,indentation:"30px",keep_styles:f,fix_table_elements:f,inline_styles:f,convert_fonts_to_spans:f,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:f,entity_encoding:"named",url_converter:e.convertURL,url_converter_scope:e,ie7_compat:f},c),e.id=e.editorId=b,e.isNotDirty=!1,e.plugins={},e.documentBaseURI=new a.util.URI(c.document_base_url||a.documentBaseURL,{base_uri:tinyMCE.baseURI}),e.baseURI=a.baseURI,e.contentCSS=[],e.contentStyles=[],e.setupEvents(),e.execCommands={},e.queryStateCommands={},e.queryValueCommands={},e.execCallback("setup",e)},render:function(d){function f(){h.language&&h.language_load!==!1&&m.add(a.baseURL+"/langs/"+h.language+".js"),h.theme&&"function"!=typeof h.theme&&"-"!=h.theme.charAt(0)&&!i.urls[h.theme]&&i.load(h.theme,"themes/"+h.theme+"/editor_template"+a.suffix+".js"),e(k(h.plugins),function(b){if(b&&!j.urls[b])if("-"==b.charAt(0)){b=b.substr(1,b.length);var c=j.dependencies(b);e(c,function(b){var c={prefix:"plugins/",resource:b,suffix:"/editor_plugin"+a.suffix+".js"};b=j.createUrl(c,b),j.load(b.resource,b)})}else{if("safari"==b)return;j.load(b,{prefix:"plugins/",resource:b,suffix:"/editor_plugin"+a.suffix+".js"})}}),m.loadQueue(function(){g.removed||g.init()})}var g=this,h=g.settings,l=g.id,m=a.ScriptLoader;return c.domLoaded?(tinyMCE.settings=h,void(g.getElement()&&(a.isIDevice&&!a.isIOS5||(!/TEXTAREA|INPUT/i.test(g.getElement().nodeName)&&h.hidden_input&&b.getParent(l,"form")&&b.insertAfter(b.create("input",{type:"hidden",name:l}),l),h.content_editable||(g.orgVisibility=g.getElement().style.visibility,g.getElement().style.visibility="hidden"),a.WindowManager&&(g.windowManager=new a.WindowManager(g)),"xml"==h.encoding&&g.onGetContent.add(function(a,c){c.save&&(c.content=b.encode(c.content))}),h.add_form_submit_trigger&&g.onSubmit.addToTop(function(){g.initialized&&(g.save(),g.isNotDirty=1)}),h.add_unload_trigger&&(g._beforeUnload=tinyMCE.onBeforeUnload.add(function(){!g.initialized||g.destroyed||g.isHidden()||g.save({format:"raw",no_events:!0})})),a.addUnload(g.destroy,g),h.submit_patch&&g.onBeforeRenderUI.add(function(){var b=g.getElement().form;b&&(b._mceOldSubmit||(b.submit.nodeType||b.submit.length||(g.formElement=b,b._mceOldSubmit=b.submit,b.submit=function(){return a.triggerSave(),g.isNotDirty=1,g.formElement._mceOldSubmit(g.formElement)}),b=null))}),f())))):void c.add(window,"ready",function(){g.render()})},init:function(){function c(b){var d,f=j.get(b),g=j.urls[b]||a.documentBaseURL.replace(/\/$/,"");f&&-1===a.inArray(v,b)&&(e(j.dependencies(b),function(a){c(a)}),d=new f(s,g),s.plugins[b]=d,d.init&&(d.init(s,g),v.push(b)))}var d,f,h,l,m,n,o,p,q,r,s=this,t=s.settings,u=s.getElement(),v=[];if(a.add(s),t.aria_label=t.aria_label||b.getAttrib(u,"aria-label",s.getLang("aria.rich_text_area")),t.theme&&("function"!=typeof t.theme?(t.theme=t.theme.replace(/-/,""),m=i.get(t.theme),s.theme=new m,s.theme.init&&s.theme.init(s,i.urls[t.theme]||a.documentBaseURL.replace(/\/$/,""))):s.theme=t.theme),e(k(t.plugins.replace(/\-/g,"")),c),t.popup_css!==!1&&(t.popup_css?t.popup_css=s.documentBaseURI.toAbsolute(t.popup_css):t.popup_css=s.baseURI.toAbsolute("themes/"+t.theme+"/skins/"+t.skin+"/dialog.css")),t.popup_css_add&&(t.popup_css+=","+s.documentBaseURI.toAbsolute(t.popup_css_add)),s.controlManager=new a.ControlManager(s),s.onBeforeRenderUI.dispatch(s,s.controlManager),t.render_ui&&s.theme&&(s.orgDisplay=u.style.display,"function"!=typeof t.theme?(f=t.width||u.style.width||u.offsetWidth,h=t.height||u.style.height||u.offsetHeight,l=t.min_height||100,q=/^[0-9\.]+(|px)$/i,q.test(""+f)&&(f=Math.max(parseInt(f,10)+(m.deltaWidth||0),100)),q.test(""+h)&&(h=Math.max(parseInt(h,10)+(m.deltaHeight||0),l)),m=s.theme.renderUI({targetNode:u,width:f,height:h,deltaWidth:t.delta_width,deltaHeight:t.delta_height}),b.setStyles(m.sizeContainer||m.editorContainer,{width:f,height:h}),h=(m.iframeHeight||h)+("number"==typeof h?m.deltaHeight||0:""),l>h&&(h=l)):(m=t.theme(s,u),m.editorContainer.nodeType&&(m.editorContainer=m.editorContainer.id=m.editorContainer.id||s.id+"_parent"),m.iframeContainer.nodeType&&(m.iframeContainer=m.iframeContainer.id=m.iframeContainer.id||s.id+"_iframecontainer"),h=m.iframeHeight||u.offsetHeight,g&&(s.onInit.add(function(a){a.dom.bind(a.getBody(),"beforedeactivate keydown keyup",function(){a.bookmark=a.selection.getBookmark(1)})}),s.onNodeChange.add(function(a){document.activeElement.id==a.id+"_ifr"&&(a.bookmark=a.selection.getBookmark(1))}))),s.editorContainer=m.editorContainer),t.content_css&&e(k(t.content_css),function(a){s.contentCSS.push(s.documentBaseURI.toAbsolute(a))}),t.content_style&&s.contentStyles.push(t.content_style),t.content_editable)return u=d=m=null,s.initContentBody();for(document.domain&&location.hostname!=document.domain&&(a.relaxedDomain=document.domain),
s.iframeHTML=t.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',t.document_base_url!=a.documentBaseURL&&(s.iframeHTML+='<base href="'+s.documentBaseURI.getURI()+'" />'),a.isIE8&&(t.ie7_compat?s.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />':s.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />'),s.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',r=0;r<s.contentCSS.length;r++)s.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+s.contentCSS[r]+'" />';s.contentCSS=[],o=t.body_id||"tinymce",-1!=o.indexOf("=")&&(o=s.getParam("body_id","","hash"),o=o[s.id]||o),p=t.body_class||"",-1!=p.indexOf("=")&&(p=s.getParam("body_class","","hash"),p=p[s.id]||""),s.iframeHTML+='</head><body id="'+o+'" class="mceContentBody '+p+'" onload="window.parent.tinyMCE.get(\''+s.id+"').onLoad.dispatch();\"><br></body></html>",a.relaxedDomain&&(g||a.isOpera&&parseFloat(opera.version())<11)&&(n='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+s.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody();})()'),d=b.add(m.iframeContainer,"iframe",{id:s.id+"_ifr",src:n||'javascript:""',frameBorder:"0",allowTransparency:"true",title:t.aria_label,style:{width:"100%",height:h,display:"block"}}),s.contentAreaContainer=m.iframeContainer,m.editorContainer&&(b.get(m.editorContainer).style.display=s.orgDisplay),u.style.visibility=s.orgVisibility,b.get(s.id).style.display="none",b.setAttrib(s.id,"aria-hidden",!0),a.relaxedDomain&&n||s.initContentBody(),u=d=m=null},initContentBody:function(){var c,d,f=this,h=f.settings,i=b.get(f.id),j=f.getDoc();g&&a.relaxedDomain||h.content_editable||(j.open(),j.write(f.iframeHTML),j.close(),a.relaxedDomain&&(j.domain=a.relaxedDomain)),h.content_editable&&(b.addClass(i,"mceContentBody"),f.contentDocument=j=h.content_document||document,f.contentWindow=h.content_window||window,f.bodyElement=i,h.content_document=h.content_window=null),c=f.getBody(),c.disabled=!0,h.readonly||(c.contentEditable=f.getParam("content_editable_state",!0)),c.disabled=!1,f.schema=new a.html.Schema(h),f.dom=new a.dom.DOMUtils(j,{keep_values:!0,url_converter:f.convertURL,url_converter_scope:f,hex_colors:h.force_hex_style_colors,class_filter:h.class_filter,update_styles:!0,root_element:h.content_editable?f.id:null,schema:f.schema}),f.parser=new a.html.DomParser(h,f.schema),f.parser.addAttributeFilter("src,href,style",function(a,b){for(var c,d,e,g=a.length,h=f.dom;g--;)c=a[g],d=c.attr(b),e="data-mce-"+b,c.attributes.map[e]||("style"===b?c.attr(e,h.serializeStyle(h.parseStyle(d),c.name)):c.attr(e,f.convertURL(d,b,c.name)))}),f.parser.addNodeFilter("script",function(a,b){for(var c,d=a.length;d--;)c=a[d],c.attr("type","mce-"+(c.attr("type")||"text/javascript"))}),f.parser.addNodeFilter("#cdata",function(a,b){for(var c,d=a.length;d--;)c=a[d],c.type=8,c.name="#comment",c.value="[CDATA["+c.value+"]]"}),f.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(b,c){for(var d,e=b.length,g=f.schema.getNonEmptyElements();e--;)d=b[e],d.isEmpty(g)&&(d.empty().append(new a.html.Node("br",1)).shortEnded=!0)}),f.serializer=new a.dom.Serializer(h,f.dom,f.schema),f.selection=new a.dom.Selection(f.dom,f.getWin(),f.serializer,f),f.selectionUtil=new a.SelectionUtil(f),f.formatter=new a.Formatter(f),f.undoManager=new a.UndoManager(f),f.forceBlocks=new a.ForceBlocks(f),f.enterKey=new a.EnterKey(f),f.editorCommands=new a.EditorCommands(f),f.onExecCommand.add(function(a,b){/^(FontName|FontSize)$/.test(b)||f.nodeChanged()}),f.serializer.onPreProcess.add(function(a,b){return f.onPreProcess.dispatch(f,b,a)}),f.serializer.onPostProcess.add(function(a,b){return f.onPostProcess.dispatch(f,b,a)}),f.onPreInit.dispatch(f),h.browser_spellcheck||h.gecko_spellcheck||(j.body.spellcheck=!1),h.readonly||f.bindNativeEvents(),f.controlManager.onPostRender.dispatch(f,f.controlManager),f.onPostRender.dispatch(f),f.quirks=a.util.Quirks(f),h.directionality&&(c.dir=h.directionality),h.nowrap&&(c.style.whiteSpace="nowrap"),h.protect&&f.onBeforeSetContent.add(function(a,b){e(h.protect,function(a){b.content=b.content.replace(a,function(a){return"<!--mce:protected "+escape(a)+"-->"})})}),f.onSetContent.add(function(){f.addVisual(f.getBody())}),h.padd_empty_editor&&f.onPostProcess.add(function(a,b){b.content=b.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),f.load({initial:!0,format:"html"}),f.startContent=f.getContent({format:"raw"}),f.initialized=!0,f.onInit.dispatch(f),f.execCallback("setupcontent_callback",f.id,c,j),f.execCallback("init_instance_callback",f),f.focus(!0),f.nodeChanged({initial:!0}),f.contentStyles.length>0&&(d="",e(f.contentStyles,function(a){d+=a+"\r\n"}),f.dom.addStyle(d)),e(f.contentCSS,function(a){f.dom.loadCSS(a)}),h.auto_focus&&setTimeout(function(){var b=a.get(h.auto_focus);b.selection.select(b.getBody(),1),b.selection.collapse(1),b.getBody().focus(),b.getWin().focus()},100),f.dom.bind(f.getBody(),"focus",function(){f.onFocus.dispatch(f)}),f.dom.bind(f.getBody(),"blur",function(){f.onBlur.dispatch(f)}),i=j=c=null},focus:function(b){var c,d,e,f,g=this,h=g.selection,i=g.settings.content_editable,j=g.getDoc();b||(g.bookmark&&(h.moveToBookmark(g.bookmark),g.bookmark=null),d=h.getRng(),d.item&&(e=d.item(0)),g._refreshContentEditable(),i||g.getWin().focus(),document!=g.getDoc()&&g.getWin().focus(),(a.isGecko||i)&&(f=g.getBody(),f.setActive&&!a.isIE11?f.setActive():f.focus(),i&&h.normalize()),e&&e.ownerDocument==j&&(d=j.body.createControlRange(),d.addElement(e),d.select())),a.activeEditor!=g&&(null!=(c=a.activeEditor)&&c.onDeactivate.dispatch(c,g),g.onActivate.dispatch(g,c)),a._setActive(g)},execCallback:function(b){var c,d=this,e=d.settings[b];if(e)return d.callbackLookup&&(c=d.callbackLookup[b])&&(e=c.func,c=c.scope),h(e,"string")&&(c=e.replace(/\.\w+$/,""),c=c?a.resolve(c):0,e=a.resolve(e),d.callbackLookup=d.callbackLookup||{},d.callbackLookup[b]={func:e,scope:c}),e.apply(c||d,Array.prototype.slice.call(arguments,1))},translate:function(b){var c=this.settings.language||"en",d=a.i18n;return b?d[c+"."+b]||b.replace(/\{\#([^\}]+)\}/g,function(a,b){return d[c+"."+b]||"{#"+b+"}"}):""},getLang:function(b,c){return a.i18n[(this.settings.language||"en")+"."+b]||(h(c)?c:"{#"+b+"}")},getParam:function(b,c,d){var f,g=a.trim,i=h(this.settings[b])?this.settings[b]:c;return"hash"===d?(f={},h(i,"string")?e(i.indexOf("=")>0?i.split(/[;,](?![^=;,]*(?:[;,]|$))/):i.split(","),function(a){a=a.split("="),a.length>1?f[g(a[0])]=g(a[1]):f[g(a[0])]=g(a)}):f=i,f):i},nodeChanged:function(a){var b,c=this,d=c.selection;c.initialized&&(a=a||{},b=d.getStart()||c.getBody(),b=g&&b.ownerDocument!=c.getDoc()?c.getBody():b,a.parents=[],c.dom.getParent(b,function(b){return"BODY"==b.nodeName?!0:void a.parents.push(b)}),c.onNodeChange.dispatch(c,a?a.controlManager||c.controlManager:c.controlManager,b,d.isCollapsed(),a))},scheduleNodeChanged:function l(){if(!l.isScheduled){l.isScheduled=!0;var a=this;setTimeout(function(){a.nodeChanged(),l.isScheduled=!1},0)}},addButton:function(a,b){var c=this;c.buttons=c.buttons||{},c.buttons[a]=b},addCommand:function(a,b,c){this.execCommands[a]={func:b,scope:c||this}},addQueryStateHandler:function(a,b,c){this.queryStateCommands[a]={func:b,scope:c||this}},addQueryValueHandler:function(a,b,c){this.queryValueCommands[a]={func:b,scope:c||this}},addShortcut:function(a,b,c,d){var f,g=this;return g.settings.custom_shortcuts===!1?!1:(g.shortcuts=g.shortcuts||{},h(c,"string")&&(f=c,c=function(){g.execCommand(f,!1,null)}),h(c,"object")&&(f=c,c=function(){g.execCommand(f[0],f[1],f[2])}),e(k(a),function(a){var f={func:c,scope:d||this,desc:g.translate(b),alt:!1,ctrl:!1,shift:!1};e(k(a,"+"),function(a){switch(a){case"alt":case"ctrl":case"shift":f[a]=!0;break;default:f.charCode=a.charCodeAt(0),f.keyCode=a.toUpperCase().charCodeAt(0)}}),g.shortcuts[(f.ctrl?"ctrl":"")+","+(f.alt?"alt":"")+","+(f.shift?"shift":"")+","+f.keyCode]=f}),!0)},execCommand:function(a,b,c,f){var g,h,i=this,j=0;if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(a)||f&&f.skip_focus||i.focus(),f=d({},f),i.onBeforeExecCommand.dispatch(i,a,b,c,f),f.terminate)return!1;if(i.execCallback("execcommand_callback",i.id,i.selection.getNode(),a,b,c))return i.onExecCommand.dispatch(i,a,b,c,f),!0;if((g=i.execCommands[a])&&(h=g.func.call(g.scope,b,c),h!==!0))return i.onExecCommand.dispatch(i,a,b,c,f),h;if(e(i.plugins,function(d){return d.execCommand&&d.execCommand(a,b,c)?(i.onExecCommand.dispatch(i,a,b,c,f),j=1,!1):void 0}),j)return!0;if(i.theme&&i.theme.execCommand&&i.theme.execCommand(a,b,c))return i.onExecCommand.dispatch(i,a,b,c,f),!0;if(i.editorCommands.execCommand(a,b,c))return i.onExecCommand.dispatch(i,a,b,c,f),!0;try{i.getDoc().execCommand(a,b,c)}catch(k){}i.onExecCommand.dispatch(i,a,b,c,f)},queryCommandState:function(a){var b,c,d=this;if(!d._isHidden()){if((b=d.queryStateCommands[a])&&(c=b.func.call(b.scope),c!==!0))return c;if(b=d.editorCommands.queryCommandState(a),-1!==b)return b;try{return this.getDoc().queryCommandState(a)}catch(e){}}},queryCommandValue:function(a){var b,c,d=this;if(!d._isHidden()){if((b=d.queryValueCommands[a])&&(c=b.func.call(b.scope),c!==!0))return c;if(b=d.editorCommands.queryCommandValue(a),h(b))return b;try{return this.getDoc().queryCommandValue(a)}catch(e){}}},show:function(){var a=this;b.show(a.getContainer()),b.hide(a.id),a.load()},hide:function(){var a=this,c=a.getDoc();g&&c&&c.execCommand("SelectAll"),a.save(),b.hide(a.getContainer()),b.setStyle(a.id,"display",a.orgDisplay)},isHidden:function(){return!b.isHidden(this.id)},setProgressState:function(a,b,c){return this.onSetProgressState.dispatch(this,a,b,c),a},load:function(a){var b,c=this,d=c.getElement();return d?(a=a||{},a.load=!0,b=c.setContent(h(d.value)?d.value:d.innerHTML,a),a.element=d,a.no_events||c.onLoadContent.dispatch(c,a),a.element=d=null,b):void 0},save:function(a){var c,d,f=this,g=f.getElement();if(g&&f.initialized)return a=a||{},a.save=!0,a.no_events||(f.undoManager.typing=!1,f.undoManager.deleting=0,f.undoManager.add()),a.element=g,c=a.content=f.getContent(a),a.no_events||f.onSaveContent.dispatch(f,a),c=a.content,/TEXTAREA|INPUT/i.test(g.nodeName)?g.value=c:(g.innerHTML=c,(d=b.getParent(f.id,"form"))&&e(d.elements,function(a){return a.name==f.id?(a.value=c,!1):void 0})),a.element=g=null,c},setContent:function(b,c){var d,e=this,f=e.getBody();return c=c||{},c.format=c.format||"html",c.set=!0,c.content=b,c.no_events||e.onBeforeSetContent.dispatch(e,c),b=c.content,a.isIE||0!==b.length&&!/^\s+$/.test(b)?("raw"!==c.format&&(b=new a.html.Serializer({},e.schema).serialize(e.parser.parse(b))),c.content=a.trim(b),e.dom.setHTML(f,c.content),c.no_events||e.onSetContent.dispatch(e,c),e.settings.content_editable&&document.activeElement!==e.getBody()||e.selection.normalize(),c.content):(d=e.settings.forced_root_block,b=d?"<"+d+'><br data-mce-bogus="1"></'+d+">":'<br data-mce-bogus="1">',f.innerHTML=b,e.selection.select(f,!0),void e.selection.collapse(!0))},getContent:function(b){var c,d=this,e=d.getBody();return b=b||{},b.format=b.format||"html",b.get=!0,b.getInner=!0,b.no_events||d.onBeforeGetContent.dispatch(d,b),c="raw"==b.format?e.innerHTML:"text"==b.format?e.innerText||e.textContent:d.serializer.serialize(e,b),"text"!=b.format?b.content=a.trim(c):b.content=c,b.no_events||d.onGetContent.dispatch(d,b),b.content},isDirty:function(){var b=this;return a.trim(b.startContent)!=a.trim(b.getContent({format:"raw",no_events:1}))&&!b.isNotDirty},getContainer:function(){var a=this;return a.container||(a.container=b.get(a.editorContainer||a.id+"_parent")),a.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return b.get(this.settings.content_element||this.id)},getWin:function(){var a,c=this;return c.contentWindow||(a=b.get(c.id+"_ifr"),a&&(c.contentWindow=a.contentWindow)),c.contentWindow},getDoc:function(){var a,b=this;return b.contentDocument||(a=b.getWin(),a&&(b.contentDocument=a.document)),b.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(a,b,c){var d=this,e=d.settings;return e.urlconverter_callback?d.execCallback("urlconverter_callback",a,c,!0,b):!e.convert_urls||c&&"LINK"==c.nodeName||!a||0===a.indexOf("file:")?a:e.relative_urls?d.documentBaseURI.toRelative(a):a=d.documentBaseURI.toAbsolute(a,e.remove_script_host)},addVisual:function(a){var b,c=this,d=c.settings,f=c.dom;a=a||c.getBody(),h(c.hasVisual)||(c.hasVisual=d.visual),e(f.select("table,a",a),function(a){var e;switch(a.nodeName){case"TABLE":return b=d.visual_table_class||"mceItemTable",e=f.getAttrib(a,"border"),void(e&&"0"!=e||(c.hasVisual?f.addClass(a,b):f.removeClass(a,b)));case"A":return void(f.getAttrib(a,"href",!1)||(e=f.getAttrib(a,"name")||a.id,b="mceItemAnchor",e&&(c.hasVisual?f.addClass(a,b):f.removeClass(a,b))))}}),c.onVisualAid.dispatch(c,a,c.hasVisual)},remove:function(){var d=this,e=d.getContainer(),f=d.getDoc();d.removed||(d.removed=1,g&&f&&f.execCommand("SelectAll"),d.save(),b.setStyle(d.id,"display",d.orgDisplay),d.settings.content_editable||(c.unbind(d.getWin()),c.unbind(d.getDoc())),c.unbind(d.getBody()),c.clear(e),d.execCallback("remove_instance_callback",d),d.onRemove.dispatch(d),d.onExecCommand.listeners=[],a.remove(d),b.remove(e))},destroy:function(b){var d=this;d.destroyed||(f&&(c.unbind(d.getDoc()),c.unbind(d.getWin()),c.unbind(d.getBody())),b||(a.removeUnload(d.destroy),tinyMCE.onBeforeUnload.remove(d._beforeUnload),d.theme&&d.theme.destroy&&d.theme.destroy(),d.controlManager.destroy(),d.selection.destroy(),d.dom.destroy()),d.formElement&&(d.formElement.submit=d.formElement._mceOldSubmit,d.formElement._mceOldSubmit=null),d.contentAreaContainer=d.formElement=d.container=d.settings.content_element=d.bodyElement=d.contentDocument=d.contentWindow=null,d.selection&&(d.selection=d.selection.win=d.selection.dom=d.selection.dom.doc=null),d.destroyed=1)},_refreshContentEditable:function(){var a,b,c=this;c._isHidden()&&(a=c.getBody(),b=a.parentNode,b.removeChild(a),b.appendChild(a),a.focus())},_isHidden:function(){var a;return f?(a=this.selection.getSel(),!a||!a.rangeCount||0===a.rangeCount):0}})}(tinymce),function(a){var b=a.each;a.Editor.prototype.setupEvents=function(){var c=this,d=c.settings;b(["onPreInit","onBeforeRenderUI","onPostRender","onLoad","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState","onSetAttrib","onFormatChange","onFocus","onBlur"],function(b){c[b]=new a.util.Dispatcher(c)}),d.cleanup_callback&&(c.onBeforeSetContent.add(function(a,b){b.content=a.execCallback("cleanup_callback","insert_to_editor",b.content,b)}),c.onPreProcess.add(function(a,b){b.set&&a.execCallback("cleanup_callback","insert_to_editor_dom",b.node,b),b.get&&a.execCallback("cleanup_callback","get_from_editor_dom",b.node,b)}),c.onPostProcess.add(function(a,b){b.set&&(b.content=a.execCallback("cleanup_callback","insert_to_editor",b.content,b)),b.get&&(b.content=a.execCallback("cleanup_callback","get_from_editor",b.content,b))})),d.save_callback&&c.onGetContent.add(function(a,b){b.save&&(b.content=a.execCallback("save_callback",a.id,b.content,a.getBody()))}),d.handle_event_callback&&c.onEvent.add(function(a,b,d){c.execCallback("handle_event_callback",b,a,d)===!1&&(b.preventDefault(),b.stopPropagation())}),d.handle_node_change_callback&&c.onNodeChange.add(function(a,b,c){a.execCallback("handle_node_change_callback",a.id,c,-1,-1,!0,a.selection.isCollapsed())}),d.save_callback&&c.onSaveContent.add(function(a,b){var c=a.execCallback("save_callback",a.id,b.content,a.getBody());c&&(b.content=c)}),d.onchange_callback&&c.onChange.add(function(a,b){a.execCallback("onchange_callback",a,b)})},a.Editor.prototype.bindNativeEvents=function(){function c(a,b){a.type;h.removed||h.onEvent.dispatch(h,a,b)!==!1&&h[g[a.fakeType||a.type]].dispatch(h,a,b)}function d(a){h.focus(!0)}function e(b,c){65==c.keyCode&&a.VK.metaKeyPressed(c)||h.selection.normalize(),h.nodeChanged()}function f(c,d){(c.altKey||c.ctrlKey||c.metaKey)&&b(h.shortcuts,function(b){return b.ctrl!=c.ctrlKey&&a.isMac&&b.ctrl!=c.metaKey||b.alt!=c.altKey||b.shift!=c.shiftKey?void 0:c.keyCode==b.keyCode||c.charCode&&c.charCode==b.charCode?(c.preventDefault(),d&&b.func.call(b.scope),!0):void 0})}var g,h=this,i=h.settings,j=h.dom;g={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"},b(g,function(b,d){var e=i.content_editable?h.getBody():h.getDoc();switch(d){case"contextmenu":j.bind(e,d,c);break;case"paste":j.bind(h.getBody(),d,c);break;case"submit":case"reset":j.bind(h.getElement().form||a.DOM.getParent(h.id,"form"),d,c);break;default:j.bind(e,d,c)}}),j.bind(i.content_editable?h.getBody():a.isGecko?h.getDoc():h.getWin(),"focus",function(a){h.focus(!0)}),i.content_editable&&a.isOpera&&(j.bind(h.getBody(),"click",d),j.bind(h.getBody(),"keydown",d)),h.onMouseUp.add(e),h.onKeyUp.add(function(b,c){var d=c.keyCode;(d>=33&&36>=d||d>=37&&40>=d||13==d||45==d||46==d||8==d||a.isMac&&(91==d||93==d)||c.ctrlKey)&&e(b,c)}),h.onReset.add(function(){h.setContent(h.startContent,{format:"raw"})}),h.onKeyUp.add(function(a,b){f(b)}),h.onKeyPress.add(function(a,b){f(b)}),h.onKeyDown.add(function(a,b){f(b,!0)}),a.isOpera&&h.onClick.add(function(a,b){b.preventDefault()})}}(tinymce),function(a){var b,c=a.each,d=!0,e=!1;a.EditorCommands=function(f){function g(a,b,c){var f;return a=a.toLowerCase(),(f=s.exec[a])?(f(a,b,c),d):e}function h(a){var b;return a=a.toLowerCase(),(b=s.state[a])?b(a):-1}function i(a){var b;return a=a.toLowerCase(),(b=s.value[a])?b(a):e}function j(a,b){b=b||"exec",c(a,function(a,d){c(d.toLowerCase().split(","),function(c){s[b][c]=a})})}function k(a,c,d){return c===b&&(c=e),d===b&&(d=null),f.getDoc().execCommand(a,c,d)}function l(a){return u.match(a)}function m(a,c){u.toggle(a,c?{value:c}:b)}function n(a){p=r.getBookmark(a)}function o(){r.moveToBookmark(p)}var p,q=f.dom,r=f.selection,s={state:{},exec:{},value:{}},t=f.settings,u=f.formatter;a.extend(this,{execCommand:g,queryCommandState:h,queryCommandValue:i,addCommands:j}),j({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){f.undoManager.add()},"Cut,Copy,Paste":function(b){var c,e=f.getDoc();try{k(b)}catch(g){c=d}!c&&e.queryCommandSupported(b)||(a.isGecko?f.windowManager.confirm(f.getLang("clipboard_msg"),function(a){a&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):f.windowManager.alert(f.getLang("clipboard_no_support")))},unlink:function(a){r.isCollapsed()&&r.select(r.getNode()),k(a),r.collapse(e)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){var b=a.substring(7);c("left,center,right,full".split(","),function(a){b!=a&&u.remove("align"+a)}),m("align"+b),g("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(a){var b,c;k(a),b=q.getParent(r.getNode(),"ol,ul"),b&&(c=b.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(c.nodeName)&&(n(),q.split(c,b),o()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){m(a)},"ForeColor,HiliteColor,FontName":function(a,b,c){m(a,c)},FontSize:function(b,c,d){var e,f;d>=1&&7>=d&&(f=a.explode(t.font_size_style_values),e=a.explode(t.font_size_classes),d=e?e[d-1]||d:f[d-1]||d),m(b,d)},RemoveFormat:function(b){if(u.remove(b),a.isWebKit){var d=q.select("table");c(d,function(a){q.setStyle(a,"display","inline-table")}),setTimeout(function(){c(d,function(a){q.setStyle(a,"display","")})},0)}},mceBlockQuote:function(a){m("blockquote")},FormatBlock:function(a,b,c){return m(c||"p")},mceCleanup:function(){var a=r.getBookmark();f.setContent(f.getContent({cleanup:d}),{cleanup:d}),r.moveToBookmark(a)},mceRemoveNode:function(a,b,c){var e=c||r.getNode();e!=f.getBody()&&(n(),f.dom.remove(e,d),o())},mceSelectNodeDepth:function(a,b,c){var d=0;q.getParent(r.getNode(),function(a){return 1==a.nodeType&&d++==c?(r.select(a),e):void 0},f.getBody())},mceSelectNode:function(a,b,c){r.select(c)},mceInsertContent:function(b,c,d){var e,g,h,i,j,k,l,m,n,o,p,s,t,u;if(e=f.parser,g=new a.html.Serializer({},f.schema),t='<span class="mce_marker" data-mce-type="bookmark">\ufeff</span>',k={content:d,format:"html"},r.onBeforeSetContent.dispatch(r,k),d=k.content,-1==d.indexOf("{$caret}")&&(d+="{$caret}"),d=d.replace(/\{\$caret\}/,t),r.isCollapsed()||f.getDoc().execCommand("Delete",!1,null),h=r.getNode(),k={context:h.nodeName.toLowerCase()},j=e.parse(d,k),p=j.lastChild,"mce_marker"==p.attr("class"))for(l=p,p=p.prev;p;p=p.walk(!0))if(3==p.type||!q.isBlock(p.name)){p.parent.insert(l,p,"br"===p.name);break}if(k.invalid){for(r.setContent(t),h=r.getNode(),i=f.getBody(),9==h.nodeType?h=p=i:p=h;p!==i;)h=p,p=p.parentNode;d=h==i?i.innerHTML:q.getOuterHTML(h),d=g.serialize(e.parse(d.replace(/<span (class="mce_marker"|class=mce_marker).+?<\/span>/i,function(){return g.serialize(j)}))),h==i?q.setHTML(i,d):q.setOuterHTML(h,d)}else d=g.serialize(j),p=h.firstChild,s=h.lastChild,!p||p===s&&"BR"===p.nodeName?q.setHTML(h,d):r.setContent(d);l=q.select(".mce_marker")[0],l&&(m=q.getRect(l),n=q.getViewPort(f.getWin()),(m.y+m.h>n.y+n.h||m.y<n.y||m.x>n.x+n.w||m.x<n.x)&&(u=a.isIE?f.getDoc().documentElement:f.getBody(),u.scrollLeft=m.x,u.scrollTop=m.y-n.h+25),o=q.createRng(),p=l.previousSibling,p&&3==p.nodeType?o.setStart(p,p.nodeValue.length):(o.setStartBefore(l),o.setEndBefore(l)),q.remove(l),r.setRng(o)),r.onSetContent.dispatch(r,k),f.addVisual()},mceInsertRawHTML:function(a,b,c){r.setContent("tiny_mce_marker"),f.setContent(f.getContent().replace(/tiny_mce_marker/g,function(){return c}))},mceToggleFormat:function(a,b,c){m(c)},mceSetContent:function(a,b,c){f.setContent(c)},"Indent,Outdent":function(a){var b,d,e;b=t.indentation,d=/[a-z%]+$/i.exec(b),b=parseInt(b),h("InsertUnorderedList")||h("InsertOrderedList")?k(a):(t.forced_root_block||q.getParent(r.getNode(),q.isBlock)||u.apply("div"),c(r.getSelectedBlocks(),function(c){"outdent"==a?(e=Math.max(0,parseInt(c.style.paddingLeft||0)-b),q.setStyle(c,"paddingLeft",e?e+d:"")):q.setStyle(c,"paddingLeft",parseInt(c.style.paddingLeft||0)+b+d)}))},mceRepaint:function(){if(a.isGecko)try{n(d),r.getSel()&&r.getSel().selectAllChildren(f.getBody()),r.collapse(d),o()}catch(b){}},mceToggleFormat:function(a,b,c){u.toggle(c)},InsertHorizontalRule:function(){f.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){f.hasVisual=!f.hasVisual,f.addVisual()},mceReplaceContent:function(a,b,c){f.execCommand("mceInsertContent",!1,c.replace(/\{\$selection\}/g,r.getContent({format:"text"})))},mceInsertLink:function(a,b,c){var d;"string"==typeof c&&(c={href:c}),d=q.getParent(r.getNode(),"a"),c.href=c.href.replace(" ","%20"),d&&c.href||u.remove("link"),c.href&&u.apply("link",c,d)},selectAll:function(){var a=q.getRoot(),b=q.createRng();r.getRng().setStart?(b.setStart(a,0),b.setEnd(a,a.childNodes.length),r.setRng(b)):k("SelectAll")}}),j({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(b){var c="align"+b.substring(7),e=r.isCollapsed()?[q.getParent(r.getNode(),q.isBlock)]:r.getSelectedBlocks(),f=a.map(e,function(a){return!!u.matchNode(a,c)});return-1!==a.inArray(f,d)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){return l(a)},mceBlockQuote:function(){return l("blockquote")},Outdent:function(){var a;if(t.inline_styles){if((a=q.getParent(r.getStart(),q.isBlock))&&parseInt(a.style.paddingLeft)>0)return d;if((a=q.getParent(r.getEnd(),q.isBlock))&&parseInt(a.style.paddingLeft)>0)return d}return h("InsertUnorderedList")||h("InsertOrderedList")||!t.inline_styles&&!!q.getParent(r.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(a){var b=q.getParent(r.getNode(),"ul,ol");return b&&("insertunorderedlist"===a&&"UL"===b.tagName||"insertorderedlist"===a&&"OL"===b.tagName)}},"state"),j({"FontSize,FontName":function(a){var b,c=0;return(b=q.getParent(r.getNode(),"span"))&&(c="fontsize"==a?b.style.fontSize:b.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),c}},"value"),j({Undo:function(){f.undoManager.undo()},Redo:function(){f.undoManager.redo()}})}}(tinymce),function(a){var b=a.util.Dispatcher;a.UndoManager=function(c){function d(){return a.trim(c.getContent({format:"raw",no_events:1}).replace(/<span[^>]+data-mce-bogus[^>]+>[\u200B\uFEFF]+<\/span>/g,""))}function e(){f.typing=!1,f.add()}var f,g,h,i,j,k=0,l=[];return onBeforeAdd=new b(f),h=new b(f),i=new b(f),j=new b(f),h.add(function(a,b){return a.hasUndo()?c.onChange.dispatch(c,b,a):void 0}),i.add(function(a,b){return c.onUndo.dispatch(c,b,a)}),j.add(function(a,b){return c.onRedo.dispatch(c,b,a)}),c.onInit.add(function(){f.add()}),c.onBeforeExecCommand.add(function(a,b,c,d,e){"Undo"==b||"Redo"==b||"mceRepaint"==b||e&&e.skip_undo||f.beforeChange()}),c.onExecCommand.add(function(a,b,c,d,e){"Undo"==b||"Redo"==b||"mceRepaint"==b||e&&e.skip_undo||f.add()}),c.onSaveContent.add(e),c.dom.bind(c.dom.getRoot(),"dragend",e),c.dom.bind(c.getBody(),"focusout",function(a){!c.removed&&f.typing&&e()}),c.onKeyUp.add(function(a,b){var c=b.keyCode;(c>=33&&36>=c||c>=37&&40>=c||45==c||13==c||b.ctrlKey)&&e()}),c.onKeyDown.add(function(a,b){var c=b.keyCode;return c>=33&&36>=c||c>=37&&40>=c||45==c?void(f.typing&&e()):void(!(16>c||c>20)||224==c||91==c||b.ctrlKey||b.metaKey||b.altKey||f.typing||(f.beforeChange(),f.typing=!0,f.add()))}),c.onMouseDown.add(function(a,b){f.typing&&e()}),c.addShortcut("ctrl+z","undo_desc","Undo"),c.addShortcut("ctrl+y","redo_desc","Redo"),f={data:l,typing:!1,deleting:!1,onBeforeAdd:onBeforeAdd,onAdd:h,onUndo:i,onRedo:j,beforeChange:function(){g=c.selection.getBookmark(2,!0)},add:function(a){var b,e,h=c.settings;if(a=a||{},a.content=d(),f.onBeforeAdd.dispatch(f,a),e=l[k],e&&e.content==a.content)return null;if(l[k]&&(l[k].beforeBookmark=g),h.custom_undo_redo_levels&&l.length>h.custom_undo_redo_levels){for(b=0;b<l.length-1;b++)l[b]=l[b+1];l.length--,k=l.length}return a.bookmark=c.selection.getBookmark(2,!0),k<l.length-1&&(l.length=k+1),l.push(a),k=l.length-1,f.onAdd.dispatch(f,a),c.isNotDirty=0,a},transparentChange:function(a){var b=d(),e=l[k];if(e&&e.content==b&&(k>0||1==l.length)){var f=a();return e.content=d(),e.bookmark=c.selection.getBookmark(2,!0),f}return a()},undo:function(){var a;return f.typing&&(f.add(),f.typing=!1,f.deleting=!1),k>0&&(a=l[--k],c.setContent(a.content,{format:"raw"}),c.selection.moveToBookmark(a.beforeBookmark),f.onUndo.dispatch(f,a)),a},redo:function(){var a;return k<l.length-1&&(a=l[++k],c.setContent(a.content,{format:"raw"}),c.selection.moveToBookmark(a.bookmark),f.onRedo.dispatch(f,a)),a},clear:function(){l=[],k=0,f.typing=!1,f.deleting=!1},hasUndo:function(){return k>0||this.typing||this.deleting},hasRedo:function(){return k<l.length-1&&!this.typing}}}}(tinymce),tinymce.ForceBlocks=function(a){function b(){var b,g,h,i,j,k,l,m,n,o=e.getStart(),p=a.getBody(),q=-16777215;if(o&&1===o.nodeType&&c.forced_root_block){for(;o&&o!=p;){if(f[o.nodeName])return;o=o.parentNode}for(b=e.getRng(),b.setStart?(g=b.startContainer,h=b.startOffset,i=b.endContainer,j=b.endOffset):(b.item&&(o=b.item(0),b=a.getDoc().body.createTextRange(),b.moveToElementText(o)),n=b.parentElement().ownerDocument===a.getDoc(),tmpRng=b.duplicate(),tmpRng.collapse(!0),h=-1*tmpRng.move("character",q),tmpRng.collapsed||(tmpRng=b.duplicate(),tmpRng.collapse(!1),j=-1*tmpRng.move("character",q)-h)),o=p.firstChild;o;)if(3===o.nodeType||1==o.nodeType&&!f[o.nodeName]){if(3===o.nodeType&&0==o.nodeValue.length){l=o,o=o.nextSibling,d.remove(l);continue}k||(k=d.create(c.forced_root_block),o.parentNode.insertBefore(k,o),m=!0),l=o,o=o.nextSibling,k.appendChild(l)}else k=null,o=o.nextSibling;if(m){if(b.setStart)b.setStart(g,h),b.setEnd(i,j),e.setRng(b);else if(n)try{b=a.getDoc().body.createTextRange(),b.moveToElementText(p),b.collapse(!0),b.moveStart("character",h),j>0&&b.moveEnd("character",j),b.select()}catch(r){}a.nodeChanged()}}}var c=a.settings,d=a.dom,e=a.selection,f=a.schema.getBlockElements();c.forced_root_block&&(a.onKeyUp.add(b),a.onNodeChange.add(b))},function(a){var b=(a.DOM,a.dom.Event),c=a.each,d=a.extend;a.create("tinymce.ControlManager",{ControlManager:function(b,d){var e=this;d=d||{},e.editor=b,e.controls={},e.onAdd=new a.util.Dispatcher(e),e.onPostRender=new a.util.Dispatcher(e),e.prefix=d.prefix||b.id+"_",e._cls={},e.onPostRender.add(function(){c(e.controls,function(a){a.postRender()})})},get:function(a){return this.controls[this.prefix+a]||this.controls[a]},setActive:function(a,b){var c=null;return(c=this.get(a))&&c.setActive(b),c},setDisabled:function(a,b){var c=null;return(c=this.get(a))&&c.setDisabled(b),c},add:function(a){var b=this;return a&&(b.controls[a.id]=a,b.onAdd.dispatch(a,b)),a},createControl:function(a){var b,d,e,f,g=this,h=g.editor;for(g.controlFactories||(g.controlFactories=[],c(h.plugins,function(a){a.createControl&&g.controlFactories.push(a)})),f=g.controlFactories,d=0,e=f.length;e>d;d++)if(b=f[d].createControl(a,g))return g.add(b);return"|"===a||"separator"===a?g.createSeparator():h.buttons&&(b=h.buttons[a])?g.createButton(a,b):g.add(b)},createDropMenu:function(b,c,e){var f,g,h,i,j=this,k=j.editor;return c=d({"class":"mceDropDown",constrain:k.settings.constrain_menus},c),c["class"]=c["class"]+" "+k.getParam("skin")+"Skin",(h=k.getParam("skin_variant"))&&(c["class"]+=" "+k.getParam("skin")+"Skin"+h.substring(0,1).toUpperCase()+h.substring(1)),c["class"]+="rtl"==k.settings.directionality?" mceRtl":"",b=j.prefix+b,i=e||j._cls.dropmenu||a.ui.DropMenu,f=j.controls[b]=new i(b,c),f.onAddItem.add(function(a,b){var c=b.settings;c.title=k.getLang(c.title,c.title),c.onclick||(c.onclick=function(a){c.cmd&&k.execCommand(c.cmd,c.ui||!1,c.value)})}),k.onRemove.add(function(){f.destroy()}),a.isIE&&(f.onShowMenu.add(function(){k.focus(),g=k.selection.getBookmark(1)}),f.onHideMenu.add(function(){g&&(k.selection.moveToBookmark(g),g=0)})),j.add(f)},createListBox:function(c,e,f){function g(b){return b.settings.use_accessible_selects&&!a.isGecko}var h,i,j=this,k=j.editor;return j.get(c)?null:(e.title=k.translate(e.title),e.scope=e.scope||k,e.onselect||(e.onselect=function(a){k.execCommand(e.cmd,e.ui||!1,a||e.value)}),e=d({title:e.title,"class":"mce_"+c,scope:e.scope,control_manager:j},e),c=j.prefix+c,k.settings.use_native_selects||g(k)?h=new a.ui.NativeListBox(c,e):(i=f||j._cls.listbox||a.ui.ListBox,h=new i(c,e,k)),j.controls[c]=h,a.isWebKit&&h.onPostRender.add(function(a,c){b.add(c,"mousedown",function(){k.bookmark=k.selection.getBookmark(1)}),b.add(c,"focus",function(){k.selection.moveToBookmark(k.bookmark),k.bookmark=null})}),h.hideMenu&&k.onMouseDown.add(h.hideMenu,h),j.add(h))},createButton:function(b,c,e){var f,g,h=this,i=h.editor;return h.get(b)?null:(c.title=i.translate(c.title),c.label=i.translate(c.label),c.scope=c.scope||i,c.onclick||c.menu_button||(c.onclick=function(){i.execCommand(c.cmd,c.ui||!1,c.value)}),c=d({title:c.title,"class":"mce_"+b,unavailable_prefix:i.getLang("unavailable",""),scope:c.scope,control_manager:h},c),b=h.prefix+b,c.menu_button?(g=e||h._cls.menubutton||a.ui.MenuButton,f=new g(b,c,i),i.onMouseDown.add(f.hideMenu,f)):(g=h._cls.button||a.ui.Button,f=new g(b,c,i)),h.add(f))},createMenuButton:function(a,b,c){return b=b||{},b.menu_button=1,this.createButton(a,b,c)},createSplitButton:function(b,c,e){var f,g,h=this,i=h.editor;return h.get(b)?null:(c.title=i.translate(c.title),c.scope=c.scope||i,c.onclick||(c.onclick=function(a){i.execCommand(c.cmd,c.ui||!1,a||c.value)}),c.onselect||(c.onselect=function(a){i.execCommand(c.cmd,c.ui||!1,a||c.value);
}),c=d({title:c.title,"class":"mce_"+b,scope:c.scope,control_manager:h},c),b=h.prefix+b,g=e||h._cls.splitbutton||a.ui.SplitButton,f=h.add(new g(b,c,i)),i.onMouseDown.add(f.hideMenu,f),f)},createColorSplitButton:function(b,c,e){var f,g,h,i=this,j=i.editor;return i.get(b)?null:(c.title=j.translate(c.title),c.scope=c.scope||j,c.onclick||(c.onclick=function(b){a.isIE&&(h=j.selection.getBookmark(1)),j.execCommand(c.cmd,c.ui||!1,b||c.value)}),c.onselect||(c.onselect=function(a){j.execCommand(c.cmd,c.ui||!1,a||c.value)}),c=d({title:c.title,"class":"mce_"+b,menu_class:j.getParam("skin")+"Skin",scope:c.scope,more_colors_title:j.getLang("advanced.more_colors")},c),b=i.prefix+b,g=e||i._cls.colorsplitbutton||a.ui.ColorSplitButton,f=new g(b,c,j),j.onMouseDown.add(f.hideMenu,f),j.onRemove.add(function(){f.destroy()}),a.isIE&&(f.onShowMenu.add(function(){j.focus(),h=j.selection.getBookmark(1)}),f.onHideMenu.add(function(){h&&(j.selection.moveToBookmark(h),h=0)})),i.add(f))},createToolbar:function(b,c,d){var e,f,g=this;return b=g.prefix+b,f=d||g._cls.toolbar||a.ui.Toolbar,e=new f(b,c,g.editor),g.get(b)?null:g.add(e)},createToolbarGroup:function(b,c,d){var e,f,g=this;return b=g.prefix+b,f=d||this._cls.toolbarGroup||a.ui.ToolbarGroup,e=new f(b,c,g.editor),g.get(b)?null:g.add(e)},createSeparator:function(b){var c=b||this._cls.separator||a.ui.Separator;return new c},setControlType:function(a,b){return this._cls[a.toLowerCase()]=b},destroy:function(){c(this.controls,function(a){a.destroy()}),this.controls=null}})}(tinymce),function(a){var b=a.util.Dispatcher,c=a.each,d=a.isIE,e=a.isOpera;a.create("tinymce.WindowManager",{WindowManager:function(a){var c=this;c.editor=a,c.onOpen=new b(c),c.onClose=new b(c),c.params={},c.features={}},open:function(b,f){var g,h,i,j,k=this,l="",m="modal"==k.editor.settings.dialog_type,n=a.DOM.getViewPort();b=b||{},f=f||{},h=e?n.w:screen.width,i=e?n.h:screen.height,b.name=b.name||"mc_"+(new Date).getTime(),b.width=parseInt(b.width||320),b.height=parseInt(b.height||240),b.resizable=!0,b.left=b.left||parseInt(h/2)-b.width/2,b.top=b.top||parseInt(i/2)-b.height/2,f.inline=!1,f.mce_width=b.width,f.mce_height=b.height,f.mce_auto_focus=b.auto_focus,m&&d&&(b.center=!0,b.help=!1,b.dialogWidth=b.width+"px",b.dialogHeight=b.height+"px",b.scroll=b.scrollbars||!1),c(b,function(b,c){a.is(b,"boolean")&&(b=b?"yes":"no"),/^(name|url)$/.test(c)||(l+=d&&m?(l?";":"")+c+":"+b:(l?",":"")+c+"="+b)}),k.features=b,k.params=f,k.onOpen.dispatch(k,b,f),j=b.url||b.file,j=a._addVer(j);try{d&&m?(g=1,window.showModalDialog(j,window,l)):g=window.open(j,b.name,l)}catch(o){}g||alert(k.editor.getLang("popup_blocked"))},close:function(a){a.close(),this.onClose.dispatch(this)},createInstance:function(b,c,d,e,f,g){var h=a.resolve(b);return new h(c,d,e,f,g)},confirm:function(a,b,c,d){d=d||window,b.call(c||this,d.confirm(this._decode(this.editor.getLang(a,a))))},alert:function(a,b,c,d){var e=this;d=d||window,d.alert(e._decode(e.editor.getLang(a,a))),b&&b.call(c||e)},resizeBy:function(a,b,c){c.resizeBy(a,b)},_decode:function(b){return a.DOM.decode(b).replace(/\\n/g,"\n")}})}(tinymce),function(a){a.Formatter=function(b){function c(a){return a.nodeType&&(a=a.nodeName),!!b.schema.getTextBlockElements()[a.toLowerCase()]}function d(a){return/^(td|th|li|body)$/.test(a)}function e(a,b){return L.getParents(a,b,L.getRoot())}function f(a){return 1===a.nodeType&&"_mce_caret"===a.id}function g(){j({alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(a){return!0},onformat:function(a,b,c){K(c,function(b,c){L.setAttrib(a,c,b)})}},removeformat:[{selector:"pre.jive_macro_alert",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),K("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(a){j(a,{block:a,remove:"all"})}),j(b.settings.formats)}function h(){b.addShortcut("ctrl+b","bold_desc","Bold"),b.addShortcut("ctrl+i","italic_desc","Italic"),b.addShortcut("ctrl+u","underline_desc","Underline");for(var a=1;6>=a;a++)b.addShortcut("ctrl+"+a,"",["FormatBlock",!1,"h"+a]);b.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),b.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),b.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}function i(a){return a?J[a]:J}function j(a,b){a&&("string"!=typeof a?K(a,function(a,b){j(b,a)}):(b=b.length?b:[b],K(b,function(a){a.deep===I&&(a.deep=!a.selector),a.split===I&&(a.split=!a.selector||a.inline),a.remove===I&&a.selector&&!a.inline&&(a.remove="none"),a.selector&&a.inline&&(a.mixed=!0,a.block_expand=!0),"string"==typeof a.classes&&(a.classes=a.classes.split(/\s+/))}),J[a]=b))}function k(e,g,h){function j(a,b){b=b||u,a&&(b.onformat&&b.onformat(a,b,g,h),K(b.styles,function(b,c){L.setStyle(a,c,v(b,g))}),K(b.attributes,function(b,c){L.setAttrib(a,c,v(b,g))}),K(b.classes,function(b){b=v(b,g),L.hasClass(a,b)||L.addClass(a,b)}))}function l(){function a(a,b){var c=new N(b);for(h=c.current();h;h=c.prev())if(h.childNodes.length>1||h==a||"BR"==h.tagName)return h}var c=b.selection.getRng(),d=c.startContainer,e=c.endContainer;if(d!=e&&0===c.endOffset){var f=a(d,e),g=3==f.nodeType?f.length:f.childNodes.length;c.setEnd(f,g)}return c}function m(b,c,d,e,f){var g,h,i=[],j=-1,k=-1,l=-1;return K(b.childNodes,function(a,b){return"UL"===a.nodeName||"OL"===a.nodeName?(j=b,g=a,!1):void 0}),K(b.childNodes,function(a,b){"SPAN"===a.nodeName&&"bookmark"==L.getAttrib(a,"data-mce-type")&&(a.id==c.id+"_start"?k=b:a.id==c.id+"_end"&&(l=b))}),0>=j||j>k&&l>j?(K(a.grep(b.childNodes),f),0):(h=L.clone(d,V),K(a.grep(b.childNodes),function(a,b){(j>k&&j>b||k>j&&b>j)&&(i.push(a),a.parentNode.removeChild(a))}),j>k?b.insertBefore(h,g):k>j&&b.insertBefore(h,g.nextSibling),e.push(h),K(i,function(a){h.appendChild(a)}),h)}function o(h,i,k){function l(a){var b=0;return K(a.childNodes,function(a){w(a)||C(a)||b++}),b}var o,q,r=[],v=!0;o=u.inline||u.block,q=L.create(o),j(q),O.walk(h,function(h){function s(h){var y,z,A,B,D;if(D=v,y=h.nodeName.toLowerCase(),z=h.parentNode.nodeName.toLowerCase(),1===h.nodeType&&X(h)&&(D=v,v="true"===X(h),B=!0),!(3==h.nodeType&&""==h.nodeValue||C(h))){if(t(y,"br"))return w=0,void(u.block&&L.remove(h));if(u.wrapper&&n(h,e,g))return void(w=0);if(v&&!B&&u.block&&!u.wrapper&&c(y))return h=L.rename(h,o),j(h),r.push(h),a.isIE&&0==l(h)&&!function(){var a=b.getDoc().createTextNode(T);h.appendChild(a),setTimeout(function(){L.remove(a)},0)}(),void(w=0);if(u.selector&&(K(p,function(a){"collapsed"in a&&a.collapsed!==x||L.is(h,a.selector)&&!f(h)&&(j(h,a),A=!0)}),!u.inline||A))return void(w=0);if(!v||B||!P(o,y)||!P(z,o)||!k&&3===h.nodeType&&1===h.nodeValue.length&&65279===h.nodeValue.charCodeAt(0)||f(h)||u.inline&&Q(h)?"li"==y&&i?w=m(h,i,q,r,s):(w=0,K(a.grep(h.childNodes),s),B&&(v=D),w=0):(w||(w=L.clone(q,V),h.parentNode.insertBefore(w,h),r.push(w)),w.appendChild(h)),0==r.length&&d(h.nodeName.toLowerCase())&&0==l(h))for(w=q.cloneNode(V),h.appendChild(w),r.push(w);h.firstChild!=w;)w.appendChild(h.firstChild)}}var w;K(h,s)}),u.wrap_links===!1&&K(r,function(b){function c(b){var d,e,f;if("A"===b.nodeName){for(e=L.clone(q,V),r.push(e),f=a.grep(b.childNodes),d=0;d<f.length;d++)e.appendChild(f[d]);b.appendChild(e)}K(a.grep(b.childNodes),c)}c(b)}),K(r,function(a){function b(a){var b,c;return K(a.childNodes,function(a){return 1!=a.nodeType||C(a)||f(a)?void 0:(b=a,V)}),b&&s(b,u)&&(c=L.clone(b,V),j(c),L.replace(c,a,W),L.remove(b,1)),c||a}var c;if(c=l(a),0===c&&!(r.length<=1&&a.parentNode&&d(a.parentNode.nodeName.toLowerCase())))return void L.remove(a,1);if(u.inline||u.wrapper){if(u.exact||1!==c||(a=b(a)),K(p,function(b){K(L.select(b.inline,a),function(a){var c;if(b.wrap_links===!1){c=a.parentNode;do if("A"===c.nodeName)return;while(c=c.parentNode)}z(b,g,a,b.exact?a:null)})}),n(a.parentNode,e,g))return L.remove(a,1),a=0,W;u.merge_with_parents&&L.getParent(a.parentNode,function(b){return n(b,e,g)?(L.remove(a,1),a=0,W):void 0}),a&&u.merge_siblings!==!1&&(a=D(B(a),a),a=D(a,B(a,W)))}}),b.onFormatChange.dispatch(u,!0)}var p=i(e);if(null!=p){var q,r,u=p[0],x=M.isCollapsed();if(u)if(h)h.nodeType?(r=L.createRng(),r.setStartBefore(h),r.setEndAfter(h),o(y(r,p),null,!0)):o(h,null,!0);else if(x&&u.inline&&!L.select("td.mceSelected,th.mceSelected").length)F("apply",e,g);else{var A=b.selection.getNode();R||!p[0].defaultBlock||L.getParent(A,L.isBlock)||k(p[0].defaultBlock),b.selection.setRng(l()),q=M.getBookmark(),o(y(M.getRng(W),p),q),u.styles&&(u.styles.color||u.styles.textDecoration)&&(a.walk(A,Z,"childNodes"),Z(A)),M.moveToBookmark(q),G(M.getRng(W)),b.nodeChanged()}}}function l(c,d,f){function g(b){var c,e,f,h,i;if(3!==b.nodeType){if(1===b.nodeType&&X(b)&&(h=t,t="true"===X(b),i=!0),c=a.grep(b.childNodes),t&&!i)for(e=0,f=r.length;f>e&&!z(r[e],d,b,b);e++);if(s.deep&&c.length){for(e=0,f=c.length;f>e;e++)g(c[e]);i&&(t=h)}}}function h(a){var b;return K(e(a.parentNode).reverse(),function(a){var e;b||"_start"==a.id||"_end"==a.id||(e=n(a,c,d),e&&e.split!==!1&&(b=a))}),b}function j(a,b,c,e){var f,g,h,i,j,k;if(a){for(k=a.parentNode,f=b.parentNode;f&&f!=k;f=f.parentNode){for(g=L.clone(f,V),j=0;j<r.length;j++)if(z(r[j],d,g,g)){g=0;break}g&&(h&&g.appendChild(h),i||(i=g),h=g)}!e||s.mixed&&Q(a)||(b=L.split(a,b)),h&&(c.parentNode.insertBefore(h,c),i.appendChild(c))}return b}function k(a){return j(h(a),a,a,!0)}function l(a){var b=L.get(a?"_start":"_end"),c=b[a?"firstChild":"lastChild"];return C(c)&&(c=c[a?"firstChild":"lastChild"]),L.remove(b,!0),c}function m(a){var c,d;a=y(a,r,W),s.split&&(c=E(a,W),d=E(a),c!=d?(/^(TR|TD)$/.test(c.nodeName)&&c.firstChild&&(c=("TD"==c.nodeName?c.firstChild:c.firstChild.firstChild)||c),c=x(c,"span",{id:"_start","data-mce-type":"bookmark"}),d=x(d,"span",{id:"_end","data-mce-type":"bookmark"}),k(c),k(d),c=l(W),d=l()):c=d=k(c),a.startContainer=c.parentNode,a.startOffset=S(c),a.endContainer=d.parentNode,a.endOffset=S(d)+1),O.walk(a,function(a){K(a,function(a){g(a),1===a.nodeType&&"underline"===b.dom.getStyle(a,"text-decoration")&&a.parentNode&&"underline"===Y(a.parentNode)&&z({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,a)})}),b.onFormatChange.dispatch(s,!1)}var p,q,r=i(c),s=r[0],t=!0;return f?void(f.nodeType?(q=L.createRng(),q.setStartBefore(f),q.setEndAfter(f),m(q)):m(f)):void(M.isCollapsed()&&s.inline&&!L.select("td.mceSelected,th.mceSelected").length?F("remove",c,d):(p=M.getBookmark(),m(M.getRng(W)),M.moveToBookmark(p),s.inline&&o(c,d,M.getStart())&&G(M.getRng(!0)),b.nodeChanged()))}function m(a,b,c){var d=i(a);!o(a,b,c)||"toggle"in d[0]&&!d[0].toggle?k(a,b,c):l(a,b,c)}function n(a,b,c,d){function e(a,b,e){var f,g,h,i=b[e];if(b.onmatch)return b.onmatch(a,b,e);if(i)if(i.length===I){for(f in i)if(i.hasOwnProperty(f)){if(g="attributes"===e?L.getAttrib(a,f):u(a,f),d&&!g&&!b.exact)return;if((!d||b.exact)&&!t(g,v(i[f],c)))return}}else for(h=0;h<i.length;h++)if("attributes"===e?L.getAttrib(a,i[h]):u(a,i[h]))return b;return b}var f,g,h,j=i(b);if(j&&a)for(g=0;g<j.length;g++)if(f=j[g],s(a,f)&&e(a,f,"attributes")&&e(a,f,"styles")){if(h=f.classes)for(g=0;g<h.length;g++)if(!L.hasClass(a,h[g]))return;return f}}function o(a,b,c){function d(c){return c=L.getParent(c,function(c){return!!n(c,a,b,!0)}),n(c,a,b)}var e;return c?d(c):(c=M.getNode(),d(c)?W:(e=M.getStart(),e!=c&&d(e)?W:V))}function p(a,b){var c,d=[],e={};return c=M.getStart(),L.getParent(c,function(c){var f,g;for(f=0;f<a.length;f++)g=a[f],!e[g]&&n(c,g,b)&&(e[g]=!0,d.push(g))},L.getRoot()),d}function q(a){var b,c,d,f,g,h=i(a);if(h)for(b=M.getStart(),c=e(b),f=h.length-1;f>=0;f--){if(g=h[f].selector,!g)return W;for(d=c.length-1;d>=0;d--)if(L.is(c[d],g))return W}return V}function r(a,c,d){var f;return H||(H={},f={},b.onNodeChange.addToTop(function(a,b,c){var d=e(c),g={};K(H,function(a,b){K(d,function(c){return n(c,b,{},a.similar)?(f[b]||(K(a,function(a){a(!0,{node:c,format:b,parents:d})}),f[b]=a),g[b]=a,!1):void 0})}),K(f,function(a,b){g[b]||(delete f[b],K(a,function(a){a(!1,{node:c,format:b,parents:d})}))})})),K(a.split(","),function(a){H[a]||(H[a]=[],H[a].similar=d),H[a].push(c)}),this}function s(a,b){return t(a,b.inline)?W:t(a,b.block)?W:b.selector?L.is(a,b.selector):void 0}function t(a,b){return a=a||"",b=b||"",a=""+(a.nodeName||a),b=""+(b.nodeName||b),a.toLowerCase()==b.toLowerCase()}function u(a,b){var c=L.getStyle(a,b);return"color"!=b&&"backgroundColor"!=b||(c=L.toHex(c)),"fontWeight"==b&&700==c&&(c="bold"),""+c}function v(a,b){return"string"!=typeof a?a=a(b):b&&(a=a.replace(/%(\w+)/g,function(a,c){return b[c]||a})),a}function w(a){return a&&3===a.nodeType&&/^([\t \r\n]+|)$/.test(a.nodeValue)}function x(a,b,c){var d=L.create(b,c);return a.parentNode.insertBefore(d,a),d.appendChild(a),d}function y(a,d,f){function g(a){function b(a){return"BR"==a.nodeName&&a.getAttribute("data-mce-bogus")&&!a.nextSibling}var c,e,f,g,h;if(c=e=a?p:r,g=a?"previousSibling":"nextSibling",h=L.getRoot(),3==c.nodeType&&!w(c)&&(a?q>0:s<c.nodeValue.length))return c;for(;;){if(!d[0].block_expand&&Q(e))return e;for(f=e[g];f;f=f[g])if(!C(f)&&!w(f)&&!b(f))return e;if(e.parentNode==h){c=e;break}e=e.parentNode}return c}function h(a,b){for(b===I&&(b=3===a.nodeType?a.length:a.childNodes.length);a&&a.hasChildNodes();)a=a.childNodes[b],a&&(b=3===a.nodeType?a.length:a.childNodes.length);return{node:a,offset:b}}function i(a){for(var b=a;b;){if(1===b.nodeType&&X(b))return"false"===X(b)?b:a;b=b.parentNode}return a}function j(a,c,d){function e(a,b){var c,e,g=a.nodeValue;return"undefined"==typeof b&&(b=d?g.length:0),d?(c=g.lastIndexOf(" ",b),e=g.lastIndexOf(" ",b),c=c>e?c:e,-1===c||f||c++):(c=g.indexOf(" ",b),e=g.indexOf(" ",b),c=-1!==c&&(-1===e||e>c)?c:e),c}var g,h,i,j;if(3===a.nodeType){if(i=e(a,c),-1!==i)return{container:a,offset:i};j=a}for(g=new N(a,L.getParent(a,Q)||b.getBody());h=g[d?"prev":"next"]();)if(3===h.nodeType){if(j=h,i=e(h),-1!==i)return{container:h,offset:i}}else if(Q(h))break;return j?(c=d?0:j.length,{container:j,offset:c}):void 0}function k(b,c){var f,g,h,i;for(3==b.nodeType&&0===b.nodeValue.length&&b[c]&&(b=b[c]),f=e(b),g=0;g<f.length;g++)for(h=0;h<d.length;h++)if(i=d[h],!("collapsed"in i&&i.collapsed!==a.collapsed)&&L.is(f[g],i.selector))return f[g];return b}function l(a,b,f){var g;if(d[0].wrapper||(g=L.getParent(a,d[0].block)),g||(g=L.getParent(3==a.nodeType?a.parentNode:a,c)),g&&d[0].wrapper&&(g=e(g,"ul,ol").reverse()[0]||g),!g)for(g=a;g[b]&&!Q(g[b])&&(g=g[b],!t(g,"br")););return g||a}var m,n,o,p=a.startContainer,q=a.startOffset,r=a.endContainer,s=a.endOffset;if(1==p.nodeType&&p.hasChildNodes()&&(m=p.childNodes.length-1,p=p.childNodes[q>m?m:q],3==p.nodeType&&(q=0)),1==r.nodeType&&r.hasChildNodes()&&(m=r.childNodes.length-1,r=r.childNodes[s>m?m:s-1],3==r.nodeType&&(s=r.nodeValue.length)),p=i(p),r=i(r),(C(p.parentNode)||C(p))&&(p=C(p)?p:p.parentNode,p=p.nextSibling||p,3==p.nodeType&&(q=0)),(C(r.parentNode)||C(r))&&(r=C(r)?r:r.parentNode,r=r.previousSibling||r,3==r.nodeType&&(s=r.length)),d[0].inline&&(a.collapsed&&(o=j(p,q,!0),o&&(p=o.container,q=o.offset),o=j(r,s),o&&(r=o.container,s=o.offset)),n=h(r,s),n.node)){for(;n.node&&0===n.offset&&n.node.previousSibling;)n=h(n.node.previousSibling);n.node&&n.offset>0&&3===n.node.nodeType&&" "===n.node.nodeValue.charAt(n.offset-1)&&n.offset>1&&(r=n.node,r.splitText(n.offset-1))}return(d[0].inline||d[0].block_expand)&&(d[0].inline&&3==p.nodeType&&0!==q||(p=g(!0)),d[0].inline&&3==r.nodeType&&s!==r.nodeValue.length||(r=g())),d[0].selector&&d[0].expand!==V&&!d[0].inline&&(p=k(p,"previousSibling"),r=k(r,"nextSibling")),(d[0].block||d[0].selector)&&(p=l(p,"previousSibling"),r=l(r,"nextSibling"),d[0].block&&(Q(p)||(p=g(!0)),Q(r)||(r=g()))),1==p.nodeType&&(q=S(p),p=p.parentNode),1==r.nodeType&&(s=S(r)+1,r=r.parentNode),{startContainer:p,startOffset:q,endContainer:r,endOffset:s}}function z(a,b,c,d){var e,f,g;if(!s(c,a))return V;if("all"!=a.remove)for(K(a.styles,function(a,e){a=v(a,b),"number"==typeof e&&(e=a,d=0),d&&!t(u(d,e),a)||L.setStyle(c,e,""),g=1}),g&&""==L.getAttrib(c,"style")&&(c.removeAttribute("style"),c.removeAttribute("data-mce-style")),K(a.attributes,function(a,e){var f;if(a=v(a,b),"number"==typeof e&&(e=a,d=0),!d||t(L.getAttrib(d,e),a)){if("class"==e&&(a=L.getAttrib(c,e),a&&(f="",K(a.split(/\s+/),function(a){/mce\w+/.test(a)&&(f+=(f?" ":"")+a)}),f)))return void L.setAttrib(c,e,f);"class"==e&&c.removeAttribute("className"),U.test(e)&&c.removeAttribute("data-mce-"+e),c.removeAttribute(e)}}),K(a.classes,function(a){a=v(a,b),d&&!L.hasClass(d,a)||L.removeClass(c,a)}),f=L.getAttribs(c),e=0;e<f.length;e++)if(0!==f[e].nodeName.indexOf("_"))return V;return"none"!=a.remove?(A(c,a),W):void 0}function A(b,c){function d(a,b,c){return a=B(a,b,c),!a||"BR"==a.nodeName||Q(a)}var e,f=b.parentNode;c.block&&(R?f==L.getRoot()&&(c.list_block&&t(b,c.list_block)||K(a.grep(b.childNodes),function(a){P(R,a.nodeName.toLowerCase())?e?e.appendChild(a):e=x(a,R):e=0})):Q(b)&&!Q(f)&&(d(b,V)||d(b.firstChild,W,1)||b.insertBefore(L.create("br"),b.firstChild),d(b,W)||d(b.lastChild,V,1)||b.appendChild(L.create("br")))),c.selector&&c.inline&&!t(c.inline,b)||L.remove(b,1)}function B(a,b,c){if(a)for(b=b?"nextSibling":"previousSibling",a=c?a:a[b];a;a=a[b])if(1==a.nodeType||!w(a))return a}function C(a){return a&&1==a.nodeType&&"bookmark"==a.getAttribute("data-mce-type")}function D(b,c){function d(a,b){function c(a){var b={};return K(L.getAttribs(a),function(c){var d=c.nodeName.toLowerCase();0!==d.indexOf("_")&&"style"!==d&&(b[d]=L.getAttrib(a,d))}),b}function d(a,b){var c,d;for(d in a)if(a.hasOwnProperty(d)){if(c=b[d],c===I)return V;if(a[d]!=c)return V;delete b[d]}for(d in b)if(b.hasOwnProperty(d))return V;return W}return a.nodeName!=b.nodeName?V:d(c(a),c(b))&&d(L.parseStyle(L.getAttrib(a,"style")),L.parseStyle(L.getAttrib(b,"style")))?W:V}function e(a,b){for(f=a;f;f=f[b]){if(3==f.nodeType&&0!==f.nodeValue.length)return a;if(1==f.nodeType&&!C(f))return f}return a}var f,g;if(b&&c&&(b=e(b,"previousSibling"),c=e(c,"nextSibling"),d(b,c))){for(f=b.nextSibling;f&&f!=c;)g=f,f=f.nextSibling,b.appendChild(g);return L.remove(c),K(a.grep(c.childNodes),function(a){b.appendChild(a)}),b}return c}function E(a,c){var d,e,f;return d=a[c?"startContainer":"endContainer"],e=a[c?"startOffset":"endOffset"],1==d.nodeType&&(f=d.childNodes.length-1,!c&&e&&e--,d=d.childNodes[e>f?f:e]),3===d.nodeType&&c&&e>=d.nodeValue.length&&(d=new N(d,b.getBody()).next()||d),3!==d.nodeType||c||0!==e||(d=new N(d,b.getBody()).prev()||d),d}function F(d,e,f){function g(a){var c=L.create("span",{id:s,"data-mce-bogus":!0,style:t?"color:red":""});return a&&c.appendChild(b.getDoc().createTextNode(T)),c}function h(a,b){for(;a;){if(3===a.nodeType&&a.nodeValue!==T||a.childNodes.length>1)return!1;b&&1===a.nodeType&&b.push(a),a=a.firstChild}return!0}function j(a){for(;a;){if(a.id===s)return a;a=a.parentNode}}function m(a){var b;if(a)for(b=new N(a,a),a=b.current();a;a=b.next())if(3===a.nodeType)return a}function o(a,b){var c,d;if(a)d=M.getRng(!0),h(a)?(b!==!1&&(d.setStartBefore(a),d.setEndBefore(a)),L.remove(a)):(c=m(a),c.nodeValue.charAt(0)===T&&(c=c.deleteData(0,1)),L.remove(a,1)),M.setRng(d);else if(a=j(M.getStart()),!a)for(;a=L.get(s);)o(a,!1)}function p(){var a,b,c,d,h,l,n;a=M.getRng(!0),d=a.startOffset,l=a.startContainer,n=l.nodeValue,b=j(M.getStart()),b&&(c=m(b)),n&&d>0&&d<n.length&&/\w/.test(n.charAt(d))&&/\w/.test(n.charAt(d-1))?(h=M.getBookmark(),a.collapse(!0),a=y(a,i(e)),a=O.split(a),k(e,f,a),M.moveToBookmark(h)):(b&&c.nodeValue===T?k(e,f,b):(b=g(!0),c=b.firstChild,a.insertNode(b),d=1,k(e,f,b)),M.setCursorLocation(c,d))}function q(){var a,b,d,h,j,k,m,o,p=M.getRng(!0),q=[];for(a=p.startContainer,b=p.startOffset,j=a,3==a.nodeType&&(b==a.nodeValue.length&&a.nodeValue!==T||(h=!0),j=j.parentNode);j;){if(n(j,e,f)){k=j;break}j.nextSibling&&(h=!0),q.push(j),j=j.parentNode}if(k)if(h)d=M.getBookmark(),p.collapse(!0),p=y(p,i(e),!0),p=O.split(p),l(e,f,p),M.moveToBookmark(d);else{for(o=g(),j=o,m=q.length-1;m>=0;m--)j.appendChild(L.clone(q[m],!1)),j=j.firstChild;j.appendChild(L.doc.createTextNode(T)),j=j.firstChild;var r=L.getParent(k,c);r&&L.isEmpty(r)?k.parentNode.replaceChild(o,k):L.insertAfter(o,k),M.setCursorLocation(j,1),L.isEmpty(k)&&L.remove(k)}}function r(){var b;b=j(M.getStart()),b&&!L.isEmpty(b)&&a.walk(b,function(a){1!=a.nodeType||a.id===s||L.isEmpty(a)||L.setAttrib(a,"data-mce-bogus",null)},"childNodes")}var s="_mce_caret",t=b.settings.caret_debug;self._hasCaretEvents||(b.onBeforeGetContent.addToTop(function(){var a,b=[];if(h(j(M.getStart()),b))for(a=b.length;a--;)L.setAttrib(b[a],"data-mce-bogus","1")}),a.each("onMouseUp onKeyUp".split(" "),function(a){b[a].addToTop(function(){o(),r()})}),b.onKeyDown.addToTop(function(a,b){var c=b.keyCode;8!=c&&37!=c&&39!=c||o(j(M.getStart())),r()}),M.onSetContent.add(r),self._hasCaretEvents=!0),"apply"==d?p():q()}function G(a){var b,c,d,e,f,g=a.startContainer,h=a.startOffset;if(3==g.nodeType&&h>=g.nodeValue.length&&(h=S(g),g=g.parentNode,b=!0),1==g.nodeType)for(e=g.childNodes,g=e[Math.min(h,e.length-1)],c=new N(g,L.getParent(g,L.isBlock)),(h>e.length-1||b)&&c.next(),d=c.current();d;d=c.next())if(3==d.nodeType&&!w(d))return f=L.create("a",null,T),d.parentNode.insertBefore(f,d),a.setStart(d,0),M.setRng(a),void L.remove(f)}var H,I,J={},K=a.each,L=b.dom,M=b.selection,N=a.dom.TreeWalker,O=new a.dom.RangeUtils(L),P=b.schema.isValidChild,Q=(a.isArray,L.isBlock),R=b.settings.forced_root_block,S=L.nodeIndex,T=a.isIE8?"\ufeff":"​",U=/^(src|href|style)$/,V=!1,W=!0,X=L.getContentEditable,Y=function(a){var c;return b.dom.getParent(a,function(a){return c=b.dom.getStyle(a,"text-decoration"),c&&"none"!==c}),c},Z=function(a){var c;1===a.nodeType&&a.parentNode&&1===a.parentNode.nodeType&&(c=Y(a.parentNode),b.dom.getStyle(a,"color")&&c?b.dom.setStyle(a,"text-decoration",c):b.dom.getStyle(a,"textdecoration")===c&&b.dom.setStyle(a,"text-decoration",null))};a.extend(this,{get:i,register:j,apply:k,remove:l,toggle:m,match:o,matchAll:p,matchNode:n,canApply:q,formatChanged:r}),g(),h()}}(tinymce),tinymce.onAddEditor.add(function(a,b){function c(b,c){a.each(c,function(a,c){a&&g.setStyle(b,c,a)}),g.rename(b,"span")}function d(c,d){g=c.dom,h.convert_fonts_to_spans&&a.each(g.select("font,u,strike",d.node),function(a){e[a.nodeName.toLowerCase()](b.dom,a)})}var e,f,g,h=b.settings;h.inline_styles&&(f=a.explode(h.font_size_style_values),e={font:function(a,b){c(b,{backgroundColor:b.style.backgroundColor,color:b.color,fontFamily:b.face,fontSize:f[parseInt(b.size,10)-1]})},u:function(a,b){c(b,{textDecoration:"underline"})},strike:function(a,b){c(b,{textDecoration:"line-through"})}},b.onPreProcess.add(d),b.onSetContent.add(d),b.onInit.add(function(){b.selection.onSetContent.add(d)}))}),function(){function a(a){return a&&3==a.nodeType}function b(b){return a(b.c)}function c(a){return a&&a.c&&1==a.c.nodeType&&"body"==a.c.nodeName.toLowerCase()}function d(a){return b(a)?a.off==a.c.nodeValue.length:a.off==a.c.childNodes.length}function e(a){return b(a)&&0==a.c.nodeValue.length}function f(a){var c=j(a);return b(a)&&!d(a)||c&&"br"==c.nodeName.toLowerCase()}function g(a){return a=a.toLowerCase(),function(b){var c=j(b);return c&&c.nodeName&&c.nodeName.toLowerCase()==a}}function h(a){return a=a.toLowerCase(),function(b){return b&&b.c&&1==b.c.nodeType&&b.c.nodeName.toLowerCase()==a}}function i(a){return function(b){return b.c==a}}function j(a){return a&&a.c&&a.off>=0&&a.c.childNodes&&a.c.childNodes.length>a.off?a.c.childNodes[a.off]:null}function k(a){var b=tinymce.activeEditor.dom;return{c:a.parentNode,off:b.nodeIndex(a)}}function l(a){var b=tinymce.activeEditor.dom;return{c:a.parentNode,off:b.nodeIndex(a)+1}}function m(a,b){a.setStart(b.c,b.off)}function n(a,b){a.setEnd(b.c,b.off)}function o(a){return{c:a.startContainer,off:a.startOffset}}function p(a){return{c:a.endContainer,off:a.endOffset}}function q(a){var b=a.nodeName;return"#text"==b&&(b="#"+a.nodeValue),b}tinymce.SelectionUtil=function(r){this.ed=r;var s={startPos:o,endPos:p,nodeAt:j,logSelection:function(a){this.ed.selection.getRng(!0).cloneRange();a||(a="");var b=this.ed.selection.getSel();if(0==b.rangeCount);else{this.isForwardSelection()?"->":"<-";b.anchorNode}},posStr:function t(a,b){var c=tinymce.activeEditor.dom.nodeIndex,d="";return a.parentNode&&"HTML"!=a.parentNode.nodeName&&(d=t(a.parentNode,c(a))+"/"),d+q(a)+(null!=b?"["+b+"]":"")},logRange:function(a,b){a||(a="")},normalizeSelection:function(){if(!tinymce.isIE||tinymce.isIE9){var a=this.ed.selection,b=a.getSel();if(!b)return;if(0==b.rangeCount)return;var c=this.isForwardSelection(b),d=a.getRng(!0),e=d;if(e.startContainer==e.endContainer&&e.startOffset==e.endOffset&&"body"==e.startContainer.nodeName.toLowerCase()){var f=e.startOffset;if(f<e.startContainer.childNodes.length){var g=e.startContainer.childNodes[f];e=this.ed.dom.createRng(),e.setStart(g,0),e.setEnd(g,0)}}var h=this.normalizeRange(e);0==h.compareBoundaryPoints(h.START_TO_START,d)&&0==h.compareBoundaryPoints(h.END_TO_END,d)||this.setSelection(h,c)}},isForwardSelection:function(a){if(a||(a=this.ed.selection.getSel()),null==a.anchorNode||null==a.focusNode)return!0;try{var b=this.ed.dom.createRng();b.setStart(a.anchorNode,a.anchorOffset),b.collapse(!0);var c=this.ed.dom.createRng();return c.setStart(a.focusNode,a.focusOffset),c.collapse(!0),b.compareBoundaryPoints(b.START_TO_START,c)<=0}catch(d){return!0}},setSelection:function(a,b){var c=this.ed.selection.getSel();null!=c.collapse&&null!=c.extend?b?(c.collapse(a.startContainer,a.startOffset),c.extend(a.endContainer,a.endOffset)):(c.collapse(a.endContainer,a.endOffset),c.extend(a.startContainer,a.startOffset)):this.ed.selection.setRng(a)},getInfo:function(){return{longname:"Jive Selection",author:"Jive Software",authorurl:"http://jivesoftware.com",infourl:"http://jivesoftware.com",version:tinyMCE.majorVersion+"."+tinyMCE.minorVersion}},isBookmark:function(a){var b=this.ed.dom.get(a);return b&&"span"==b.nodeName.toLowerCase()&&"bookmark"==this.ed.dom.getAttrib(b,"data-mce-type")},removeBookmark:function(a){function b(a){for(var b;b=c.get(a);)tinymce.each(tinymce.grep(b.childNodes),function(a){3==a.nodeType&&(a.nodeValue=a.nodeValue.replace(/\uFEFF/g,""))}),c.remove(b,1)}if(null!=a.id){var c=this.ed.dom;b(a.id+"_start"),b(a.id+"_end")}},adjustForBookmark:function(a,b){function c(a){var b=j(a);return d.isBookmark(b)?b:(b=a.c,d.isBookmark(b)?b:(b=a.c.parentNode,d.isBookmark(b)?b:null))}null==b&&(b=!0);var d=this,e=!1,f=c(o(a));return f&&(b?m(a,k(f)):m(a,l(f)),e=!0),f=c(p(a)),f&&(b?n(a,l(f)):n(a,k(f)),e=!0),e},adjustForAnchorEdges:function(a){var b=!1,c=a.collapsed,d=this.ed.dom.getParent(a.startContainer,"a");if(d&&(this.atStartOf(d,o(a))?(a.setStartBefore(d),b=!0):this.atEndOf(d,o(a))&&(a.setStartAfter(d),b=!0)),c)b&&a.collapse(!0);else{var e=this.ed.dom.getParent(a.endContainer,"a");e&&(this.atStartOf(e,p(a))?(a.setEndBefore(e),b=!0):this.atEndOf(e,p(a))&&(a.setEndAfter(e),b=!0))}return b},isEffectivelyEmpty:function(a){if(a.childNodes&&a.childNodes.length>0)for(var b=a.firstChild;b;){if(3!=b.nodeType&&"br"!=b.nodeName.toLowerCase()||3==b.nodeType&&tinymce.trim(b.nodeValue).length>0)return!1;b=b.nextSibling}return!0},isEffectivelyEmptyList:function(a){var b=/^(?:ul|ol|li)$/i;if(b.test(a.nodeName)){for(var c=a.firstChild;c;){if(b.test(c.nodeName)){if(!this.isEffectivelyEmptyList(c))return!1}else if(3!=c.nodeType&&"br"!=c.nodeName.toLowerCase()||3==c.nodeType&&tinymce.trim(c.nodeValue).length>0)return!1;c=c.nextSibling}return!0}return!1},splitAtEndpoints:function(a,c){function d(a){b(a)&&(0==a.off?a=k(a.c):a.off==a.c.nodeValue.length?(a=k(a.c),a.off+=1):a=k(a.c.splitText(a.off)));var c=h.create("br",{id:h.uniqueId()}),d=j(a);return a.c.insertBefore(c,d),c}function e(a,b){var c=!!$j(a).closest("table").length,d=!!$j(b).closest("table").length;if(c||d){var e,f=$j(a).closest("th,td"),g=$j(b).closest("th,td");f.get(0)!==g.get(0)&&(c&&(e=f.closest("table").get(0),e.parentNode.insertBefore(a,e)),d&&(e=g.closest("table").get(0),h.insertAfter(b,e)))}}function f(a,b){for(;b.parentNode!=a&&!c(b.parentNode);)h.split(b.parentNode,b);b.nextSibling&&1==b.nextSibling.nodeType&&(i.isEffectivelyEmpty(b.nextSibling)||i.isEffectivelyEmptyList(b.nextSibling))&&h.remove(b.nextSibling)}var g=this.ed,h=g.dom,i=this,l=d(p(a)),q=null;if(a.collapsed||(q=d(o(a)),e(q,l)),a=h.createRng(),q?(a.setStartBefore(q),a.setEndAfter(l)):a.selectNode(l),c||(c="body, pre, td"),"string"==typeof c){var r=c;c=function(a){return g.dom.is(a,r)}}var s=null;if(s="li"==a.commonAncestorContainer.nodeName.toLowerCase()?a.commonAncestorContainer:"ul"==a.commonAncestorContainer.parentNode.nodeName.toLowerCase()||"ol"==a.commonAncestorContainer.parentNode.nodeName.toLowerCase()?a.commonAncestorContainer.parentNode.parentNode:a.commonAncestorContainer.parentNode,f(s,l),q&&f(s,q),q){var t=k(q);h.remove(q),m(a,t),t=k(l),h.remove(l),n(a,t)}else t=k(l),h.remove(l),m(a,t),a.collapse(!0);return a},getExpandedBlockRange:function(a,b,c){var d=this.ed.dom,e=d.createRng();a=this.normalizeRange(a),this.adjustForBookmark(a,!0),null==b&&(b=function(a){return d.isBlock(a)}),null==c&&(c="body, td, pre");var f=d.getParent(a.startContainer,c),g=d.getParent(a.endContainer,c);if(!f||!g||f!=g)return null;try{var h;h=f==a.startContainer?a.startContainer.childNodes[a.startOffset]:d.getParent(a.startContainer,b);var i;return i=g==a.endContainer?a.endContainer.childNodes[Math.max(0,a.endOffset-1)]:d.getParent(a.endContainer,b),null==h&&null==i&&a.collapsed?(e.setStart(a.startContainer,a.startOffset),e.setEnd(a.endContainer,a.endOffset),e):h.parentNode!=i.parentNode?null:(e.setStart(h.parentNode,d.nodeIndex(h)),e.setEnd(i.parentNode,d.nodeIndex(i)+1),e)}catch(j){return null}},getShrunkenBlockRange:function u(a,b){var c=this.ed.dom,d=a.cloneRange();if(a=this.normalizeRange(a),this.adjustForBookmark(a,!0),null==b&&(b=function(a){return c.isBlock(a)}),a.startContainer==a.endContainer&&a.startOffset+1==a.endOffset){var e=j(o(a));c.is(e,b)&&(d.surroundContents(e),d=u(d,b))}return d},dfsNext:function(c,d,e){function f(a){return!a.c||null==a.c.parentNode}function g(c){if(b(c))return null;if(d){var e=j(c);if(!e)return null}else{if(c=h(c),!c)return null;if(e=j(c),!e)return null}return a(e)?{c:e,off:d?0:e.nodeValue.length}:{c:e,off:d?0:e.childNodes.length}}function h(a){var c;return b(a)?(c={c:a.c,off:d?a.off+1:a.off-1},0<=c.off&&c.off<=c.c.nodeValue.length?c:null):(c={
c:a.c,off:d?a.off+1:a.off-1},0<=c.off&&c.off<=c.c.childNodes.length?c:null)}function i(a){if(!e||e(a)||!a.c||!a.c.parentNode)return null;var b=a.c.parentNode;return{c:b,off:l.nodeIndex(a.c)+(d?1:0)}}var k=this,l=k.ed.dom;e||(e=f);var m=g(c);return m?m:(m=h(c),m?m:i(c))},atStartOf:function(a,b){function d(a,b){for(var d=null;a&&0==a.off&&(!d||d.c.parentNode==a.c);){if(d=a,b(a))return a;a=e.dfsNext(a,!1,c)}return null}var e=this;if(null==b){var f=this.ed.selection.getRng(!0);b=o(f)}return!!d(b,i(a))},atEndOf:function(a,b){function f(a,b){function f(a){var b=j(a);return"br"==a.c.nodeName.toLowerCase()||b&&"br"==b.nodeName.toLowerCase()}function h(a){var b=j(a);return e(a)||b&&3==b.nodeType&&""==b.nodeValue}for(var i=null;f(a)||h(a);)a=g.dfsNext(a,!0,c);for(;a&&d(a)&&(!i||i.c.parentNode==a.c);){if(i=a,b(a))return a;do a=g.dfsNext(a,!0,c);while(f(a)||h(a))}return null}var g=this;if(null==b){var h=this.ed.selection.getRng(!0);b=o(h)}return!!f(b,i(a))},safeNormalize:function(c,d){function e(c){var d=j(c);if(d){if(a(d)){if(0==c.off)return c;if(0==d.nodeValue.length)return e({c:c.c,off:c.off+1});if(d.previousSibling&&3==d.previousSibling.nodeType)return e({c:d,off:0})}}else if(b(c)){for(var f=c.c,g=c.off;f.previousSibling&&3==f.previousSibling.nodeType;)f=f.previousSibling,g+=f.nodeValue.length;d={c:f,off:g,cPrevSib:f.previousSibling,cParent:f.parentNode}}else d={c:c.c,off:-1};return d}function f(a){var b,c;if(null!=a.c&&null!=a.off){if(null!=a.c.parentNode)b=a.c;else if(null!=a.cPrevSib){if(b=a.cPrevSib.nextSibling,null==b)b=a.cParent,a.off=-1;else if(3!=b.nodeType)return f(b)}else if(b=a.cParent.firstChild,null==b)b=a.cParent,a.off=-1;else if(3!=b.nodeType)return f(b);return c=-1==a.off?b.childNodes.length:a.off,{c:b,off:c}}return b=a.parentNode,c=g.ed.dom.nodeIndex(a),{c:b,off:c}}var g=this;if(null==d&&(d=c.commonAncestorContainer),3==d.nodeType)return c;if(c=c.cloneRange(),tinymce.isGecko||tinymce.isIE9){var h=e({c:c.startContainer,off:c.startOffset}),i=e({c:c.endContainer,off:c.endOffset});d!=c.commonAncestorContainer&&c.commonAncestorContainer.normalize(),d.normalize(),h=f(h),i=f(i),m(c,h),n(c,i)}else{var k=this.ed.selection.getRng(!0),l=this.isForwardSelection();d.normalize&&d.normalize(),0===this.ed.selection.getSel().rangeCount&&this.setSelection(k,l)}return c},normalizeRange:function(a){function e(a){if(a&&1==a.nodeType){var b=C.getStyle(a,"display",!0);return"inline"!=b&&"none"!=b}return!1}function i(a){var b=j(a);return e(b)||l(a)}function k(a){return e(a.c)}function l(a){return e(a.c)&&!j(a)}function q(a){return null==a||i(a)}function r(a,b){return b=b.toLowerCase(),a.nodeName.toLowerCase()==b}function s(a,b,c,d,e){for(;a&&!d(a);){if(b(a))return a;a=E.dfsNext(a,c,e)}return null}function t(a,b,c,d,e,f){var g=d?b:c,h=s(a,g,d,e,f);return h||(g=d?c:b,h=s(a,g,!d,e,f)),h}function u(a){return b(a)&&a.off>0}function v(a){return a.off>0&&1==a.c.childNodes[a.off-1].nodeType&&!e(a.c.childNodes[a.off-1])&&!r(a.c.childNodes[a.off-1],"img")&&!r(a.c.childNodes[a.off-1],"br")}function w(a){for(var b=a.c.childNodes[a.off-1];b.lastChild;)b=b.lastChild;return{c:b,off:b.childNodes.length}}function x(){var a=Array.prototype.slice.apply(arguments);return function(b){for(var c=!0,d=0;c&&d<a.length;++d)c=c&&a[d](b);return c}}function y(){var a=Array.prototype.slice.apply(arguments);return function(b){for(var c=!1,d=0;!c&&d<a.length;++d)c=c||a[d](b);return c}}function z(a){return function(b){return!a(b)}}function A(a,b){var c=t({c:a,off:b},f,u,!1,y(H,I,J),G);return c?c:(c=t({c:a,off:b},y(k,i),y(k,l),!1,y(G,J),G),!c||c.c==a&&c.off==b?v({c:a,off:b})?w({c:a,off:b}):{c:a,off:b}:c)}function B(a){function e(a,b){for(;;){var d=E.dfsNext(a,b,c);if(null==d||d.c==a.c.parentNode&&C.isBlock(a.c)||b&&f(a)||!b&&f(d))return a;a=d}}var f=y(x(b,z(d)),J,g("img"),I,g("br"));m(a,e(o(a),!0)),n(a,e(p(a),!1))}var C=this.ed.dom,D=a.collapsed,E=this;a=a.cloneRange();var F=h("a"),G=y(c,F),H=y(q,F),I=h("br"),J=h("img");if(a=this.safeNormalize(a),D){var K=a.startContainer;if(1==K.nodeType&&!e(a.startContainer)&&0==a.startContainer.childNodes.length)return a;var L=A(a.startContainer,a.startOffset);m(a,L),a.collapse(!0)}else B(a);return a}};tinymce.extend(this,s)}}(),function(a){var b=a.dom.TreeWalker;a.EnterKey=function(c){function d(d){function j(a){return a&&e.isBlock(a)&&!/^(TD|TH|CAPTION|FORM)$/.test(a.nodeName)&&!/^(fixed|absolute)/i.test(a.style.position)&&"true"!==e.getContentEditable(a)}function k(b){var c;a.isIE&&!a.isIE11&&e.isBlock(b)&&(c=f.getRng(),b.appendChild(e.create("span",null," ")),f.select(b),b.lastChild.outerHTML="",f.setRng(c))}function l(a){for(var b,c=a,d=[];c=c.firstChild;){if(e.isBlock(c))return;1!=c.nodeType||i[c.nodeName.toLowerCase()]||d.push(c)}for(b=d.length;b--;)c=d[b],!c.hasChildNodes()||c.firstChild==c.lastChild&&""===c.firstChild.nodeValue?e.remove(c):"A"==c.nodeName&&" "===(c.innerText||c.textContent)&&e.remove(c)}function m(a){var d,g,h,j,k,l,m=a;if(h=e.createRng(),a.hasChildNodes()){for(d=new b(a,a);g=d.current();){if(3==g.nodeType){h.setStart(g,0),h.setEnd(g,0);break}if(i[g.nodeName.toLowerCase()]){h.setStartBefore(g),h.setEndBefore(g);break}m=g,g=d.next()}g||(h.setStart(m,0),h.setEnd(m,0))}else"BR"==a.nodeName?a.nextSibling&&e.isBlock(a.nextSibling)?((!B||9>B)&&(l=e.create("br"),a.parentNode.insertBefore(l,a)),h.setStartBefore(a),h.setEndBefore(a)):(h.setStartAfter(a),h.setEndAfter(a)):(h.setStart(a,0),h.setEnd(a,0));f.setRng(h),e.remove(l),k=e.getViewPort(c.getWin()),j=e.getPos(a).y,(j<k.y||j+25>k.y+k.h)&&c.getWin().scrollTo(0,j<k.y?j:j-k.h+25)}function n(b){var c,d,f,h=y;if(c=b||"TABLE"==G?e.create(b||I):A.cloneNode(!1),f=c,g.keep_styles!==!1)do if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(h.nodeName)){if("_mce_caret"==h.id)continue;d=h.cloneNode(!1),e.setAttrib(d,"id",""),c.hasChildNodes()?(d.appendChild(c.firstChild),c.appendChild(d)):(f=d,c.appendChild(d))}while(h=h.parentNode);return a.isIE&&!a.isIE11||(f.innerHTML='<br data-mce-bogus="1">'),c}function o(a){var c,d,e;if(3==y.nodeType&&(a?z>0:z<y.nodeValue.length))return!1;if(y.parentNode==A&&J&&!a)return!0;if(a&&1==y.nodeType&&y==A.firstChild)return!0;if("TABLE"===y.nodeName||y.previousSibling&&"TABLE"==y.previousSibling.nodeName)return J&&!a||!J&&a;for(c=new b(y,A),3==y.nodeType&&(a&&0==z?c.prev():a||z!=y.nodeValue.length||c.next());d=c.current();){if(1===d.nodeType){if(!d.getAttribute("data-mce-bogus")&&(e=d.nodeName.toLowerCase(),i[e]&&"br"!==e))return!1}else if(3===d.nodeType&&!/^[ \t\r\n]*$/.test(d.nodeValue))return!1;a?c.prev():c.next()}return!0}function p(a,b){var c,d,f,g,h,i=I||"P";if(d=e.getParent(a,e.isBlock),!d||!j(d)){if(d=d||x,!d.hasChildNodes())return c=e.create(i),d.appendChild(c),K.setStart(c,0),K.setEnd(c,0),c;for(g=a;g.parentNode!=d;)g=g.parentNode;for(;g&&!e.isBlock(g);)f=g,g=g.previousSibling;if(f){for(c=e.create(i),f.parentNode.insertBefore(c,f),g=f;g&&!e.isBlock(g);)h=g.nextSibling,c.appendChild(g),g=h;K.setStart(a,b),K.setEnd(a,b)}}return a}function q(){function a(a){for(var b=F[a?"firstChild":"lastChild"];b&&1!=b.nodeType;)b=b[a?"nextSibling":"previousSibling"];return b===A}D=I?n(I):e.create("BR"),a(!0)&&a()?e.replace(D,F):a(!0)?F.parentNode.insertBefore(D,F):a()?(e.insertAfter(D,F),k(D)):(w=K.cloneRange(),w.setStartAfter(A),w.setEndAfter(F),E=w.extractContents(),e.insertAfter(E,F),e.insertAfter(D,F)),e.remove(A),m(D),h.add()}function r(){for(var a,c=new b(y,A);a=c.next();)if(i[a.nodeName.toLowerCase()]||a.length>0)return!0}function s(){var b,c,d;y&&3==y.nodeType&&z>=y.nodeValue.length&&(a.isIE&&!a.isIE11||r()||(b=e.create("br"),K.insertNode(b),K.setStartAfter(b),K.setEndAfter(b),c=!0)),b=e.create("br"),K.insertNode(b),a.isIE&&!a.isIE11&&"PRE"==G&&(!B||8>B)&&b.parentNode.insertBefore(e.doc.createTextNode("\r"),b),d=e.create("span",{},"&nbsp;"),b.parentNode.insertBefore(d,b),f.scrollIntoView(d),e.remove(d),c?(K.setStartBefore(b),K.setEndBefore(b)):(K.setStartAfter(b),K.setEndAfter(b)),f.setRng(K),h.add()}function t(a){do 3===a.nodeType&&(a.nodeValue=a.nodeValue.replace(/^[\r\n]+/,"")),a=a.firstChild;while(a)}function u(a){var b,c,d=e.getRoot();for(b=a;b!==d&&"false"!==e.getContentEditable(b);)"true"===e.getContentEditable(b)&&(c=b),b=b.parentNode;return b!==d?c:d}function v(b){var c;a.isIE&&!a.isIE11||(b.normalize(),c=b.lastChild,c&&!/^(left|right)$/gi.test(e.getStyle(c,"float",!0))||e.add(b,"br"))}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K=f.getRng(!0);if(!K.collapsed)return void c.execCommand("Delete");if(!d.isDefaultPrevented()&&(y=K.startContainer,z=K.startOffset,I=(g.force_p_newlines?"p":"")||g.forced_root_block,I=I?I.toUpperCase():"",B=e.doc.documentMode,C=d.shiftKey,1==y.nodeType&&y.hasChildNodes()&&(J=z>y.childNodes.length-1,y=y.childNodes[Math.min(z,y.childNodes.length-1)]||y,z=J&&3==y.nodeType?y.nodeValue.length:0),x=u(y))){if(h.beforeChange(),!e.isBlock(x)&&x!=e.getRoot())return void(I&&!C||s());if((I&&!C||!I&&C)&&(y=p(y,z)),A=e.getParent(y,e.isBlock),F=A?e.getParent(A.parentNode,e.isBlock):null,G=A?A.nodeName.toUpperCase():"",H=F?F.nodeName.toUpperCase():"","LI"!=H||d.ctrlKey||(A=F,G=H),"LI"==G){if(!I&&C)return void s();if(e.isEmpty(A))return/^(UL|OL|LI)$/.test(F.parentNode.nodeName)?!1:void q()}if("PRE"==G&&g.br_in_pre!==!1){if(!C)return void s()}else if(!I&&!C&&"LI"!=G||I&&C)return void s();I=I||"P",o()?(D=/^(H[1-6]|PRE)$/.test(G)&&"HGROUP"!=H?n(I):n(),a.isIE&&!a.isIE11&&A.childNodes.length>0&&"BR"==A.childNodes[A.childNodes.length-1].nodeName&&e.remove(A.childNodes[A.childNodes.length-1]),g.end_container_on_empty_block&&j(F)&&e.isEmpty(A)?D=e.split(F,A):e.insertAfter(D,A),m(D)):o(!0)?(D=A.parentNode.insertBefore(n(),A),k(D)):(w=K.cloneRange(),w.setEndAfter(A),E=w.extractContents(),t(E),D=E.firstChild,e.insertAfter(E,A),l(D),v(A),m(D)),e.setAttrib(D,"id",""),h.add()}}var e=c.dom,f=c.selection,g=c.settings,h=c.undoManager,i=c.schema.getNonEmptyElements();c.onKeyDown.add(function(a,b){13==b.keyCode&&d(b)!==!1&&b.preventDefault()})}}(tinymce),define("tinyMCE",function(a){return function(){var b;return b||a.tinymce}}(this)),define("jive/rte/macro",["tinyMCE","jive/namespace"],function(a){return jive.namespace("rte.macros",[]),jive.rte.Macro=function(b,c,d,e,f,g,h,i,j){var k=null;"undefined"!=typeof jive.rte.plugin[b]&&(k=new jive.rte.plugin[b](b,c,d,e,f,g,h,i,j)),this.getName=function(){return null!=k?k.getName():b},this.getUrl=function(){return null!=k?k.getUrl():c},this.isButton=function(){return null!=k?k.isButton():j},this.isEnabled=function(){return null!=k?k.isEnabled():i},this.isShowSettings=function(){return null!=k?k.isShowSettings():e},this.isShowInMacroList=function(){return null!=k?k.isShowInMacroList():f},this.getMacroType=function(){return null!=k?k.getMacroType():d},this.getParameterSets=function(){return null!=k?k.getParameterSets():g},this.getAllowedParameters=function(){return null!=k?k.getAllowedParameters():h},this.refreshPosition=function(a,b,c,d){return null!=k?k.refreshPosition(a,b,c,d):void 0},this.usesCustomBackground=function(){return null!=k?k.usesCustomBackground():!1},this.caresAboutChangeTo=function(a,b,c){return null!=k&&k.caresAboutChangeTo?k.caresAboutChangeTo(a,b,c):!1},this.refresh=function(b,c){if(null!=k)return k.refresh(b,c);if(c.getAttribute("jivemacro")==this.getName())if("inline"==this.getMacroType().toLowerCase()){var d=c.getAttribute("_title");if($def(d)&&null!=d&&d.length>0)d.match(/<[^<]+=/)||(c.innerHTML=d),c.attributes.removeNamedItem("_title");else if(!a.activeEditor.dom.getAttrib(c,"_modifiedtitle")){var e=c.getAttribute("jivemacro"),f=c.getAttribute("___default_attr"),g=a.activeEditor.plugins.jivemacros.getTitleFor(e,f);g&&c.innerHTML!=g[0]&&(c.innerHTML="",c.appendChild(b.getDoc().createTextNode(g[0]))),""==c.innerHTML&&(c.innerHTML="unknown")}}else if("image"==this.getMacroType().toLowerCase()&&""==c.src){var h=window.CS_RESOURCE_BASE_URL+"/images/tiny_mce3/plugins/jiveemoticons/images/spacer.gif";c.setAttribute("src",h),c.setAttribute("data-mce-src",h)}}},jive.rte.Macro}),define("jive/rte/emote",["jquery","./macro"],function(a){jive.rte.EmoticonMacro=function(){var b=[],c=[];b.push({name:"__jive_emoticon_name",value:["happy","laugh","silly","wink","plain","angry","blush","confused","cool","cry","devil","grin","love","mischief","sad","shocked","info","plus","minus","alert","check","x"]});for(var d=0;d<b[0].value.length;d++)c.push({name:b[0].value[d],deleteAll:!0,params:[{name:b[0].name,value:b[0].value[d]}]});var e=new jive.rte.Macro("emoticon","","img",!1,!0,c,b,!0,!1);this.getName=e.getName,this.getUrl=e.getUrl,this.isShowInMacroList=e.isShowInMacroList,this.isShowSettings=e.isShowSettings,this.getMacroType=e.getMacroType,this.getParameterSets=e.getParameterSets,this.getAllowedParameters=e.getAllowedParameters,this.usesCustomBackground=function(){return!1},this.refresh=function(c,d){e.refresh(c,d);var f=d.getAttribute("_"+b[0].name),g=window.CS_RESOURCE_BASE_URL+"/images/emoticons/"+f+".png";a(d).addClass("jive_macro").addClass("jive_emote").removeClass("jive_emoticon").attr("src",g).attr("data-mce-src",g)}},jive.rte.macros.push(new jive.rte.EmoticonMacro)}),define("jive/rte/externalLinkModal",["jquery","apps/shared/controllers/localexchange","./renderedContent","jquery-plugin/jquery.lightbox_me","jive/namespace"],function(a,b){return jive.namespace("rte"),jive.rte.ExternalLinkModal=function(c,d){function e(b){b.find("a").each(function(){a(this).click(function(b){var c=g.exec(a.trim(this.href))[1],d=!1,e=this.href,i=!1;if(-1==this.href.indexOf("external-link.jspa")?a.each(j,function(){return 0==c.indexOf(this)?(d=!0,!1):void 0}):(i=!0,e=h.exec(a.trim(this.href))[2],c=g.exec(a.trim(e))[1],a.each(j,function(){return 0==c.indexOf(this)?(d=!0,!1):void 0})),!d){var k=e.substring(0,34);k!=e&&(k+="..."),a.get(_jive_base_url+"/external-link-capture.jspa",{url:e,linkText:k,openInNewWindow:i},f),b.preventDefault()}})})}function f(b){var c=a("<div/>",{"class":"jive-modal j-modal",id:"js-modalized"}).css({width:"450px"}),d=jive.util.separateScripts(b),e=d[1];c.html(d[0]),c.lightbox_me({destroyOnClose:!0,centered:!0}),e()}if("true"==c){null==d&&(d="");var g=/^(?:[^\/]*\/\/(?:www\.)*)([^\/]*)/,h=/^(.*)external-link.jspa\?url=(.*)/,i=d.split(/\b,+/),j=[];""!=d&&a.each(i,function(){var a=g.exec(this);null!=a?j.push(a[1]):j.push(this)});var k=g.exec(window.location.toString());null==k||j.push(k[1]),b.addListener("renderedContentWithSelector",e)}},jive.rte.ExternalLinkModal}),define("jive/rte/getSettings",["underscore","./computeRTEPluginStyle","application/config"],function(a,b,c){var d=null!=document.querySelector(".j-design-latest"),e=d&&null!=document.querySelector(".jive-create-post"),f=function(g){function h(a){return b(a)}var i,j=window._jive_video_module_enabled?",jivevideo,":",";if("object"==typeof g)return g;if("mini-w-quote"==g){var k=!1,l=!1;i=f(0),i.theme_advanced_buttons1="bold,italic,underline,strikethrough,separator,bullist,numlist,separator,jiveimage"+j+"separator,jivelink,jiveemoticons,jivequote,spellchecker,html",delete i.theme_advanced_buttons2,delete i.theme_advanced_buttons3,i.default_height=29}else if("mini"==g){var k=!1,l=l;i=f(0),i.theme_advanced_buttons1="bold,italic,underline,strikethrough,separator,bullist,numlist,separator,jiveimage"+j+"separator,jivelink,jiveemoticons,spellchecker,html",delete i.theme_advanced_buttons2,delete i.theme_advanced_buttons3,i.default_height=29}else if("terms-and-conditions"==g){var k=!1,l=!1;i=f(0),i.theme_advanced_buttons1="bold,italic,underline,strikethrough,bullist,numlist,html",delete i.theme_advanced_buttons2,delete i.theme_advanced_buttons3,i.default_height=29,i.plugins=i.plugins.replace(",jivemention",""),i.plugins=i.plugins.replace(",jiveapps","")}else if("stream-narrow"==g){var k=!1,l=!1;i=f(0),i.theme_advanced_buttons1="bold,italic,underline,strikethrough,bullist,numlist,jiveimage"+j+"jivelink,jiveemoticons,jivequote,spellchecker",delete i.theme_advanced_buttons2,delete i.theme_advanced_buttons3,i.default_height=29}else if("widget"==g){var k=!1;i=f(0),i.rte_image_modal_url=CS_BASE_URL+"/rte-image-modal.jspa?fromWidget=true",i.theme_advanced_statusbar_location="none"}else i="wiki"==g?f(0):"blog"==g?f(0):"thread"==g?f(0):"poll"==g||"task"==g?f("mini"):0==g?{rte_image_modal_url:CS_BASE_URL+"/rte-image-modal.jspa",gecko_spellcheck:!0,theme_advanced_fonts:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Calibri=calibri, verdana, arial, sans-serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",ie7_css:"a{\nborder: 1px solid transparent;\n}\nspan.jive_macro.active_link, a.jive_macro.active_link, a.active_link{\nborder: 1px solid blue;\n}\nspan.jive_macro, a.jive_macro{\nborder: 1px solid transparent;\n}",keep_values:!0,convert_urls:!0,relative_urls:!1,popup_css:!1,default_height:58,bool_attrs:/(checked|disabled|readonly|selected|nowrap)/,valid_child_elements:0,theme_advanced_buttons1:"fontselect, fontsizeselect, removeformat, separator,bullist, numlist, ltr, rtl, outdent, indent, separator"+j+"separator,jivelink,jivetablebutton,extra,spellchecker,html",theme_advanced_text_colors:"303030,505050,909090,DADADA,FFFFFF,E23D39,EB7A3D,F1B259,FAF387,7ED529,3A0699,3334CA,2873EE,4FCDDC,5EE697",theme_advanced_buttons2:"bold,italic,underline,strikethrough,forecolor,jivestyle, separator, justifyleft,justifycenter,justifyright,justifyfull, separator,jiveimage,separator,jiveemoticons, jivemacros ",fix_list_elements:!1,save_callback:"RawHTMLSaveFunction",convert_fonts_to_spans:!0,font_size_style_values:"8pt,10pt,12pt,14pt,18pt,24pt,36pt",max_header_count:6,strict_loading_mode:!0,body_class:"tiny_mce_content jive-widget-formattedtext"+(e?" jive-image-offset":"")+(d?" j-rte-latest":""),theme:"advanced",plugins:"directionality,jiveutil,jivescroll,jiveresize,jiveblackout,jivecontextmenu,jivebuttons,jiveemoticons,jivestyle,jivelink,jivekeyboard,jivequote"+j+"jiveimage,spellchecker,html,style,jivelists,table,jivetablecontrols,save,advimage,advlink,inlinepopups,jivemacros,paste,jivemention,jiveapps,jiveselection,jivetable,jivetablebutton,jivemouse,jiveattachment,jiveplaceholder",paste_auto_cleanup_on_paste:!0,paste_conheadvert_middot_lists:!0,paste_retain_style_properties:"color,background,background-color,font-family,font-weight,text-decoration,text-indent,font-size,margin,margin-left,margin-top,margin-bottom,margin-right,border,border-top,border-bottom,border-left,border-right,border-width,border-style,border-color,padding,padding-left,padding-top,padding-right,padding-bottom,border-top-width,border-bottom-width,border-left-width,border-right-width,border-top-style,border-bottom-style,border-left-style,border-right-style,border-top-color,border-bottom-color,border-left-color,border-right-color",paste_strip_class_attributes:"mso",paste_remove_spans:!1,paste_remove_styles:!1,paste_block_drop:!1,doctype:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",tab_focus_toolbar:!0,content_css:h(CS_RESOURCE_BASE_URL+"/styles/tiny_mce3/themes/advanced/skins/default/content.css,"+CS_RESOURCE_BASE_URL+"/styles/jive-icons.css"),theme_advanced_resize_horizontal:!1,theme_advanced_resizing:!0,theme_advanced_grid_width:5,toolbar:"ltr rtl",directionality:null!=document.querySelector('body[dir="rtl"]')?"rtl":"ltr",apply_source_formatting:!0,spellchecker_languages:SPELL_LANGS,spellchecker_rpc_url:CS_BASE_URL+"/spellcheck.jspa",jive_image_picker_url:k,jive_video_picker_url:l,language_load:!1,language:_jive_translation_language,add_form_submit_trigger:!1,valid_elements:"a[accesskey|charset|class|coords|dir<ltr?rtl|href|hreflang|lang|name|onblur|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|rel|rev|shape<circle?default?poly?rect|style|tabindex|title|target|type|jivemacro|_.*],abbr[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],acronym[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],address[class|align|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],applet[align<bottom?left?middle?right?top|alt|archive|class|code|codebase|height|hspace|name|object|style|title|vspace|width],area[accesskey|alt|class|coords|dir<ltr?rtl|href|lang|nohref<nohref|onblur|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|shape<circle?default?poly?rect|style|tabindex|title|target],base[href|target],basefont[color|face|size],bdo[class|dir<ltr?rtl|lang|style|title],big[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],blockquote[cite|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],body[alink|background|bgcolor|class|dir<ltr?rtl|lang|link|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onload|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|onunload|style|title|text|vlink],br[class|clear<all?left?none?right|style|title],button[accesskey|class|dir<ltr?rtl|disabled<disabled|lang|name|onblur|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|tabindex|title|type|value],caption[align<bottom?left?right?top|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],center[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],cite[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],code[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],col[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|span|style|title|valign<baseline?bottom?middle?top|width],colgroup[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|span|style|title|valign<baseline?bottom?middle?top|width],dd[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],del[cite|class|datetime|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],dfn[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],dir[class|compact<compact|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],div[align<center?justify?left?right|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],dl[class|compact<compact|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],dt[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],em/i[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],embed[width|height|src|pluginspage|name|swliveconnect|play<true?false|loop<true?false|menu<true?false|quality<low?autolow?autohigh?high?medium?high?best|scale<default?exact?noorder|salign<l?t?r?b?tl?tr?bl?br|wmode<window?opaque?transparent|bgcolor|base|flashvars|type|allowfullscreen],fieldset[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],font[class|color|dir<ltr?rtl|face|lang|size|style|title],form[accept|accept-charset|action|class|dir<ltr?rtl|enctype|lang|method<get?post|name|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|onreset|onsubmit|style|title|target],frame[class|frameborder|longdesc|marginheight|marginwidth|name|noresize<noresize|scrolling<auto?no?yes|src|style|title],frameset[class|cols|onload|onunload|rows|style|title],h1[align<center?justify?left?right|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],h2[align<center?justify?left?right|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],h3[align<center?justify?left?right|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],h4[align<center?justify?left?right|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],h5[align<center?justify?left?right|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],h6[align<center?justify?left?right|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],head[dir<ltr?rtl|lang|profile],hr[align<center?left?right|class|dir<ltr?rtl|lang|noshade<noshade|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|size|style|title|width],html[dir<ltr?rtl|lang|version],iframe[align<bottom?left?middle?right?top|class|frameborder|height|id|longdesc|marginheight|marginwidth|name|scrolling<auto?no?yes|src|style|title|width|sourcedomain],img[align<bottom?left?middle?right?top|alt|border|class|dir<ltr?rtl|height|hspace|ismap<ismap|lang|longdesc|name|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|src|style|title|usemap|vspace|width|jivemacro|_.*|param_.*|sourcedomain],input[accept|accesskey|align<bottom?left?middle?right?top|alt|checked<checked|class|dir<ltr?rtl|disabled<disabled|ismap<ismap|lang|maxlength|name|onblur|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|onselect|readonly<readonly|size|src|style|tabindex|title|type<button?checkbox?file?hidden?image?password?radio?reset?submit?text|usemap|value],ins[cite|class|datetime|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],isindex[class|dir<ltr?rtl|lang|prompt|style|title],kbd[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],label[accesskey|class|dir<ltr?rtl|for|lang|onblur|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],legend[align<bottom?left?right?top|accesskey|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],li[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|type],link[charset|class|dir<ltr?rtl|href|hreflang|lang|media|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|rel|rev|style|title|target|type],map[class|dir<ltr?rtl|lang|name|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],menu[class|compact<compact|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],meta[content|dir<ltr?rtl|http-equiv|lang|name|scheme],noframes[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],noscript[class|dir<ltr?rtl|lang|style|title],object[align<bottom?left?middle?right?top|archive|border|class|classid|codebase|codetype|data|declare|dir<ltr?rtl|height|hspace|lang|name|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|standby|style|tabindex|title|type|usemap|vspace|width],ol[class|compact<compact|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|start|style|title|type],optgroup[class|dir<ltr?rtl|disabled<disabled|label|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],option[class|dir<ltr?rtl|disabled<disabled|label|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|selected<selected|style|title|value],p[align<center?justify?left?right|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],param[id|name|type|value|valuetype<DATA?OBJECT?REF],pre/listing/plaintext/xmp[align|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|width|jivemacro|_.*],q[cite|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],s[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],samp[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],script[charset|defer|language|src|type],select[class|dir<ltr?rtl|disabled<disabled|lang|multiple<multiple|name|onblur|onchange|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|size|style|tabindex|title],small[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],span[align<center?justify?left?right|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|jivemacro|_.*],strike[class|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],strong/b[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],style[dir<ltr?rtl|lang|media|title|type],sub[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],sup[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],table[align<center?left?right|bgcolor|border|cellpadding|cellspacing|class|dir<ltr?rtl|frame|height|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|rules|style|summary|title|width|jive.*],tbody[align<center?char?justify?left?right|char|class|charoff|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|valign<baseline?bottom?middle?top],td[abbr|align<center?char?justify?left?right|axis|bgcolor|char|charoff|class|colspan|dir<ltr?rtl|headers|height|lang|nowrap<nowrap|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|rowspan|scope<col?colgroup?row?rowgroup|style|title|valign<baseline?bottom?middle?top|width],textarea[accesskey|class|cols|dir<ltr?rtl|disabled<disabled|lang|name|onblur|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|onselect|readonly<readonly|rows|style|tabindex|title],tfoot[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|valign<baseline?bottom?middle?top],th[abbr|align<center?char?justify?left?right|axis|bgcolor|char|charoff|class|colspan|dir<ltr?rtl|headers|height|lang|nowrap<nowrap|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|rowspan|scope<col?colgroup?row?rowgroup|style|title|valign<baseline?bottom?middle?top|width],thead[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|valign<baseline?bottom?middle?top],title[dir<ltr?rtl|lang],tr[abbr|align<center?char?justify?left?right|bgcolor|char|charoff|class|rowspan|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|valign<baseline?bottom?middle?top],tt[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],u[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],ul[class|compact<compact|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|type],var[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title]",
valid_children:"+pre[p|pre|ol|ul|blockquote|table|#text],+blockquote[p|pre|ol|ul|blockquote|table|#text]"}:g;return c.appsAvailable||(i.plugins=a.without(i.plugins.split(","),"jiveapps").join(",")),i};return f}),define("tiny_mce3/plugins/jivelists/editor_plugin_src",["tinyMCE","jquery-private"],function(){!function(a){tinymce.create("tinymce.plugins.JiveListsPlugin",{lastList:null,lastPrevSib:null,fixLists:function(a){function b(){var a=tinymce.activeEditor.dom;return a.create("p",{},"<br _moz_dirty='' type='_moz' />")}var c,d,e,f,g;this.onBeforeFixLists.dispatch(a);var h=this;a.undoManager.transparentChange(function(){if(c=a.selection.getNode(),c.ownerDocument===a.getDoc()){var i=a.dom.getParent(c,"ol,ul");null==i||1!=i.nodeType||"ul"!=i.nodeName.toLowerCase()&&"ol"!=i.nodeName.toLowerCase()||(g=i.parentNode,"li"==g.nodeName.toLowerCase()&&(e=g.parentNode,e.insertBefore(i,g.nextSibling),a.selectionUtil.isEffectivelyEmpty(g)&&e.removeChild(g),a.selectionUtil.normalizeSelection(),a.selection.select(),a.selection.collapse(!0)),h.mergeConsecutiveLists(i)),c=a.dom.getParent(c,"li"),null!=c&&1==c.nodeType&&"li"==c.nodeName.toLowerCase()&&(d=a.dom.getParent(c,"ol,ul"),null!=d&&"p"==d.parentNode.nodeName.toLowerCase()&&(e=d.parentNode,a.dom.split(e,d),a.selection.select(c).collapse(!0))),null!=h.lastList&&null!=h.lastList.parentNode?(c=h.lastList.nextSibling,null!=c&&1==c.nodeType&&"br"==c.nodeName.toLowerCase()&&(e=b(),c.parentNode.insertBefore(e,c),c.parentNode.removeChild(c),f=e.childNodes[e.childNodes.length-1],a.selection.select(f),a.selection.collapse(!0))):null!=h.lastPrevSib&&(c=h.lastPrevSib.nextSibling,null!=c&&1==c.nodeType&&"br"==c.nodeName.toLowerCase()&&(e=b(),c.parentNode.insertBefore(e,c),c.parentNode.removeChild(c),f=e.childNodes[e.childNodes.length-1],a.selection.select(f),a.selection.collapse(!0))),h.fixListTypes()}}),this.onAfterFixLists.dispatch(a)},fixListTypes:function(){var b=this.ed;a("ul[type], ol[type]",b.getBody()).each(function(){b.plugins.jivelists.listTypeToStyle(this)})},mergeConsecutiveLists:function(a){for(;;){for(var b=a.previousSibling;null!=b&&1!=b.nodeType;)b=b.previousSibling;if(null==b||b.nodeName!=a.nodeName)break;a=b}for(var c=null;;){for(b=a.nextSibling;null!=b&&1!=b.nodeType;)b=b.nextSibling;if(null==b||b.nodeName!=a.nodeName)break;if(!c)try{c=this.ed.selection.getBookmark()}catch(d){}this.reparentChildren(a,b),b.parentNode.removeChild(b)}return c&&this.ed.selection.moveToBookmark(c),a},reparentChildren:function(a,b){for(;b.firstChild;)a.appendChild(b.firstChild);return a},indentSelectedItems:function(){var a=this.getExpandedLiRange(this.ed.selection.getRng(!0));if(!a)throw new Error("Unable to indent selection; probably not a list selection.");var b=this.ed.selection.getBookmark(),c=this.ed.getDoc().createElement(a.commonAncestorContainer.nodeName);a.surroundContents(c),this.ed.selection.moveToBookmark(b)},getExpandedLiRange:function(a){return this.ed.selectionUtil.getExpandedBlockRange(a,"li","ul,ol")},rangeSplit:function(a){var b=a.commonAncestorContainer;3==b.nodeType&&(b=b.parentNode);for(var c=a.extractContents(),d=[],e=c.firstChild;null!=e;e=e.nextSibling)d.push(e);var f=this.ed.getDoc().createElement("br");if(f.className="splitMarker",3==a.startContainer.nodeType){var g=a.startContainer.splitText(a.startOffset);g.parentNode.insertBefore(f,g)}else a.insertNode(f);return this.ed.dom.split(b,f,c),d},shimIfIE:function(b,c){tinymce.isIE&&a('<p class="ieShim"> </p>',b.getDoc()).insertBefore(c)},removeIEShims:function(b){a(b.getBody()).find(".ieShim").remove()},execCommand:function(b,c,d){function e(a){var b=a.selection.getNode();b=a.dom.getParent(b,"ol,ul");var c=a.dom.getParent(b,"blockquote");if(null!=c){var d=a.getDoc().createElement(b.nodeName);for(c.parentNode.insertBefore(d,c);c.childNodes.length;)d.appendChild(c.childNodes[0]);c.parentNode.removeChild(c),a.selection.select(b)}}function f(a,b){b=b||tinyMCE.activeEditor;var c=b.selection.getBookmark(),d=a();return tinymce.isWebKit&&(window.focus(),b.focus()),b.selection.moveToBookmark(c),d}function g(a){a=a.toLowerCase();var c=parseInt(b.substr("mceOLListStyle".length)),d=i.plugins.jivelists[a+"_styles"],e=d[c],f=i.selection.getNode(),g=i.dom.getParent(f,a);i.dom.setStyle(g,"listStyleType",e[1])}function h(b,c,d){function e(c){var d=i.dom.create(b);c.surroundContents(d);for(var e=[],f=0;f<d.childNodes.length;++f){var g=d.childNodes[f];if(i.selectionUtil.isBookmark(g))e.push(g);else{var h=i.dom.create("li");for(i.dom.isBlock(g)?(i.dom.replace(h,g,!0),"left"!=a(g).css("text-align")&&"start"!=a(g).css("text-align")&&a(h).css("text-align",a(g).css("text-align"))):(c.setStart(d,f),c.setEnd(d,d.childNodes.length),c.surroundContents(h),f=d.childNodes.length);e.length>0;)h.insertBefore(e.pop(),h.firstChild),--f}}return 0==d.childNodes.length&&d.appendChild(i.dom.create("li")),d=j.mergeConsecutiveLists(d)}function f(a,b){for(var c=i.dom.createRng(),d=a;null!=d;)a=d,d=a!=b?a.nextSibling:null,c.selectNodeContents(a),e(c)}function g(a,b){for(var c=a;c;)f(c.firstChild,c.lastChild),c=c==b?null:c.nextSibling}var h,k=i.selectionUtil.getExpandedBlockRange(i.selection.getRng(!0).cloneRange(),c,d);try{if(h=i.selection.getBookmark(),k.collapsed||tinymce.isIE8&&_.isString(k.commonAncestorContainer.text)&&0==k.commonAncestorContainer.text.length){var l=e(k);i.selectionUtil.removeBookmark(h);var m=i.dom.createRng();m.setStart(l.firstChild,0),m.collapse(!0),i.selection.setRng(m)}else{var n=k.startContainer.childNodes[k.startOffset],o=k.endContainer.childNodes[k.endOffset-1];"td"==n.nodeName.toLowerCase()?f(n,o):"tr"==n.nodeName.toLowerCase()?g(n,o):e(k),j.shimIfIE(i,n),i.selection.moveToBookmark(h)}}catch(p){h&&i.selectionUtil.removeBookmark(h),b=b.toLowerCase(),"ul"==b?i.execCommand("InsertUnorderedList"):i.execCommand("InsertOrderedList")}j.fixLists(i),j.removeIEShims(i)}for(var i=tinyMCE.activeEditor,j=this,k=i.selection.getNode(),l=null;null!=k&&null!=k.parentNode&&null!=(k=i.dom.getParent(k.parentNode,"ol,ul"));)l=k;k=l,null!=k?(this.lastList=k,this.lastPrevSib=k.previousSibling):(this.lastList=null,this.lastPrevSib=null);var l=this.getSelectionParent("ol,ul");if(0==b.indexOf("mceOLListStyle"))return i.undoManager.add(),g("ol"),i.undoManager.add(),!0;if(0==b.indexOf("mceULListStyle"))return i.undoManager.add(),g("ul"),i.undoManager.add(),!0;if("mceOutdent"==b){i.undoManager.add();var m=i.selection;return f(function(){try{var b=j.getExpandedLiRange(m.getRng(!0)),c=j.rangeSplit(b);j.shimIfIE(i,c[0]);for(var d=0;d<c.length;++d){var e=c[d];if("ul"!=e.parentNode.nodeName.toLowerCase()&&"ol"!=e.parentNode.nodeName.toLowerCase()&&!i.selectionUtil.isBookmark(e)){var f=i.getDoc().createElement("p");e.parentNode.insertBefore(f,e),"left"!=a(e).css("text-align")&&"start"!=a(e).css("text-align")&&a(f).css("text-align",a(e).css("text-align")),1==e.nodeType?(j.reparentChildren(f,e),e.parentNode.removeChild(e)):f.appendChild(e),tinymce.isIE8&&f.appendChild(i.getDoc().createTextNode("\ufeff"))}}}catch(g){j.shimIfIE(i,m.getNode()),i.execCommand("Outdent");try{i.execCommand("mceOutdentComplete")}catch(g){console&&console.log}}j.fixLists(i)},i),j.removeIEShims(i),i.undoManager.add(),!0}if("mceIndent"==b){i.undoManager.add();try{this.indentSelectedItems(),this.fixLists(i)}catch(n){i.execCommand("Indent"),this.fixLists(i),e(i)}return i.execCommand("mceIndentComplete"),i.undoManager.add(),!0}if(0==b.indexOf("mceInsertUnorderedList")){if(i.undoManager.add(),a(l).is("ul"))i.execCommand("mceOutdent");else if(a(l).is("ol")){var o=i.selection.getBookmark(BOOKMARKTYPE),p=this.getSelectionParent("ol"),q=i.getDoc().createElement("ul");a(q).append(a(p).contents()),p.parentNode.insertBefore(q,p),p.parentNode.removeChild(p),i.selection.moveToBookmark(o)}else h("ul");return i.undoManager.add(),!0}if(0==b.indexOf("mceInsertOrderedList")){if(i.undoManager.add(),a(l).is("ol"))i.execCommand("mceOutdent");else if(a(l).is("ul")){var o=i.selection.getBookmark(BOOKMARKTYPE),p=this.getSelectionParent("ul"),q=i.getDoc().createElement("ol");a(q).append(a(p).contents()),p.parentNode.insertBefore(q,p),p.parentNode.removeChild(p),i.selection.moveToBookmark(o)}else h("ol");return i.undoManager.add(),!0}return!1},getRangeParent:function(a,b){return this.ed.dom.getParent(a.commonAncestorContainer,b)},getSelectionParent:function(a){return this.getRangeParent(this.ed.selection.getRng(!0),a)},cleanList:function(b,c){var d=this;this._stripStyleAndMetaTags(b,c),this._wrapListChildren(b,c),1==c.nodeType&&a.each(c.childNodes,function(){d.cleanList(b,this)})},_stripStyleAndMetaTags:function(b,c){1==c.nodeType&&a.each(c.childNodes,function(){(this.nodeType&&1!=this.nodeType&&3!=this.nodeType||1==this.nodeType&&("meta"==this.nodeName.toLowerCase()||"style"==this.nodeName.toLowerCase()))&&c.removeChild(this)})},_wrapListChildren:function(b,c){a(c).filter("ul, ol").each(function(){var c=this;a.each(this.childNodes,function(){var d;3==this.nodeType&&""===a.trim(this.nodeValue)?c.removeChild(this):(3==this.nodeType||1==this.nodeType&&!a(this).is("li, ul, ol"))&&(d=b.getDoc().createElement("li"),c.insertBefore(d,this),d.appendChild(this))})})},listTypeToStyle:function(a){if(a&&a.nodeName&&/[uo]l/i.test(a.nodeName)){var b=tinyMCE.activeEditor,c=a.getAttribute("type"),d=null;switch(c){case"1":d="decimal";break;case"A":d="upper-alpha";break;case"a":d="lower-alpha";break;case"I":d="upper-roman";break;case"i":d="lower-roman";break;default:if(c&&"string"==typeof c)switch(c=c.toLowerCase()){case"circle":case"disc":case"square":d=c}}d&&b.dom.setStyle(a,"listStyleType",d),a.removeAttribute("type")}},init:function(a,b){this.url=b,this.ed=a;var c=this;this.index=0,this.ol_styles=[],this.ol_styles.push(["default","",0]),this.ol_styles.push(["d","decimal",1]),tinymce.isIE||this.ol_styles.push(["dz","decimal-leading-zero",2]),this.ol_styles.push(["ur","upper-roman",3]),this.ol_styles.push(["lr","lower-roman",4]),this.ol_styles.push(["ua","upper-alpha",5]),this.ol_styles.push(["la","lower-alpha",6]),tinymce.isIE||(this.ol_styles.push(["lg","lower-greek",7]),this.ol_styles.push(["ki","katakana-iroha",8]),this.ol_styles.push(["k","katakana",9]),this.ol_styles.push(["hii","hiragana-iroha",10]),this.ol_styles.push(["hi","hiragana",11]),this.ol_styles.push(["ci","cjk-ideographic",12]),this.ol_styles.push(["g","georgian",13]),this.ol_styles.push(["a","armenian",14]),this.ol_styles.push(["he","hebrew",15])),this.ul_styles=[],this.ul_styles.push(["default","",0]),this.ul_styles.push(["di","disc",1]),this.ul_styles.push(["c","circle",2]),this.ul_styles.push(["s","square",3]),a.onBeforeSetContent.add(function(a,b){tinymce.isIE&&(b.content=b.content.replace(/<br\/><\/li>/g,"</li>"))}),a.onSetContent.add(function(){c.fixListTypes()}),a.onNodeChange.add(function(a){if(this.initialized){var b=a.selection.getNode(),c=a.dom.getParent(b,"ul,ol");if(c){this.fixLists(a);var d=this;a.undoManager.transparentChange(function(){d.cleanList(a,c)})}}},this),this.onBeforeFixLists=new tinymce.util.Dispatcher,this.onAfterFixLists=new tinymce.util.Dispatcher,this.initialized=!1,a.onBeforeGetContent.add(function(){this.initialized&&this.fixLists(tinymce.activeEditor)},this),a.onInit.add(function(){function b(b,d){d=d.toUpperCase();var e,f,g,h;"UL"==d?(e=288,f=0,g=81,h=158):"OL"==d&&(e=260,f=0,g=81,h=135);for(var i=[],j=0;j<b.length;++j){var k=b[j][0],l=0==j?e:g+28*(b[j][2]-1),m=0==j?f:h;i.push(new c.MenuItem(k+"ListStyle",null,a.getLang("jivelists."+k),{url:CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/img/iconmaster.gif",xOffset:l,yOffset:m,width:28,height:23},"mce"+d+"ListStyle"+j))}return i}if(this.initialized=!0,a.plugins.paste&&a.plugins.paste.onPostProcess.add(function(){this.fixLists(a)},this),a.plugins.jivecontextmenu){var c=a.plugins.jivecontextmenu,d=b(this.ul_styles,"UL"),e=new c.Menu(d,!0,!0,a.getLang("jivelists.list_style_hdr")),f=new c.MenuItem("ulItem",/ul/i,null,{url:CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/img/iconmaster.gif",xOffset:288,yOffset:0,width:28,height:23},e);c.addRootItem(f);var g=b(this.ol_styles,"OL"),h=new c.Menu(g,!0,!0,a.getLang("jivelists.list_style_hdr")),i=new c.MenuItem("olItem",/ol/i,null,{url:CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/img/iconmaster.gif",xOffset:260,yOffset:0,width:28,height:23},h);c.addRootItem(i)}a.plugins.contextmenu&&a.plugins.contextmenu.onContextMenu.add(function(b,c,d){var e,f,g,h,i,j;if(f=a.dom.getParent(d,"ol, ul"),f&&"ol"==f.nodeName.toLowerCase())for(g=a.dom.getParent(d,function(a){return $def(a.tagName)&&"ol"==a.tagName.toLowerCase()&&a!=f}),c.addSeparator(),e=c.addMenu({title:"jivelists.list_style",max_height:"200","class":"mceDropDown defaultSkin mceMacroMenu mceListBoxMenu"}),h=a.plugins.jivelists.ol_styles,i=0;i<h.length;i++)(null!=g||null==g&&"inherit"!=h[i][0])&&(j="",j=f.style.listStyleType==h[i][1]?"mceMenuItemSelected":"",e.add({title:"jivelists."+h[i][0],cmd:"mceOLListStyle"+i,"class":j})),2==i&&e.addSeparator();else if(f&&"ul"==f.nodeName.toLowerCase())for(g=a.dom.getParent(d,function(a){return $def(a.tagName)&&"ul"==a.tagName.toLowerCase()&&a!=f}),c.addSeparator(),e=c.addMenu({title:"jivelists.list_style",max_height:"200","class":"mceDropDown defaultSkin mceMacroMenu mceListBoxMenu"}),h=a.plugins.jivelists.ul_styles,i=0;i<h.length;i++)(null!=g||null==g&&"inherit"!=h[i][0])&&(j="",j=f.style.listStyleType==h[i][1]?"mceMenuItemSelected":"",e.add({title:"jivelists."+h[i][0],cmd:"mceULListStyle"+i,"class":j})),2==i&&e.addSeparator()})},this),this.prepForEnter=!1,this.prepForDel=!1,a.onKeyDown.addToTop(function(a,b){function c(b){for(var d=b.nextSibling;d;){var e=d.nodeName.toLowerCase();if("ul"!=e&&"ol"!=e)return"table"==e?null:a.dom.isBlock(d)?d:null;d=d.firstChild}return"body"!=b.nodeName.toLowerCase()?c(b.parentNode):null}function d(a){for(;a.lastChild&&"br"==a.lastChild.nodeName.toLowerCase();)a.removeChild(a.lastChild)}function e(a){return"td"!=a.nodeName.toLowerCase()&&"tr"!=a.nodeName.toLowerCase()&&"th"!=a.nodeName.toLowerCase()}this.prepForEnter=!1,this.prepForDel=!1,this.prepForDelB=!1;var f,g=a.selectionUtil.isEffectivelyEmpty,h=a.selection,i=a.dom.getParent(h.getNode(),"li"),j=a.dom.getParent(h.getNode(),"ul,ol");if(8==b.keyCode&&h.isCollapsed()&&i){var k=a.selectionUtil.atStartOf(i)||g(i);if(null!=i&&1==i.nodeType&&null!=j&&k)return this.prepForDel=!0,a.execCommand("mceOutdent"),j.parentNode&&!j.firstChild&&j.parentNode.removeChild(j),tinymce.dom.Event.cancel(b),!1}else if(46==b.keyCode&&h.isCollapsed())if(null!=i){var l=a.selectionUtil.atEndOf(i)||g(i);if(1==i.nodeType&&null!=j&&l){a.undoManager.add();var m=c(i);return m&&(d(i),this.reparentChildren(i,m),m.parentNode.removeChild(m)),this.prepForDel=!0,a.undoManager.add(),tinymce.dom.Event.cancel(b),!1}}else{var n=a.dom.getParent(h.getNode(),function(b){return a.dom.isBlock(b)});if(n&&(m=c(n),m&&(a.selectionUtil.atEndOf(n)||g(n))&&e(m))){a.undoManager.add();var o=a.selection.getBookmark();d(n),this.reparentChildren(n,m);var p=m.parentNode;for(m.parentNode.removeChild(m);g(p);){var q=p;p=p.parentNode,p.removeChild(q)}return this.prepForDel=!0,a.selection.moveToBookmark(o),a.undoManager.add(),tinymce.dom.Event.cancel(b),!1}}else if(13==b.keyCode&&b.shiftKey){var r=i?i:a.dom.getParent(h.getNode(),function(b){return a.dom.isBlock(b)});if(f=h.getRng(!0),f.collapsed){this.prepForEnter=!0,a.undoManager.add();var s=a.getDoc().createElement("br");return f.insertNode(s),f.setStart(r,a.dom.nodeIndex(s)+1),f.collapse(!0),h.setRng(f),tinymce.isWebKit&&a.selectionUtil.atEndOf(r)&&r.appendChild(a.getDoc().createElement("br")),a.undoManager.add(),tinymce.dom.Event.cancel(b),!1}}else if(9==b.keyCode&&!b.ctrlKey&&!b.altKey){var t=a.dom.getParent(a.selection.getNode(),"table,ul,ol");if(null!=t&&"table"!=t.nodeName.toLowerCase()){try{b.shiftKey?a.execCommand("mceOutdent"):a.execCommand("mceIndent")}catch(u){}return tinymce.dom.Event.cancel(b)}}},this),a.onKeyPress.add(function(a,b){if((8==b.keyCode||46==b.keyCode)&&this.prepForDel)return tinymce.dom.Event.cancel(b),!1;if(13==b.keyCode&&this.prepForEnter)return tinymce.dom.Event.cancel(b),!1;if(9==b.keyCode&&!b.ctrlKey&&!b.altKey){var c=a.dom.getParent(a.selection.getNode(),"table,ul,ol");if(null!=c&&"table"!=c.nodeName.toLowerCase())return tinymce.dom.Event.cancel(b),!1}},this),a.onKeyUp.add(function(a,b){return 8!=b.keyCode&&46!=b.keyCode||!this.prepForDel?13==b.keyCode&&this.prepForEnter?(tinymce.dom.Event.cancel(b),!1):void 0:(tinymce.dom.Event.cancel(b),!1)},this)},getInfo:function(){return{longname:"Jive Lists",author:"Jive Software",authorurl:"http://jivesoftware.com",infourl:"http://jivesoftware.com",version:tinyMCE.majorVersion+"."+tinyMCE.minorVersion}},createControl:function(a,b){return null}}),tinymce.PluginManager.add("jivelists",tinymce.plugins.JiveListsPlugin)}(jQuery)}),define("tiny_mce3/plugins/jivelists/editor_plugin_src",["tinyMCE","jquery"],function(){}),define("tiny_mce3/plugins/jivestyle/editor_plugin_src",["tinyMCE"],function(){!function(){tinymce.create("tinymce.plugins.JiveStylePlugin",{getInfo:function(){return{longname:"Image Picker",author:"Jive Software",authorurl:"http://www.jivesoftware.com",infourl:"http://www.jivesoftware.com/",version:"1.0"}},init:function(a,b){a.onInit.add(function(a){var b=document.getElementById(a.id+"_jivestyle_action");if(b){for(var c=b.childNodes[0];c.childNodes.length>0;)c.removeChild(c.childNodes[0]);c.appendChild(document.createTextNode(a.getLang("jivestyle.title")))}a.plugins.jivebuttons.initToolbar(a.id),setTimeout(function(a,b){return function(){a.plugins.jivebuttons.initToolbar(b)}}(a,a.id),300)}),a.onNodeChange.add(function(a){return function(b,c,d){var e=b.dom.getParent(d,b.dom.isBlock);if(e&&a.buttons.length>0)for(var f=b.selection,g=0;g<a.buttons.length;g++){var h=window.document,i=new tinymce.dom.DOMUtils(h),j=$def(e.tagName)&&e.tagName.toLowerCase()==a.tagNames[g],k=h.getElementById(a.buttons[g].id),l=k.cells[0];j&&(f.isCollapsed()||f.getStart()==f.getEnd())?i.addClass(l,"mceMenuItemSelected"):i.removeClass(l,"mceMenuItemSelected")}}}(this)),this.buttons=[],this.tagNames=["p","h1","h2","h3","h4","h5","h6"]},execCommand:function(a,b,c){if("mceJiveStyle"==a){var d=tinyMCE.activeEditor.controlManager,e=d.get("jivestyle");return e.showMenu(),!0}return!1},isTag:function(a){var b=tinyMCE.activeEditor,c=b.selection;if(c.isCollapsed()){var d=c.getNode(),e=b.dom.getParent(d,a),f=$def(e)&&null!=e&&$def(e.tagName)&&e.tagName.toLowerCase()==a;return f?"mceMenuItemSelected":""}return""},addButton:function(a){this.buttons.push(a)},createControl:function(a,b){switch(a){case"jivestyle":var c=b.createSplitButton("jivestyle",{title:"jivestyle.title",cmd:"mceJiveStyle"});return c.onRenderMenu.add(function(a,b){var c=tinyMCE.activeEditor,d=c.plugins.jivestyle;d.addButton(b.add({title:"jivestyle.paragraph",cmd:"FormatBlock",ui:!1,value:"p","class":"mce_formatPreview mce_p "+d.isTag("p")}));for(var e=1;c.settings.max_header_count>=e&&6>=e;++e)d.addButton(b.add({title:c.getLang("jivestyle.header")+" "+e,cmd:"FormatBlock",ui:!1,value:"h"+e,"class":"mce_formatPreview mce_h"+e+" "+d.isTag("h"+e)}))}),c}return null}}),tinymce.PluginManager.add("jivestyle",tinymce.plugins.JiveStylePlugin)}()}),define("tiny_mce3/plugins/jivestyle/editor_plugin_src",["tinyMCE"],function(){}),define("tiny_mce3/plugins/jivemacros/editor_plugin_src",["jquery-private","tinyMCE","jive/ext/y/y_core"],function(){!function(a,b){var c=new RegExp(/^[\s\f\n\r\t\v\u00A0\u2028\u2029\u0240]$/);tinymce.create("tinymce.plugins.JiveMacrosPlugin",{_cache:new jive.ext.y.HashTable,cache:function(a,b,c,d){var e=this._cache.get(d);e||(e=new jive.ext.y.HashTable,this._cache.put(d,e)),e.put(a,[c,b])},getTitleFor:function(a,b){var c=this._cache.get(a);return c?c.get(b):!1},deleteMacro:function(a,b){if(window.jiveRTE&&window.jiveRTE.macroEle&&(b=window.jiveRTE.macroEle,window.jiveRTE.macroEle=null),$def(a)&&$def(b)){if(b==a.getBody())return;var c=new tinymce.dom.DOMUtils(a.getDoc()),d=c.getParent(b,function(c){return c==a.getBody()||c!=b});if(this.isExactMacro(b)){var e=this.getMacroFor(b);if("INLINE"==e.getMacroType())for(;b.childNodes.length>0;){var f=b.removeChild(b.childNodes[0]);d.insertBefore(f,b)}else if("TEXT"==e.getMacroType()||"INLINE"==e.getMacroType())for(;b.childNodes.length>0;){var f=b.removeChild(b.childNodes[0]);if(3==f.nodeType){for(var g=f.nodeValue;g.indexOf("\n")>=0;){var h=a.getDoc().createElement("P");h.appendChild(a.getDoc().createTextNode(g.substr(0,g.indexOf("\n")))),d.insertBefore(h,b),g=g.length>g.indexOf("\n")+1?g.substr(g.indexOf("\n")+1):""}if(g.length>0){var h=a.getDoc().createElement("P");h.appendChild(a.getDoc().createTextNode(g)),d.insertBefore(h,b)}}else d.insertBefore(f,b)}d.removeChild(b)}else this.deleteMacro(a,d)}else{var a=tinyMCE.activeEditor,i=a.selection;this.deleteMacro(a,i.getNode())}},getNextSibling:function(a,b){return null==b?b:null!=b.nextSibling?b.nextSibling:b==a.getBody()&&null==b.nextSibling?null:this.getNextSibling(a,this.getParentNode(a,b))},getParentNode:function(a,b){return new tinymce.dom.DOMUtils(a.getDoc()).getParent(b,function(c){return c==a.getBody()||c!=b})},ageTheNodes:function(b,c,d){function e(b,c){return a(c).parents().addBack().filter(function(){var c=a(this).parent().has(b).length>0,d=a(this).has(b).length>0;return c&&!d}).get(0)}var f=e(c,b),g=e(b,c);return[f,g]},shouldEndLine:function(a){return 3!=a.nodeType&&("div"==a.tagName.toLowerCase()||"p"==a.tagName.toLowerCase()||"pre"==a.tagName.toLowerCase()||"br"==a.tagName.toLowerCase())},applyParameterSet:function(a,b,c){if(this.isMacro(a)){if(c.deleteAll)for(var d=b.getAllowedParameters(),e=0;e<d.length;e++)a.removeAttribute("_"+d[e].name);for(var e=0;e<c.params.length;e++)a.setAttribute("_"+c.params[e].name,c.params[e].value);this.removeDuplicateMacros(tinyMCE.activeEditor,!1,this.isMacro(a))}},buildMacro:function(a,c,d){$def(c)||(c=0);var e,f=tinyMCE.activeEditor,g=f.selection,h=f.getDoc(),i=a.getName(),j=g.isCollapsed();if("TEXT"==a.getMacroType())e=h.createElement("pre"),e.setAttribute("class","jive_text_macro jive_macro_"+i),e.className="jive_text_macro jive_macro_"+i;else if("INLINE"==a.getMacroType()){if("flag"===i){var k=b.find(a.getParameterSets()[c].params,function(a){return"flag"===a.name}),l=h.createTextNode(f.getLang("jivemacros.macro."+a.getName()+".preset."+k.value,i)),m=h.createElement("span");if(m.setAttribute("style","new"===k.value?"color: #ff0000;":"color: #3c773e;"),m.appendChild(l),f.dom.getParent(g.getNode(),"sup"))return m;var n=h.createElement("strong");return n.appendChild(m),e=h.createElement("sup"),e.appendChild(n),e}e=h.createElement("span"),e.appendChild(h.createTextNode(i)),e.setAttribute("class","jive_macro jive_macro_"+i),e.className="jive_macro jive_macro_"+i}else{e=h.createElement("img"),e.setAttribute("class","jive_macro jive_macro_"+i),e.className="jive_macro jive_macro_"+i;var o=window.parent.CS_RESOURCE_BASE_URL+"/images/tiny_mce3/plugins/jiveemoticons/images/spacer.gif";d?(e.setAttribute("src",d),e.setAttribute("data-mce-src",d)):(e.setAttribute("src",o),e.setAttribute("data-mce-src",o))}e.setAttribute("jivemacro",i);var p,q=null;if(j||"TEXT"!=a.getMacroType())j=!0,p=this.getParentNode(f,g.getNode()),q=g.getNode(),p==q&&(q=null);else{var r=g.getRng(!0);r=f.selectionUtil.splitAtEndpoints(r),r.surroundContents(e)}if("TEXT"==a.getMacroType()&&0==e.childNodes.length&&(e.appendChild(this.createEmptyPara()),tinymce.isIE8&&(e.firstChild.innerHTML="\ufeff",g.setNode(e.firstChild),g.collapse(!0))),null!=c&&c>=0){var s=a.getParameterSets();if(c<s.length){var c=s[c];this.applyParameterSet(e,a,c)}}return e},insertMacro:function(a,b,c,d){var e=a.selection.isCollapsed(),f=this.buildMacro(b,c,d),g="flag"===b.getName();if(e)if("text"==b.getMacroType().toLowerCase()){for(var h=a.selection.getRng(!0),i="body, td, th, pre, li";!a.dom.is(h.startContainer,i);)h=a.selectionUtil.splitAtEndpoints(h,i);h.surroundContents(f),0==f.childNodes.length&&f.appendChild(this.createEmptyPara()),h.setStart(f,0),h.collapse(!0),a.selection.setRng(h)}else g?(f.setAttribute("id","__sel_me__"),a.selection.setNode(f),f=a.getDoc().getElementById("__sel_me__"),f.removeAttribute("id"),this.wrapWithSpace(a,f)):(f.setAttribute("id","__sel_me__"),a.selection.setNode(f),f=a.getDoc().getElementById("__sel_me__"),f.removeAttribute("id"));else g&&(f.setAttribute("id","__sel_me__"),a.selection.setNode(f),f=a.getDoc().getElementById("__sel_me__"),f.removeAttribute("id"),this.wrapWithSpace(a,f));if(this.removeDuplicateMacros(a,!1,f),this.fixBodyParagraphs(),f.childNodes.length&&f.parentNode&&"text"==b.getMacroType().toLowerCase()){h=a.dom.createRng();var j=f;do j=j.childNodes[j.childNodes.length-1];while(1==j.nodeType&&j.childNodes.length);h.setStart(j.parentNode,j.childNodes.length),h.collapse(!0),a.selection.setRng(h),a.selectionUtil.normalizeSelection(),window.focus(),a.focus()}return f},execCommand:function(a,b,c){var d,e,f=tinyMCE.activeEditor;if(0==a.indexOf("mceMacroParamSet")){f.undoManager.add();var g=a.substr("mceMacroParamSet".length);d=parseInt(g.substr(0,g.indexOf("_")));var h=parseInt(g.substr(g.indexOf("_")+1));e=jive.rte.macros[d].getParameterSets()[h];var i=f.selection.getNode(),j=f.dom.getParent(i,function(a){return $def(a.attributes.jivemacro)});return null!=j&&(this.applyParameterSet(j,jive.rte.macros[d],e),f.selection.select(j)),!0}if(0==a.indexOf("mceAddJiveMacro")){f.undoManager.add();var k=a.substr("mceAddJiveMacro".length);e=0;var l=k.indexOf("_");return l>=0?(e=parseInt(k.substr(l+1)),k=parseInt(k.substr(0,l))):k=parseInt(k),d=jive.rte.macros[k],d.getUrl().length>0?(window.jiveRTE={macro:d,paramSet:e},f.windowManager.open({url:CS_BASE_URL+d.getUrl(),width:500,height:400,inline:1},window.jiveRTE)):f.plugins.jivemacros.insertMacro(f,d,e),f.undoManager.add(),!0}return!1},isFirst:function(a,b){return 0==a.childNodes.length?!1:a.childNodes[0]==b||this.isFirst(a.childNodes[0],b)},isLink:function(a){return null==a||"body"==a.nodeName.toLowerCase()?!1:$def(a)&&$obj(a)&&null!=a&&$def(a.nodeType)&&3!=a.nodeType?"a"==a.nodeName.toLowerCase()?a:this.isLink(a.parentNode):!1},isMacro:function(a){for(;null!=a&&$obj(a);){if("body"==a.nodeName.toLowerCase())return!1;if($def(a.nodeType)&&1==a.nodeType&&$def(a.attributes.jivemacro))return a;a=a.parentNode}return!1},isExactMacro:function(a){return null==a||"body"==a.nodeName.toLowerCase()?!1:null!=a&&$obj(a)&&$def(a.nodeType)&&1==a.nodeType?"pre"==a.nodeName.toLowerCase()?a:$def(a.attributes.jivemacro)?a:!1:!1},getMacroFor:function(a){var b=this.isMacro(a);if(b){var c=b.attributes.jivemacro.value;return tinymce.activeEditor.plugins.jiveutil.findMacro(c)}return"pre"==a.nodeName.toLowerCase()?tinymce.activeEditor.plugins.jiveutil.findMacro("quote"):null},createMozBR:function(){var a=tinymce.activeEditor.dom;return a.create("br",{_moz_dirty:"",type:"_moz"})},createEmptyPara:function(){var a=tinymce.activeEditor,b=a.dom,c=b.create("p",{},tinymce.isIE?"":"<br _moz_dirty='' type='_moz' />");return tinymce.isIE9&&c.appendChild(a.getDoc().createTextNode("")),c},findLastKid:function(a){return 3==a.nodeType?null:0==a.childNodes.length?null:this.isMacro(a)||$def(a.tagName)&&"table"==a.tagName.toLowerCase()||$def(a.tagName)&&"pre"==a.tagName.toLowerCase()?a:this.findLastKid(a.childNodes[a.childNodes.length-1])},isBR:function(a){return 3==a.nodeType?!1:"br"==a.nodeName.toLowerCase()},convertDoubleLineBreaksToParagraphs:function(a,b){if(1==b.nodeType&&(a.dom.isBlock(b)||"body"==b.nodeName.toLowerCase())&&"pre"!=b.nodeName.toLowerCase()&&!this.isExactMacro(b)){var c;b.childNodes.length>0&&(c=b.childNodes[b.childNodes.length-1]);for(var d=0;d<b.childNodes.length-1;d++){var e=b.childNodes[d];if(c=b.childNodes[d+1],1!=e.nodeType||"title"!=e.nodeName.toLowerCase()&&"meta"!=e.nodeName.toLowerCase()&&"colgroup"!=e.nodeName.toLowerCase())if(1!=e.nodeType||"ol"!=e.nodeName.toLowerCase()&&"ul"!=e.nodeName.toLowerCase())if(1!=c.nodeType||"ol"!=c.nodeName.toLowerCase()&&"ul"!=c.nodeName.toLowerCase())if(this.isBR(e)&&this.isBR(c)){var f=a.dom.getParent(e,"li");if(null==f){var g=e.parentNode,h=g.parentNode;if(d--,"p"!=g.nodeName.toLowerCase()){g=e,h=g.parentNode;var i=this.createEmptyPara();this.insertAfter(h,i,g),e.parentNode.removeChild(e),c.parentNode.removeChild(c),c=i}else{for(var j=a.getDoc().createElement("p");null!=c.nextSibling;)j.appendChild(c.nextSibling);this.insertAfter(h,j,g),this.insertAfter(h,this.createEmptyPara(),g),e.parentNode.removeChild(e),c.parentNode.removeChild(c),c=j}}}else this.convertDoubleLineBreaksToParagraphs(a,e);else 0==c.childNodes.length&&(b.removeChild(c),d--);else 0==e.childNodes.length&&(b.removeChild(e),d--);else b.removeChild(e),d--}$def(c)&&this.convertDoubleLineBreaksToParagraphs(a,c)}},toXML:function(a,b){if(3==a.nodeType)return a.nodeValue+"\n";var c="";if("br"==a.nodeName.toLowerCase()){for(var d=0;b>d;d++)c+="  ";return c+"<BR>\n"}for(var d=0;b>d;d++)c+="  ";c+="<"+a.nodeName+">\n";for(var e=0;e<a.childNodes.length;e++){var f=a!=a.childNodes[e].parentNode;f&&(c+="<error>\n"),c+=this.toXML(a.childNodes[e],b+1),f&&(c+="</error>\n")}for(var d=0;b>d;d++)c+="  ";return c+="</"+a.nodeName+">\n"},cloneNodeWithoutKids:function(a){for(var b=a.ownerDocument,c=b.createElement(a.nodeName),d=0;d<a.attributes.length;d++)null!=a.attributes[d].value&&c.setAttribute(a.attributes[d].name,a.attributes[d].value);return c},sanitizeXML:function(a){if(1==a.nodeType){for(var b=!1,c=[],d=0;d<a.childNodes.length;d++)a!=a.childNodes[d].parentNode?b=!0:(c.push(a.childNodes[d]),this.sanitizeXML(a.childNodes[d]));if("body"!=a.nodeName.toLowerCase())try{for(var e=this.cloneNodeWithoutKids(a),d=0;d<c.length;d++)e.appendChild(c[d]);a.parentNode.insertBefore(e,a),a.parentNode.removeChild(a)}catch(f){}}},fixBodyParagraphs:function(){var b=tinyMCE.activeEditor,d=b.getBody(),e=b.selection,f=b.getDoc();if(tinymce.isIE&&"<p>&nbsp;</p>"==d.innerHTML.toLowerCase()){var g=this;return void b.undoManager.transparentChange(function(){d.appendChild(g.createEmptyPara()),d.removeChild(d.firstChild)})}this.convertDoubleLineBreaksToParagraphs(b,d);var h=this.findLastKid(d);(d.childNodes.length>0&&h||0==d.childNodes.length)&&d.appendChild(this.createEmptyPara()),a("p .Apple-style-span:only-child",f).filter(function(){return null==this.nextSibling&&null==this.previousSibling}).removeClass("Apple-style-span");var i=a(".Apple-style-span",f);if(i.length>0){var j=e.getBookmark();i.contents().unwrap(),e.moveToBookmark(j)}for(var k=0;k<d.childNodes.length;k++){var l=d.childNodes[k],m=l.tagName;if(l.nodeType>=5)l.parentNode.removeChild(l);else if("undefined"!=typeof m&&(m=m.toLowerCase(),tinymce.isIE||1==l.nodeType&&"p"==m&&0==l.childNodes.length&&l.appendChild(this.createMozBR(b.getDoc()))),3==l.nodeType||"inline"==a(l).css("display"))if(3!=l.nodeType||0!=l.nodeValue.length&&!c.test(l.nodeValue)){if(3==l.nodeType&&!c.test(l.nodeValue)||3!=l.nodeType&&!b.selectionUtil.isBookmark(l)){var n=null,o=null,p=!1;if(this.typingInBody){var q=e.getRng(!0);q.collapsed&&(n=q.startContainer,n==d&&q.startOffset>0?n=d.childNodes[q.startOffset-1]:o=q.startOffset)}var r=b.getDoc().createElement("p");b.getBody().insertBefore(r,l),k++;do{if(this.typingInBody&&l==n&&(p=!0),r.appendChild(l),1==l.nodeType&&"br"==l.nodeName.toLowerCase())break;l=null,k<d.childNodes.length&&(l=d.childNodes[k]),k--}while(null!=l&&(3==l.nodeType||"inline"==a(l).css("display")));p&&(q=e.getRng(!0),null!=o?(q.setStart(n,o),q.collapse(!0)):(q.selectNode(n),q.collapse(!1)),e.setRng(q))}}else l.parentNode.removeChild(l),k--}"undefined"!=typeof this.typingInBody&&this.typingInBody&&(this.typingInBody=!1)},lastNodeChanged:null,lastScrollY:0,ensureParaEndsWithBr:function(a,b){if(!tinymce.isIE)if(0==b.childNodes.length)b.appendChild(this.createMozBR(a.getDoc()));else{for(var c=!1,d=b;!c&&1==d.nodeType&&d.childNodes.length>0;){var e=d.childNodes[d.childNodes.length-1];1==e.nodeType&&"br"==e.nodeName.toLowerCase()?c=!0:d=e}c||b.appendChild(this.createMozBR(a.getDoc()))}},nodeChanged:function(a,b,c,d){1==c.nodeType&&"p"==c.nodeName.toLowerCase()&&this.ensureParaEndsWithBr(a,c);
var e=this.getMacroFor(c);b.get("justifyleft")&&(null!=e?(b.get("justifyleft").setDisabled(!0),b.get("justifycenter").setDisabled(!0),b.get("justifyright").setDisabled(!0),b.get("justifyfull").setDisabled(!0)):(b.get("justifyleft").setDisabled(!1),b.get("justifycenter").setDisabled(!1),b.get("justifyright").setDisabled(!1),b.get("justifyfull").setDisabled(!1))),a.plugins.jivemacros.removeDuplicateMacros(a,!0,this.isMacro(c))},validateMacroElements:function(b){var c=this.getMacroFor(b);if(!c||!c.usesCustomBackground())return null;var d=a(b),e=this.rte,f=e.getHiddenContainer(),g=e.getUIDForElement(d),h=e.getRTEElementFor(g);(null==g||h&&h.length>1)&&tinymce.activeEditor.undoManager.transparentChange(function(){var b;null==g?b=d:(b=h.filter(":gt(0)"),b.removeClass("_jivemacro_uid"+g)),b.each(function(){var b=e.generateUID();null==g&&(g=b),a(this).addClass("_jivemacro_uid"+b).attr("_jivemacro_uid",b),f.append(a("<div id='"+b+"' class='richContent'></div>"))})});var i=f.children("#"+g);return 0==i.length&&(i=a("<div id='"+g+"' class='richContent'></div>"),f.append(i)),i},removeDeletedMacros:function(b){var c=this.rte;if(null!=c&&"object"==typeof c&&c.getDoc&&c.getDoc()){var d=c.getHiddenContainer(),e=a(b.getBody());d.children(".richContent").each(function(){var a=this.id,b=e.find("._jivemacro_uid"+a);0==b.length&&c.removeMacroWithUID(a)})}},fixEmptyTableCells:function(a){var b,c,d,e=a.getDoc();if(!tinymce.isIE||tinymce.isIE11){for(b=e.getElementsByTagName("td"),c=0;c<b.length;c++)d=b[c],0==d.childNodes.length&&d.appendChild(this.createMozBR(e));for(b=e.getElementsByTagName("th"),c=0;c<b.length;c++)d=b[c],0==d.childNodes.length&&d.appendChild(this.createMozBR(e))}for(b=e.getElementsByTagName("p"),c=0;c<b.length;c++)b[c].style.height=""},removeDuplicateMacros:function(a,b,c){try{if(!a.getBody())return!1}catch(d){return!1}this.removeDeletedMacros(a);var e,f,g=a.selection.getNode(),h=this,i=this.rte;if(null!=i&&"object"==typeof i){var j=a.getBody().querySelectorAll('[jivemacro="code"], [jivemacro="emoticon"]');for(e=j.length;e>=0;e--)if(f=j[e],this.isExactMacro(f)){var k=f.getBoundingClientRect(),l=k.top,m=k.left,n=f.offsetHeight,o=f.offsetWidth,p=h.getMacroFor(f),q=l+"_"+m+"_"+o+"_"+n;if(0>n||null==n||0>o||null==o)continue;if(!(f.getAttribute("data-renderedPosition")!=q&&null!=p||null!=p&&!b||null!=p&&p.caresAboutChangeTo&&p.caresAboutChangeTo(i,f,g)))break;if(f.timeout)continue;var r=function(d,e){return function(){d.timeout=null;var f=d.getBoundingClientRect(),h=a.plugins.jivemacros.validateMacroElements(d);!b&&d==c||"true"!=d.getAttribute("data-hasRefreshed")||e.caresAboutChangeTo&&e.caresAboutChangeTo(i,d,g)?(e.refresh(i,d),d.getAttribute("data-hasRefreshed",!0)):null!=e&&e.usesCustomBackground()&&e.refreshPosition(i,d,h,f)}}(f,p);f.timeout=r,setTimeout(r,10),f.setAttribute("data-renderedPosition",q)}}},collapseToStart:null,zeroWidthSpace:tinymce.isIE8?"\ufeff":"​",insertAfter:function(a,b,c){return c.nextSibling?a.insertBefore(b,c.nextSibling):a.appendChild(b)},wrapWithSpace:function(a,b){var c=a.getDoc().createTextNode(" ");b.parentNode.insertBefore(c,b),c=a.getDoc().createTextNode(" "),this.insertAfter(b.parentNode,c,b),a.selection.select(c),this.putCursorAfter(a,c)},putCursorAfter:function(a,b){var c=a.dom.createRng();if(3==b.nodeType)c.setStart(b,b.nodeValue.length),c.collapse(!0);else if(b.nextSibling&&3==b.nextSibling.nodeType)c.setStart(b.nextSibling,0),c.collapse(!0);else{var d=a.getDoc().createTextNode(this.zeroWidthSpace);b.parentNode.insertBefore(d,b.nextSibling),c.setStart(d,this.zeroWidthSpace.length),c.collapse(!0)}a.selection.setRng(c)},putCursorBefore:function(a,b){if(null!=b.previousSibling){var c,d=b.previousSibling,e=a.selection;e.getSel().getRangeAt?c=e.getSel().getRangeAt(0):(c=document.createRange(),c.setStart(e.getSel().anchorNode,e.getSel().anchorOffset),c.setEnd(e.getSel().focusNode,e.getSel().focusOffset));for(var f=0;3!=d.nodeType&&1==d.nodeType&&d.childNodes&&0!=d.childNodes.length;)d=d.childNodes[d.childNodes.length-1];return void(3==d.nodeType?(f=d.nodeValue.length,c.setStart(d,f),c.setEnd(d,f),a.selection.setRng(c)):(a.selection.select(d),a.selection.collapse(!0)))}},isLastNodeOf:function(a,b,c){return b.childNodes.length>0&&3==b.childNodes[b.childNodes.length-1].nodeType&&a.getRng(!0).startContainer!=b.childNodes[b.childNodes.length-1]?!1:b==c?!0:null!=b.nextSibling?!1:this.isLastNodeOf(b.parentNode,c)},isFirstNodeOf:function(a,b,c){return b.childNodes.length>0&&3==b.childNodes[0].nodeType&&a.getRng(!0).startContainer!=b.childNodes[0]?!1:b==c?!0:null!=b.previousSibling?!1:this.isLastNodeOf(b.parentNode,c)},killYourself:function(){clearInterval(this.intervalId)},setRTE:function(a){this.rte=a,this.completeInit()},completeInit:function(){if(this.ed&&this.rte&&!this.initialized){this.initialized=!0;var a=this,b=this.ed;this.rte;if(b.plugins.jivelists&&b.plugins.jivelists.onBeforeFixLists.add(function(){a.fixBodyParagraphs()}),b.plugins.paste&&b.plugins.paste.onPasteComplete.add(function(){a.fixBodyParagraphs()}),b.onMouseUp.add(function(b,c){var d=c.target;if(b.selection.isCollapsed()&&"html"==d.nodeName.toLowerCase()){var e=b.getBody();if(e)for(0==e.childNodes.length&&a.fixBodyParagraphs();1==e.nodeType&&e.childNodes.length;)e=e.childNodes[e.childNodes.length-1];b.selection.select(e),1==e.nodeType&&"br"==e.nodeName.toLowerCase()?b.selection.collapse(!0):b.selection.collapse()}}),b.plugins.jivecontextmenu){var c=b.plugins.jivecontextmenu,d=new c.MenuItem("removeTextMacro",null,b.getLang("jivemacros.unquote"),{url:CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/img/iconmaster.gif",xOffset:12,yOffset:86,width:13,height:11},"mceDeleteJiveMacro"),e=new c.Menu([d],!0,!1,b.getLang("jivemacros.macro.quote")),f=new c.MenuItem("textMacroItem",/pre/i,null,{url:CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/img/iconmaster.gif",xOffset:58,yOffset:0,width:25,height:22},e);c.addRootItem(f)}b.plugins.contextmenu&&b.plugins.contextmenu.onContextMenu.add(function(c,d,e){var f,g=b.selection,h=g.getNode()||b.getBody(),i=b.dom.getParent(h,function(c){return c==b.getBody()||a.isExactMacro(c)});a.isExactMacro(i)||(i=null);var j=null,k=-1,l=!1;if(null!=i)for(var m=0;m<jive.rte.macros.length;m++)jive.rte.macros[m].getName()==i.attributes.jivemacro.value&&(j=jive.rte.macros[m],k=m,"code"==j.getName()&&"html"==i.attributes.___default_attr.value&&(l=!0));if(window.jiveRTE={},window.jiveRTE.macroEle=i,null!=j)if(a.macro=j,d.removeAll(),"a"!=i.nodeName.toLowerCase()||"document"!=j.getName()&&"blogpost"!=j.getName()&&"thread"!=j.getName()&&"message"!=j.getName()&&"blog"!=j.getName()&&"community"!=j.getName()&&"space"!=j.getName()&&"user"!=j.getName()&&"project"!=j.getName()&&"task"!=j.getName()&&"group"!=j.getName()){var n=j.getParameterSets();if(n.length>1&&("code"!=j.getName()||!l)){var o=b.getLang("jivemacros.macro."+j.getName()+".presets","jivemacros.presets");f=d.addMenu({title:o,max_height:"200","class":"mceDropDown defaultSkin mceMacroMenu mceListBoxMenu",icon:"jiveMacroPreset"});for(var m=0;m<n.length;m++)if("code"!=j.getName()||"html"!=n[m].name){var p=b.getLang("jivemacros.macro."+j.getName()+".preset."+n[m].name,n[m].name);f.add({title:p,cmd:"mceMacroParamSet"+k+"_"+m,icon:"jiveMacro_"+j.getName()+"_"+n[m].name})}}j.getAllowedParameters().length>0&&j.isShowSettings()&&d.add({title:"jivemacros.properties",icon:"jiveMacroProperties",cmd:"mceEditJiveMacro",ui:!0}),d.add({title:"jivemacros.remove",icon:"jiveMacroDelete",cmd:"mceDeleteJiveMacro",ui:!0})}else d.add({title:"jivemacros.unlink",cmd:"mceDeleteJiveMacro"});else this.macro=null})}},init:function(a,b){this.url=b,this.ed=a;var c=a.plugins.jiveutil.findMacro("emoticon");this.emoticon=c;var d=this,e=!1;a.onKeyUp.addToTop(function(a,b){e=!a.selection.isCollapsed()},this),a.onMouseUp.addToTop(function(a,b){e=!a.selection.isCollapsed()},this),a.onKeyUp.addToTop(function(a,b){!e||8!=b.keyCode&&46!=b.keyCode||a.undoManager.add(!1,!0)},this),a.addCommand("mceJiveMacros",function(){var a=this.controlManager,b=a.get("jivemacros");b.showMenu()});var f=function(a,b){d.rte&&d.rte.scrollRichContent(a,b)};a.onScroll&&a.onScroll.addToTop(f,this),a.plugins.jivescroll&&a.onInit.add(function(a){f(a.plugins.jivescroll.lastScrollX,a.plugins.jivescroll.lastScrollY)},this),a.addCommand("mceEditJiveMacro",function(){var a=tinyMCE.activeEditor,c=a.plugins.jivemacros.macro,d=28*c.getAllowedParameters().length+88;if(c.getUrl().length>0){window.jiveRTE={},window.jiveRTE.macro=c,window.jiveRTE.node=a.dom.getParent(a.selection.getNode(),a.plugins.jivemacros.isExactMacro);a.windowManager.open({url:CS_BASE_URL+c.getUrl(),width:500,height:400,inline:1},{macro:c})}else a.windowManager.open({url:CS_BASE_URL+"/resources/scripts/tiny_mce3/plugins/jivemacros/macro.htm",width:400,height:d,inline:1},{plugin_url:b,macro:c,cs_resource_base_url:CS_RESOURCE_BASE_URL})}),a.addCommand("mceDeleteJiveMacro",function(){var a=tinyMCE.activeEditor;this.deleteMacro(a,a.selection.getNode())},this),this.initialized=!1,a.onSetContent.add(function(a){this.initialized&&(this.fixBodyParagraphs(),this.fixEmptyTableCells(a),a.nodeChanged())},this),a.onInit.add(this.completeInit,this),a.onEvent.add(function(a){return function(){a.plugins.jivemacros.removeDeletedMacros(a)}}(a)),a.onNodeChange.add(this.nodeChanged,this),a.onPostProcess.add(a.nodeChanged),a.onExecCommand.add(function(a,b,c,d){switch(b){case"mceTableSplitCells":case"mceTableMergeCells":case"mceTableInsertRowBefore":case"mceTableInsertRowAfter":case"mceTableDeleteRow":case"mceTableInsertColBefore":case"mceTableInsertColAfter":case"mceTableDeleteCol":case"mceTableCutRow":case"mceTablePasteRowBefore":case"mceTablePasteRowAfter":case"mceTableRowUp":case"mceTableRowDown":case"mceTableColLeft":case"mceTableColRight":a.plugins.jivemacros.lastNodeChanged=null}}),a.onKeyPress.addToTop(function(a,b){if(null==this.collapseToEnd&&null==this.collapseToStart||tinymce.dom.Event.cancel(b),null==b.which||0!=b.which||8==b.keyCode||46==b.keyCode){var c=this.isMacro(a.selection.getNode());c&&a.dom.setAttrib(c,"_modifiedtitle","true")}a.selection.lastSelected=a.selection.getNode()},this),a.onKeyDown.addToTop(function(a,b){8!=b.keyCode&&46!=b.keyCode||a.selection.isCollapsed()||a.undoManager.add(!1,!0);var c,d=a.selection,e=d.getNode(),f=a.dom.getParent(e,"pre");if(f||(f=a.dom.getParent(d.getNode(),".jive_macro"),f&&f.off&&f.off>1&&(f.off=f.off-1)),8==b.keyCode&&d.isCollapsed()&&f){var g=a.selectionUtil.atStartOf(f)||a.selectionUtil.isEffectivelyEmpty(f);g&&(a.undoManager.add(!1,!0),c=d.getBookmark(),a.dom.remove(f,!0),d.moveToBookmark(c),a.undoManager.add(!1,!0),tinymce.dom.Event.cancel(b))}8==b.keyCode&&e.nodeName&&"a"==e.nodeName.toLowerCase()&&1==e.innerText.length&&(a.undoManager.add(!1,!0),c=d.getBookmark(),a.dom.remove(e,!1),d.moveToBookmark(c),a.undoManager.add(!1,!0),tinymce.dom.Event.cancel(b)),d.lastSelected=d.getNode();var h=a.getBody();h.childNodes.length>0&&(this.before=d.getNode())},this),a.onKeyUp.add(function(a,b){var c=a.selection,d=c.getNode();if(!d||"body"!=d.nodeName.toLowerCase()||b.ctrlKey||b.altKey||b.shiftKey||b.metaKey||91==b.keyCode||92==b.keyCode||17==b.keyCode||18==b.keyCode||(this.typingInBody=!0,this.fixBodyParagraphs()),8==b.keyCode||46==b.keyCode){var e=this.isMacro(d);e&&a.dom.setAttrib(e,"_modifiedtitle","true")}if(a.plugins.jivemacros.removeDuplicateMacros(a,!1,this.isMacro(d)),90==b.keyCode&&(b.ctrlKey||b.metaKey)&&d&&"body"==d.nodeName.toLowerCase()&&a.selection.lastSelected&&"body"!=a.selection.lastSelected.nodeName.toLowerCase()){var f=a.selection.lastSelected;f.childNodes.length?(f=f.childNodes[f.childNodes.length-1],a.selection.select(f),a.selection.collapse(!0)):(a.selection.select(f),a.selection.collapse())}if(null!=this.collapseToStart)return this.putCursorBefore(a,this.collapseToStart),tinymce.dom.Event.cancel(b),void(this.collapseToStart=null);if(null!=this.collapseToEnd)return this.putCursorAfter(a,this.collapseToEnd),tinymce.dom.Event.cancel(b),void(this.collapseToEnd=null);if(null!=this.before&&(39==b.keyCode||40==b.keyCode)){var g=a.dom.getParent(d,"PRE");if("PRE"!=this.before.tagName&&g&&1==this.before.childNodes.length&&"BR"==this.before.childNodes[0].tagName){var h=a.dom.getParent(this.before,function(b){return function(c){return c==a.getBody()||c!=b}}(this.before));h.childNodes[0]==this.before&&(h.removeChild(this.before),this.before=g,a.nodeChanged(!1,!0))}}if(a.plugins.jiveemoticons.encodeSmileys(a,d),37==b.keyCode||38==b.keyCode){var i=a.dom.getParent(c.getNode(),function(b){return a.plugins.jivemacros.isExactMacro(b)},a.getBody());if(!i)return;var j=this.isFirst(a.getBody(),i),k=this.isMacro(i),l=0==c.getBookmark(BOOKMARKTYPE).start||0==c.getRng(!0).startOffset;if(j&&k&&l&&c.isCollapsed()){if(37!=b.keyCode||a.dom.isBlock(i)){var m=a.getDoc().createElement("P"),n=a.getDoc().createElement("BR");return m.appendChild(n),a.getBody().insertBefore(m,a.getBody().childNodes[0]),a.nodeChanged(!1,!0),!0}return i.parentNode.insertBefore(a.getDoc().createTextNode(""),i),!0}}},this)},getInfo:function(){return{longname:"Jive Macros",author:"Jive Software",authorurl:"http://jivesoftware.com",infourl:"http://jivesoftware.com",version:tinyMCE.majorVersion+"."+tinyMCE.minorVersion}},generateMacroMenu:function(a,b){var c=tinyMCE.activeEditor,d=jive.rte.macros[b],e=d.getParameterSets(),f=c.getLang("jivemacros.macro."+d.getName(),d.getName());if(e.length>1)for(var g=a.addMenu({title:f,max_height:"200","class":"mceDropDown defaultSkin mceMacroMenu mceListBoxMenu",icon:"jiveMacro_"+d.getName()}),h=0;h<e.length;h++){var i=c.getLang("jivemacros.macro."+d.getName()+".preset."+e[h].name,e[h].name);"html"==e[h].name&&"code"==d.getName()?a.add({cmd:"mceAddJiveMacro"+b+"_"+h,title:i,max_height:"200",icon:"jiveMacro_"+d.getName()}):g.add({title:i,cmd:"mceAddJiveMacro"+b+"_"+h,icon:d.getName()+"_"+e[h].name})}else if(1==e.length){var i=c.getLang("jivemacros.macro."+d.getName()+".preset."+e[0].name,e[0].name);a.add({cmd:"mceAddJiveMacro"+b,title:i,max_height:"200",icon:"jiveMacro_"+d.getName()})}else{var j="mceAddJiveMacro"+b;"Quote"==f&&(j="mceJiveQuote"),a.add({cmd:j,title:f,max_height:"200",icon:"jiveMacro_"+d.getName()})}},createControl:function(a,b){switch(a){case"jivemacros":for(var c=b.createSplitButton("jivemacros",{title:"jivemacros.add",cmd:"mceJiveMacros"}),d=0;d<jive.rte.macros.length;d++)jive.rte.macros[d].isShowInMacroList()&&"emoticon"!=jive.rte.macros[d].getName()&&!jive.rte.macros[d].isButton()&&c.onRenderMenu.add(function(a){return function(b,c){var d=tinyMCE.activeEditor;d.plugins.jivemacros.generateMacroMenu(c,a)}}(d));return c;case"extra":for(var e=tinyMCE.activeEditor,d=0;d<jive.rte.macros.length;d++)if(jive.rte.macros[d].isShowInMacroList()&&"emoticon"!=jive.rte.macros[d].getName()&&jive.rte.macros[d].isButton()){var f=jive.rte.macros[d],g=f.getParameterSets(),h=e.getLang("jivemacros.macro."+f.getName(),f.getName());if(g.length>1){var c=b.createSplitButton("extra",{title:h,image:"../jscripts/tiny_mce/plugins/example/img/example.gif",icon:"jiveMacro_"+f.getName(),cmd:"mceAddJiveMacro"+d});return c.onRenderMenu.add(function(a){return function(b,c){for(var d=0;d<g.length;d++){var h=e.getLang("jivemacros.macro."+f.getName()+".preset."+g[d].name,g[d].name);c.add({title:h,cmd:"mceAddJiveMacro"+a+"_"+d,icon:f.getName()+"_"+g[d].name})}}}(d)),c}var c=b.createButton("extra",{title:h,cmd:"mceAddJiveMacro"+d,icon:"jiveMacro_"+f.getName()});return c}}return null}}),tinymce.PluginManager.add("jivemacros",tinymce.plugins.JiveMacrosPlugin)}(jQuery,_)}),define("tiny_mce3/plugins/jivemacros/editor_plugin_src",["jquery","tinyMCE","jive/ext/y/y_core"],function(){}),define("soy!jive.rte.attachment.formatSize",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils"],function(a,b){return jive.namespace.call(this,"jive.rte.attachment"),jive.rte.attachment.formatSize=function(a,b){var c=b||new soy.StringBuilder;return c.append(a.size>1048576?soy.$$escapeHtml(Math.round(a.size/1048576*10)/10)+"&nbsp;MB":soy.$$escapeHtml(Math.round(a.size/1024*10)/10)+"&nbsp;KB"),b?"":c.toString()},jive.rte.attachment.formatSize}),define("soy!jive.rte.attachment.restrictions",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils","soy!jive.rte.attachment.formatSize"],function(a,b){return jive.namespace.call(this,"jive.rte.attachment"),jive.rte.attachment.restrictions=function(a,c){var d=c||new soy.StringBuilder;return a.restrictions.maxSize&&(d.append('<span class="js-attachments-sizeRestriction">',soy.$$escapeHtml(b.i18nText(b.getMsg("k44eb"),[]))," "),jive.rte.attachment.formatSize({size:a.restrictions.maxSize},d),d.append("</span>")),d.append(a.restrictions.allowByDefault?a.restrictions.attachmentExtensions.length>0?(a.latest&&a.restrictions.maxSize?" &bull; ":"")+'<span class="js-attachments-typeRestriction">'+soy.$$escapeHtml(b.i18nText(b.getMsg("kf3c"),[]))+"  "+soy.$$escapeHtml(a.restrictions.attachmentExtensions)+"</span>":"":(a.latest&&a.restrictions.maxSize?" &bull; ":"")+'<span class="js-attachments-typeRestriction">'+soy.$$escapeHtml(b.i18nText(b.getMsg("kf39"),[]))+"  "+soy.$$escapeHtml(a.restrictions.attachmentExtensions)+"</span>",a.restrictions.disallowedTypes?(a.latest&&(a.restrictions.maxSize||!a.restrictions.allowByDefault||a.restrictions.attachmentExtensions.length>0)?" &bull; ":"")+'<span class="js-attachments-typeRestriction">'+soy.$$escapeHtml(b.i18nText(b.getMsg("k44e9"),[]))+" "+soy.$$escapeHtml(a.restrictions.disallowedTypes)+"</span>":"",a.restrictions.maxFiles?(a.latest&&(a.restrictions.disallowedTypes||a.restrictions.maxSize||!a.restrictions.allowByDefault||a.restrictions.attachmentExtensions.length>0)?" &bull; ":"")+'<span class="js-attachments-countRestriction">'+soy.$$escapeHtml(b.i18nText(b.getMsg("k44ea"),[]))+" "+soy.$$escapeHtml(a.restrictions.maxFiles)+"</span>":""),c?"":d.toString()},jive.rte.attachment.restrictions}),define("soy!jive.rte.attachment.attachmentHeader",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils","soy!jive.rte.attachment.restrictions"],function(a,b){return jive.namespace.call(this,"jive.rte.attachment"),jive.rte.attachment.attachmentHeader=function(a,c){var d=c||new soy.StringBuilder;return d.append('<div class="js-attachment-list-bar j-attachment-header"><a href="#" class="js-attachment-button-label j-compose-row-title">',soy.$$escapeHtml(b.i18nText(b.getMsg("k44e7"),[])),'</a><span class="j-attach-restrictions js-attachment-restrictions">'),jive.rte.attachment.restrictions(a,d),d.append("</span></div>"),c?"":d.toString()},jive.rte.attachment.attachmentHeader}),define("soy!jive.rte.attachment.attachmentList",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils","soy!jive.rte.attachment.formatSize"],function(a,b){return jive.namespace.call(this,"jive.rte.attachment"),jive.rte.attachment.attachmentList=function(a,c){var d=c||new soy.StringBuilder;if(a.attachments.length>0){d.append('<ul class="js-attachment-list clearfix">');for(var e=a.attachments,f=e.length,g=0;f>g;g++){var h=e[g];d.append('<li><span class="',a.latest?"jive-icon-big":"jive-icon-med"," jive-icon-doctype-",soy.$$escapeHtml(h.doctype),'"></span><span class="j-attachment-name-chop">',soy.$$escapeHtml(h.filename),'</span> <strong class="font-color-meta j-attach-meta">'),h.size&&jive.rte.attachment.formatSize({size:h.size},d),d.append("</strong>",a.restrictions.hasAttachPerms?'<a class="js-attachment-remove j-remove" href=\'#\'><span class="'+(a.latest?"jive-icon-glyph icon-close-med":"ui-remove")+'" title="'+soy.$$escapeHtml(b.i18nText(b.getMsg("k44ec"),[]))+'">'+soy.$$escapeHtml(b.i18nText(b.getMsg("k44ec"),[]))+"</span></a>":"","</li>")}d.append("</ul>",a.latest?"":'<div class="j-attach-clip j-ui-elem"></div>')}return c?"":d.toString()},jive.rte.attachment.attachmentList}),define("soy!jive.rte.attachment.attachmentBlock",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils","soy!jive.rte.attachment.attachmentHeader","soy!jive.rte.attachment.attachmentList"],function(a,b){return jive.namespace.call(this,"jive.rte.attachment"),jive.rte.attachment.attachmentBlock=function(a,b){var c=b||new soy.StringBuilder;return jive.rte.attachment.attachmentHeader(a,c),jive.rte.attachment.attachmentList(a,c),b?"":c.toString()},jive.rte.attachment.attachmentBlock}),define("tiny_mce3/plugins/jiveattachment/editor_plugin_src",["jquery-private","tinyMCE","soy!jive.rte.attachment.attachmentBlock","jquery-plugin/jquery.safeRemove"],function(){!function(a){var b=tinymce.DOM,c=document.getElementsByClassName("j-design-latest").length>0,d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,17)},e={pdf:"acrobat",zip:"compressed",tgz:"compressed",tar:"compressed",gz:"compressed",bz2:"compressed",jar:"compressed",doc:"document",docx:"document",htm:"document",html:"document",rtf:"document",odt:"document",png:"image",gif:"image",jpg:"image",tiff:"image",ppt:"presentation",pptx:"presentation",odp:"presentation",xls:"spreadsheet",xlsx:"spreadsheet",ods:"spreadsheet",txt:"text",swf:"video",wmv:"video",mov:"video"};tinymce.create("tinymce.plugins.JiveAttachmentPlugin",{rte:null,initialized:!1,button:null,attachmentBlock:null,setRTE:function(a){this.rte=a,this.completeInit()},completeInit:function(){if(this.rte&&this.ed&&!this.initialized&&this.rte.getAttachmentService()){this.initialized=!0;var a=this.ed;this.button=b.create("div",{"class":"gutterButton attachmentButton",tabindex:"0"});var d=b.create("label",{style:"height: 12px;"},a.getLang("jiveattachment.button_label"));d.insertBefore(b.create("span",{"class":"jive-icon-glyph icon-attachment"}),d.firstChild),this.button.appendChild(d),this.attachmentBlock=b.create("div",{"class":c?"js-attachment-block j-attach-block clearfix":"js-attachment-block jive-attachments clearfix"}),this.rte.getGutter().appendChild(this.button),this.rte.getBelowEditorArea().appendChild(this.attachmentBlock),this._refresh()}},init:function(a){this.ed=a},_setHasAttachments:function(b){b?(a(".jive-icon-attachment",this.button).addClass("green"),a(this.attachmentBlock).show(),a(this.attachmentBlock).find(".js-attachment-button-label").focus()):(a(".jive-icon-attachment",this.button).removeClass("green"),a(this.attachmentBlock).hide()),this.rte.autoReposition()},_refresh:function(){function b(a){if(a)var b=a.substr(a.lastIndexOf(".")+1).toLowerCase(),c=e[b];return c||"generic"}var f=this,g=a("jive-composebuttons");this.rte.getAttachmentService().getRestrictions().addCallback(function(d){f.getAttachments().addCallback(function(e){for(var g=0;g<e.length;++g)e[g].doctype=b(e[g].filename);if(f.attachmentBlock.innerHTML=jive.rte.attachment.attachmentBlock({restrictions:d,attachments:e,latest:c}),f._setHasAttachments(e.length>0),a("a.js-attachment-remove",f.attachmentBlock).each(function(b,c){a(c).click(function(){return f.removeAttachment(e[b]).addCallback(function(){f._refresh()}),!1})}),a(".js-attachment-button-label",f.attachmentBlock).click(function(){return a(".js-attachment-list",f.attachmentBlock).toggle(),!1}),d.hasAttachPerms&&e.length<d.maxFiles){var h=a(f.button).show();f._initAttachmentButton(),h.css("position","static"),setTimeout(function(){h.css("position","")},0)}else a(f.button).hide()})}),d(function(){g.hide(),d(function(){g.show()})})},_initAttachmentButton:function(){var b=this,c=a("input[type='file']",this.button);0==c.length?c=a(this._createFileInput()):(this.button.innerHTML=this.button.innerHTML,c=a("input[type='file']",this.button));var d=a("label",this.button);d.append(c),c.unbind("change"),c.attr("id",this.ed.id+"_attach").css({position:"fixed",opacity:0,display:"block",top:0,left:0,width:"100%",height:"100%","z-index":1}).change(function(a){b.addAttachment({elem:c}).always(function(){b._refresh()})}).focus(function(){c.parent().addClass("focused")}).blur(function(){c.parent().removeClass("focused")}),tinymce.isIE7&&c.css({width:"60px",height:"19px"}),this.exists?c.focus():this.exists=!0,c.css("position","absolute")},_createFileInput:function(){return b.create("input",{type:"file"})},getAttachments:function(){return this.rte.getAttachmentService().findAll()},addAttachment:function(a){var b=this.rte.getAttachmentService();return b.save(a)},removeAttachment:function(a){var b=this.rte.getAttachmentService();return b.destroy(a)},getInfo:function(){return{longname:"Jive Attachment",author:"Jive Software",authorurl:"http://jivesoftware.com",infourl:"http://jivesoftware.com",version:tinyMCE.majorVersion+"."+tinyMCE.minorVersion}}}),tinymce.PluginManager.add("jiveattachment",tinymce.plugins.JiveAttachmentPlugin)}(jQuery)}),define("tiny_mce3/plugins/jiveattachment/editor_plugin_src",["jquery","tinyMCE","soy!jive.rte.attachment.attachmentBlock","jquery-plugin/jquery.safeRemove"],function(){}),define("tiny_mce3/plugins/jiveemoticons/editor_plugin_src",["tinyMCE","jquery-private"],function(){!function(a){tinymce.create("tinymce.plugins.JiveEmoticonsPlugin",{before:null,encodeSmileys:function(b,c){function d(a){var b=h.createElement("IMG");return b.setAttribute("class","jive_macro jive_emote"),b.setAttribute("jivemacro","emoticon"),b.setAttribute("___jive_emoticon_name",a),b.setAttribute("src",window.CS_RESOURCE_BASE_URL+"/images/emoticons/"+a+".png"),b.setAttribute("data-mce-src",window.CS_RESOURCE_BASE_URL+"/images/emoticons/"+a+".png"),b.removeAttribute("width"),b.removeAttribute("height"),b}function e(a){function b(c,e,f){var i=c.length;if(j.test(f.substring(e-1,e))&&j.test(f.substring(e+i,e+i+1))){var k=g.emoticonMap[c],l=f.substring(b.lastIndex,e);return b.lastIndex=e+i,a.appendChild(h.createTextNode(l)),a.appendChild(d(k[1])),""}return c}return b.lastIndex=0,b}function f(c){var d=b.plugins.jivemacros.isMacro(c);if(d&&"code"==a(d).attr("jivemacro"))return 1;if(1==c.nodeType)for(var i=0;i<c.childNodes.length;)i+=f(c.childNodes[i]);else if(3==c.nodeType){var j=h.createDocumentFragment();g.testForAnyEmoticon.lastIndex=0;var l=e(j);if(c.nodeValue.replace(g.testForAnyEmoticon,l),j.childNodes.length>0){var m=c.nodeValue.substr(l.lastIndex);j.appendChild(h.createTextNode(m));var n=j.childNodes.length;return c.parentNode.replaceChild(j,c),k=!0,n}}return 1}var g=this,h=b.getDoc(),i=null,j=new RegExp("^(?:[^\\S]|\\xA0)?$"),k=!1;if(null!=c&&this.testForAnyEmoticon.test(c.innerHTML)){var l=!0;try{tinymce.isIE&&!b.selection.isCollapsed()||(l=b.selectionUtil.isForwardSelection(),i=b.selection.getBookmark())}catch(m){}b.selection.setRng(b.selectionUtil.safeNormalize(b.selection.getRng(!0),c)),f(c),null!=i&&(b.selection.moveToBookmark(i),l||b.selectionUtil.setSelection(b.selection.getRng(!0),l))}},nodeChanged:function(a){null==this.before&&(this.before=a.selection.getNode()),this.encodeSmileys(a,this.before),this.before=a.selection.getNode()},init:function(a,b){var c=[[":)","happy",":\\)"],[":^0","laugh",":\\^0"],[":p","silly",":p"],[":P","silly",":P"],[";)","wink",";\\)"],[":|","plain",":\\|"],["X-(","angry","X-\\("],[":8}","blush",":8}"],[":?","confused",":\\?"],["B-)","cool","B-\\)"],[":'(","cry",":'\\("],["]:)","devil","\\]:\\)"],[":D","grin",":D"],[":x","love",":x"],[";\\","mischief",";\\\\"],[":(","sad",":\\("],[":o","shocked",":o"],["(i)","info","\\(i\\)"],["(+)","plus","\\(\\+\\)"],["(-)","minus","\\(-\\)"],["(!)","alert","\\(!\\)"],["(/)","check","\\(/\\)"],["(x)","x","\\(x\\)"]],d={};c.forEach(function(a){d[a[0]]=a}),this.emoticonMap=d;var e=c.map(function(a){return a[a.length-1]}).join("|");this.testForAnyEmoticon=new RegExp("(?=\\B|X|B)(?:"+e+")","g"),tinymce.isOpera||/Firefox\/2/.test(navigator.userAgent)?a.onKeyDown.add(function(a,b){((tinymce.isMac?b.metaKey:b.ctrlKey)&&86==b.keyCode||b.shiftKey&&45==b.keyCode)&&setTimeout(function(a,b){return function(){a.encodeSmileys(b,b.getBody())}}(this,a),33)},this):a.onPaste.addToTop(function(a,b){setTimeout(function(a,b){return function(){a.encodeSmileys(b,b.getBody())}}(this,a),33)},this)},execCommand:function(a,b,c){if("mceJiveEmoticon"==a){var d=tinyMCE.activeEditor.controlManager,e=d.get("jiveemoticons");return e.showMenu(),!0}if("insertHTML"==a||"mceInsertContent"==a){var f=tinyMCE.activeEditor;setTimeout(function(a,b){return function(){a.encodeSmileys(b,b.getBody())}}(this,f),0)}return!1},getInfo:function(){return{longname:"Emoticons",author:"Jive Software",authorurl:"http://jivesoftware.com",infourl:"http://jivesoftware.com",version:tinyMCE.majorVersion+"."+tinyMCE.minorVersion}},createControl:function(a,b){switch(a){case"jiveemoticons":var c=b.createSplitButton("jiveemoticons",{title:"jiveemoticons.desc",cmd:"mceJiveEmoticon"});return c.onRenderMenu.add(function(a,b){for(var c=tinyMCE.activeEditor,d=0;d<jive.rte.macros.length;d++){var e=jive.rte.macros[d];if(e.isShowInMacroList()&&"emoticon"==e.getName()){for(var f=e.getParameterSets(),g=0;g<f.length;g++){var h=c.getLang("jivemacros.macro."+e.getName()+".preset."+f[g].name,f[g].name);b.add({title:h,cmd:"mceAddJiveMacro"+d+"_"+g,icon:"jiveMacro_"+e.getName()+"_"+f[g].name})}break}}}),c}return null}}),tinymce.PluginManager.add("jiveemoticons",tinymce.plugins.JiveEmoticonsPlugin)}(jQuery)}),define("tiny_mce3/plugins/jiveemoticons/editor_plugin_src",["tinyMCE","jquery"],function(){}),define("tiny_mce3/plugins/jivemention/editor_plugin_src",["jquery-private","tinyMCE","soy!jive.statusinput.dropdown.ddTagsContent","jquery-plugin/jquery.typeAhead"],function(){!function(a){function b(a,b){return a.substr(0,b.length)==b}function c(b,c){var f=a.Deferred(),g=b.getDoc();return require(["apps/microblogging/link_builder"],function(a){var b=a.objectRef(c,Function.prototype.bind.call(g.createElement,g,"a")),h=b.attr("data-id"),i=b.attr("data-type"),j="tag"===b.data("type")?h:null,k=j?"tag":d(i),l=e(i);b.attr("href","javascript:;"),b.attr("data-objectType",l),b.attr("jivemacro",k),b.addClass("jive_macro jive_macro_"+k),j||b.attr("___default_attr",h),j&&b.attr("_tag",j),f.resolve(b.get(0))}),f.promise()}function d(a){return jive.global.typeToMacroName[a]}function e(a){return jive.global.typeToNumeric[a]}function f(a,b,c,d){require(["jive/promise_util"],function(e){b._actionQueue.push(e.whenAll(b._data.defaultData())).then(function(e){var f=b.positionThePopUp(a,c,d);f&&b.inMentionRegion(a)&&(b._lastData=e,b._dd.renderDefaultList({sections:e.filter(function(a){return a.list.length>0})},{contextBox:f}))})})}function g(a,b,c,d,e){var f=b._data.search(e);b._dataGroup=(b._dataGroup||0)+1,f.forEach(function(e){b._actionQueue.push(e,b._dataGroup).then(h.bind(null,b)).then(function(e){var f=b.positionThePopUp(a,c,d);f&&b.inMentionRegion(a)&&b._dd.renderSearchData(e,{contextBox:f})})})}function h(a,b){return a._lastData||(a._lastData=[{type:"people",list:[]},{type:"places",list:[]},{type:"content",list:[]}]),a._lastData=a._lastData.map(function(a){return a.type===b.type?b:a}),{sections:a._lastData.filter(function(a){return a.list.length>0})}}var i={triggerChar:"@",search:function(a,b,c,d,e){var h=e.length<2?f:g;h(a,b,c,d,e)},select:function(a,b,d){var e=b.ed;"more"===a.data("command")?b._dd.expand(a):c(e,a).then(function(a){b.replaceSearchText(e,b.lastInfo.node,b.lastInfo.offset,a,d)}),tinymce.isAndroid?e.getBody().focus():e.focus()}},j=a.extend({},i);j.triggerChar="@";var k={triggerChar:"#",search:function(b,c,d,e,f){var g=c._data.tags(f);c._actionQueue.push(g).then(function(g){var h=c.positionThePopUp(b,d,e);c._dd.renderTagsData(g,a.trim(f),{contextBox:h})})},select:function(a,b,d){var e=b.ed;c(e,a).then(function(a){b.replaceSearchText(e,b.lastInfo.node,b.lastInfo.offset,a,d),tinymce.isAndroid?e.getBody().focus():e.focus()})}};tinymce.create("tinymce.plugins.JiveMentionsPlugin",{rte:null,lastInfo:null,lastPosition:null,cancelTheKey:!1,ajax:null,outerDom:null,searchTextRegex:null,beforeMentionRegex:null,mentionTypes:null,allTriggerChars:"",setRTE:function(a){this.rte=a,this.completeInit()},positionThePopUp:function(c,d,e){var f=a(d.parentNode).offset();if(f){var g=a("<div></div>");g.css("position","absolute"),
g.css("left",f.left),g.css("top",f.top);var h;h="body"==d.parentNode.nodeName.toLowerCase()?a("<div></div>").text(a(d.parentNode).text()):c.plugins.jiveutil.clone(a(d.parentNode),window.parent.document),h.css("visibility","hidden"),h.css("margin","0"),h.width(a(d.parentNode).width()),g.append(h),this.rte.getHiddenContainer().append(g);var i=c.dom.createRng();i.setStart(d.parentNode,0),i.setEnd(d,e);var j=i.toString().replace(/(\s|\u00a0)+$/,""),k=h.get(0),l=this.outerDom.createRng();l.setStart(k,0);for(var m=k.firstChild;m;){l.setEndAfter(m);var n=l.toString().replace(/(\s|\u00a0)+$/,"");if(b(n,j)){for(;l.toString().replace(/(\s|\u00a0)+$/,"")!=j;){var o=this._prevCharPos(c.selectionUtil.endPos(l));l.setEnd(o.c,o.off)}l.collapse(!1);var p=this.outerDom.create("span",null,"|");l.insertNode(p),h.width(a(d.parentNode).width()+a(p).width()+10),this.lastPosition=f;var q=a.extend({},a(p).offset(),{width:a(p).outerWidth(),height:a(p).outerHeight()});return g.remove(),q}m=m.nextSibling}return g.remove(),this.lastPosition}},hideThePopup:function(){this._dd.hide()},showingPopover:function(){return this._dd.isVisible()},completeInit:function(){if(this.rte&&this.ed&&!this.initialized){this.initialized=!0;var a=this.ed,b=this.outerDom;if(a.onPopupClose=new tinymce.util.Dispatcher,this.rte.getGutter){var c=b.create("div",{"class":"gutterButton mentionButton",tabindex:0},a.getLang("jivemention.mention_button_lbl")),d=null;b.bind(c,"mousedown",function(){a.focus(),d=tinyMCE.activeEditor.selection.getRng(!0)}),b.bind(c,"click",function(){a.execCommand("jiveAtMention",!0,d)}),this.rte.getGutter().appendChild(c)}}},execCommand:function(a,b,c){var d=this.ed;if("jiveAtMention"==a){c&&d.selection.setRng(c),d.undoManager.add();var e="@"+d.selection.getContent();d.selection.setContent(e),d.selection.collapse(!1),d.focus(),d.undoManager.add();var f=this;return setTimeout(function(){f.checkForMentionPopup(d)},1),!0}return!1},addMentionType:function(a){var b=a.triggerChar;if(!b||1!=b.length||"string"!=typeof b)throw new Error("invalid trigger character: "+b);this.mentionTypes[b]=a,this.allTriggerChars+=b,this.searchTextRegex=new RegExp("[^\\s "+this.allTriggerChars+",/]"),this.beforeMentionRegex=new RegExp("\\s| |[^\\w"+this.allTriggerChars+",/]")},_getMentionObj:function(a){var b=this.mentionTypes[a];return b&&1==a.length?b:null},init:function(b){function c(a){return[13,32,188,191].indexOf(a.keyCode)>=0}function d(a){return[27,38,40,9].indexOf(a.keyCode)>=0}function e(b,f){var h;if(g.cancelTheKey=!1,g.inMentionRegion(b)){var i=g.showingPopover(),j=new a.Event(f.type,{keyCode:f.keyCode,shiftKey:f.shiftKey});if(c(f)){if(g.typeAheadProxy.data("typeAhead").getSelected().length>0&&(g.cancelTheKey=!0,h=tinymce.dom.Event.cancel(f)),tinymce.isGecko&&f.rangeParent&&f.rangeParent.firstChild&&f.rangeParent.firstChild.data){var k=f.rangeParent.firstChild.data,l=new a.Event(f.type,{keyCode:k[k.length-1].charCodeAt(0),shiftKey:f.shiftKey});e(b,l)}}else d(f)&&(tinymce.dom.Event.cancel(f),(27!=f.keyCode||i)&&(h=!1));g.typeAheadProxy.trigger(j)}else g.hideThePopup();return h}function f(a,b){return g.cancelTheKey&&c(b)?tinymce.dom.Event.cancel(b):void 0}this.ed=b,this.outerDom=new tinymce.dom.DOMUtils(document),this.mentionTypes=[],this.cachedRng=[],this.addMentionType(i),this.addMentionType(j),this.addMentionType(k);var g=this;this.typeAheadProxy=a("<input type='text' />").typeAhead({hasFocus:function(){return a("iframe",b.getContentAreaContainer()).is(":focus")&&b.getDoc().activeElement==b.getBody()},itemSelector:".j-autocomplete-results li:visible, .j-results li:visible",chooseOnSpace:!0,focusWait:0,keystrokeWait:400,tabSelector:".js-tab:visible"}).on("focus",function(){b.focus()}).on("selectionChosen",function(a,b,c,d){d.preventDefault(),g.select(c.find("a").get(0),32==d.keyCode||tinymce.isAndroid)}).on("keystroke",function(){g.checkForMentionPopup(b)}).on("focusWaitFinished",function(){g.checkForMentionPopup(b)}).on("close blurWaitFinished",function(){g.hideThePopup()}).on("otherClick",function(a,b,c,d){b.getTabs().index(c.get(0))>=0&&g.select(c.get(0),!1),d.preventDefault()}).on("selectionMousedown",function(){g.cachedRng.push(g.ed.selection.getRng(!0))}),b.onKeyDown.addToTop(e,this),b.onKeyUp.addToTop(e,this),b.onKeyPress.addToTop(f,this),b.onScroll.add(function(c,d){if(this.lastPopover){this.lastPosition.top+20-d<=0&&this.hideThePopup();var e=a(b.getContainer()).children("table:first tr.mceIframeRow").height();this.lastPosition.top+20-d>=e&&this.hideThePopup()}},this),require(["apps/status_input/data_source","apps/microblogging/status_input_drop_down","jive/fresh_action_queue"],function(b,c,d){g._data=b,g._actionQueue=d(),g._dd=new c(a(),g.typeAheadProxy.data("typeAhead")),g._dd.addListener("close",function(){g.ed.onPopupClose&&g.ed.onPopupClose.dispatch(),delete g.lastInfo}),b.warmCache()})},select:function(b,c){for(this.cachedRng.push(this.ed.selection.getRng(!0));this.cachedRng.length&&this.cachedRng.length>0;){var d=this.cachedRng.pop(),e=this._mentionSearch(d);if(null!==e){this.cachedRng=[];break}}this.lastInfo=e;var f=this._getMentionObj(e.type);f&&f.select(a(b),this,c)},inMentionRegion:function(a){var b=a.selection.getRng(!0);return null!=this._mentionSearch(b)},checkForMentionPopup:function(a){try{var b=a.selection.getRng(!0),c=this._mentionSearch(b);if(!c||"#"==c.type&&c.searchText.length>55)return void this.hideThePopup();this.lastInfo=c;var d=this._getMentionObj(c.type);d&&d.search(a,this,c.node,c.offset,c.searchText)}catch(e){this.hideThePopup()}},destroySearchText:function(a,b,c){this.replaceSearchText(a,b,c,a.getDoc().createTextNode(""),!1)},replaceSearchText:function(b,c,d,e,f){var g=this,h=c.nodeValue.substr(d,1);if(null!=this._getMentionObj(h)){for(var i=!0,j="",k=0,l=!1;3==c.nodeType;){for(k=0;d+k<c.nodeValue.length;){var m=c.nodeValue.substr(d+k,1);if(!i&&!this.searchTextRegex.test(m)){l=!0;break}j+=m,k++,i=!1}if(l||!c.nextSibling||3!=c.nextSibling.nodeType)break;var n=c.nextSibling;0==d?c.parentNode.removeChild(c):c.nodeValue=c.nodeValue.substr(0,d),c=n,d=0}if(0==d&&0==k)c.parentNode.insertBefore(e,c);else if(c.nodeValue.length==k&&0==d)c.parentNode.insertBefore(e,c),c.parentNode.removeChild(c);else if(0==d)c.parentNode.insertBefore(e,c),c.nodeValue=c.nodeValue.substr(k);else{var o=c.nodeValue;c.nodeValue=o.substr(0,d);var p=o.substr(d+k);if(p.length>0){var q=b.getDoc().createTextNode(p);c.parentNode.insertBefore(q,c),c.parentNode.insertBefore(e,q),c.parentNode.insertBefore(c,e)}else c.parentNode.insertBefore(e,c),c.parentNode.insertBefore(c,e)}if(f){var r=b.getDoc().createTextNode(" ");e.parentNode.insertBefore(r,e),e.parentNode.insertBefore(e,r),e=r}b.plugins.jivemacros.putCursorAfter(b,e),b.nodeChanged();var s,t=g.rte.getEntitlementService(),u=a("div.jive-compose-section-visibility");u.length&&u.is(":visible")&&!u.find("li.anyone input").is(":checked")&&(s=u.find(".j-people-list li").map(function(){return a(this).data("user-id")+""}).get()),t&&e.getAttribute&&e.getAttribute("data-objectType")&&t.checkEntitlement(e.getAttribute("data-objectType"),e.getAttribute("___default_attr"),s).addCallback(function(c){if(!c){var d="";d=3==e.getAttribute("data-objectType")?b.getLang("jivemention.no_notification"):700==e.getAttribute("data-objectType")?b.getLang("jivemention.secret_group_mention"):b.getLang("jivemention.restricted_content_mention"),a("<p>"+a(e).text()+" "+d+"</p>").message({style:"warn"})}}),this.hideThePopup()}},getInfo:function(){return{longname:"Mentions",author:"Jive Software",authorurl:"http://jivesoftware.com",infourl:"http://jivesoftware.com",version:tinyMCE.majorVersion+"."+tinyMCE.minorVersion}},_withinCodeMacro:function(a){var b=this.ed.dom.getParent(a,"pre");if(null!=b){var c=this.ed.plugins.jivemacros.isMacro(b);if(c&&"code"==this.ed.plugins.jivemacros.getMacroFor(b).getName())return!0}return null},_prevCharPos:function(a){if(3==a.c.nodeType)return a.off>0?{c:a.c,off:a.off-1}:this._prevCharPos({c:a.c.parentNode,off:this.ed.dom.nodeIndex(a.c)});if(1==a.c.nodeType){if(a.off>0){var b=a.c.childNodes[a.off-1];return b.nodeType&&3==b.nodeType?this._prevCharPos({c:b,off:b.nodeValue.length}):null}return null}},_nextCharPos:function(a){if(3==a.c.nodeType)return a.off<a.c.nodeValue.length-1?{c:a.c,off:a.off+1}:a.off==a.c.nodeValue.length-1?this._nextCharPos({c:a.c,off:a.off+1}):this._nextCharPos({c:a.c.parentNode,off:this.ed.dom.nodeIndex(a.c)+1});if(1==a.c.nodeType){if(a.off<a.c.childNodes.length){var b=a.c.childNodes[a.off];return 3==b.nodeType?b.nodeValue.length>0?{c:b,off:0}:this._nextCharPos({c:b,off:0}):null}return null}},_charAt:function(a){return a&&3==a.c.nodeType?a.c.nodeValue.substr(a.off,1):null},_mentionSearch:function(a){function b(a){var b=c.dom.createRng(),d=f._nextCharPos(a);if(null==d||!f.searchTextRegex.test(f._charAt(d)))return"";for(b.setStart(d.c,d.off);null!=d&&(b.setEnd(d.c,d.off+1),d=f._nextCharPos(d),f.searchTextRegex.test(f._charAt(d))););return b.toString()}var c=this.ed;if(!a.collapsed)return null;for(var d=this._prevCharPos(this.ed.selectionUtil.startPos(a));d&&this.searchTextRegex.test(this._charAt(d));)d=this._prevCharPos(d);if(null==d)return null;var e=this._prevCharPos(d);if(e&&!this.beforeMentionRegex.test(this._charAt(e)))return null;if(tinymce.isIE8&&!e&&("@"==this._charAt(d)||"＠"==this._charAt(d))&&null!=d.c.previousSibling&&!/br|img/i.test(d.c.previousSibling.nodeName)&&!c.dom.isBlock(d.c.previousSibling))return null;if(this._withinCodeMacro(d.c))return null;if(null!=this._getMentionObj(this._charAt(d))){var f=this,g={node:d.c,offset:d.off,searchText:b(d),type:this._charAt(d)};return g}return null}}),tinymce.PluginManager.add("jivemention",tinymce.plugins.JiveMentionsPlugin)}(jQuery)}),define("tiny_mce3/plugins/jivemention/editor_plugin_src",["jquery","tinyMCE","soy!jive.statusinput.dropdown.ddTagsContent","jquery-plugin/jquery.typeAhead"],function(){}),define("soy!jive.apps.dropdown.ddNoAppContent",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils"],function(a,b){return jive.namespace.call(this,"jive.apps.dropdown"),jive.apps.dropdown.ddNoAppContent=function(a,c){var d=c||new soy.StringBuilder;return d.append('<div class="j-no-match j-empty-view" ><p><strong>',soy.$$escapeHtml(b.i18nText(b.getMsg("ke74"),["No apps match your search term."])),"</strong></p><p>",soy.$$escapeHtml(b.i18nText(b.getMsg("ke72"),["Try using more general terms."])),"</p></div>"),c?"":d.toString()},jive.apps.dropdown.ddNoAppContent}),define("soy!jive.apps.dropdown.ddNoAppInstalled",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils"],function(a,b){return jive.namespace.call(this,"jive.apps.dropdown"),jive.apps.dropdown.ddNoAppInstalled=function(a,c){var d=c||new soy.StringBuilder;return d.append('<div class="j-no-apps-installed j-empty-view"><div class="j-empty-container"><h2>',soy.$$escapeHtml(b.i18nText(b.getMsg("kec2"),["Apps"])),'</h2><p class="font-color-meta"><strong>',soy.$$escapeHtml(b.i18nText(b.getMsg("ke73"),["There are no apps installed."])),'</strong></p><div class="j-divider"></div><p class="font-color-meta">',soy.$$escapeHtml(b.i18nText(b.getMsg("ke71"),["Enhance your content by including information created by !-able apps."])),'</strong></p><div class="j-controls"><a class="j-apps-market-link" href="#">',soy.$$escapeHtml(b.i18nText(b.getMsg("ke75"),["Open the Jive Apps Market"])),'<span class="j-ui-elem j-cta-arrow"></span></a></div></div></div>'),c?"":d.toString()},jive.apps.dropdown.ddNoAppInstalled}),define("soy!jive.apps.dropdown.ddOutputIconImage",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils"],function(a,b){return jive.namespace.call(this,"jive.apps.dropdown"),jive.apps.dropdown.ddOutputIconImage=function(a,b){var c=b||new soy.StringBuilder;switch(a.icon){case"edit":c.append('<span class="jive-icon-glyph icon-edit"></span>');break;case"manage":c.append('<span class="jive-icon-glyph icon-gear"></span>');break;case"move":c.append('<span class="jive-icon-glyph icon-move2"></span>');break;case"add":c.append('<span class="jive-icon-glyph icon-plus-circle"></span>');break;case"delete":c.append('<span class="jive-icon-glyph icon-minus-circle2"></span>');break;case"download":c.append('<span class="jive-icon-glyph icon-download"></span>');break;case"flag":c.append('<span class="jive-icon-glyph icon-flag"></span>');break;case"graph":c.append('<span class="jive-icon-glyph icon-stats-up"></span>');break;case"link":c.append('<span class="jive-icon-glyph icon-link"></span>');break;case"create":c.append('<span class="jive-icon-glyph icon-pencil2"></span>');break;default:c.append('<img alt="" src="',soy.$$escapeHtml(a.icon),'" class="jive-icon-med" height="16" width="16" />')}return b?"":c.toString()},jive.apps.dropdown.ddOutputIconImage}),define("soy!jive.apps.dropdown.ddOutputAppActions",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils","soy!jive.apps.dropdown.ddOutputIconImage"],function(a,b){return jive.namespace.call(this,"jive.apps.dropdown"),jive.apps.dropdown.ddOutputAppActions=function(a,b){var c=b||new soy.StringBuilder;c.append('<ul class="j-app-actions j-autocomplete-results j-icon-list" role="listbox">');var d=a.entries,e=d.length;if(e>0)for(var f=0;e>f;f++){var g=d[f];c.append('<li role="option"><a data-action-id="',soy.$$escapeHtml(g.id),'" data-app-url="',soy.$$escapeHtml(g.appURL),'" data-app-uuid="',soy.$$escapeHtml(g.appUUID),'" data-app-instance-uuid="',soy.$$escapeHtml(g.appInstanceUUID),'" data-name="os-action-link" data-label="',soy.$$escapeHtml(g.label),'" data-view="',soy.$$escapeHtml(g.view),'" rel="nofollow" href="#" class="jive-js-status-input-selectable js-app-action-select-link app-action">'),jive.apps.dropdown.ddOutputIconImage({icon:g.icon},c),c.append('<em class="j-appName">',soy.$$filterNoAutoescape(g.appName),'</em><span class="label lnk">',soy.$$filterNoAutoescape(g.label),"</span></a></li>")}else c.append(a.emptyEntriesHTML?"<li>"+soy.$$filterNoAutoescape(a.emptyEntriesHTML)+"</li>":soy.$$escapeHtml(a.emptyEntriesStr));return c.append("</ul>"),b?"":c.toString()},jive.apps.dropdown.ddOutputAppActions}),define("soy!jive.apps.dropdown.ddOutputMarketAction",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils","soy!jive.shared.soy.i18nHelper"],function(a,b){return jive.namespace.call(this,"jive.apps.dropdown"),jive.apps.dropdown.ddOutputMarketAction=function(a,c){var d=c||new soy.StringBuilder;return a.searchText?jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("ke70"),arg0:soy.$$escapeHtml(a.searchText),arg1:'<a class="j-apps-market-link" data-filter="'+soy.$$escapeHtml(a.searchText)+'" href="javascript:;">'+soy.$$escapeHtml(b.i18nText(b.getMsg("kf0b"),[]))+"</a>",noAutoEscape:!0},d):a.alwaysShowMarketLink&&jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("ke6f"),arg0:'<a class="j-apps-market-link" href="javascript:;">'+soy.$$escapeHtml(b.i18nText(b.getMsg("kf0b"),[]))+"</a>",noAutoEscape:!0},d),c?"":d.toString()},jive.apps.dropdown.ddOutputMarketAction}),define("soy!jive.apps.dropdown.ddAppContent",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils","soy!jive.apps.dropdown.ddNoAppContent","soy!jive.apps.dropdown.ddNoAppInstalled","soy!jive.apps.dropdown.ddOutputAppActions","soy!jive.apps.dropdown.ddOutputMarketAction"],function(a,b){return jive.namespace.call(this,"jive.apps.dropdown"),jive.apps.dropdown.ddAppContent=function(a,c){var d=c||new soy.StringBuilder;return d.append('<div class="j-app-actions-container j-menu j-quick-menu">'),a.nonInstalled?jive.apps.dropdown.ddNoAppInstalled(null,d):a.entries.length<1?(jive.apps.dropdown.ddNoAppContent(null,d),a.searchText&&a.appsMarketEnabled&&(d.append('<p class="j-pop-row j-last">'),jive.apps.dropdown.ddOutputMarketAction({searchText:a.searchText,alwaysShowMarketLink:!1},d),d.append("</p>"))):(d.append('<div class="j-pop-row j-pop-desc">',soy.$$escapeHtml(b.i18nText(b.getMsg("k242e"),["App Actions"])),"</div>"),jive.apps.dropdown.ddOutputAppActions(a,d),a.appsMarketEnabled&&(d.append('<p class="j-pop-row j-has-icon j-last">'),jive.apps.dropdown.ddOutputMarketAction({searchText:a.searchText,alwaysShowMarketLink:!0},d),d.append("</p>"))),d.append("</div>"),c?"":d.toString()},jive.apps.dropdown.ddAppContent}),define("tiny_mce3/plugins/jiveapps/app_bang",["jquery","jive/app/rte/artifacts","apps/shared/controllers/localexchange","apps/shared/controllers/switchboard","url","tinyMCE","soy!jive.apps.dropdown.ddAppContent"],function(a,b,c,d,e,f){return function(){function g(b,c){var d={htmlBody:a(b.contentDocument.body).html()};if(c&&c.node){for(var e=!0,f=!1,g=c.node,h="";g&&"body"!=g.nodeName&&"BODY"!=g.nodeName;){for(var i=g;g;){if(e)e=!1;else if(g.outerHTML)if(f){f=!1;var j=g.outerHTML,k=j.indexOf(">");k>0&&(h+=j.substring(0,k+1)),g.nodeValue&&(h+=g.nodeValue)}else h+=g.outerHTML;g=g.previousSibling}g=i.parentNode,f=!0}var l=c.offset?c.offset:0;d.offset=l+h.length}return d}var h,i=this,j=0,k=0;d.addListener("app.install.ended",function(){j+=1,h&&(i.search(h.ed,h.bangPlugin,h.node,h.offset,h.searchText),h=null)}),d.addListener("apps_market.apps_have_changed",function(){delete i.entries}),a.extend(this,{triggerChar:"!",rte:null,init:function(a){this.rte=a,this._handleResults(this._makeRequest(e.v2Url("/apps/v1/actions/rte"),""))},search:function(a,b,c,d,f){var g=e.v2Url("/apps/v1/actions/rte"),h=jive.apps.dropdown.ddAppContent,i=this._makeRequest(g,f);this._handleResults(i,b,h,c,d,f)},select:function(b,c){var d=c.ed,e=this,f=c.lastInfo,h=a.Deferred();h.done(function(a,d,g){c.lastInfo=f,e.insertArtifact(a,g,b,c)}),require(["promise!jive/app/container"],function(a){a.handleRTEActionSelect(b,g(d,c.lastInfo),h),c.hideThePopup()})},insertArtifact:function(a,b,c,d){var e=d.ed,g=!0;if(a.html){d.destroySearchText(e,d.lastInfo.node,d.lastInfo.offset),e.execCommand("mceInsertContent",!1,a.html);var h=e.dom;f.each(h.select("a.jive_macro_appEmbeddedView",e.getBody()),function(a){h.getAttrib(a,"jivemacro")||h.setAttrib(a,"jivemacro","appEmbeddedView"),h.getAttrib(a,"jivemacro")||h.setAttrib(a,"__jive_macro_name","appEmbeddedView")})}else{var i=this._createArtifactFromData(e,c.parent().find("a").attr("data-app-uuid"),c.parent().find("a").attr("data-app-instance-uuid"),c.parent().find("a").attr("data-action-id"),a,b);d.replaceSearchText(e,d.lastInfo.node,d.lastInfo.offset,i,g)}e.focus()},lookupLabel:function(a){if(this.entries)for(var b=0;b<this.entries.length;++b){var c=this.entries[b];if(c.id===a)return c.label||""}return""},_createArtifactFromData:function(a,c,d,e,f,g){var h=this,i=new b;return i.createArtifact({ed:a,rte:this.rte,appUUID:c,appInstanceUUID:d,actionId:e,data:f,editedContentBean:g,actionLabel:h.lookupLabel(e)})},handleRTEActionContextEdit:function(a,b,c,d,e){var f=this._buildArtifact(d);require(["promise!jive/app/container"],function(d){d.handleRTEActionContextEdit(a,g(b,c),f,e)})},_buildArtifact:function(a){var c=new b;return c.parseSelectionContextFromArtifact(a)},_makeRequest:function(b,c){return"undefined"==typeof this.entries||k!=j?a.ajax(b,{cache:!1,dataType:"json",error:function(a,b){}}):""!==c?(c=c.replace(/_/g," "),a.quickSilverFilter(this.entries,c,7,function(a){return a.filterString})):this.entries},_highlightSearchChars:function(a,b){for(var c=b.toLowerCase().split(""),d="",e=0;e<a.length;e++){var f=a.charAt(e),g=f,h=f.toLowerCase();c[0]==h&&(g='<span class="j-app-highlight">'+f+"</span>",c.shift()),d+=g}return{replaced:d,remainingSearchText:c.join("")}},_handleResults:function(b,d,e,f,g,i){var l=this;a.when(b).then(function(b){"undefined"!=typeof l.entries&&k==j||(k=j,l.entries=a.map(b,function(a){return a.filterString=(a.appName+" : "+a.label).toLowerCase(),a}));var m=null==l.entries||l.entries.length<1;if((!m||window.appsMarketEnabled)&&e){var n=e.call(this,{nonInstalled:m,entries:b,searchText:i,appsMarketEnabled:window.appsMarketEnabled}),o=a(n);null!==f&&null!==g&&d._dd._render(o,function(){var a=d.positionThePopUp(d.ed,f,g);return{contextBox:a}}),o.find("li").each(function(){var b=a(this),c=b.find("em"),d=c.text(),e=b.find("span[class=label]"),f=e.text(),g=l._highlightSearchChars(d,i);c.html(g.replaced),g=l._highlightSearchChars(f,g.remainingSearchText),e.html(g.replaced)}),o.find("a.app-action").each(function(){a(this).click(function(b){var d=a(this).data();return d.actionUrl?void window.open(d.actionUrl,d.appUuid+d.actionId,d.actionWindowSpec):(c.emit("app.action",d),void b.preventDefault())})}),o.find(".j-apps-market-link").click(function(b){var c=a(this),e=c.attr("data-filter")||null;require(["promise!jive/app/container"],function(a){a.handleMarketContext({experience:"appsCatalog",appFilter:e,actionContributionFilter:"jive/actions/rte"})}),d.hideThePopup(),h={ed:d.ed,bangPlugin:d,node:f,offset:g,searchText:i},b.preventDefault()}),o.find("a").filter(".js-app-action-select-link").click(function(){var b=a(this);return l.select(b,d,!1),!1}).attr("href","javascript:;")}})}})}}),define("tiny_mce3/plugins/jiveapps/editor_plugin_src",["tinyMCE","jquery-private","jive/ext/x/x_timer"],function(){!function(a){function b(){return window.anyAppsEnabled}tinymce.create("tinymce.plugins.JiveAppsPlugin",{rte:null,appBang:null,setRTE:function(a){this.rte=a,this.completeInit()},init:function(c){this.ed=c;var d=this;if(b()||window.appsMarketEnabled){var e=a.Deferred(),f=a.Deferred();a.when(e,f).then(function(b,c){function d(b){return 1==b.nodeType&&a(b).hasClass("jive_macro_appEmbeddedView")}function e(c){var d=a(c),e=d.data("actionEntry");if(!e){for(var f=d.attr("__action_id"),g=d.attr("__appuuid"),h=0,i=b.entries.length;i>h;++h){var j=b.entries[h];if(j.appUUID==g&&j.id==f){e=j;break}}e||(e={_noResult:!1}),d.data("actionEntry",e)}return e._noResult===!1?null:e}function f(a){if(!b.entries)return null;var c=a.startContainer.childNodes[a.startOffset];for(c||(c=a.startContainer);c&&!d(c);)c=c.parentNode;if(c){var f=e(c);if(f)return c}return null}function g(b,c){var d=a(b.findContextNode(c.selection.getRng(!0))),e=a("<img/>").attr("src",d.data("actionEntry").icon).css({border:"none",width:"16px",height:"16px"}),f=a("<div/>").css({"background-color":"#fff",width:"16px",height:"16px",padding:"2px 4px"}).append(e),g=a("<a/>").addClass("button").attr("href","javascript:;").css({"float":"left",width:"24px","text-align":"center"}).append(f);return f.append(e),g.append(f).get(0)}function h(b,c){a("img",c).attr("src",a(b).data("actionEntry").icon)}if(c.plugins.jivecontextmenu){var i=c.plugins.jivecontextmenu,j=new i.MenuItem("appEmbeddedView",f,null,g,"jiveAppReEdit",null,null,null,h);i.addRootItem(j)}}),c.onInit.add(function(){f.resolve(c)},d),require(["tiny_mce3/plugins/jiveapps/app_bang"],function(a){var b=d.appBang=new a(c);d.completeInit(),c.plugins.jivemention.addMentionType(b),e.resolve(b)})}},completeInit:function(){if(this.rte&&this.ed&&this.appBang&&!this.initialized){this.initialized=!0;var b=this.ed,c=b.dom,d=new tinymce.dom.DOMUtils(document);this.appBang.init(this.rte);var e=d.create("div",{"class":"gutterButton appButton"},b.getLang("jiveapps.edit_app")),f=null;d.bind(e,"mousedown",function(){f=b.selection.getRng(!0)}),d.bind(e,"click",function(a){b.execCommand("jiveAppEdit",!0,f),a.stopPropagation()}),this.rte.getGutter().appendChild(e),b.plugins.paste.onPasteComplete.add(function(){tinymce.each(c.select("a.jive_macro_appEmbeddedView",b.getBody()),function(a){c.getAttrib(a,"href")||c.setAttrib(a,"href","javascript:;")}),tinymce.each(c.select("a.jive-link-app-icon",b.getBody()),function(b){var c=a(b);c.attr("__icon")&&c.css("background-image","url('"+c.attr("__icon")+"')")})})}},execCommand:function(b,c,d){var e=this.ed,f=this;switch(b){case"jiveAppEdit":d&&e.selection.setRng(d),e.undoManager.add();var g=/\s/.test(this._charAt(this._prevCharPos(this.ed.selectionUtil.startPos(d))))?"!":" !",h=g+e.selection.getContent();return e.selection.setContent(h),e.selection.collapse(!1),e.focus(),e.undoManager.add(),setTimeout(function(){e.plugins.jivemention.checkForMentionPopup(e)},1),!0;case"jiveAppReEdit":if(d){var i=a(d.node),j=i.data("actionEntry");if(j){var k={offset:0},l=a.Deferred();l.done(function(b,c,g){var h=d.node,i=f.appBang._createArtifactFromData(e,j.appUUID,j.appInstanceUUID,j.id,b,g);h.parentNode.insertBefore(i,h),h.parentNode.removeChild(h),a(i).data("actionEntry",j)}),f.appBang.handleRTEActionContextEdit(j,e,k,i,l)}}}return!1},getInfo:function(){return{longname:"Jive Apps",author:"Jive Software",authorurl:"http://www.jivesoftware.com",infourl:"http://www.jivesoftware.com/",version:"1.0"}},_charAt:function(a){return a&&3==a.c.nodeType?a.c.nodeValue.substr(a.off,1):null},_prevCharPos:function(a){if(3==a.c.nodeType)return a.off>0?{c:a.c,off:a.off-1}:this._prevCharPos({c:a.c.parentNode,off:this.ed.dom.nodeIndex(a.c)});if(1==a.c.nodeType){if(a.off>0){var b=a.c.childNodes[a.off-1];return 3==b.nodeType?this._prevCharPos({c:b,off:b.nodeValue.length}):null}return null}}}),window.appsAvailable&&(b()||window.appsMarketEnabled)&&tinymce.PluginManager.add("jiveapps",tinymce.plugins.JiveAppsPlugin)}(jQuery)}),define("tiny_mce3/plugins/jiveapps/editor_plugin_src",["tinyMCE","jquery","jive/ext/x/x_timer"],function(){}),function(a){a.fn.SpinButton=function(b){return this.each(function(){function c(b){var c=a(d).data("spinCfg"),e=(isNaN(d.value)?c.reset:Number(d.value))+Number(b);null!==c.min&&(e=Math.max(e,c.min)),null!==c.max&&(e=Math.min(e,c.max)),a(d).val(e),0!=b&&a(d).trigger("change")}a(this).data("spinCfg",{min:b&&!isNaN(parseFloat(b.min))?Number(b.min):null,max:b&&!isNaN(parseFloat(b.max))?Number(b.max):null,step:b&&b.step?Number(b.step):1,page:b&&b.page?Number(b.page):10,upClass:b&&b.upClass?b.upClass:"up",downClass:b&&b.downClass?b.downClass:"down",reset:b&&b.reset?b.reset:this.value,delay:b&&b.delay?Number(b.delay):500,interval:b&&b.interval?Number(b.interval):100,_btn_width:20,_btn_height:12,_direction:null,_delay:null,_repeat:null});var d=this;a(this).addClass(b&&b.spinClass?b.spinClass:"spin-button").mousemove(function(b){var c=b.pageX||b.x,d=b.pageY||b.y,e=b.target||b.srcElement,f=a(e).offset(),g=a(this).data("spinCfg"),h=c>f.left+e.offsetWidth-g._btn_width?d<f.top+g._btn_height?1:-1:0;if(h!==g._direction){switch(h){case 1:a(this).removeClass(g.downClass).addClass(g.upClass);break;case-1:a(this).removeClass(g.upClass).addClass(g.downClass);break;default:a(this).removeClass(g.upClass).removeClass(g.downClass)}g._direction=h}}).mouseout(function(){a(this).removeClass(a(this).data("spinCfg").upClass).removeClass(a(this).data("spinCfg").downClass),a(this).data("spinCfg")._direction=null}).mousedown(function(b){var d=a(this).data("spinCfg");if(0!=d._direction){var e=function(){c(d._direction*d.step)};e(),d._delay=window.setTimeout(function(){e(),d._repeat=window.setInterval(e,d.interval)},d.delay)}}).mouseup(function(b){window.clearInterval(a(this).data("spinCfg")._repeat),window.clearTimeout(a(this).data("spinCfg")._delay)}).dblclick(function(b){a.browser.msie&&c(a(this).data("spinCfg")._direction*a(this).data("spinCfg").step)}).keydown(function(b){var d=a(this).data("spinCfg");switch(b.keyCode){case 38:c(d.step);break;case 40:c(-d.step);break;case 33:c(d.page);break;case 34:c(-d.page)}}).change(function(a){c(0)})})}}(jQuery),define("jquery-plugin/jquery.spinbox",["jquery"],function(){}),define("soy!jive.rte.table.cellProperties",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils"],function(a,b){return jive.namespace.call(this,"jive.rte.table"),jive.rte.table.cellProperties=function(a,c){var d=c||new soy.StringBuilder;return d.append("<div class='content ",soy.$$escapeHtmlAttribute(a.section),"Cell'><h3>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35e5"),[])),"</h3><div class='formFields sampleContainer'><table align='center' class='sampleHeader' style='width:145px;margin-left:20px;'><tr><th>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35d7"),[])),"</th></tr></table></div><h3>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35e8"),[])),"</h3><div class='formFields'>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35e2"),[])),": <input value='' class='padding spin-button' maxlength='2'/> px<br>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35d5"),[])),": <input value='' class='backgroundColor color'/><br></div><h3>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35ea"),[])),"</h3><div class='formFields'>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35d3"),[])),":<a href='javascript:;' class='mceButton mceButtonEnabled mce_justify mceButtonSelected mce_justifyleft' title='",soy.$$escapeHtmlAttribute(b.i18nText(b.getMsg("k35d0"),[])),"'><span class='mceIcon mce_justifyleft'></span></a><a href='javascript:;' class='mceButton mceButtonEnabled mce_justify mce_justifycenter' title='",soy.$$escapeHtmlAttribute(b.i18nText(b.getMsg("k35ce"),[])),"'><span class='mceIcon mce_justifycenter'></span></a><a href='javascript:;' class='mceButton mceButtonEnabled mce_justify mce_justifyright' title='",soy.$$escapeHtmlAttribute(b.i18nText(b.getMsg("k35d2"),[])),"'><span class='mceIcon mce_justifyright'></span></a><a href='javascript:;' class='mceButton mceButtonEnabled mce_justify mce_justifyfull' title='",soy.$$escapeHtmlAttribute(b.i18nText(b.getMsg("k35cf"),[])),"'><span class='mceIcon mce_justifyfull'></span></a><br>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35ee"),[])),":<a href='javascript:;' class='mceButton mceButtonEnabled mce_valign mceButtonSelected mce_valigntop' title='",soy.$$escapeHtmlAttribute(b.i18nText(b.getMsg("k35ed"),[])),"'><span class='mceIcon mce_valigntop'></span></a><a href='javascript:;' class='mceButton mceButtonEnabled mce_valign mce_valignmiddle' title='",soy.$$escapeHtmlAttribute(b.i18nText(b.getMsg("k35ec"),[])),"'><span class='mceIcon mce_valignmiddle'></span></a><a href='javascript:;' class='mceButton mceButtonEnabled mce_valign mce_valignbottom' title='",soy.$$escapeHtmlAttribute(b.i18nText(b.getMsg("k35eb"),[])),"'><span class='mceIcon mce_valignbottom'></span></a><br>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35dd"),[])),": <a href='javascript:;' class='family'></a><br>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35d8"),[])),": <input value='' class='fontColor color'/><br></div></div>"),c?"":d.toString()},jive.rte.table.cellProperties}),define("soy!jive.rte.table.headerCellProperties",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils"],function(a,b){return jive.namespace.call(this,"jive.rte.table"),jive.rte.table.headerCellProperties=function(a,c){var d=c||new soy.StringBuilder;return d.append("<div class='content ",soy.$$escapeHtmlAttribute(a.section),"Header'><h3>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35e6"),[])),"</h3><div class='formFields sampleContainer'><table align='center' class='sampleHeader' style='width:145px;margin-left:20px;'><tr><th>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35de"),[])),"</th></tr></table></div><h3>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35e8"),[])),"</h3><div class='formFields'>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35e2"),[])),": <input value='' class='padding spin-button' maxlength='2'/> px<br>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35d5"),[])),": <input value='' class='backgroundColor color'/><br></div><h3>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35ea"),[])),"</h3><div class='formFields'>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35d3"),[])),":<a href='javascript:;' class='mceButton mceButtonEnabled mce_justify mceButtonSelected mce_justifyleft' title='",soy.$$escapeHtmlAttribute(b.i18nText(b.getMsg("k35d0"),[])),"'><span class='mceIcon mce_justifyleft'></span></a><a href='javascript:;' class='mceButton mceButtonEnabled mce_justify mce_justifycenter' title='",soy.$$escapeHtmlAttribute(b.i18nText(b.getMsg("k35ce"),[])),"'><span class='mceIcon mce_justifycenter'></span></a><a href='javascript:;' class='mceButton mceButtonEnabled mce_justify mce_justifyright' title='",soy.$$escapeHtmlAttribute(b.i18nText(b.getMsg("k35d2"),[])),"'><span class='mceIcon mce_justifyright'></span></a><a href='javascript:;' class='mceButton mceButtonEnabled mce_justify mce_justifyfull' title='",soy.$$escapeHtmlAttribute(b.i18nText(b.getMsg("k35cf"),[])),"'><span class='mceIcon mce_justifyfull'></span></a><br>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35ee"),[])),":<a href='javascript:;' class='mceButton mceButtonEnabled mce_valign mceButtonSelected mce_valigntop' title='",soy.$$escapeHtmlAttribute(b.i18nText(b.getMsg("k35ed"),[])),"'><span class='mceIcon mce_valigntop'></span></a><a href='javascript:;' class='mceButton mceButtonEnabled mce_valign mce_valignmiddle' title='",soy.$$escapeHtmlAttribute(b.i18nText(b.getMsg("k35ec"),[])),"'><span class='mceIcon mce_valignmiddle'></span></a><a href='javascript:;' class='mceButton mceButtonEnabled mce_valign mce_valignbottom' title='",soy.$$escapeHtmlAttribute(b.i18nText(b.getMsg("k35eb"),[])),"'><span class='mceIcon mce_valignbottom'></span></a><br>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35dd"),[])),": <a href='javascript:;' class='family'/></a><br>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35d8"),[])),": <input value='' class='fontColor color'/><br></div></div>"),
c?"":d.toString()},jive.rte.table.headerCellProperties}),define("soy!jive.rte.table.allCellProperties",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils","soy!jive.rte.table.cellProperties","soy!jive.rte.table.headerCellProperties"],function(a,b){return jive.namespace.call(this,"jive.rte.table"),jive.rte.table.allCellProperties=function(a,c){var d=c||new soy.StringBuilder;return d.append("<div class='properties'><form action='javascript:;' onsubmit='return false'><div class='content'><input type='radio' name='style' class='radio chooseHeader'/> ",soy.$$escapeHtml(b.i18nText(b.getMsg("k35de"),[])),"<input type='radio' name='style' class='radio chooseCell'/> ",soy.$$escapeHtml(b.i18nText(b.getMsg("k35d7"),[])),"</div>"),jive.rte.table.headerCellProperties({section:"cell"},d),jive.rte.table.cellProperties({section:"cell"},d),d.append("</form></div>"),c?"":d.toString()},jive.rte.table.allCellProperties}),define("soy!jive.rte.table.columnProperties",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils"],function(a,b){return jive.namespace.call(this,"jive.rte.table"),jive.rte.table.columnProperties=function(a,c){var d=c||new soy.StringBuilder;return d.append("<div class='content columnStyle'><h3>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35df"),[])),"</h3><div class='formFields'><a href='javascript:;' class='th th-t'></a><a href='javascript:;' class='th th-tb'></a><a href='javascript:;' class='th th-tl'></a><a href='javascript:;' class='th th-n'></a></div><h3>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35e7"),[])),"</h3><div class='formFields'>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35ef"),[])),": <input type='radio' name='width' class='radio chooseWidthAuto'/> ",soy.$$escapeHtml(b.i18nText(b.getMsg("k35d4"),[])),"<br/><input type='radio' name='width' class='radio chooseWidthPx'/> <input value='' class='widthPx spin-button' maxlength='4'/> px<br/><input type='radio' name='width' class='radio chooseWidthPer'/> <input value='' class='widthPer spin-button' maxlength='3'/> %<br></div></div>"),c?"":d.toString()},jive.rte.table.columnProperties}),define("soy!jive.rte.table.allColumnProperties",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils","soy!jive.rte.table.cellProperties","soy!jive.rte.table.columnProperties","soy!jive.rte.table.headerCellProperties"],function(a,b){return jive.namespace.call(this,"jive.rte.table"),jive.rte.table.allColumnProperties=function(a,c){var d=c||new soy.StringBuilder;return d.append("<div class='properties'><form action='javascript:;' onsubmit='return false'><nav class='j-tab-nav'><ul class='tabs j-tabbar'><li class='j-tab-selected'><a href='javascript:;'>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35e8"),[])),"</a></li><li><a href='javascript:;'>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35de"),[])),"</a></li><li><a href='javascript:;'>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35d7"),[])),"</a></li></ul></nav>"),jive.rte.table.columnProperties(null,d),jive.rte.table.headerCellProperties({section:"column"},d),jive.rte.table.cellProperties({section:"column"},d),d.append("</form></div>"),c?"":d.toString()},jive.rte.table.allColumnProperties}),define("soy!jive.rte.table.rowProperties",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils"],function(a,b){return jive.namespace.call(this,"jive.rte.table"),jive.rte.table.rowProperties=function(a,c){var d=c||new soy.StringBuilder;return d.append("<div class='content rowStyle'><h3>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35df"),[])),"</h3><div class='formFields'><a href='javascript:;' class='th th-a'></a><a href='javascript:;' class='th th-l'></a><a href='javascript:;' class='th th-n'></a></div><h3>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35e7"),[])),"</h3><div class='formFields'>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35e0"),[])),": <input type='radio' name='width' class='radio chooseHeightAuto'/> ",soy.$$escapeHtml(b.i18nText(b.getMsg("k35d4"),[])),"<br/><input type='radio' name='width' class='radio chooseHeightPx'/> <input value='' class='heightPx spin-button' maxlength='4'/> px<br/></div></div>"),c?"":d.toString()},jive.rte.table.rowProperties}),define("soy!jive.rte.table.allRowProperties",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils","soy!jive.rte.table.cellProperties","soy!jive.rte.table.headerCellProperties","soy!jive.rte.table.rowProperties"],function(a,b){return jive.namespace.call(this,"jive.rte.table"),jive.rte.table.allRowProperties=function(a,c){var d=c||new soy.StringBuilder;return d.append("<div class='properties'><form action='javascript:;' onsubmit='return false'><nav class='j-tab-nav'><ul class='tabs j-tabbar'><li class='j-tab-selected'><a href='javascript:;'>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35e8"),[])),"</a></li><li><a href='javascript:;'>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35de"),[])),"</a></li><li><a href='javascript:;'>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35d7"),[])),"</a></li></ul></nav>"),jive.rte.table.rowProperties(null,d),jive.rte.table.headerCellProperties({section:"row"},d),jive.rte.table.cellProperties({section:"row"},d),d.append("</form></div>"),c?"":d.toString()},jive.rte.table.allRowProperties}),define("soy!jive.rte.table.tableProperties",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils"],function(a,b){return jive.namespace.call(this,"jive.rte.table"),jive.rte.table.tableProperties=function(a,c){var d=c||new soy.StringBuilder;return d.append("<div class='content tableStyle'><h3>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35df"),[])),"</h3><div class='formFields'><a href='javascript:;' class='th th-t'></a><a href='javascript:;' class='th th-tb'></a><a href='javascript:;' class='th th-tl'></a><a href='javascript:;' class='th th-n'></a></div><h3>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35d6"),[])),"</h3><div class='formFields'>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35ef"),[])),": <input value='' class='borderWidth spin-button' maxlength='2'/> px<br>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35d8"),[])),": <input value='' class='borderColor color'/><br></div><h3>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35e7"),[])),"</h3><div class='formFields'>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35ef"),[])),": <input value='' class='widthPx spin-button' maxlength='4'/> <input value='' class='widthPer spin-button' maxlength='3'/> <input type='radio' name='width' class='radio chooseWidthPx'/> px <input type='radio' name='width' class='radio chooseWidthPer'/> %<br>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35e0"),[])),": <input type='radio' name='height' class='radio chooseHeightAuto'/> ",soy.$$escapeHtml(b.i18nText(b.getMsg("k35d4"),[])),"<br/><input type='radio' name='height' class='radio chooseHeightPx'/> <input value='' class='heightPx spin-button' maxlength='4'/> px<br>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35d3"),[])),":<a href='javascript:;' class='mceButton mceButtonEnabled mce_justifytablenone' title='",soy.$$escapeHtmlAttribute(b.i18nText(b.getMsg("k35d1"),[])),"'><span class='mceIcon mce_justifytablenone'></span></a><a href='javascript:;' class='mceButton mceButtonEnabled mce_justifytableleft' title='",soy.$$escapeHtmlAttribute(b.i18nText(b.getMsg("k35d0"),[])),"'><span class='mceIcon mce_justifytableleft'></span></a><a href='javascript:;' class='mceButton mceButtonEnabled mce_justifytableright' title='",soy.$$escapeHtmlAttribute(b.i18nText(b.getMsg("k35d2"),[])),"'><span class='mceIcon mce_justifytableright'></span></a></div></div>"),c?"":d.toString()},jive.rte.table.tableProperties}),define("soy!jive.rte.table.allTableProperties",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils","soy!jive.rte.table.cellProperties","soy!jive.rte.table.headerCellProperties","soy!jive.rte.table.tableProperties"],function(a,b){return jive.namespace.call(this,"jive.rte.table"),jive.rte.table.allTableProperties=function(a,c){var d=c||new soy.StringBuilder;return d.append("<div class='properties'><form action='javascript:;' onsubmit='return false'><nav class='j-tab-nav'><ul class='tabs j-tabbar'><li class='j-tab-selected'><a href='javascript:;'>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35e8"),[])),"</a></li><li><a href='javascript:;'>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35de"),[])),"</a></li><li><a href='javascript:;'>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35d7"),[])),"</a></li></ul></nav>"),jive.rte.table.tableProperties(null,d),jive.rte.table.headerCellProperties({section:"table"},d),jive.rte.table.cellProperties({section:"table"},d),d.append("</form></div>"),c?"":d.toString()},jive.rte.table.allTableProperties}),define("soy!jive.rte.table.deleteText",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils"],function(a,b){return jive.namespace.call(this,"jive.rte.table"),jive.rte.table.deleteText=function(a,c){var d=c||new soy.StringBuilder;return d.append(soy.$$escapeHtml(b.i18nText(b.getMsg("k35db"),[]))),c?"":d.toString()},jive.rte.table.deleteText}),define("soy!jive.rte.table.editText",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils"],function(a,b){return jive.namespace.call(this,"jive.rte.table"),jive.rte.table.editText=function(a,c){var d=c||new soy.StringBuilder;return d.append(soy.$$escapeHtml(b.i18nText(b.getMsg("k35dc"),[]))),c?"":d.toString()},jive.rte.table.editText}),define("soy!jive.rte.table.mergeCellProperties",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils"],function(a,b){return jive.namespace.call(this,"jive.rte.table"),jive.rte.table.mergeCellProperties=function(a,c){var d=c||new soy.StringBuilder;return d.append("<div class='properties'><form action='javascript:;' onsubmit='return false'><div class='content'><h3>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35e1"),[])),"</h3><div class='formFields'>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35e4"),[])),": <input value='' class='rowspan spin-button' maxlength='2'/><br>",soy.$$escapeHtml(b.i18nText(b.getMsg("k35da"),[])),": <input value='' class='colspan spin-button' maxlength='2'/><br></div></div></form></div>"),c?"":d.toString()},jive.rte.table.mergeCellProperties}),define("soy!jive.rte.table.propertiesChooserCell",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils"],function(a,b){return jive.namespace.call(this,"jive.rte.table"),jive.rte.table.propertiesChooserCell=function(a,c){var d=c||new soy.StringBuilder;return d.append(soy.$$escapeHtml(b.i18nText(b.getMsg("k35d7"),[]))),c?"":d.toString()},jive.rte.table.propertiesChooserCell}),define("soy!jive.rte.table.propertiesChooserColumn",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils"],function(a,b){return jive.namespace.call(this,"jive.rte.table"),jive.rte.table.propertiesChooserColumn=function(a,c){var d=c||new soy.StringBuilder;return d.append(soy.$$escapeHtml(b.i18nText(b.getMsg("k35d9"),[]))),c?"":d.toString()},jive.rte.table.propertiesChooserColumn}),define("soy!jive.rte.table.propertiesChooserMergeCells",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils"],function(a,b){return jive.namespace.call(this,"jive.rte.table"),jive.rte.table.propertiesChooserMergeCells=function(a,c){var d=c||new soy.StringBuilder;return d.append(soy.$$escapeHtml(b.i18nText(b.getMsg("k35e1"),[]))),c?"":d.toString()},jive.rte.table.propertiesChooserMergeCells}),define("soy!jive.rte.table.propertiesChooserRow",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils"],function(a,b){return jive.namespace.call(this,"jive.rte.table"),jive.rte.table.propertiesChooserRow=function(a,c){var d=c||new soy.StringBuilder;return d.append(soy.$$escapeHtml(b.i18nText(b.getMsg("k35e3"),[]))),c?"":d.toString()},jive.rte.table.propertiesChooserRow}),define("soy!jive.rte.table.propertiesChooserTable",["jquery","jive/i18n","jive/model/date","jive/namespace","goog/soyutils"],function(a,b){return jive.namespace.call(this,"jive.rte.table"),jive.rte.table.propertiesChooserTable=function(a,c){var d=c||new soy.StringBuilder;return d.append(soy.$$escapeHtml(b.i18nText(b.getMsg("k35e9"),[]))),c?"":d.toString()},jive.rte.table.propertiesChooserTable}),define("tiny_mce3/plugins/jivetable/editor_plugin_src",["tinyMCE","jquery-private","jquery-plugin/jquery.spinbox","soy!jive.rte.table.allCellProperties","soy!jive.rte.table.allColumnProperties","soy!jive.rte.table.allRowProperties","soy!jive.rte.table.allTableProperties","soy!jive.rte.table.deleteText","soy!jive.rte.table.editText","soy!jive.rte.table.mergeCellProperties","soy!jive.rte.table.propertiesChooserCell","soy!jive.rte.table.propertiesChooserColumn","soy!jive.rte.table.propertiesChooserMergeCells","soy!jive.rte.table.propertiesChooserRow","soy!jive.rte.table.propertiesChooserTable"],function(){!function(a){function b(b){b=a.trim(b);var c=/([\d\.])%$/.exec(b);return c?parseFloat(c[1])/100:parseFloat(b)/255}function c(a,c){function d(a,b){return a*b+1-b}if(!a)return"";if(n.test(a))return a;var e=l.exec(a);if(e)return tinymce.activeEditor.plugins.jiveutil.convertRGBToHex(a);if(e=o.exec(a))return c?"transparent":"#FFFFFF";if(e=m.exec(a)){var f=e[1].split(/\s*,\s*/),g=b(f[3]),h=Math.round(255*d(b(f[0]),g)),i=Math.round(255*d(b(f[1]),g)),j=Math.round(255*d(b(f[2]),g));return tinymce.activeEditor.plugins.jiveutil.convertRGBToHex("rgb("+h+", "+i+", "+j+")")}return""}function d(b,c){if(!b.attr("style"))return null;var d=b.attr("style").toLowerCase();return d=d.replace(new RegExp("-"+c,"gi"),"nomatch"),d.indexOf(c+":")>=0?(d=d.substr(d.indexOf(c+":")),d.indexOf(";")&&(d=d.substr(0,d.indexOf(";"))),a.trim(d.substr(c.length+1))):null}function e(a){return a.replace(/'/g,"").replace(/"/g,"").replace(/, /g,",")}function f(a){if(a=tinymce.trim(a),"auto"==a||"inherit"==a)return{unit:a,magnitude:null};var b=parseFloat(a),c=a.substr(String(b).length);return"%"==c&&(c="per"),{unit:c,magnitude:b}}function g(a,b,c){a.attr("jive-data-header",JSON.stringify(b)),a.attr("jive-data-cell",JSON.stringify(c))}function h(){for(var a=0;a<arguments.length;++a)if(null!=arguments[a]){if("function"!=typeof arguments[a])return arguments[a];var b=arguments[a]();if(null!=b)return b}return null}function i(b,g,i,j,k,l){var m={headerStyle:i.attr("jive-data-header"),cellStyle:i.attr("jive-data-cell"),tableBorderWidth:0,tableAlign:g.attr("align"),tableBorderColor:g.css("border-color"),contextWidthType:"auto",contextWidth:0,contextHeightType:"auto",contextHeight:0};m.tableAlign=m.tableAlign?m.tableAlign.toLowerCase():"none",m.tableBorderColor||(m.tableBorderColor=g.css("border-top-color")),m.tableBorderColor=c(m.tableBorderColor),m.tableBorderWidth=h(function(){var a=b.dom.getStyle(g.get(0),"border-width");return a?parseFloat(a):void 0},function(){var a=g.css("border-width");return a?parseFloat(a):void 0},function(){var a=g.css("border");if(a){var b=a.indexOf(" ");if(b)return parseFloat(a.substring(0,b))}},function(){return g.attr("border")||null},m.tableBorderWidth);var n=f(h(function(){return d(i,"width")},function(){return i.attr("width")||null},function(){return i.width()+"px"}));m.contextWidth=n.magnitude,m.contextWidthType=n.unit;var o=f(h(function(){return d(i,"height")},function(){return i.attr("height")||null},function(){return i.height()+"px"}));m.contextHeight=o.magnitude,m.contextHeightType=o.unit;var p=c(h(function(){return i.attr("bgColor")||null},function(){return j.attr("bgColor")||null},function(){return j.css("background-color")}),!0),q="2";try{q=parseInt(j.get(0).style.padding)+""}catch(r){}var s=e(j.css("fontFamily")),t=j.css("color");t=c(t);var u=j.css("textAlign");"justify"==u&&(u="full");var v=i.css("verticalAlign");m.headerStyle=h(function(){if(m.headerStyle)try{return JSON.parse(jive.util.unescapeHTML(m.headerStyle))}catch(a){}},function(){return a.extend({},k)}),m.cellStyle=h(function(){if(m.cellStyle)try{return JSON.parse(jive.util.unescapeHTML(m.cellStyle))}catch(a){}},function(){return a.extend({},l)});var w=j.is("th")?m.headerStyle:m.cellStyle;return w.backgroundColor=p,w.padding=q,s&&(w.fontFamily=s),t&&(w.color=t),u&&(w.textAlign=u),v&&(w.verticalAlign=v),m}function j(a,b){a&&a.length&&(b&&(a.is("table")&&(null!=b.tableAlign&&("none"==b.tableAlign?a.removeAttr("align"):a.attr("align",b.tableAlign),delete b.tableAlign),null!=b["border-width"]&&a.attr("border",b["border-width"]),null!=b.width&&a.removeAttr("width"),null!=b.height&&a.removeAttr("height"),a.find("td,th").css("border-width","").css("border-style","").css("border-top-color","").css("border-left-color","").css("border-bottom-color","").css("border-right-color","")),a.css(b)),a.removeAttr("data-mce-style").removeAttr("bgcolor"),a.is("table")||a.closest("table").removeAttr("data-mce-style")),tinymce.activeEditor.scheduleNodeChanged()}function k(a,b){var c=parseFloat(a);return isNaN(c)?b||0:c}var l=/rgb\s*\(([^,\)]+,[^,\)]+,[^,\)]+)\)/,m=/rgba\s*\(([^,\)]+,[^,\)]+,[^,\)]+,[^,\)]+)\)/,n=/#[a-fA-F0-9]{6}/,o=/transparent|rgba\(0,\s*0,\s*0,\s*0\)/,p=function(){var b=["505050","909090","DADADA","F2F2F2","FFFFFF","F49697","FDD9AE","FFFFDB","E6F8FA","DFE9DB","E23D39","EB7A3D","F1B259","FAF387","7ED529","3A0699","3334CA","2873EE","4FCDDC","5EE697"],c=[];return c.push("<div class='colorPicker'>"),a.each(b,function(a,b){c.push("<a href='javascript:;' style='background-color: #"),c.push(b),c.push("'></a>")}),c.push("</div>"),c.join("")}();tinymce.create("tinymce.plugins.JiveTablePlugin",{fullPopOverWidth:230,fullPopOverHeight:400,editTableProperties:null,$table:null,$column:null,$row:null,$cell:null,propertyChooserMenu:null,resetTableProperties:null,resetColumnProperties:null,resetRowProperties:null,resetCellProperties:null,minY:0,minX:0,resetMinMaxY:function(a){this.minY=a.plugins.jivescroll.lastScrollY,this.minX=a.plugins.jivescroll.lastScrollX},defaultHeaderStyle:function(){return{color:"#505050",backgroundColor:"#F2F2F2",textAlign:"left",padding:"6"}},defaultCellStyle:function(){return{color:"#000000",textAlign:"left",padding:"2"}},forceCellType:function(b,c,e){if(!c.is(e)){var f=a("<"+e+"></"+e+">",b.getDoc());f.append(c.contents()),c.get(0)==this.$cell.get(0)&&(this.$cell=f),c.before(f),c.remove();var g=d(c,"width");return g&&f.css("width",g),f}return c},styleAsTH:function(b,c){var d=parseInt(c.padding);isNaN(d)&&(d=0);var e=c.textAlign;b.css(a.extend({},this.defaultHeaderStyle(),c,{padding:d+"px",textAlign:"full"==e?"justify":e,backgroundColor:c.backgroundColor?c.backgroundColor:"transparent"})),b.removeAttr("data-mce-style"),b.removeAttr("align"),b.removeAttr("valign")},styleAsTD:function(b,c){var d=parseInt(c.padding);isNaN(d)&&(d=0);var e=c.textAlign;b.css(a.extend({},this.defaultCellStyle(),c,{padding:d+"px",textAlign:"full"==e?"justify":e,backgroundColor:c.backgroundColor?c.backgroundColor:"transparent"})),b.removeAttr("data-mce-style"),b.removeAttr("align"),b.removeAttr("valign")},createSpinnerInput:function(a,b,c,d,e){a.SpinButton({min:b,max:c,step:d,spinClass:"spin-button",upClass:"up",downClass:"down"}),a.keyup(e).change(e).mouseup(e).click(function(){return!1})},defaultFont:function(){var a=this.ed.settings.theme_advanced_fonts,b=a.split(";"),c=b[1].split("=");return c[1]},fontName:function(b){var c=this.ed.settings.theme_advanced_fonts,d="";return a.each(c.split(";"),function(a,c){var e=c.split("=");e[1]==b&&(d=e[0])}),d},createFontInput:function(b,c){function d(){var d=a(this),f=d.attr("data-font-info");b.text(d.text()).css("font-family",f).data("font-family",f),c(),e.hide()}var e=a(this.FONT_MENU);e.delegate("a","click",d),b.click(function(){return e.show(),!1}).change(c).keyup(c),b.after(e),b.parents(".properties").click(function(){e.hide()})},createColorInput:function(b,d,e){function f(){if(tinymce.isIE11){var a=b.get(0),c=a.selectionStart,e=a.selectionEnd;d(),b[0].setSelectionRange(c,e)}else d()}function g(){var f=a(this).css("background-color");return b.val(c(f,e)),d(),j.focus(),k.hide(),!1}var h=this.ed,i=a("<span style='position:relative;line-height:18px;position: absolute;'></span>"),j=a("<div class='transparentGridBg'><div class='colorSample'></div></div>"),k=a(p);e&&(k.addClass("transparentAllowed"),k.append(a("<a href='javascript:;' class='transparentButton'>"+h.getLang("jivetable.transparent")+"</a>"))),k.delegate("a","click",g),b.click(function(){return k.show(),!1}).change(f).keyup(f),j.click(function(){return k.show(),!1}),b.after(k).after(j).after(i),i.append(b).append(j),b.parents(".properties").click(function(){k.hide()})},changeHeaderStyle:function(b,c,d,e){var f=this,g=b.selection.getBookmark(BOOKMARKTYPE);d&&c.find(d).each(function(c,d){f.forceCellType(b,a(d),"th")}),e&&c.find(e).each(function(c,d){f.forceCellType(b,a(d),"td")}),b.selection.moveToBookmark(g)},resetPropertiesTabs:function(a){a.find("li:not(:first)").removeClass("j-tab-selected"),a.find("li:first").addClass("j-tab-selected"),a.children("div:not(:first)").hide(),a.children("div:first").show(),a.find("a:nth(0)").click(function(){return a.find("li:not(:nth(0))").removeClass("j-tab-selected"),a.find("li:nth(0)").addClass("j-tab-selected"),a.find("form").children("div:not(.tableStyle)").hide(),a.find("form").children("div:nth(0)").show(),!1}).click(),a.find("a:nth(1)").click(function(){return a.find("li:not(:nth(1))").removeClass("j-tab-selected"),a.find("li:nth(1)").addClass("j-tab-selected"),a.find("form").children("div:not(.tableHeader)").hide(),a.find("form").children("div:nth(1)").show(),!1}),a.find("a:nth(2)").click(function(){return a.find("li:not(:nth(2))").removeClass("j-tab-selected"),a.find("li:nth(2)").addClass("j-tab-selected"),a.find("form").children("div:not(.tableCell)").hide(),a.find("form").children("div:nth(2)").show(),!1})},_buildTableProperties:function(b){function c(){g(d.$table,e.headerStyle,e.cellStyle);var a=d.editTableProperties.find(".tableStyle .formFields");"px"==e.contextWidthType?(a.find(".widthPer").hide(),a.find(".widthPx").show().val(e.contextWidth),a.find(".chooseWidthPer").prop("checked",!1),a.find(".chooseWidthPx").prop("checked",!0)):(a.find(".widthPer").show().val(e.contextWidth),a.find(".widthPx").hide(),a.find(".chooseWidthPx").prop("checked",!1),a.find(".chooseWidthPer").prop("checked",!0)),a.find(".heightPx").val(e.contextHeight),"px"==e.contextHeightType?(a.find(".chooseHeightAuto").prop("checked",!1),a.find(".chooseHeightPx").prop("checked",!0)):(a.find(".chooseHeightPx").prop("checked",!1),a.find(".chooseHeightAuto").prop("checked",!0)),d.editTableProperties.find(".tableStyle input.borderWidth").val(e.tableBorderWidth),a.find(".borderColor").val(e.tableBorderColor),a.find(".colorSample").css("background-color",e.tableBorderColor),d.editTableProperties.find(".tableStyle .formFields:last a.mceButton.mce_justifytable"+e.tableAlign).addClass("mceButtonSelected"),d.editTableProperties.find(".tableStyle .formFields:last a.mceButton:not(.mce_justifytable"+e.tableAlign+")").removeClass("mceButtonSelected"),d.updateCellInputs(d.editTableProperties.find(".tableHeader"),e.headerStyle,e.tableBorderWidth,e.tableBorderColor,d.styleAsTH),d.updateCellInputs(d.editTableProperties.find(".tableCell"),e.cellStyle,e.tableBorderWidth,e.tableBorderColor,d.styleAsTD)}var d=this,e=null;return this.resetPropertiesTabs(this.editTableProperties),function(){var f=d.editTableProperties.find(".tableStyle .formFields:first");f.find("a.th-t").click(function(){return d.changeHeaderStyle(b,d.$table,"tr:first td","tr:not(:first) th"),c(),d.onTableStyleChange.dispatch(d.$table.find("th"),e.headerStyle),d.onTableStyleChange.dispatch(d.$table.find("td"),e.cellStyle),!1}),f.find("a.th-tb").click(function(){return d.changeHeaderStyle(b,d.$table,"tr:first td, tr:last td","tr:not(:first,:last) th"),c(),d.onTableStyleChange.dispatch(d.$table.find("th"),e.headerStyle),d.onTableStyleChange.dispatch(d.$table.find("td"),e.cellStyle),!1}),f.find("a.th-tl").click(function(){return d.changeHeaderStyle(b,d.$table,"tr:first td, tr td:first-child","tr:not(:first) th:not(:first-child)"),c(),d.onTableStyleChange.dispatch(d.$table.find("th"),e.headerStyle),d.onTableStyleChange.dispatch(d.$table.find("td"),e.cellStyle),!1}),f.find("a.th-n").click(function(){return d.changeHeaderStyle(b,d.$table,!1,"th"),c(),d.onTableStyleChange.dispatch(d.$table.find("th"),e.headerStyle),d.onTableStyleChange.dispatch(d.$table.find("td"),e.cellStyle),!1});var g=d.editTableProperties.find(".tableStyle input.borderWidth");d.createSpinnerInput(g,0,100,1,function(){var a=g.val();e.tableBorderWidth!=a&&(e.tableBorderWidth=a,c(),d.onTableStyleChange.dispatch(d.$table,{"border-width":k(a)+"px","border-style":"solid"}))});var h=d.editTableProperties.find(".tableStyle input.borderColor");d.createColorInput(h,function(){var a=h.val();e.tableBorderColor!=a&&(e.tableBorderColor=a,c(),d.onTableStyleChange.dispatch(d.$table,{"border-top-color":a,"border-left-color":a,"border-bottom-color":a,"border-right-color":a,"border-style":"solid"}))}),d.editTableProperties.find(".tableStyle .formFields:last a.mceButton").click(function(){var b=a(this);return b.hasClass("mce_justifytablenone")&&(e.tableAlign="none"),b.hasClass("mce_justifytableleft")&&(e.tableAlign="left"),b.hasClass("mce_justifytableright")&&(e.tableAlign="right"),d.onTableStyleChange.dispatch(d.$table,{tableAlign:e.tableAlign}),d.editTableProperties.find(".tableStyle .formFields:last a.mceButton").not(this).removeClass("mceButtonSelected"),b.addClass("mceButtonSelected"),!1});var i=d.editTableProperties.find(".tableStyle .formFields"),j=i.find(".widthPer");d.createSpinnerInput(j,0,100,1,function(){var a=j.val();e.contextWidth!=a&&(e.contextWidth=a,c(),d.onTableStyleChange.dispatch(d.$table,{width:k(a)+"%"}))});var l=i.find(".widthPx");d.createSpinnerInput(l,0,9999,10,function(){var a=l.val();e.contextWidth!=a&&(e.contextWidth=a,c(),d.onTableStyleChange.dispatch(d.$table,{width:k(a)+"px"}))}),i.find(".chooseWidthPer").click(function(a){"per"!=e.contextWidthType&&(e.contextWidth=Math.round(d.$table.width()/d.$table.parents("body").width()*100),e.contextWidthType="per",c(),d.onTableStyleChange.dispatch(d.$table,{width:e.contextWidth+"%"}),a.stopPropagation())}),i.find(".chooseWidthPx").click(function(a){"px"!=e.contextWidthType&&(e.contextWidth=d.$table.width(),e.contextWidthType="px",c(),d.onTableStyleChange.dispatch(d.$table,{width:e.contextWidth+"px"}),a.stopPropagation())});var m=i.find(".heightPx");d.createSpinnerInput(m,0,9999,10,function(){d.editTableProperties.find(".tableStyle .formFields .chooseHeightAuto").prop("checked",!1),d.editTableProperties.find(".tableStyle .formFields .chooseHeightPx").prop("checked",!0).click();var a=m.val();e.contextHeight!=a&&(e.contextHeight=a,c(),d.onTableStyleChange.dispatch(d.$table,{height:k(a)+"px"}))}),i.find(".chooseHeightAuto").click(function(a){"auto"!=e.contextHeightType&&(e.contextHeightType="auto",e.contextHeight=d.$table.height(),c(),d.onTableStyleChange.dispatch(d.$table,{height:""}),a.stopPropagation())}),i.find(".chooseHeightPx").click(function(a){"px"!=e.contextHeightType&&(e.contextHeight=d.$table.height(),e.contextHeightType="px",c(),d.onTableStyleChange.dispatch(d.$table,{height:k(e.contextHeight)+"px"}),a.stopPropagation())})}(),this.setupCellForm(this.editTableProperties.find(".tableHeader"),function(){return e.headerStyle},function(a){c(),d.onTableStyleChange.dispatch(d.$table.find("th"),a)}),this.setupCellForm(this.editTableProperties.find(".tableCell"),function(){return e.cellStyle},function(a){c(),d.onTableStyleChange.dispatch(d.$table.find("td"),a)}),function(){e=i(b,d.$table,d.$table,d.$cell,d.defaultHeaderStyle(),d.defaultCellStyle()),c()}},_buildColumnProperties:function(b){function c(){g(d.$column,e.headerStyle,e.cellStyle);var a=d.editColumnProperties.find(".columnStyle .formFields");"px"==e.contextWidthType?(a.find(".widthPx").val(e.contextWidth),a.find(".widthPer").val(Math.round(d.$column.outerWidth()/d.$table.outerWidth()*100)),a.find(".chooseWidthAuto").prop("checked",!1),a.find(".chooseWidthPer").prop("checked",!1),a.find(".chooseWidthPx").prop("checked",!0)):"per"==e.contextWidthType?(a.find(".widthPx").val(d.$column.width()),a.find(".widthPer").val(e.contextWidth),a.find(".chooseWidthAuto").prop("checked",!1),a.find(".chooseWidthPx").prop("checked",!1),a.find(".chooseWidthPer").prop("checked",!0)):(a.find(".widthPx").val(d.$column.width()),a.find(".widthPer").val(Math.round(d.$column.outerWidth()/d.$table.outerWidth()*100)),a.find(".chooseWidthPer").prop("checked",!1),a.find(".chooseWidthPx").prop("checked",!1),a.find(".chooseWidthAuto").prop("checked",!0)),d.updateCellInputs(d.editColumnProperties.find(".columnHeader"),e.headerStyle,e.tableBorderWidth,e.tableBorderColor,d.styleAsTH),d.updateCellInputs(d.editColumnProperties.find(".columnCell"),e.cellStyle,e.tableBorderWidth,e.tableBorderColor,d.styleAsTD)}var d=this,e=null;return this.resetPropertiesTabs(this.editColumnProperties),function(){function f(f,g){return function(){var h=b.selection.getBookmark(BOOKMARKTYPE),i=d.$column.filter(f),j=d.$column.filter(g);i.each(function(c,e){d.forceCellType(b,a(e),"th")}),j.each(function(c,e){d.forceCellType(b,a(e),"td")}),d.$column=b.plugins.jiveutil.findColumnBoundsForCell(d.$cell);var k=d.$column.first(),l=d.$column.last();return k.length&&l.length&&b.plugins.jiveblackout.showBlackout(b,k,l),b.selection.moveToBookmark(h),c(),d.onTableStyleChange.dispatch(d.$column.filter("th"),e.headerStyle),d.onTableStyleChange.dispatch(d.$column.filter("td"),e.cellStyle),!1}}var g=d.editColumnProperties.find(".columnStyle .formFields"),h=g.filter(":first");h.find("a.th-t").click(f(":first",":not(:first)")),h.find("a.th-tb").click(f(":first, :last",":not(:first, :last)")),h.find("a.th-tl").click(f("td, th",!1)),h.find("a.th-n").click(f(!1,"td, th"));var i=g.find(".widthPer");d.createSpinnerInput(i,0,100,1,function(){var a=i.val();e.contextWidthType="per",e.contextWidth!=a&&(e.contextWidth=a,d.onTableStyleChange.dispatch(d.$column.first(),{width:k(a)+"%"}),d.onTableStyleChange.dispatch(d.$column.slice(1),{width:""}),c())});var j=g.find(".widthPx");d.createSpinnerInput(j,0,9999,10,function(){var a=j.val();e.contextWidthType="px",e.contextWidth!=a&&(e.contextWidth=a,d.onTableStyleChange.dispatch(d.$column.first(),{width:k(a)+"px"}),d.onTableStyleChange.dispatch(d.$column.slice(1),{width:""}),c())}),g.find(".chooseWidthAuto").click(function(a){"auto"!=e.contextWidthType&&(e.contextWidth=0,e.contextWidthType="auto",d.onTableStyleChange.dispatch(d.$column.first(),{width:""}),c(),a.stopPropagation())}),g.find(".chooseWidthPer").click(function(a){"per"!=e.contextWidthType&&(e.contextWidth=i.val(),e.contextWidthType="per",d.onTableStyleChange.dispatch(d.$column.first(),{width:k(e.contextWidth)+"%"}),d.onTableStyleChange.dispatch(d.$column.slice(1),{width:""}),c(),a.stopPropagation())}),g.find(".chooseWidthPx").click(function(a){"px"!=e.contextWidthType&&(e.contextWidth=j.val(),e.contextWidthType="px",d.onTableStyleChange.dispatch(d.$column.first(),{width:k(e.contextWidth)+"px"}),d.onTableStyleChange.dispatch(d.$column.slice(1),{width:""}),c(),a.stopPropagation())})}(),this.setupCellForm(this.editColumnProperties.find(".columnHeader"),function(){return e.headerStyle},function(a){c(),d.onTableStyleChange.dispatch(d.$column.filter("th"),a)}),this.setupCellForm(this.editColumnProperties.find(".columnCell"),function(){return e.cellStyle},function(a){c(),d.onTableStyleChange.dispatch(d.$column.filter("td"),a)}),function(){e=i(b,d.$table,d.$column,d.$cell,d.defaultHeaderStyle(),d.defaultCellStyle()),c()}},_buildRowProperties:function(a){function b(){g(c.$row,d.headerStyle,d.cellStyle);var a=c.editRowProperties.find(".rowStyle .formFields");"px"==d.contextHeightType?(a.find(".heightPx").val(d.contextHeight),a.find(".chooseHeightAuto").prop("checked",!1),a.find(".chooseHeightPx").prop("checked",!0)):(a.find(".heightPx").val(c.$row.outerHeight()),a.find(".chooseHeightPx").prop("checked",!1),a.find(".chooseHeightAuto").prop("checked",!0)),c.updateCellInputs(c.editRowProperties.find(".rowHeader"),d.headerStyle,d.tableBorderWidth,d.tableBorderColor,c.styleAsTH),c.updateCellInputs(c.editRowProperties.find(".rowCell"),d.cellStyle,d.tableBorderWidth,d.tableBorderColor,c.styleAsTD);
}var c=this,d=null;return this.resetPropertiesTabs(this.editRowProperties),function(){var e=c.editRowProperties.find(".rowStyle .formFields"),f=e.filter(":first");f.find("a.th-a").click(function(){return c.changeHeaderStyle(a,c.$row,"td","tr:not(:first) th"),b(),c.onTableStyleChange.dispatch(c.$row.find("td"),d.cellStyle),c.onTableStyleChange.dispatch(c.$row.find("th"),d.headerStyle),!1}),f.find("a.th-l").click(function(){return c.changeHeaderStyle(a,c.$row,"td:first-child","th:not(:first-child)"),b(),c.onTableStyleChange.dispatch(c.$row.find("td"),d.cellStyle),c.onTableStyleChange.dispatch(c.$row.find("th"),d.headerStyle),!1}),f.find("a.th-n").click(function(){return c.changeHeaderStyle(a,c.$row,!1,"th"),b(),c.onTableStyleChange.dispatch(c.$row.find("td"),d.cellStyle),c.onTableStyleChange.dispatch(c.$row.find("th"),d.headerStyle),!1});var g=e.find(".heightPx");c.createSpinnerInput(g,0,9999,10,function(){var a=g.val();d.contextHeightType="px",d.contextHeight!=a&&(d.contextHeight=a,c.onTableStyleChange.dispatch(c.$row,{height:k(a)+"px"}),b())}),e.find(".chooseHeightAuto").click(function(a){"auto"!=d.contextHeightType&&(d.contextHeight=0,d.contextHeightType="auto",c.onTableStyleChange.dispatch(c.$row,{height:""}),b(),a.stopPropagation())}),e.find(".chooseHeightPx").click(function(a){var e=g.val();"px"!=d.contextHeightType&&(d.contextHeight=e,d.contextHeightType="px",c.onTableStyleChange.dispatch(c.$row,{height:k(e)+"px"}),b(),a.stopPropagation())})}(),this.setupCellForm(this.editRowProperties.find(".rowHeader"),function(){return d.headerStyle},function(a){b(),c.onTableStyleChange.dispatch(c.$row.find("th"),a)}),this.setupCellForm(this.editRowProperties.find(".rowCell"),function(){return d.cellStyle},function(a){b(),c.onTableStyleChange.dispatch(c.$row.find("td"),a)}),function(){d=i(a,c.$table,c.$row,c.$cell,c.defaultHeaderStyle(),c.defaultCellStyle()),b()}},_buildCellProperties:function(a){function b(){g(d.$cell,e.headerStyle,e.cellStyle),d.updateCellInputs(d.editCellProperties.find(".cellHeader"),e.headerStyle,e.tableBorderWidth,e.tableBorderColor,d.styleAsTH),d.updateCellInputs(d.editCellProperties.find(".cellCell"),e.cellStyle,e.tableBorderWidth,e.tableBorderColor,d.styleAsTD)}function c(){d.editCellProperties.children("div").hide(),d.editCellProperties.children("div:first").show(),d.editCellProperties.children("div:nth(1)").show(),d.editCellProperties.find("div:first input:first").click(function(c){var f=d.editCellProperties.find("form");if(f.children("div:not(:nth(1))").hide(),f.children("div:nth(1)").show(),f.children("div:first").show(),d.editCellProperties.find("div:first input:last").prop("checked",!1),d.editCellProperties.find("div:first input:first").prop("checked",!0),!d.$cell.is("th")){var g=a.selection.getBookmark(BOOKMARKTYPE);d.$cell=d.forceCellType(a,d.$cell,"th"),a.plugins.jiveblackout.showBlackout(a,d.$cell),a.selection.moveToBookmark(g),b(),d.onTableStyleChange.dispatch(d.$cell,e.headerStyle),c.stopPropagation()}}),d.editCellProperties.find("div:first input:last").click(function(c){var f=d.editCellProperties.find("form");if(f.children("div:not(:nth(2))").hide(),f.children("div:nth(2)").show(),f.children("div:first").show(),d.editCellProperties.find("div:first input:first").prop("checked",!1),d.editCellProperties.find("div:first input:last").prop("checked",!0),!d.$cell.is("td")){var g=a.selection.getBookmark(BOOKMARKTYPE);d.$cell=d.forceCellType(a,d.$cell,"td"),a.plugins.jiveblackout.showBlackout(a,d.$cell),a.selection.moveToBookmark(g),b(),d.onTableStyleChange.dispatch(d.$cell,e.cellStyle),c.stopPropagation()}}),d.editCellProperties.parents("body").length&&(d.$cell.is("th")?d.editCellProperties.find("div:first input:first").click():d.editCellProperties.find("div:first input:last").click())}var d=this,e=null;return this.setupCellForm(this.editCellProperties.find(".cellHeader"),function(){return e.headerStyle},function(a){b(),d.onTableStyleChange.dispatch(d.$cell.filter("th"),a)}),this.setupCellForm(this.editCellProperties.find(".cellCell"),function(){return e.cellStyle},function(a){b(),d.onTableStyleChange.dispatch(d.$cell.filter("td"),a)}),function(){e=i(a,d.$table,d.$cell,d.$cell,d.defaultHeaderStyle(),d.defaultCellStyle()),c(),b()}},_buildCellMerge:function(a){function b(){g=e.$cell.attr("rowspan")?e.$cell.attr("rowspan"):1,f=e.$cell.attr("colspan")?e.$cell.attr("colspan"):1}function c(){var b=[];b.cell=e.$cell.get(0),b.numcols=f,b.numrows=g,a.focus();var c=a.selection.getBookmark();a.execCommand("mceTableSplitCells",!1,b),a.execCommand("mceTableMergeCells",!1,b),a.plugins.jiveblackout.showBlackout(a,e.$cell),a.nodeChanged(),a.selection.moveToBookmark(c),a.focus()}function d(){h.find("input.rowspan").val(g),h.find("input.colspan").val(f)}var e=this,f=0,g=0,h=e.mergeCellProperties.find(".content");return this.createSpinnerInput(h.find("input.rowspan"),1,100,1,function(){var a=h.find("input.rowspan").val();g!=a&&(g=a,d(),c())}),this.createSpinnerInput(h.find("input.colspan"),1,100,1,function(){var a=h.find("input.colspan").val();f!=a&&(f=a,d(),c())}),function(){b(),d()}},updateCellInputs:function(a,b,c,d,e){var f=parseInt(b.padding);f=isNaN(f)?0:f,a.find(".formFields .padding").val(f),a.find(".formFields:nth(1) .backgroundColor").val(b.backgroundColor),a.find(".formFields:nth(1) .colorSample").css("background-color",b.backgroundColor?b.backgroundColor:"white"),a.find(".formFields:last a.mceButton.mce_justify.mce_justify"+b.textAlign).addClass("mceButtonSelected"),a.find(".formFields:last a.mceButton.mce_justify:not(.mce_justify"+b.textAlign+")").removeClass("mceButtonSelected"),a.find(".formFields:last a.mceButton.mce_valign.mce_valign"+b.verticalAlign).addClass("mceButtonSelected"),a.find(".formFields:last a.mceButton.mce_valign:not(.mce_valign"+b.verticalAlign+")").removeClass("mceButtonSelected"),e.call(this,a.find(".sampleHeader th"),b);var g=a.find(".sampleHeader");g.find("th").css("padding",Math.min(f,5)+"px"),g.css("border-width",Math.min(c,5)+"px"),g.css("border-color",d),g.css("border-style","solid"),g.attr("border",Math.min(c,10));var h=b.fontFamily?b.fontFamily:this.defaultFont();a.find(".formFields:nth(2) .family").css("font-family",b.fontFamily).text(this.fontName(h)),a.find(".formFields:nth(2) .fontColor").val(b.color),a.find(".formFields:nth(2) .colorSample").css("background-color",b.color)},setupCellForm:function(b,c,d){var e=this;e.createSpinnerInput(b.find("input.padding"),0,100,1,function(){var a=c(),e=b.find("input.padding").val();a.padding!=e&&(a.padding=e,d({padding:e+"px"}))}),e.createColorInput(b.find("input.backgroundColor"),function(){var a=c(),e=b.find("input.backgroundColor").val();a.backgroundColor!=e&&(a.backgroundColor=e,d({"background-color":e}))},!0),e.createFontInput(b.find("a.family"),function(){var a=c(),e=b.find("a.family").data("font-family");a.fontFamily!=e&&(a.fontFamily=e,d({"font-family":e}))}),b.find(".formFields:last a.mceButton").click(function(){var e=c(),f=a(this);return f.hasClass("mce_justifyleft")&&(e.textAlign="left"),f.hasClass("mce_justifycenter")&&(e.textAlign="center"),f.hasClass("mce_justifyright")&&(e.textAlign="right"),f.hasClass("mce_justifyfull")&&(e.textAlign="full"),f.hasClass("mce_valigntop")&&(e.verticalAlign="top"),f.hasClass("mce_valignmiddle")&&(e.verticalAlign="middle"),f.hasClass("mce_valignbottom")&&(e.verticalAlign="bottom"),f.hasClass("mce_justifyleft")?b.find(".formFields:last a.mceButton.mce_justify").not(this).removeClass("mceButtonSelected"):b.find(".formFields:last a.mceButton.mce_valign").not(this).removeClass("mceButtonSelected"),f.addClass("mceButtonSelected"),d({"text-align":e.textAlign,"vertical-align":e.verticalAlign}),!1}),e.createColorInput(b.find("input.fontColor"),function(){var a=c(),e=b.find("input.fontColor").val();a.color!=e&&(a.color=e,d({color:e}))})},buildPopover:function(b){function c(){b.plugins.jiveblackout.hideBlackout()}function d(){j.hideMenu()}function e(c){var d=a(c);i.$table=d.closest("table"),i.$row=d.closest("tr"),i.$column=b.plugins.jiveutil.findColumnBoundsForCell(d),i.$cell=d}function f(a){function f(){j.onHideMenu.remove(g),d()}function g(){b.onHideBlackout.remove(f),c()}e(a),i.resetTableProperties(b),i.resetColumnProperties(b),i.resetRowProperties(b),i.resetCellProperties(b),i.resetCellMerge(b),j&&j.onHideMenu.add(g),b.onHideBlackout&&b.onHideBlackout.add(f)}function g(b,c,d,e){function g(){return c.get(0)}var h=new j.MenuItem(b,k,null,g,a.noop,{width:d?d:262,height:e?e:371},null,null,f);return new j.Menu([h],!0,!0)}function h(){b.plugins.jiveblackout.showBlackout(b,i.$table)}var i=this,j=b.plugins.jivecontextmenu;this.editTableProperties=a(jive.rte.table.allTableProperties()),this.editColumnProperties=a(jive.rte.table.allColumnProperties()),this.editRowProperties=a(jive.rte.table.allRowProperties()),this.editCellProperties=a(jive.rte.table.allCellProperties()),this.mergeCellProperties=a(jive.rte.table.mergeCellProperties()),this.resetTableProperties=this._buildTableProperties(b),this.resetColumnProperties=this._buildColumnProperties(b),this.resetRowProperties=this._buildRowProperties(b),this.resetCellProperties=this._buildCellProperties(b),this.resetCellMerge=this._buildCellMerge(b);var k=/^td|th$/i;if(j){var l=new j.MenuItem("tableItem",k,jive.rte.table.propertiesChooserTable(),{url:CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/img/icons.gif",xOffset:580,yOffset:20,width:20,height:20},g("tableProps",this.editTableProperties),null,h),m=new j.MenuItem("columnItem",k,jive.rte.table.propertiesChooserColumn(),{url:CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/img/icons.gif",xOffset:600,yOffset:40,width:20,height:20},g("columnProps",this.editColumnProperties),null,function(){var a=b.plugins.jiveutil.findColumnFirstCell(i.$cell),c=b.plugins.jiveutil.findColumnLastCell(i.$cell);a.length&&c.length&&b.plugins.jiveblackout.showBlackout(b,a,c)}),n=new j.MenuItem("rowItem",k,jive.rte.table.propertiesChooserRow(),{url:CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/img/icons.gif",xOffset:780,yOffset:20,width:20,height:20},g("rowProps",this.editRowProperties),null,function(){b.plugins.jiveblackout.showBlackout(b,i.$row)}),o=new j.MenuItem("cellItem",k,jive.rte.table.propertiesChooserCell(),{url:CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/img/icons.gif",xOffset:600,yOffset:20,width:20,height:20},g("cellProps",this.editCellProperties),null,function(){b.plugins.jiveblackout.showBlackout(b,i.$cell)}),p=new j.MenuItem("mergeCellItem",k,jive.rte.table.propertiesChooserMergeCells(),{url:CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/img/icons.gif",xOffset:760,yOffset:20,width:20,height:20},g("mergeCellProps",this.mergeCellProperties,156,110),null,function(){b.plugins.jiveblackout.showBlackout(b,i.$cell)}),q=new j.MenuItem("deleteTableItem",k,jive.rte.table.deleteText(),{url:CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/img/icons.gif",xOffset:620,yOffset:20,width:20,height:20},function(c){var d=a(c).closest("table");return d.length&&(b.execCommand("mceTableDelete"),b.plugins.jiveblackout.hideBlackout()),!0},null,h);return this.propertyChooserMenu=new j.Menu([l,m,n,o,p,q],!0,!1,jive.rte.table.editText(),null,c),new j.MenuItem("tablePropsItem",k,null,{url:CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/img/icons.gif",xOffset:580,yOffset:20,width:20,height:20},this.propertyChooserMenu,null,null,null,e)}return null},init:function(b){this.ed=b,this.FONT_MENU=function(){var c=b.settings.theme_advanced_fonts,d=[];return d.push("<div class='fontPicker'>"),a.each(c.split(";"),function(a,b){var c=b.split("=");d.push("<a href='javascript:;' style='font-family: "),d.push(c[1]),d.push("' data-font-info='"),d.push(c[1]),d.push("'>"),d.push(c[0]),d.push("</a>")}),d.push("</div>"),d.join("")}(),b.onInit.add(function(){function a(){if(!a.hasRun){a.hasRun=!0,c.onTableStyleChange=new tinymce.util.Dispatcher,c.onTableStyleChange.add(j);var d=c.buildPopover(b);b.plugins.jivecontextmenu&&b.plugins.jivecontextmenu.addRootItem(d)}}var c=this;tinymce.isIE7?b.onNodeChange.add(function(){a.hasRun||b.dom.select("table").length>0&&a()}):a()},this)},getInfo:function(){return{longname:"Jive Table",author:"Jive Software",authorurl:"http://jivesoftware.com",infourl:"http://jivesoftware.com",version:tinyMCE.majorVersion+"."+tinyMCE.minorVersion}}}),tinymce.PluginManager.add("jivetable",tinymce.plugins.JiveTablePlugin)}(jQuery)}),define("tiny_mce3/plugins/jivetable/editor_plugin_src",["tinyMCE","jquery","jquery-plugin/jquery.spinbox","soy!jive.rte.table.allCellProperties","soy!jive.rte.table.allColumnProperties","soy!jive.rte.table.allRowProperties","soy!jive.rte.table.allTableProperties","soy!jive.rte.table.deleteText","soy!jive.rte.table.editText","soy!jive.rte.table.mergeCellProperties","soy!jive.rte.table.propertiesChooserCell","soy!jive.rte.table.propertiesChooserColumn","soy!jive.rte.table.propertiesChooserMergeCells","soy!jive.rte.table.propertiesChooserRow","soy!jive.rte.table.propertiesChooserTable"],function(){}),define("tiny_mce3/plugins/jivetablecontrols/editor_plugin_src",["tinyMCE","jquery-private"],function(){!function(a){tinymce.create("tinymce.plugins.JiveTableControlsPlugin",{rte:null,$rowopts:null,$colopts:null,$addrows:null,$rowPopover:null,$colPopover:null,$rowline:null,$colline:null,minY:0,minX:0,$node:null,resetMinMaxY:function(a){this.minY=a.plugins.jivescroll.lastScrollY,this.minX=a.plugins.jivescroll.lastScrollX},execCommand:function(b,c,d){var e=this.ed,f=this;if("mceTableDuplicateCol"==b){var g=e.plugins.jiveutil.findColumnBoundsForCell(this.$node);return g.each(function(b){a(this).clone().insertAfter(a(this))}),!0}if("mceTableDuplicateRow"==b){var h=this.$node.closest("tr");return h.clone().insertAfter(h),!0}if("mceTableAddRow"==b){var i=f.$addrows.find("input.rows");i.change();var j=i.val(),k=f.$node.closest("table");if(k.length>0){var l=k.find("tbody:last tr:last"),m=l.parent();l=l.clone(),l.find("td, th").empty(),tinymce.isIE&&!tinymce.isIE11||l.find("td, th").append(e.plugins.jivemacros.createMozBR(e.getDoc()));for(var n=0;j>n;n++)m.append(l.clone());e.nodeChanged()}}},setRTE:function(a){this.rte=a,this.completeInit()},completeInit:function(){if(this.ed&&this.rte&&!this.initialized){this.initialized=!0;var b=this.ed,c=(this.rte,this);b.plugins.jivetable.createSpinnerInput(this.$addrows.find("input.rows"),1,99,1,function(){});var d=function(a){return 13==a.keyCode?(c.$addrows.find("input.button").mousedown(),!1):void 0};this.$addrows.find("input.rows").keydown(d).keyup(d).keypress(d),c.rte&&(c.$rowline.appendTo(c.rte.getPopOverContainer()).hide(),c.$colline.appendTo(c.rte.getPopOverContainer()).hide()),this.$addrows.find("input.button").mousedown(function(){return b.execCommand("mceTableAddRow",!1,c.selectNode()),b.focus(),!1}).click(function(){return!1}).mouseup(function(){return b.focus(),!1}),b.onResizingNode.add(function(a){c.$node&&c.$node.closest("table").get(0)==a.get(0)&&c.showCorners(b,c.$node)});var e=_.debounce(function(b){var d,e=b.selection;e&&(d=a(a(b.selection.getNode()).closest("td,th").addBack().toArray().reverse()).filter("td,th"),d.is("td,th")?c.showCorners(b,d):c.hideCorners())},100);b.onNodeChange.add(e),c.resetMinMaxY(b);var f=0,g=0,h=!1,i=null,j=null,k=null,l=null,m=null,n=null,o=0,p=0,q=0,r=0,s=0;this.$rowopts.mousedown(function(d){s=a(b.getContentAreaContainer()).offset().top,k=null,m=null,f=d.pageX,g=d.pageY,b.plugins.jivemouse.showMouseCatch(),q=c.rte.getContentAreaHeight(),r=c.rte.getContentAreaWidth();var e=c.$node.closest("tr").offset();j=b.plugins.jiveutil.clone(c.$node.closest("tr"),window.parent.document).wrap("<table/>").closest("table").addClass("temp"),j.find("th").each(function(b){a(this).width(c.$node.closest("tr").find("th:nth("+b+")").outerWidth())}),j.find("td").each(function(b){a(this).width(c.$node.closest("tr").find("td:nth("+b+")").outerWidth())}),j.find("td,th").empty();var h={position:"absolute",left:e.left,top:e.top,margin:0,backgroundColor:"#999999",opacity:.5,width:c.$node.closest("table").outerWidth()+"px",height:c.$node.closest("tr").outerHeight()};return h.left<c.minX&&(h.left=c.minX),h.left>c.minX+r&&(h.left=c.minX+r),h.top<c.minY+12&&(h.height+=h.top-c.minY-12,h.top=c.minY+12),h.top+h.height>c.minY+q&&(h.height=c.minY+q-h.top),p=h.top,o=h.height,j.attr("style",c.$node.closest("table").attr("style")),j.css(h),j.find("tr").css("height","auto"),j.insertBefore(c.$rowline),c.$rowline.show().css({width:c.$node.closest("table").outerWidth(),top:e.top-2+"px",left:e.left+"px"}),i=b.selection.getBookmark(),!1}),a(b.getContainer()).closest("body").on("mousemove.rte",function(b){if(j&&c.$node&&c.$node.closest("table").length){k=c.$node.closest("tr");var d=c.$node.closest("table"),e=b.pageY-g;j.css("top",p+e+"px"),k=null;var f=0,i=j.position().top+j.outerHeight()/2;c.$node.closest("tr").parent().children("tr").each(function(b){var c=a(this);k||(k=c);var d=Math.abs(i-c.offset().top);(0==b||f>d)&&(k=c,f=d)});var l=Math.abs(j.position().top+j.outerHeight()/2-(d.offset().top+d.outerHeight()));f>l?(c.$rowline.css("top",d.offset().top+d.outerHeight()-2+"px"),h=!0):(c.$rowline.css("top",k.offset().top-2+"px"),h=!1);var m={top:j.position().top-8,left:j.position().left,height:o-1+16};m.left<c.minX&&(m.left=c.minX),m.left>c.minX+r&&(m.left=c.minX+r),m.top<c.minY+12&&(m.height+=m.top-c.minY-12,m.top=c.minY+12),m.top+m.height>c.minY+q&&(m.height=c.minY+q-m.top),c.trimCorners(m,c.$rowopts),j.css("height",m.height-12),j.css("top",m.top+6)}}),a(b.getContainer()).closest("body").on("mouseup.rte",function(d){var e=!1,f=c.$node,g=f?f.closest("table"):a([]),n=!1;if((j||l)&&g.find("[colspan], [rowspan]").each(function(){var c=a(this),d=c.attr("colspan"),e=c.attr("rowspan");if(null!=d&&1!=d||null!=e&&1!=e){n=!0,c.attr("_colspan",d),c.attr("_rowspan",e);var f=[];f.cell=this,b.execCommand("mceTableSplitCells",!1,f)}}),j&&f&&g.length&&(b.plugins.jivemouse.hideMouseCatch(),c.rte.getPopOverContainer().find(".temp").remove(),j=null,c.$rowline.hide(),k&&h?(f.closest("tr").appendTo(k.parent()),e=!0):k&&!h&&(f.closest("tr").get(0)!=k.get(0)&&f.closest("tr").insertBefore(k),e=!0)),l&&f&&g.length)if(b.plugins.jivemouse.hideMouseCatch(),c.rte.getPopOverContainer().find(".temp").remove(),l=null,c.$colline.hide(),m&&h){var o=b.plugins.jiveutil.findColumnBoundsForCell(f);m=b.plugins.jiveutil.findColumnBoundsForCell(f.nextAll("td:last-child, th:last-child")),o.get(0)!=m.get(0)&&o.each(function(b){var c=m.filter(":nth("+b+")");c.length&&a(this).insertAfter(c)}),e=!0}else if(m&&!h){var o=b.plugins.jiveutil.findColumnBoundsForCell(f);m=b.plugins.jiveutil.findColumnBoundsForCell(m),o.get(0)!=m.get(0)&&o.each(function(b){var c=m.filter(":nth("+b+")");c.length&&a(this).insertBefore(c)}),e=!0}n&&g.find("[_colspan], [_rowspan]").each(function(){var c=a(this).attr("_colspan"),d=a(this).attr("_rowspan");a(this).removeAttr("_colspan"),a(this).removeAttr("_rowspan");var e=[];e.cell=this,e.numcols=c?c:1,e.numrows=d?d:1,b.execCommand("mceTableMergeCells",!1,e)}),b.selection&&b.selection.moveToBookmark(i),e&&b.nodeChanged()}),this.$colopts.mousedown(function(d){k=null,m=null,f=d.pageX,g=d.pageY,b.plugins.jivemouse.showMouseCatch(),q=c.rte.getContentAreaHeight(),r=c.rte.getContentAreaWidth(),n=b.plugins.jiveutil.findColumnFirstCell(c.$node);var e=n.offset();l=a("<table><tr><td></td></tr></table>").addClass("temp");var h={position:"absolute",left:e.left,top:e.top,margin:0,backgroundColor:"#999999",opacity:.5,width:n.outerWidth()+"px",height:c.$node.closest("table").outerHeight()};return h.left<c.minX&&(h.left=c.minX),h.left>c.minX+r&&(h.left=c.minX+r),h.top<c.minY+12&&(h.height+=h.top-c.minY-12,h.top=c.minY+12),h.top+h.height>c.minY+q&&(h.height=c.minY+q-h.top),p=h.top,o=h.height,l.attr("style",c.$node.closest("table").attr("style")),l.css(h),l.insertBefore(c.$colline),c.$colline.show().css({height:o,top:e.top+"px",left:e.left-2+"px"}),i=b.selection.getBookmark(),!1}),a(b.getContainer()).closest("body").mousemove(function(b){if(l&&c.$node&&c.$node.closest("table").length){var d=c.$node.closest("table"),e=b.pageX-f,g=n.offset().left+e;m=null;var i=0,j=g+l.outerWidth()/2;c.$node.closest("tr").children("td,th").each(function(b){var c=a(this);m||(m=c);var d=Math.abs(j-c.offset().left);(0==b||i>d)&&(m=c,i=d)});var k=Math.abs(l.position().left+l.outerWidth()/2-(d.offset().left+d.outerWidth()));i>k?(c.$colline.css("left",d.offset().left+d.outerWidth()-2+"px"),h=!0):(c.$colline.css("left",m.offset().left-2+"px"),h=!1),l.css("left",g+"px");var o={top:l.position().top,left:l.position().left,width:l.outerWidth()-1},p=c.rte.getContentAreaHeight(),q=c.rte.getContentAreaWidth();o.top<c.minY&&(o.top=c.minY),o.top>c.minY+p&&(o.top=c.minY+p),o.left<c.minX&&(o.left=c.minX),o.left>c.minX+q&&(o.left=c.minX+q),c.trimCorners(o,c.$colopts)}}),c.$rowopts.find("a.settings").mousedown(function(){return c.rowOpts&&c.rowOpts.closeFunc(),c.colOpts&&c.colOpts.closeFunc(),c.rowOpts={context:c.$rowopts.find("a.settings"),position:"below",container:c.rte.getPopOverContainer(),clickOverlay:!1,hoverSelection:!0,addClass:"j-rte-popover js-rowProperties",additionalContainerSelector:".j-rte-popover.js-rowProperties",returnPopover:!0,arrowAdjust:0,nudge:{left:30},destroyOnClose:!0,darkPopover:!0,onClose:function(){c.rowOpts=null}},c.$rowPopover.popover(c.rowOpts),c.attachRowPopoverBehavior(b,c),!1}).click(function(){return!1}),c.$colopts.find("a.settings").mousedown(function(){return c.rowOpts&&c.rowOpts.closeFunc(),c.colOpts&&c.colOpts.closeFunc(),c.colOpts={context:c.$colopts.find("a.settings"),position:"below",container:c.rte.getPopOverContainer(),clickOverlay:!1,hoverSelection:!0,addClass:"j-rte-popover js-rowProperties",additionalContainerSelector:".j-rte-popover.js-rowProperties",returnPopover:!0,arrowAdjust:0,nudge:{left:30},destroyOnClose:!0,darkPopover:!0,onClose:function(){c.colOpts=null}},c.$colPopover.popover(c.colOpts),c.attachColPopoverBehavior(b,c),!1}).click(function(){return!1}).mouseup(function(){return!1})}},attachRowPopoverBehavior:function(a,b){this.$rowPopover.find("a.js-addRowBefore").click(function(){return a.execCommand("mceTableInsertRowBefore",!1,b.selectNode()),b.hidePopover(),!1}),this.$rowPopover.find("a.js-addRowAfter").click(function(){return a.execCommand("mceTableInsertRowAfter",!1,b.selectNode()),b.hidePopover(),!1}),this.$rowPopover.find("a.js-deleteRow").click(function(){return a.execCommand("mceTableDeleteRow",!1,b.selectNode()),b.hidePopover(),!1}),this.$rowPopover.find("a.js-duplicateRow").click(function(){return a.execCommand("mceTableDuplicateRow"),b.hidePopover(),!1})},attachColPopoverBehavior:function(a,b){this.$colPopover.find("a.js-addColBefore").click(function(){return a.execCommand("mceTableInsertColBefore",!1,b.selectNode()),b.hidePopover(),!1}),this.$colPopover.find("a.js-addColAfter").click(function(){return a.execCommand("mceTableInsertColAfter",!1,b.selectNode()),b.hidePopover(),!1}),this.$colPopover.find("a.js-deleteCol").click(function(){return a.execCommand("mceTableDeleteCol",!1,b.selectNode()),b.hidePopover(),!1}),this.$colPopover.find("a.js-duplicateCol").click(function(){return a.execCommand("mceTableDuplicateCol"),b.hidePopover(),!1})},init:function(b){var c=this;c.ed=b,a.extend(this,{$rowopts:a("<div class='resizeRowHandle'><div class='propsHandle'><a href='javascript:;' class='settings'></a></div></div>"),$colopts:a("<div class='resizeColHandle'><div class='propsHandle'><a href='javascript:;' class='settings'></a></div></div>"),$addrows:a("<div class='addRowsHandle'> "+b.getLang("jivetablecontrols.add")+" <input class='rows spin-button'> "+b.getLang("jivetablecontrols.rows")+" <input type='button' class='button' value='Go'></div>"),$rowPopover:a('<div class="j-pop-main  j-menu j-quick-menu"><ul><li><a href="javascript:;" class="js-addRowBefore lnk">'+b.getLang("jivetablecontrols.add_row_before")+'</a></li><li><a href="javascript:;" class="js-addRowAfter lnk">'+b.getLang("jivetablecontrols.add_row_after")+'</a></li><li><a href="javascript:;" class="js-deleteRow lnk">'+b.getLang("jivetablecontrols.delete_row")+'</a></li><li><a href="javascript:;" class="js-duplicateRow lnk">'+b.getLang("jivetablecontrols.duplicate_row")+"</a></li></ul></div>"),$colPopover:a('<div class="j-pop-main j-menu j-quick-menu"><ul><li><a href="javascript:;" class="js-addColBefore lnk">'+b.getLang("jivetablecontrols.add_col_before")+'</a></li><li><a href="javascript:;" class="js-addColAfter lnk">'+b.getLang("jivetablecontrols.add_col_after")+'</a></li><li><a href="javascript:;" class="js-deleteCol lnk">'+b.getLang("jivetablecontrols.delete_col")+'</a></li><li><a href="javascript:;" class="js-duplicateCol lnk">'+b.getLang("jivetablecontrols.duplicate_col")+"</a></li></ul></div>"),$rowline:a("<div class='rowLine'></div>"),$colline:a("<div class='colLine'></div>")});var d=function(a,b){return function(c,d){a.$node&&(this.minY=d,this.minX=c,a.showCorners(b,a.$node,a.preserveRatio))}}(this,b);b.onInit.add(this.completeInit,this),b.onScroll.add(d,this),b.theme.onResize.add(function(){c.resetMinMaxY(b),d(c.minX,c.minY+c.rte.getContentAreaHeight())},this)},killYourself:function(){a(this.ed.getContainer()).parents("body").off(".rte")},hideCorners:function(){this.hidePopover(),this.$node=null,this.$rowopts.detach(),this.$colopts.detach(),this.$addrows.detach(),this.opts=null},trimCorners:function(a,b){if(this.rte){var c=this.rte.getContentAreaHeight(),d=this.rte.getContentAreaWidth();a.top<this.minY-3?b.detach():a.top>this.minY+c?b.detach():a.left<this.minX?b.detach():a.left>this.minX+d?b.detach():b.insertBefore(this.$rowline),(b!=this.$addrows&&b.css("top")!=a.top+"px"||b.css("left")!=a.left+"px")&&this.hidePopover(),b.css("top",a.top),b.css("left",a.left),a.height&&b.height(a.height),a.width&&b.width(a.width),b.css("cursor",a.cursor)}},showCorners:function(a,b){function c(){var c=b.closest("tr"),g=b.closest("table"),h=c.offset(),i=g.offset(),j=a.plugins.jiveutil.findColumnFirstCell(b),k=j.offset();if(0!=j.length){var l={top:parseInt(h.top)-8,left:parseInt(h.left),height:c.outerHeight()-1+16};l.left<d.minX&&(l.left=d.minX),l.left>d.minX+f&&(l.left=d.minX+f),l.top<d.minY+12&&(l.height+=l.top-d.minY-12,l.top=d.minY+12),l.top+l.height>d.minY+e&&(l.height=d.minY+e-l.top),d.trimCorners(l,d.$rowopts),l={top:parseInt(k.top),left:parseInt(k.left),width:j.outerWidth()-1},l.left<d.minX&&l.left>d.minX-10&&(l.left=d.minX),l.top<d.minY+12&&(l.top=d.minY+12),l.top>d.minY+e&&(l.top=d.minY+e),d.trimCorners(l,d.$colopts),l={top:i.top+g.outerHeight()-1,left:i.left},d.trimCorners(l,d.$addrows),d.$addrows.find("input.rows").val(1)}}var d=this;if(b&&b.length){this.resetMinMaxY(a),this.$node=b;var e=this.rte.getContentAreaHeight(),f=this.rte.getContentAreaWidth();c()}},hidePopover:function(a,b){this.colOpts&&(this.colOpts.closeFunc(b),this.colOpts=null),this.rowOpts&&(this.rowOpts.closeFunc(b),this.rowOpts=null)},selectNode:function(){var a=[];return this.$node&&this.$node.length?(a.cell=this.$node.get(0),a):a},getInfo:function(){return{longname:"Jive Table Controls",author:"Jive Software",authorurl:"http://jivesoftware.com",infourl:"http://jivesoftware.com",version:tinyMCE.majorVersion+"."+tinyMCE.minorVersion}}}),tinymce.PluginManager.add("jivetablecontrols",tinymce.plugins.JiveTableControlsPlugin)}(jQuery)}),define("tiny_mce3/plugins/jivetablecontrols/editor_plugin_src",["tinyMCE","jquery"],function(){}),define("tiny_mce3/plugins/jivescroll/editor_plugin_src",["tinyMCE","jquery-private"],function(){!function(a){tinymce.create("tinymce.plugins.JiveScrollPlugin",{lastScrollY:-99,lastScrollX:-99,body:null,win:null,init:function(a){a.onScroll=new tinymce.util.Dispatcher(this);var b=this;a.onInit.add(function(){this.intervalId=setInterval(function(){b.resetScroll(a)},300),a.dom.bind(a.getWin(),"scroll",function(){b.timeoutId||(b.timeoutId=setTimeout(function(){b.timeoutId=null,b.resetScroll(a)},0)),b.intervalId&&(clearInterval(b.intervalId),b.intervalId=null)}),setTimeout(function(){b.resetScroll(a)},0)},this),a.theme.onResize.add(function(){b.resetScroll(a)},this)},resetScroll:function(b){try{if(this.intervalId&&(b.destroyed||!b.getWin()))return void clearInterval(this.intervalId);this.body||(this.body=a(b.getBody()).parents("html").addBack(),this.win=a(b.getWin()));var c=this.body.scrollTop();c||(c=this.win.scrollTop());var d=this.body.scrollLeft();d||(d=this.win.scrollLeft()),this.lastScrollY==c&&this.lastScrollX==d||(this.lastScrollY=c,this.lastScrollX=d,b.onScroll.dispatch(d,c))}catch(e){}},getInfo:function(){return{longname:"Jive Scroll",author:"Jive Software",authorurl:"http://jivesoftware.com",infourl:"http://jivesoftware.com",version:tinyMCE.majorVersion+"."+tinyMCE.minorVersion}}}),tinymce.PluginManager.add("jivescroll",tinymce.plugins.JiveScrollPlugin)}(jQuery)}),define("tiny_mce3/plugins/jivescroll/editor_plugin_src",["tinyMCE","jquery"],function(){}),define("tiny_mce3/plugins/jiveblackout/editor_plugin_src",["tinyMCE","jquery-private"],function(){!function(a){tinymce.create("tinymce.plugins.JiveBlackoutPlugin",{rte:null,$left:a("<div class='blackout l'></div>"),$right:a("<div class='blackout r'></div>"),$top:a("<div class='blackout t'></div>"),$bottom:a("<div class='blackout b'></div>"),minY:null,minX:null,nodeL:null,nodeR:null,ed:null,setRTE:function(a){this.rte=a},resetMinMaxY:function(b){var c=a(b.getWin());this.minY=c.scrollTop(),this.minX=c.scrollLeft()},init:function(b){function c(){e.resetMinMaxY(b)}function d(){(e.nodeL||e.nodeR)&&e.showBlackout(b,e.nodeL,e.nodeR)}var e=this;this.ed=b,b.onHideBlackout=new tinymce.util.Dispatcher(this),b.onNodeChange.add(d),b.onScroll.add(function(){c(),d()}),b.theme.onResize.add(function(){c(),d()}),a(window).resize(function(){c(),d()}),a(window.document.body).click(function(){e.hideBlackout()}),b.onInit.add(c,this),setTimeout(c,300),setTimeout(c,500),setTimeout(c,800)},hideBlackout:function(){(this.nodeL||this.nodeR)&&(this.nodeL=null,this.nodeR=null,this.$left.remove(),this.$right.remove(),this.$top.remove(),this.$bottom.remove(),this.ed.onHideBlackout.dispatch())},showBlackout:function(b,c,d){function e(a,b){a.bottom=a.top+a.height,a.right=a.left+a.width,a.left<f.minX&&(a.width-=f.minX-a.left,a.left=f.minX),a.top<f.minY&&(a.height-=f.minY-a.top,a.top=f.minY),a.bottom>f.minY+l&&(a.height-=a.top+a.height-f.minY-l),a.left+a.width>f.minX+m&&(a.width-=a.left+a.width-f.minX-m),a.left>=f.minX+m?b.remove():a.top>=f.minY+l?b.remove():a.top>=a.bottom||a.left>=a.right?b.remove():k.append(b),delete a.bottom,delete a.right,b.css(a),b.click(function(){f.hideBlackout()})}var f=this;if(c){d||(d=c),this.resetMinMaxY(b),this.nodeL=c,this.nodeR=d;var g=a(c),h=a(d),i=g.offset(),j=h.offset();if(j&&i){var k=this.rte.getPopOverContainer(),l=this.rte.getContentAreaHeight(),m=this.rte.getContentAreaWidth(),n=h.outerHeight(),o=h.outerWidth(),p=a(b.getBody()).outerHeight(),q={top:j.top+n,left:i.left,width:j.left+o-i.left,height:Math.max(l,p)-j.top-n};e(q,this.$bottom),q={top:0,left:0,width:i.left,height:Math.max(l,p)},e(q,this.$left),q={top:0,left:i.left,width:j.left+o-i.left,height:i.top},e(q,this.$top),q={top:0,left:j.left+o,width:Math.max(m,a(b.getDoc()).width())-o-j.left,height:Math.max(l,p)},e(q,this.$right)}}},getInfo:function(){return{longname:"Jive Blackout",author:"Jive Software",authorurl:"http://jivesoftware.com",infourl:"http://jivesoftware.com",version:tinyMCE.majorVersion+"."+tinyMCE.minorVersion}}}),tinymce.PluginManager.add("jiveblackout",tinymce.plugins.JiveBlackoutPlugin)}(jQuery)}),define("tiny_mce3/plugins/jiveblackout/editor_plugin_src",["tinyMCE","jquery"],function(){}),define("tiny_mce3/plugins/jivecontextmenu/editor_plugin_src",["tinyMCE","jquery-private"],function(){!function(a){function b(a){return null==a&&(a=/./),function(b){var c=b.startContainer.childNodes[b.startOffset];for(c||(c=b.startContainer);c&&(1!=c.nodeType||!a.test(c.nodeName));)c=c.parentNode;return c}}function c(){this._bound=function(a,b,c){return c>b?null:Math.min(Math.max(a,c),b)},this._positionArrow=function(a){return{top:a.height/2+4
}},this._positionMenuLeft=function(b,c,d,e){function f(a,b){return function(){var c=a();return c||(c=b()),c}}function h(){return l+n-o-g>=p?{left:l+n-o-g,arrowPos:"left"}:l+n+d.contextPaddingLeft-o-g>=p?{left:l+n+d.contextPaddingLeft-o-g,arrowPos:"left"}:void 0}function i(){return q>=l+m+o+g?{left:l+m+g,arrowPos:"right"}:q>=l+m?{left:l+m-o-g,arrowPos:"left"}:void 0}function j(){return l+n>=p?{left:l+n+g,arrowPos:"right"}:void 0}function k(){return{left:l+m-o-g,arrowPos:"left"}}var l=d.contextPos.left,m=d.contextWidth,n=d.contextMarginLeft,o=c.width,p=d.minX-d.leftSlop,q=d.minX+d.contentAreaW;return a(d.contextNodes).filter("th,td").length?f(i,f(h,f(j,k)))():f(h,f(i,f(j,k)))()},this._positionMenuTop=function(a,b,c,d){var e=c.cursorPos.top+c.cursorHeight/2,f=c.minY,g=c.minY+c.contentAreaH,h=b.height,i=c.contextPos.top+c.contextMarginTop,j=c.contextPos.top+c.contextMarginTop+c.contextHeight,k=h/2,l=this._bound(e,g-k,f+k);return this._bound(l,j,i)-h/2},this.position=function(a,b,c,d){var e=this._positionMenuLeft(a,b,c,d),f={top:this._positionMenuTop(a,b,c,d),left:e.left};return{menuPos:f,menuDims:a,arrow:this._positionArrow(a),arrowClass:e.arrowPos+"Arrow"}}}function d(){this._superPositionLeft=this._positionMenuLeft,this._positionMenuLeft=function(a,b,c,d){var e=c.contextPos.left,f=c.contextWidth,h=c.contextMarginLeft,i=b.width,j=c.minX-c.leftSlop,k=c.minX+c.contentAreaW,l=e+h-j,m=k-(e+f+i);return l>m&&l>=b.width?{left:e+h-i-g,arrowPos:"left"}:m>=l&&m>=b.width?{left:e+f+g,arrowPos:"right"}:this._superPositionLeft(a,b,c,d)}}function e(){function b(a,b){return(a-b)/2}var c=tinymce.activeEditor.plugins.jivecontextmenu;this.position=function(d,e,f,g){var h=b(c.lastPosition.menuDims.height,d.height),i=0;c.$arrow.hasClass("leftArrow")&&(i=c.lastPosition.menuDims.width-d.width);var j=a.extend(!0,{},c.lastPosition,{menuDims:d});return j.menuPos.top+=h,j.menuPos.left+=i,j.menuPos.left=this._bound(j.menuPos.left,f.minX+f.contentAreaW,f.minX-f.leftSlop),a.extend(!0,j,{arrow:this._positionArrow(j.menuDims)})}}var f=b(),g=10;d.prototype=new c,e.prototype=new c,tinymce.create("tinymce.plugins.JiveContextMenuPlugin",{MenuItem:function(c,d,e,f,g,h,i,j,k){function l(a){var b=this.findContextNode(a);if(b){var c=0,d=a.startContainer.childNodes[a.startOffset];for(d||(++c,d=a.startContainer);d!=b;)d=d.parentNode,++c;return c}return-1}var m=tinymce.activeEditor;d?d.constructor==RegExp&&(d=b(d)):d=b();var n;if("string"==typeof f)n=function(){var b=a("<a class='button' href='javascript:;' style='float: left; width: auto; height: auto;'></a>");return b.append("<img src='"+f+"' />").get(0)};else if("function"==typeof f)n=f;else{var o={backgroundImage:"url("+f.url+")",backgroundPosition:-f.xOffset+"px "+-f.yOffset+"px",width:f.width+"px",height:f.height+"px"};h||(h=function(a){return{width:f.width,height:f.height}}),n=function(){var b=a("<a class='button' href='javascript:;' style='float: left;'></a>");b.css(h());var c=a("<div />").css(o);return b.append(c).get(0)}}var p;if(p="string"==typeof g?function(a,b){return m.execCommand(g,!1,{node:a,rng:b}),!0}:"function"==typeof g?g:function(a,b){g.show(m,b,null,g.items)},h){if("object"==typeof h){var q=h;h=function(){return q}}}else h=function(a){return{width:20,height:20}};a.extend(this,{id:c,findContextNode:d,distance:l,title:e,render:n,action:a.proxy(p,this),getDims:h,mouseenter:i?a.proxy(i,this):null,mouseleave:j?a.proxy(j,this):null,displayCallback:k?a.proxy(k,this):null})},PositionStrategy:c,StaticPositionStrategy:e,MenuDisplayManager:function(b,c){var f=b.plugins.jivecontextmenu;this.isVertical=c;var g=new d,h=new e,i=b.plugins.jiveutil.arrayEquals;a.extend(this,{lastItems:null,renderItems:function(c,d,e,f){var g=d.getDOM(),h=e.$menu;i(this.lastItems,f)||(this.lastItems=f,g.children().remove(),a.each(f,function(){function c(a){return function(){e.setItemTitle(a)}}var f=this,h=a(f.render(f,b,e.$menu)).addClass("menuItem_"+f.id);null!=d.title&&null!=f.title&&h.mouseenter(c(f.title)),h.click(function(a){tinymce.isIE&&b.focus();var c=b.selection.getRng(!0),g=f.findContextNode(c);e.clearHideTimeout();var h=f.action(g,c);return h!==!1&&d.tearDownMenu(),h===!0&&d.hide(),!1}),f.mouseenter&&h.mouseenter(f.mouseenter),f.mouseleave&&h.mouseleave(f.mouseleave),g.append(h)})),h.find(".menuItems").hide(),g.show(),a.each(f,function(){if(this.displayCallback){var a=this.findContextNode(c);this.displayCallback(a,g.children(".menuItem_"+this.id).get(0))}})},getConstraints:function(b,c,d){function e(a){var b=parseFloat(a);return isNaN(b)?0:b}var f=b.selection.getRng(!0),g=b.plugins.jivescroll,h=b.plugins.jivecontextmenu,i=d[0].findContextNode(f),j=[];a.each(d,function(){var a=this.findContextNode(f);a&&j.push(a)});var k=a(i),l=e(k.css("margin-top")),m=e(k.css("margin-left")),n=a(c);return{contentAreaH:h.rte.getContentAreaHeight(),contentAreaW:h.rte.getContentAreaWidth(),minY:g.lastScrollY,minX:g.lastScrollX,leftSlop:40,contextNode:i,contextNodes:j,contextPos:k.position(),contextHeight:k.outerHeight()+l,contextWidth:k.outerWidth()+m,contextMarginTop:l,contextMarginLeft:m,contextPaddingLeft:e(k.css("padding-left")),cursorPos:n.position(),cursorHeight:n.outerHeight(!0),cursorPaddingLeft:e(n.css("padding-left"))}},findDimensions:function(b,c){var d={width:0,height:0};if(this.isVertical?(a.each(c,function(){var a=this.getDims();d.width=Math.max(a.width,d.width),d.height+=a.height}),d.width+=6,d.height+=6*c.length):(a.each(c,function(){var a=this.getDims();d.width+=a.width,d.height=Math.max(a.height,d.height)}),d.width+=6*c.length,d.height+=6),null==b.title||this.isVertical)f.$textLabel.hide();else{var e="";a.each(c,function(){null!=this.title&&this.title.length>e.length&&(e=this.title)}),f.setMenuTitle(b.title);var g=f.getTextDims(b.title,e+"m");d.width=Math.max(d.width,g.width+6),d.height+=g.height,f.setItemTitle(""),f.$textLabel.show()}var h={width:d.width+29,height:d.height+32};return{inner:d,outer:h}},position:function(a,b,c,d){var e=f.$menu.filter(":visible").length>0,i=null;return e&&(i=h.position(a,b,c,d)),i||(i=g.position(a,b,c,d)),f.$arrow.removeClass().addClass(i.arrowClass+" pointer"),i},clip:function(a,b){return a.menuPos.top+a.menuDims.height<b.minY-3?null:a.menuPos.top>b.minY+b.contentAreaH?null:a.menuPos.left+a.menuDims.width<b.minX-b.leftSlop?null:a.menuPos.left>b.minX+b.contentAreaW?null:a},layoutMenu:function(a,b,c,d,e){this.renderItems(e.selection.getRng(!0),a,f,d);var g=this.getConstraints(e,b,d),h=this.findDimensions(a,d),i=this.position(h.inner,h.outer,g,c);return this.clip(i,g)}})},Menu:function(b,c,d,e,g,h,i){function j(){g&&r.unbind("mouseenter",g),h&&r.unbind("mouseleave",h)}function k(){r.find(".menuItems").hide(),r.hide(),j(),p.onHideMenu.dispatch(q),p.clearHideTimeout()}function l(b,d,e,g){function h(){var b=[],e={};return a.each(q.items,function(){e[this.id]=this.distance(d)}),b=q.items.slice(),c||b.sort(function(a,b){return e[a.id]-e[b.id]}),b=a.map(b,function(a){return e[a.id]<0?null:a})}if(null==g&&(g=h()),0==g.length)this.hide();else{var i=f(d);m(i,e,g,b),p.onShowMenu.dispatch(q)}}function m(a,b,c,d){var e=i.layoutMenu(q,a,b,c,d);e?(r.is(":visible")?(t.hide().css(e.arrow),r.animate(e.menuPos,{complete:function(){t.show(),r.find("a:visible, input:visible").first().focus()}}),s.animate(e.menuDims)):(t.css(e.arrow),r.css(e.menuPos),s.css(e.menuDims),r.show(),p.createHideTimeout(d)),p.lastPosition=e):q.hide()}function n(){return u.is(":visible")}function o(){return u}null==b&&(b=[]);var p=tinymce.activeEditor.plugins.jivecontextmenu;null==i&&(i=new p.MenuDisplayManager(tinymce.activeEditor,d));var q=this,r=p.$menuPopover,s=p.$menu,t=p.$arrow,u=a("<div class='menuItems'></div>");u.hide(),null!=g&&(g=a.proxy(g,this),r.mouseenter(g)),null!=h&&(h=a.proxy(h,this),r.mouseleave(h)),p.$menu.append(u),a.extend(this,{items:b,show:l,hide:k,tearDownMenu:j,title:e,isVisible:n,getDOM:o})},setRootMenu:function(a){this.rootMenu=a},addRootItem:function(a){this.rootMenu.items.push(a)},hideMenu:function(){this.rootMenu&&this.rootMenu.hide(),this.clearHideTimeout()},setItemTitle:function(a){this.$textLabel.children(".itemTitle").text(a)},setMenuTitle:function(a){this.$textLabel.children(".menuTitle").text(a)},getTextDims:function(a,b){var c=this.$textLabel.children(".itemTitle").text(),d=this.$textLabel.children(".menuTitle").text();this.setMenuTitle(a),this.setItemTitle(b);var e={},f=this.$textLabel.is(":visible");return this.$poc.append(this.$textLabel),this.$textLabel.show().css("opacity","0%").css("position","absolute"),e.width=this.$textLabel.outerWidth(!0),e.height=this.$textLabel.outerHeight(!0),this.$textLabel.css("opacity","").css("position",""),f||this.$textLabel.hide(),this.$menu.prepend(this.$textLabel),this.setMenuTitle(d),this.setItemTitle(c),e},makeFindContextNode:b,rte:null,rootMenu:null,$menuPopover:null,$menu:null,fullPopOverWidth:230,fullPopOverHeight:400,MENU_TIMEOUT:2e3,lastPosition:null,theHideTimeout:null,createHideTimeout:function(a){this.clearHideTimeout();var b=this;this.theHideTimeout=setTimeout(function(){b.hideMenu()},this.MENU_TIMEOUT)},clearHideTimeout:function(){null!=this.theHideTimeout&&(clearTimeout(this.theHideTimeout),this.theHideTimeout=null)},setRTE:function(a){this.rte=a,this.completeInit()},completeInit:function(){if(this.rte&&!this.initialized){this.initialized=!0;var a=this.rte.getPopOverContainer();a.append(this.$menuPopover),this.$poc=a}},init:function(b){function c(a){a?h=a:a=h,g.rootMenu&&b.selection&&(g.rootMenu.hide(),g.rootMenu.show(b,b.selection.getRng(!0),a))}function d(){g.hideMenu()}function e(a,b){var d=a.plugins.jivescroll,e={x:b.clientX+d.lastScrollX,y:b.clientY+d.lastScrollY};g.lastPosition=null,c(e)}function f(){c()}var g=this;this.onShowMenu=new tinymce.util.Dispatcher,this.onHideMenu=new tinymce.util.Dispatcher;var h=null;b.onClick.add(e),b.addShortcut("ctrl+alt+c, ctrl+alt+g","Context Menu",function(){c(),g.clearHideTimeout(),g.$menuPopover.find("a").first().focus()}),tinymce.isIE&&b.onMouseUp.add(function(a,b){"img"==b.target.nodeName.toLowerCase()&&e(a,b)}),b.onKeyDown.addToTop(function(){null!=g.theHideTimeout&&d()}),b.theme.onResize.add(f),a(window).resize(f);var i=a(b.getContainer()).children("table:first tr.mceIframeRow");b.onScroll.add(function(a,b){if(this.lastPosition)if(this.lastPosition.menuPos.top+20-b<=0)d();else{var c=i.height();this.lastPosition.menuPos.top+20-b>=c&&d()}},this),b.onInit.add(function(){this.completeInit()},this),this.$menuPopover=a("<div class='j-pop js-pop j-rte-popover j-table-popover popover'><div class='j-pop-main j-rte'><h3 class='textLabel'><span class='menuTitle'></span><span class='itemTitle'></span></h3></div><span class='pointer'></span></div>"),this.$menu=this.$menuPopover.children(".j-pop-main"),this.$menuPopover.css("position","absolute").hide(),this.$arrow=this.$menuPopover.children(".pointer"),this.$textLabel=this.$menu.children(".textLabel"),this.$menuPopover.mouseenter(function(){g.clearHideTimeout()}).mouseleave(function(){g.rootMenu.isVisible()&&g.createHideTimeout(b)}).keydown(function(a){return 27==a.keyCode?(d(),b.focus(),!1):void 0});var j=new this.Menu([],!1,!0);this.setRootMenu(j)},getInfo:function(){return{longname:"Jive Context",author:"Jive Software",authorurl:"http://jivesoftware.com",infourl:"http://jivesoftware.com",version:tinyMCE.majorVersion+"."+tinyMCE.minorVersion}}}),tinymce.PluginManager.add("jivecontextmenu",tinymce.plugins.JiveContextMenuPlugin)}(jQuery)}),define("tiny_mce3/plugins/jivecontextmenu/editor_plugin_src",["tinyMCE","jquery"],function(){}),define("tiny_mce3/plugins/jiveresize/editor_plugin_src",["tinyMCE","jquery-private"],function(){!function(a){tinymce.create("tinymce.plugins.JiveResizePlugin",{rte:null,$tl:a("<div class='handle tl'></div>"),$tr:a("<div class='handle tr'></div>"),$bl:a("<div class='handle bl'></div>"),$br:a("<div class='handle br'></div>"),minY:0,minX:0,$node:null,preserveRatio:!1,dragging:!1,resetMinMaxY:function(a){this.minY=a.plugins.jivescroll.lastScrollY,this.minX=a.plugins.jivescroll.lastScrollX},setRTE:function(a){this.rte=a,this.completeInit()},selectNode:function(b){if(tinymce.isIE){var c=b.closest("table");return c.length&&c.get(0)==b.get(0)?a([]):c}return a(b.closest("img, table").addBack().toArray().reverse()).filter("img, table")},completeInit:function(){if(this.ed&&this.rte&&!this.initialized){this.initialized=!0;var b=this.ed,c=(this.rte,this),d=_.debounce(function(b){var d,e=b.selection;e&&(d=c.selectNode(a(e.getNode())),d.is("img, table")?c.showCorners(b,d,d.is("img")):c.hideCorners())},100);b.onNodeChange.add(d),c.resetMinMaxY(b),c.setupHandlers(b)}},init:function(b){this.ed=b,b.onResizingNode=new tinymce.util.Dispatcher(this),b.onResizedNode=new tinymce.util.Dispatcher(this);var c=this,d=function(a,b){return function(c,d){a.minY=d,a.minX=c,a.$node&&(a.dragging||a.showCorners(b,a.$node,a.preserveRatio))}}(this,b);b.onInit.add(this.completeInit,this),b.onScroll.add(d,this),b.theme.onResize.add(function(){c.resetMinMaxY(b),c.showCorners(b,c.$node,c.preserveRatio)},this),a(window).resize(function(){c.resetMinMaxY(b),c.showCorners(b,c.$node,c.preserveRatio)})},hideCorners:function(){this.$node=null,this.$tl.remove(),this.$tr.remove(),this.$br.remove(),this.$bl.remove()},showCorners:function(b,c,d){function e(){f.dragging=a(this),b.plugins.jivemouse.showMouseCatch()}var f=this;c&&c.length&&(c.hasClass("jive_emote")||(this.resetMinMaxY(b),this.$node=c,this.preserveRatio=d,this.showCornersHelper(),this.$br.mousedown(e),this.$bl.mousedown(e),this.$tr.mousedown(e),this.$tl.mousedown(e)))},setupHandlers:function(b){function c(a,c){a.top<b.plugins.jivescroll.lastScrollY-3?c.remove():a.top>b.plugins.jivescroll.lastScrollY+g?c.remove():a.left<b.plugins.jivescroll.lastScrollX?c.remove():a.left>b.plugins.jivescroll.lastScrollX+h?c.remove():f.append(c),c.css("top",a.top),c.css("left",a.left),c.css("cursor",a.cursor)}function d(){var a=e.$node.offset();b={top:a.top+e.$node.outerHeight()+j,left:a.left+e.$node.outerWidth()+i,cursor:"se-resize"},c(b,e.$br);var b={top:a.top+e.$node.outerHeight()+j,left:a.left+i,cursor:"sw-resize"};c(b,e.$bl),b={top:a.top+j,left:a.left+i,cursor:"nw-resize"},c(b,e.$tl),b={top:a.top+j,left:a.left+e.$node.outerWidth()+i,cursor:"ne-resize"},c(b,e.$tr)}var e=this;this.resetMinMaxY(b);var f=this.rte.getPopOverContainer(),g=this.rte.getContentAreaHeight(),h=this.rte.getContentAreaWidth(),i=-3,j=-3;e.showCornersHelper=function(){g=e.rte.getContentAreaHeight(),h=e.rte.getContentAreaWidth(),d()};var k=0,l=0,m=0,n=0;e.dragging=!1,a(b.getContainer()).find(".mceIframeContainer").mousedown(function(a){return e.dragging&&e.$node?(k=a.pageX,l=a.pageY,m=e.$node.width(),n=e.$node.height(),b.onResizingNode.dispatch(e.$node,m,n),!1):void 0}),a(b.getContainer()).parents("body").mousemove(function(a){if(e.dragging&&e.$node){e.$node.hasClass("j-img-original")&&e.$node.removeClass("j-img-original");var c=a.pageX-k,f=a.pageY-l;return e.dragging.get(0)==e.$br.get(0)?f>c?(e.$node.width(m+c),e.$node.height(n+(e.preserveRatio?n/m*c:f))):(e.$node.height(n+f),e.$node.width(m+(e.preserveRatio?m/n*f:c))):e.dragging.get(0)==e.$tr.get(0)?(e.$node.width(m+c),e.$node.height(n+(e.preserveRatio?n/m*c:-f))):e.dragging.get(0)==e.$tl.get(0)?(e.$node.width(m-c),e.$node.height(n-(e.preserveRatio?n/m*c:f))):e.dragging.get(0)==e.$bl.get(0)&&(Math.abs(c)<Math.abs(f)?0>c?(e.$node.width(m-c),e.$node.height(n-(e.preserveRatio?n/m*c:f))):(e.$node.width(m+c),e.$node.height(n+(e.preserveRatio?n/m*c:f))):(e.$node.height(n+f),e.$node.width(m+(e.preserveRatio?m/n*f:c)))),e.$node.removeAttr("data-mce-style"),e.$node.attr("width",e.$node.width()),e.$node.attr("height",e.$node.height()),b.onResizingNode.dispatch(e.$node,e.$node.width(),e.$node.height()),d(),!1}}),a(b.getContainer()).parents("body").mouseup(function(){e.dragging&&(e.dragging=!1,b.plugins.jivemouse.hideMouseCatch(),e.$node&&b.onResizedNode.dispatch(e.$node,e.$node.width(),e.$node.height()),b.nodeChanged())})},getInfo:function(){return{longname:"Jive Resize",author:"Jive Software",authorurl:"http://jivesoftware.com",infourl:"http://jivesoftware.com",version:tinyMCE.majorVersion+"."+tinyMCE.minorVersion}}}),tinymce.PluginManager.add("jiveresize",tinymce.plugins.JiveResizePlugin)}(jQuery)}),define("tiny_mce3/plugins/jiveresize/editor_plugin_src",["tinyMCE","jquery"],function(){}),define("tiny_mce3/plugins/jivebuttons/editor_plugin_src",["tinyMCE","jquery-private"],function(){!function(a){tinymce.create("tinymce.plugins.JiveButtonsPlugin",{execCommand:function(a,b,c){return"mceNull"==a},initToolbar:function(b){var c,d,e;if(b&&"string"==typeof b){c=tinyMCE.get(b);var f=document.getElementById(b+"_magicspacer0"),g=document.getElementById(b+"_magicspacer1"),h=document.getElementById(b+"_toolbar1");if(f){var i=h.rows[0].cells,j=0;for(d=1;3>d;d++)e=i[d],j+=jive.ext.x.xWidth(e);j+=26,h=document.getElementById(b+"_toolbar2"),i=h.rows[0].cells;var k=0;for(d=6;7>d;d++)e=i[d],k+=jive.ext.x.xWidth(e);k+=133,k+=6;var l=j-k;if(-100>l)return;if(-30>l){var m=this;return void setTimeout(function(){m.initToolbar(b)},33)}0>l?(jive.ext.x.xDisplayNone(g),jive.ext.x.xDisplayBlock(f),jive.ext.x.xWidth(f,-1*l-1)):(jive.ext.x.xDisplayNone(f),jive.ext.x.xDisplayBlock(g),0>=l?jive.ext.x.xDisplayNone(g):jive.ext.x.xWidth(g,l-5))}var n=document.getElementById(b+"_spellchecker");null!==n&&(e=c.dom.getParent(n,function(a){return a!=n})),tinymce.isIE&&(document.documentMode&&document.documentMode>7||a("#wysiwygtext_magicspacer1").closest("td").css("padding",0))}else{var o=window.editor.toArray();for(d=0;d<o.length;d++)o[d]&&o[d].getID&&this.initToolbar(o[d].getID())}},init:function(b,c){this.url=c;this.index=0,this.mindex=0,b.onInit.add(function(b){var c=a('[id="'+b.id+'_toolbar1"]',b.getContainer()).get(0),d=a(c).parents("td.mceToolbar").get(0);tinymce.isIE?d.style.height=this.settings.default_height+"px":d.style.height=this.settings.default_height-1+"px",d.style.bottom="0px"})},getInfo:function(){return{longname:"Jive Buttons",author:"Jive Software",authorurl:"http://jivesoftware.com",infourl:"http://jivesoftware.com",version:tinyMCE.majorVersion+"."+tinyMCE.minorVersion}},createControl:function(a,b){var c;return"spacerbutton"==a?(c=b.createButton("spacerbutton"+this.index,{"class":"jive_spacer_button jive_spacer_button"+this.index,cmd:"mceNull"}),this.index++,c):"magicspacer"==a?(c=b.createButton("magicspacer"+this.mindex,{"class":"jive_spacer_button jive_magicspacer_button",cmd:"mceNull"}),this.mindex++,c):null}}),tinymce.PluginManager.add("jivebuttons",tinymce.plugins.JiveButtonsPlugin)}(jQuery)}),define("tiny_mce3/plugins/jivebuttons/editor_plugin_src",["tinyMCE","jquery"],function(){}),define("tiny_mce3/plugins/jivekeyboard/editor_plugin_src",["tinyMCE","jive/accessibility"],function(){!function(a){function b(a){return(a.shiftKey?"Shift":"")+(a.ctrlKey||a.metaKey?"Ctrl":"")+(a.altKey?"Alt":"")}tinymce.create("tinymce.plugins.JiveKeyboardPlugin",{init:function(c){function d(a){var c=i[a.type];if(!c)return null;var d=a.keyCode;"keypress"==a.type&&null!=a.which&&0!=a.which&&0!=a.charCode&&(d=a.which);var e=c[d];if(!e)return null;var f=b(a);return e[f]}function e(a,c,d,e){null==d&&(d={}),i[a]||(i[a]={}),i[a][c]||(i[a][c]={});var f=b(d);i[a][c][f]=e}function f(a,b){var c=d(b);return c?c(a,b):void 0}function g(b){if(b){var c=a(b),d=c.parents("div:eq(0)");if(0==c.css("opacity")&&d.length>0)return d[0]}return b}function h(b,c){var d=jive.Accessibility.filterFocusable(a(jive.Accessibility.DEFAULT_FOCUSABLE_SELECTOR+", iframe[id^="+b.id+"]")),e=a("iframe",b.getContentAreaContainer()),f=d.index(e);return g(c?d.get(f+1):d.get(f-1))}var i={};c.onKeyDown.add(f),c.onKeyPress.add(f),c.onKeyUp.add(f),e("keydown",27,{},function(a,b){return h(a,!0).focus(),tinymce.dom.Event.cancel(b)}),e("keydown",27,{shiftKey:!0},function(a,b){return h(a,!1).focus(),tinymce.dom.Event.cancel(b)}),this.addHandler=e},getInfo:function(){return{longname:"Jive Keyboard",author:"Jive Software",authorurl:"http://jivesoftware.com",infourl:"http://jivesoftware.com",version:tinyMCE.majorVersion+"."+tinyMCE.minorVersion}}}),tinymce.PluginManager.add("jivekeyboard",tinymce.plugins.JiveKeyboardPlugin)}(jQuery)}),define("tiny_mce3/plugins/jivekeyboard/editor_plugin_src",["tinyMCE","jive/accessibility"],function(){}),define("tiny_mce3/plugins/jivelink/editor_plugin_src",["tinyMCE"],function(){!function(){function a(a){var b=a.startContainer.childNodes[a.startOffset];for(b||(b=a.startContainer);b&&(1!=b.nodeType||"a"!=b.nodeName.toLowerCase()||tinymce.activeEditor.dom.hasClass(b,"unlinked"));)b=b.parentNode;return b}function b(a){var b=a.startContainer.childNodes[a.startOffset];b||(b=a.startContainer);for(var c=tinymce.activeEditor.dom;b&&(1!=b.nodeType||"a"!=b.nodeName.toLowerCase()||c.hasClass(b,"unlinked")||c.hasClass(b,"jive_macro"));)b=b.parentNode;return b}tinymce.create("tinymce.plugins.JiveLinkPlugin",{getInfo:function(){return{longname:"Content Picker",author:"Jive Software",authorurl:"http://www.jivesoftware.com",infourl:"http://www.jivesoftware.com/",version:"1.0"}},init:function(a,b){this.ed=a;var c=this;a.onSetContent.add(function(){tinymce.each(a.dom.select("a"),function(a){c.prepOrigContent(a)})}),a.onBeforeGetContent.add(function(){tinymce.each(a.dom.select("a"),function(b){a.dom.removeClass(b,"active_link");var c=a.plugins.jivemacros.getMacroFor(b);if(null!=c&&"INLINE"==c.getMacroType()){var d=a.dom.getAttrib(b,"data-orig-content");d&&d!=b.innerHTML&&a.dom.setAttrib(b,"_modifiedtitle","true")}}),this.lastActive=null},this),a.addShortcut("ctrl+k","jivelink.link_desc","mceJiveLink"),a.onNodeChange.add(this.nodeChanged,this),a.onInit.add(function(){c.ready=!0,c.completeInit(),tinymce.isIE9&&a.execCommand("AutoUrlDetect",!1,!1)})},prepOrigContent:function(a){if(!this.ed.dom.getAttrib(a,"data-orig-content")){var b=this.ed.plugins.jivemacros.getMacroFor(a);if(null!=b&&"INLINE"==b.getMacroType()){var c=a.innerHTML;this.ed.dom.setAttrib(a,"data-orig-content",c)}}},setRTE:function(a){this.rte=a,this.completeInit()},completeInit:function(){function c(a,b){k.show(d,b,null,null)}if(this.rte&&this.ready&&!this.initialized&&this.rte.getLinkService()){this.initialized=!0;var d=this.ed,e=d.dom,f=this;if(d.plugins.paste.onPasteComplete.add(function(){tinymce.each(e.select("a.loading",d.getBody()),function(a){e.removeClass(a,"loading"),f.resolveLink(a)})}),d.plugins.jivecontextmenu){var g=d.plugins.jivecontextmenu,h=new g.MenuItem("unlinkItem",a,d.getLang("jivelink.unlink"),{url:CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/img/iconmaster.gif",xOffset:340,yOffset:90,width:28,height:21},"jiveLinkUnlink"),i=new g.MenuItem("bareUrlLinkItem",b,d.getLang("jivelink.bareUrl"),{url:CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/img/iconmaster.gif",xOffset:368,yOffset:90,width:28,height:21},"jiveBareUrlLink"),j=new g.MenuItem("autoResolveLinkItem",b,d.getLang("jivelink.autoResolve"),{url:CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/img/iconmaster.gif",xOffset:396,yOffset:90,width:28,height:21},"jiveAutoResolveLink"),k=new g.Menu([h,i,j],!0,!1,d.getLang("jivelink.menu_hdr")),l=new g.MenuItem("jiveLinkItem",a,null,{url:CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/img/iconmaster.gif",xOffset:30,yOffset:0,width:24,height:22},c);g.addRootItem(l)}}},resolveLink:function(a){var b=this.ed,c=b.dom;if(!c.hasClass(a,"jive_macro_appEmbeddedView")){var d=c.getAttrib(a,"href");d=b.convertURL(d);var e=this.rte.getLinkService();e.resolve(d).addCallback(function(d){var e,f;f=b.selection.getBookmark(),d.macroName?(c.setAttrib(a,"href","javascript:;"),c.setAttrib(a,"title",d.title),c.setAttrib(a,"___default_attr",d.value),c.setAttrib(a,"jivemacro",d.macroName),d.isCustomTitle&&c.setAttrib(a,"_modifiedtitle","true"),a.className="jive_macro jive_macro_"+d.macroName,e=d.title):(c.setAttrib(a,"href",d.value),c.setAttrib(a,"title",d.value),a.className="",e=d.title),e.length>120&&(e=e.substring(0,120)+"…"),a.innerHTML="",a.appendChild(b.getDoc().createTextNode(e));var g=b.getDoc().createTextNode(" ");a.parentNode.insertBefore(g,a.nextSibling),b.nodeChanged(),b.selection.moveToBookmark(f)}).addErrback(function(a){})}},createControl:function(a,b){switch(a){case"jivelink":var c=b.createButton("jivelink",{title:"jivelink.link_desc",cmd:"mceJiveLink"});return c}return""},execCommand:function(c,d,e){var f,g=tinyMCE.activeEditor,h=g.dom;switch(c){case"mceJiveLink":var i=!1,j=g.selection.getContent(),k=g.selection.getNode();return f=h.getParent(k,"a"),null!=f?(h.removeClass(f,"active_link"),g.plugins.jivemacros.isExactMacro(f)?g.plugins.jivemacros.deleteMacro(g,f):g.execCommand("unlink"),!0):(g.selection.getNode()&&(i="img"==g.selection.getNode().nodeName.toLowerCase()||j&&j.length>0),g.windowManager.open({url:CS_BASE_URL+"/content-picker!input.jspa?name="+encodeURIComponent(j)+"&instantiatedFromGUIEditor=true",width:700+g.getLang("jivelink.delta_width",0),height:565+g.getLang("jivelink.delta_height",0),inline:"yes"},{editor_id:g.id}),!0);case"jiveLinkUnlink":f=a(g.selection.getRng(!0));var l=/^https?:\/\/(?:[^:]+:[^@])?[\w\.]+(?::\d+)?\S*$/,m=f.textContent||f.innerText;return 1==f.childNodes.length&&3==f.firstChild.nodeType&&l.test(m)?(h.addClass(f,"unlinked"),h.setAttrib(f,"href",null),!0):(h.remove(f,!0),!0);case"jiveBareUrlLink":f=b(g.selection.getRng(!0));var n=h.getAttrib(f,"href",null);return h.remove(f.childNodes,!1),f.appendChild(document.createTextNode(n)),!0;case"jiveAutoResolveLink":return f=b(g.selection.getRng(!0)),this.resolveLink(f),!0}return!1},lastActive:null,nodeChanged:function(a,b,c,d){function e(a){for(var b,c=a.childNodes.length,d=0;c>d;d++)if(b=a.childNodes[d],b&&1===b.nodeType&&"img"===b.nodeName.toLowerCase())return!1;return!0}if(null!=c){var f=a.dom.getParent(c,"a"),g=a.controlManager.get("jivelink");if(null!=f){f.textContent||f.innerText;if(0===f.length&&e(f))return void a.dom.remove(f);g&&g.setActive(!0),this.prepOrigContent(f)}else{g&&g.setActive(!1);var h=this;tinymce.each(a.dom.select("a",c.parentNode),function(a){h.prepOrigContent(a)})}null!=this.lastActive&&this.lastActive!=c&&(a.dom.removeClass(this.lastActive,"active_link"),this.lastActive=null),f&&null==this.lastActive&&(this.lastActive=f,a.dom.addClass(this.lastActive,"active_link"));var i=a.plugins.jivemacros.getMacroFor(c);null!=i&&"INLINE"==i.getMacroType()&&(null!=this.lastActive&&this.lastActive==c||(this.lastActive=a.plugins.jivemacros.isMacro(c),a.dom.addClass(this.lastActive,"active_link")))}}}),tinymce.PluginManager.add("jivelink",tinymce.plugins.JiveLinkPlugin)}()}),define("tiny_mce3/plugins/jivelink/editor_plugin_src",["tinyMCE"],function(){}),define("tiny_mce3/plugins/jiveimage/editor_plugin_src",["tinyMCE","jquery-private","jquery-plugin/jquery.form","domReady!"],function(){!function(a){function b(a){return tinymce.dom.Event.cancel(a)}function c(a){var b=a.selection.getSel();if(null!=b.rangeCount&&b.rangeCount<1){var c=a.dom.createRng();c.setStart(a.getBody(),a.getBody().childNodes.length),c.collapse(!0),a.selection.setRng(c)}}function d(b,c){var d=function(b){if(b&&b.length>0){var c=b.get(0).classList;if(c){var d;return a.each(c,function(a,b){return/^image-/.test(b)?(d=b,!1):void 0}),d}}},e=d(b);if(e)return e;var f=a(c.contentWindow.document).find(".jive-image"),g=0;return a.each(f,function(b,c){var e=d(a(c));if(e){var f=Number(e.split("-")[1]);f>g&&(g=f)}}),g++,e="image-"+g,b.addClass(e),e}function e(b){var c=tinymce.activeEditor,e=c.dom.create("img");return d(a(e),c),a(e).attr("src",b.url).attr("alt",b.name).css({"max-width":n+"px",height:"auto"}).addClass("jive-image")}function f(a){var b=tinymce.activeEditor,c=b.selection.getRng(!0),d=b.selection.getBookmark();a.each(function(){c.insertNode(this),b.nodeChanged()}),b.selection.moveToBookmark(d)}function g(a,d){function e(a){null!=p&&(clearTimeout(p),p=null),a||(p=setTimeout(function(){f(),p=null},550))}function f(){q=!1}function g(a){return q=!0,e(!1),d.dragstart?d.dragstart.call(this,a):void 0}function i(a){return q=!0,e(!1),d.drag?d.drag.call(this,a):void 0}function j(a){return e(!1),q?void 0:(d.dragenter&&d.dragenter.call(this,a),r.show(),b(a))}function k(a){e(!1);var b;return q||(d.dragleave&&(b=d.dragleave.call(this,a)),r.hide()),"undefined"!=typeof b?b:void 0}function l(f){return e(!1),q?void 0:(d.dragover&&d.dragover.call(this,f),c(a),r.keepShowing(),b(f))}function m(a){return e(!0),f(),d.dragend?d.dragend.call(this,a):void 0}function n(a){e(!0),r.hide();var b;return!q&&d.drop&&(b=d.drop.call(this,a)),f(),"undefined"!=typeof b?b:void 0}function o(b,c){a.dom.bind(a.getDoc(),b,c)}var p=null,q=!1,r=new h(a);o("dragstart",g),o("drag",i),o("dragenter",j),o("dragover",l),o("dragleave",k),o("dragend",m),o("drop",n),this.reset=f,this.hideDropPos=function(){r.hide()}}function h(b){function d(a){null!=g&&(clearTimeout(g),g=null),a||(g=setTimeout(function(){f(b),g=null},100))}function e(b){var d=a(".js-dropPosition",b.getBody());if(0==d.length){c(b);var e=b.selection.getRng(!0);e.collapse(!0);var f=b.dom.create("img");d=a(f).attr("src",l).addClass("js-dropPosition"),e.insertNode(f)}return d}function f(b){a(".js-dropPosition",b.getBody()).remove()}var g=null;tinymce.isGecko?(this.show=function(){return d(!1),e(b)},this.keepShowing=function(){this.show()},this.hide=function(){d(!0),f(b)}):(this.show=function(){return d(!0),e(b)},this.keepShowing=function(){this.show()},this.hide=function(){d(!1)})}function i(b,c,e,f){function g(b){a(f.getBody()).find("."+k).attr("src",b.url).attr("data-mce-src",b.url)}function h(){c.remove()}function i(){var a=m.exec(c.attr("src"));a&&c.remove()}var k=d(c,f),l=e.getImageService(),o=new jive.conc.Promise;return l.scaleClientImage(b.url).addCallback(function(d){var k=m.exec(d);if(k){var p=k[1];if(k=/\.([^\.]+)$/.exec(b.name),k&&j[p]){var q=k[1];q=q.toLowerCase(),a.inArray(q,j[p])<0&&(b.name+="."+j[p][0])}else b.name+="."+j[p][0]}var r=e.getFormService(),s=r.setFormEnabled(!1,f.getLang("jiveimage.please_wait"));b.url=d,g(b),l.create(b.name,b.url).then(function(b){c.load(function(){var b=a(this);b.css({width:"auto",height:"auto","max-width":"","max-height":""});var c=b.width(),d=b.height();if(c>n){var e=n/c;b.css({width:Math.round(e*c)+"px",height:Math.round(e*d)+"px"})}}),g(b),o.emitSuccess(c.get(0))}).addErrback(function(){h(),o.emitError()}).always(function(){i(),r.setFormEnabled(s)})}),o}var j={"image/png":["png"],"image/jpeg":["jpg","jpeg"],"image/gif":["gif"],"image/bmp":["bmp"]},k=CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/skins/default/img/progress.gif",l=CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/skins/default/img/dropPosition.png",m=/^data:(image\/[^;,]+)[^,]*,/,n=620;tinymce.create("tinymce.plugins.JiveImagePlugin",{getInfo:function(){return{longname:"Image Picker",author:"Jive Software",authorurl:"http://www.jivesoftware.com",infourl:"http://www.jivesoftware.com/",version:"1.0"}},uploadClientImage:function(b,c){return c=a(c),i({url:c.attr("src"),name:b},c,this.rte,this.ed)},init:function(a){this.ed=a;var b=this;a.onInit.add(function(){function c(b){var c=b.startContainer.childNodes[b.startOffset];for(c||(c=b.startContainer);c&&(1!=c.nodeType||a.dom.is(c,".jive_macro")||!a.dom.is(c,"img"));)c=c.parentNode;return c}if(a.settings.images_enabled){if(a.plugins.jivecontextmenu){var d=a.plugins.jivecontextmenu,e=new d.MenuItem("floatLeftItem",null,a.getLang("jiveimage.float_left"),{url:CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/img/iconmaster.gif",xOffset:172,yOffset:90,width:28,height:21},"jiveImgFloatLeft"),f=new d.MenuItem("inlineItem",null,a.getLang("jiveimage.inline"),{url:CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/img/iconmaster.gif",xOffset:144,yOffset:90,width:28,height:21},"jiveImgInline"),g=new d.MenuItem("floatRightItem",null,a.getLang("jiveimage.float_right"),{url:CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/img/iconmaster.gif",xOffset:200,yOffset:90,width:28,height:21},"jiveImgFloatRight"),h=new d.MenuItem("originalSizeItem",null,a.getLang("jiveimage.original_size"),{url:CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/img/iconmaster.gif",
xOffset:165,yOffset:158,width:28,height:21},"jiveImgOriginalSize"),i=new d.Menu([e,f,g,h],!0,!1,a.getLang("jiveimage.menu_hdr")),j=new d.MenuItem("jiveImageItem",c,null,{url:CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/img/iconmaster.gif",xOffset:155,yOffset:0,width:24,height:22},i);d.addRootItem(j)}}else{var k=a.controlManager.get("jiveimage");k&&k.setDisabled(!0)}a.plugins.paste.onPasteComplete.add(function(){tinymce.each(a.dom.select("img.toUpload",a.getBody()),function(c){if(a.dom.removeClass(c,"toUpload"),c.src&&c.src.length>0){var d=a.dom.uniqueId("pastedImage_");b.uploadClientImage(d,c)}else a.dom.remove(c)})})},this)},setRTE:function(a){function b(a){var b=a.dataTransfer.files;if(b.length>0)for(var c=0;c<b.length;++c)if(/^image\//.test(b[c].type))return a.preventDefault(),!1}var c=this.ed;if(this.rte=a,a.getImageService()&&a.getFormService()&&!c.settings.rte_image_webonly){$def(window.FileReader)?this.initDragDrop():$def(window.FormData)&&this.initDragCatch();var d=a.getImageService().getSettings();this.objectId=d.objectId,this.objectType=d.objectType}else c.dom.bind(c.getDoc(),"drop",b)},initDragDrop:function(){function c(a){var b=e({name:a.name,url:k});f(b);var c=new FileReader;c.onloadend=function(c){var d=c.target.result,e={name:a.name,url:d};i(e,b,r.rte,q).addCallback(function(){self.parent.document.querySelector('[type="submit"]')&&(self.parent.document.querySelector('[type="submit"]').disabled=!1),r.rte.notifyOnChange()})},c.onerror=function(a){self.parent.document.querySelector('[type="submit"]')&&(self.parent.document.querySelector('[type="submit"]').disabled=!1)},c.onprogress=function(a){self.parent.document.querySelector('[type="submit"]')&&(self.parent.document.querySelector('[type="submit"]').disabled=!0)},c.readAsDataURL(a)}function d(a,b){for(var c=a.toString(16);c.length<b;)c="0"+c;return c}function h(a){for(var b=[],c=0;c<a.length;++c){var e=a.charCodeAt(c),f=255&e,g=e>>8;b.push("%"+d(f,2)+"%"+d(g,2))}return decodeURIComponent(b.join(""))}function j(a){for(var b="",c=null,d=null,e=0;e<a.length;++e)null===c?c=a.charCodeAt(e):(d=a.charCodeAt(e),b+=String.fromCharCode(d<<8|c),c=null);return b}function l(a){for(var b="",c=null,d=null,e=0;e<a.length;++e)null===d?d=a.charCodeAt(e):(c=a.charCodeAt(e),b+=String.fromCharCode(d<<8|c),d=null);return b}function m(a,b){var c=0,d=0;do c=a.indexOf(b,c)+1,++d;while(c>0);return--d,d}function n(a){for(var b=0,c=0,d=0;d<a.length;++d)0==a.charCodeAt(d)&&(d%2==0?++c:++b);return b/c}function o(a){var b=m(a,"<"),c=m(a,">");if(Math.abs(b-c)<=1||Math.abs(1-b/c)<.05){if(0==b&&0==c){var d=h(a);return b=m(d,"<"),c=m(d,">"),b>0&&c>0&&(Math.abs(b-c)<=1||Math.abs(1-b/c)<.05)?d:a}if(a.length%2==0){var e=m(a,"\x00");return 2>e||e/a.length<.02?a:n(a)>=1?j(a):l(a)}return a}return h(a)}function p(d){var e=d.dataTransfer.files;if(e.length>0)for(var f=0;f<e.length;++f)/^image\//.test(e[f].type)&&c(e[f]);else if(a.inArray("text/html",d.dataTransfer.types)>=0){var g=o(d.dataTransfer.getData("text/html"));q.execCommand("mceInsertClipboardContent",!1,{content:g})}else if(a.inArray("text/plain",d.dataTransfer.types)>=0){var h=a("<div></div>").text(d.dataTransfer.getData("text/plain")).html();q.execCommand("mceInsertClipboardContent",!1,{content:h})}return b(d)}var q=this.ed,r=this;new g(q,{drop:p})},initDragCatch:function(){function b(b){function c(b){l.load(function(){var b=a(this);b.css({width:"auto",height:"auto","max-width":"","max-height":""})}).attr("src",b.url)}function d(){l.remove()}var g=j.rte.getImageService(),i={name:b.name,url:k},l=e(i);f(l);var m=j.rte.getFormService(),n=m.setFormEnabled(!1,h.getLang("jiveimage.please_wait"));g.postFile(b).addCallback(c).addErrback(d).always(function(){m.setFormEnabled(n)})}function c(a){l.show().css({left:a.clientX+i.lastScrollX-50+"px",top:a.clientY+i.lastScrollY-50+"px"})}function d(){l.hide()}var h=this.ed,i=h.plugins.jivescroll,j=this,l=a("<div></div>").css({width:"100px",height:"100px",position:"absolute",top:"0",left:"0"}).hide(),m=a("<form method='POST' name='fileForm' enctype='multipart/form-data' target='asyncIframe'></form>").css({width:"100%",height:"100%"});l.append(m);var n=a("<input type='file' name='fileInputCtrl' multiple='true' />").css({opacity:"0",width:"100%",height:"100%"}).attr("class","fileMouseCatch");m.append(n);var o=j.rte.getPopOverContainer();o.append(l);var p=new g(h,{dragover:c,dragleave:d});n.change(function(){l.hide(),p.hideDropPos(),p.reset(),a.each(n.get(0).files,function(){/^image\//.test(this.type)&&b(this)}),n.val(""),this.blur(),h.focus()}).bind("click keydown",function(){return l.hide(),this.blur(),!1})},createControl:function(a,b){switch(a){case"jiveimage":var c=b.createButton("jiveimage",{title:"jiveimage.link_desc",cmd:"mceJiveImage"});return c}return""},execCommand:function(b,c,d){var e,f=this.ed,g="rtl"==document.querySelector("body[dir]")?"right":"left",h="rtl"==document.querySelector("body[dir]")?"left":"right";switch(b){case"mceJiveImage":return f.settings.rte_image_modal_url?f.windowManager.open({url:CS_BASE_URL+tinymce.settings.rte_image_modal_url,width:580+f.getLang("jiveimage.delta_width",0),height:385+f.getLang("jiveimage.delta_height",0),inline:"yes"},{editor_id:f.id,cs_resource_base_url:CS_RESOURCE_BASE_URL,objectId:this.objectId,objectType:this.objectType}):f.execCommand("mceAdvImage"),!0;case"jiveInsertImage":return this.insertImage(d),!0;case"jiveImgFloatLeft":return e=f.selection.getNode(),/^img$/i.test(e.nodeName)&&(a(e).removeClass("j-img-floatend j-img-original").addClass("j-img-floatstart"),f.dom.setStyle(e,"float",g),f.dom.setStyle(e,"margin-left",""),f.dom.setStyle(e,"margin-right","")),!0;case"JustifyLeft":return e=f.selection.getNode(),/^img$/i.test(e.nodeName)?(a(e).removeClass("j-img-floatend j-img-original").addClass("j-img-floatstart"),f.dom.setStyle(e,"float",g),f.dom.setStyle(e,"margin-left",""),f.dom.setStyle(e,"margin-right",""),!0):!1;case"jiveImgFloatRight":return e=f.selection.getNode(),/^img$/i.test(e.nodeName)&&(a(e).removeClass("j-img-floatstart j-img-original").addClass("j-img-floatend"),f.dom.setStyle(e,"float",h),f.dom.setStyle(e,"margin-left",""),f.dom.setStyle(e,"margin-right","")),!0;case"JustifyRight":return e=f.selection.getNode(),/^img$/i.test(e.nodeName)?(a(e).removeClass("j-img-floatstart j-img-original").addClass("j-img-floatend"),f.dom.setStyle(e,"float",h),f.dom.setStyle(e,"margin-left",""),f.dom.setStyle(e,"margin-right",""),!0):!1;case"JustifyCenter":return e=f.selection.getNode(),/^img$/i.test(e.nodeName)?(a(e).removeClass("j-img-floatstart j-img-floatend j-img-original"),f.dom.setStyle(e,"float",""),f.dom.setStyle(e,"margin-left","auto"),f.dom.setStyle(e,"margin-right","auto"),f.dom.setStyle(e,"display","block"),!0):!1;case"jiveImgInline":return e=f.selection.getNode(),/^img$/i.test(e.nodeName)&&(a(e).removeClass("j-img-floatstart j-img-floatend j-img-original"),f.dom.setStyle(e,"float",""),f.dom.setStyle(e,"display",""),f.dom.setStyle(e,"margin-left",""),f.dom.setStyle(e,"margin-right","")),!0;case"jiveImgOriginalSize":return e=f.selection.getNode(),/^img$/i.test(e.nodeName)&&(a(e).removeClass("j-img-floatstart j-img-floatend").addClass("j-img-original"),f.dom.setStyle(e,"width",""),f.dom.setStyle(e,"height",""),f.dom.setStyle(e,"float",""),f.dom.setStyle(e,"display",""),f.dom.setAttrib(e,"width",null),f.dom.setAttrib(e,"height",null)),!0}return!1},insertImage:function(b){var c=this.ed,d=(c.dom,b.url);b.url=k;var g=e(b);g.load(function(){var b=a(this);b.css({"max-width":"","max-height":""}),tinymce.isIE&&b.attr("width")&&b.attr("height")&&b.removeAttr("width").removeAttr("height");var c=b.width(),d=b.height();if(c>n){var e=n/c;b.css({width:Math.round(e*c)+"px",height:Math.round(e*d)+"px"})}}).attr("src",d),f(g)},handleNodeChange:function(a,b,c,d,e,f){if(null!=b){do if("IMG"==b.nodeName&&""!=tinymce.getAttrib(b,"src"))return tinymce.switchClass(a+"_jiveimage","mceButtonSelected"),!0;while(b=b.parentNode);return f?(tinymce.switchClass(a+"_jiveimage","mceButtonNormal"),!0):(tinymce.switchClass(a+"_jiveimage","mceButtonDisabled"),!0)}}}),tinymce.PluginManager.add("jiveimage",tinymce.plugins.JiveImagePlugin)}(jQuery)}),define("tiny_mce3/plugins/jiveimage/editor_plugin_src",["tinyMCE","jquery","jquery-plugin/jquery.form","domReady!"],function(){}),define("tiny_mce3/plugins/jivequote/editor_plugin_src",["tinyMCE","soy!jive.DiscussionApp.soy.rteMsgQuote","soy!jive.i18n.keys.postGuestWroteLabel","soy!jive.i18n.keys.postUserWroteLabel"],function(){!function(){tinymce.create("tinymce.plugins.JiveQuotePlugin",{getInfo:function(){return{longname:"Jive Quote Button",author:"Jive Software",authorurl:"http://www.jivesoftware.com",infourl:"http://www.jivesoftware.com/",version:"1.0"}},createControl:function(a,b){switch(a){case"jivequote":var c=b.createButton("jivequote",{title:"jivequote.link_desc",cmd:"mceJiveQuote"});return c}return""},execCommand:function(a,b,c){function d(a){if("a"==a.nodeName.toLowerCase()&&a.firstChild&&"img"==a.firstChild.nodeName.toLowerCase())a.parentNode.insertBefore(a.firstChild,a),a.parentNode.removeChild(a);else for(var b=0;b<a.childNodes.length;b++)d(a.childNodes[b])}switch(a){case"mceJiveQuote":var e=tinyMCE.activeEditor,f=e.selection,g=null,h=f.isCollapsed();e.undoManager.add();var j=e.plugins.jiveutil.findMacro("quote");g=e.plugins.jivemacros.insertMacro(e,j);var k=window._jive_gui_quote_text.replace(/&nbsp;/g,"");if(g&&$def(k)&&k.length>0&&h){for(;g.childNodes.length>0;)g.removeChild(g.childNodes[0]);var l=e.getDoc().createElement("DIV");if(l.innerHTML=k,l.childNodes.length>0)for(i=0;i<l.childNodes.length;i++)if(1==l.childNodes[i].nodeType)for(var m=l.childNodes[i],n=m.childNodes[0];n.childNodes.length>0;)if("jive-quote-header"==n.childNodes[0].className){var o=e.getDoc().createElement("P");o.appendChild(n.childNodes[0].childNodes[0]),g.appendChild(o),g.appendChild(e.plugins.jivemacros.createEmptyPara()),n.removeChild(n.childNodes[0]),n.removeChild(n.childNodes[0]),n.removeChild(n.childNodes[0])}else d(n.childNodes[0]),g.appendChild(n.childNodes[0]);0==g.childNodes.length&&g.appendChild(e.plugins.jivemacros.createEmptyPara()),e.selection.select(g.nextSibling?g.nextSibling:g),e.selection.collapse(!0),e.selectionUtil.normalizeSelection()}return setTimeout(function(){e.focus()},10),e.undoManager.add(),!0}return!1}}),tinymce.PluginManager.add("jivequote",tinymce.plugins.JiveQuotePlugin)}()}),define("tiny_mce3/plugins/jivequote/editor_plugin_src",["tinyMCE","soy!jive.DiscussionApp.soy.rteMsgQuote","soy!jive.i18n.keys.postGuestWroteLabel","soy!jive.i18n.keys.postUserWroteLabel"],function(){}),define("tiny_mce3/plugins/jiveutil/editor_plugin_src",["tinyMCE","jquery-private"],function(){!function(a){tinymce.create("tinymce.plugins.JiveUtilPlugin",{getInfo:function(){return{longname:"Jive Utility Plugin",author:"Jive Software",authorurl:"http://www.jivesoftware.com",infourl:"http://www.jivesoftware.com/",version:"1.0"}},findMacro:function(a){var b=jive.rte.macros,c=this.findMacroIndex(a);return null!=c?b[c]:null},findMacroIndex:function(a){for(var b=jive.rte.macros,c=0;c<b.length;++c)if(b[c].getName()==a)return c;return null},findColumnBoundsForCell:function(b){var c=[],d=b.closest("table"),e=0;return b.prevAll("td,th").addBack().each(function(b,c){var d=a(c).attr("colspan");e+=d?parseInt(d):1}),d.find("tr").each(function(){var b=0;a(this).find("td, th").each(function(d,f){var g=a(f).attr("colspan");return b+=g?parseInt(g):1,b>=e?(c.push(f),!1):void 0})}),a(c)},findColumnFirstCell:function(a){return this.findColumnCellInRow(a,!0)},findColumnLastCell:function(a){return this.findColumnCellInRow(a,!1)},findColumnCellInRow:function(b,c){var d=[],e=b.closest("table"),f=0;b.prevAll("td,th").addBack().each(function(b,c){var d=a(c).attr("colspan");f+=d?parseInt(d):1});var g=e.find("tr").filter(function(){return this.childNodes.length>0});g=c?g.first():g.last();var h=0;return g.find("td, th").each(function(b,c){var e=a(c).attr("colspan");return h+=e?parseInt(e):1,h>=f?(d.push(c),!1):void 0}),a(d)},convertRGBToHex:function(b){return b=b.substr(b.indexOf("(")+1),b=b.substr(0,b.length-1),b=b.split(","),b[0]=parseInt(a.trim(b[0])).toString(16),b[1]=parseInt(a.trim(b[1])).toString(16),b[2]=parseInt(a.trim(b[2])).toString(16),1==b[0].length&&(b[0]="0"+b[0]),1==b[1].length&&(b[1]="0"+b[1]),1==b[2].length&&(b[2]="0"+b[2]),3==b.length||b[3]>0?("#"+b[0]+b[1]+b[2]).toUpperCase():""},shouldEncodeHuh:function(a,b){var c=a.dom.getParent(b,function(b){return b==a.getBody()||a.plugins.jivemacros.isMacro(b)});if(a.plugins.jivemacros.isMacro(c)||(c=null),null!=c){var d=a.plugins.jivemacros.getMacroFor(c);if(d&&"code"==d.getName())return!1}return!0},walkDOMTreeKids:function(a,b,c){if(c(a),a==b)return!0;for(var d=0;d<a.childNodes.length;d++)if(this.walkDOMTreeKids(a.childNodes[d],b,c))return!0;return!1},walkDOMTree:function(a,b,c){function d(a){return 1==a.nodeType&&"body"==a.nodeName.toLowerCase()?a:null==a.parentNode.nextSibling?d(a.parentNode):a.parentNode.nextSibling}if(this.walkDOMTreeKids(a,b,c))return!0;for(;null!=a.nextSibling;)if(a=a.nextSibling,this.walkDOMTreeKids(a,b,c))return!0;var e=d(a);return 1==e.nodeType&&"body"==e.nodeName.toLowerCase()?!0:this.walkDOMTree(e,b,c)},textLengthIn:function(a){var b=0;return this.walkDOMTreeKids(a,null,function(a){3==a.nodeType&&(b+=a.nodeValue.length)}),b},getNodeAt:function(a,b){if(0==b)return a;if(1!=a.nodeType)return null;for(var c=0;c<a.childNodes.length;c++){var d=this.textLengthIn(a.childNodes[c]);if(0==b)return a.childNodes[c];if(d>b){var e=this.getNodeAt(a.childNodes[c],b);return null==e?a:e}b-=d}return null},arrayEquals:function(a,b){if(a===b)return!0;if(null==a||null==b||a.length!==b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!==b[c])return!1;return!0},clone:function(a,b){for(var c=/ jQuery\d+="(?:\d+|null)"/g,d=/^\s+/,e=a.map(function(a){return function(){if(jQuery.support.noCloneEvent||jQuery.isXMLDoc(this))return this.cloneNode(!0);var b=this.outerHTML;if(!b){var e=a.createElement("div");e.appendChild(this.cloneNode(!0)),b=e.innerHTML}return jQuery.parseHTML(b.replace(c,"").replace(d,""),a)}}(b)),f=["font-family","font-size","font-weight","font-style","text-transform","text-decoration","letter-spacing","word-spacing","line-height","text-align","vertical-align","direction","width","height","margin-top","margin-right","margin-bottom","margin-left","padding-top","padding-right","padding-bottom","padding-left","border-top-width","border-right-width","border-bottom-width","border-left-width","border-top-style","border-right-style","border-bottom-style","border-left-style","overflow-x","overflow-y","white-space","clip","list-style-image","list-style-position","list-style-type","marker-offset"],g=0;g<f.length;g++){var h=f[g],i=a.css(h);!i||"width"==h&&"0px"==i||e.css(h,a.css(h))}return e}}),tinymce.PluginManager.add("jiveutil",tinymce.plugins.JiveUtilPlugin)}(jQuery)}),define("tiny_mce3/plugins/jiveutil/editor_plugin_src",["tinyMCE","jquery"],function(){}),define("tiny_mce3/plugins/jiveselection/editor_plugin_src",["tinyMCE"],function(){!function(){function a(a){return a&&3==a.nodeType}function b(b){return b&&b.c&&a(b.c)}function c(a){return b(a)?a.off==a.c.nodeValue.length:a.off==a.c.childNodes.length}function d(a){var d=g(a);return b(a)&&!c(a)||d&&"br"==d.nodeName.toLowerCase()}function e(a){return a=a.toLowerCase(),function(b){var c=g(b);return c&&c.nodeName&&c.nodeName.toLowerCase()==a}}function f(a){return a=a.toLowerCase(),function(b){return b&&1==b.c.nodeType&&b.c.nodeName.toLowerCase()==a}}function g(a){return a&&a.c&&a.off>=0&&a.c.childNodes&&a.c.childNodes.length>a.off?a.c.childNodes[a.off]:null}function h(a){return a&&a.c&&a.c.nodeValue&&d(a)?a.c.nodeValue.charAt(a.off):null}function i(a){var b=tinymce.activeEditor.dom;return{c:a.parentNode,off:b.nodeIndex(a)}}function j(a,b){a.setStart(b.c,b.off)}function k(a){return{c:a.startContainer,off:a.startOffset}}tinymce.create("tinymce.plugins.JiveSelectionPlugin",{init:function(l,m){function n(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10),56320+(1023&a))):String.fromCharCode(a)}function o(a){var b=a.c.parentNode;return 3==a.c.nodeType&&a.c.nodeValue.length==a.off&&"a"==b.nodeName.toLowerCase()&&a.c==b.lastChild}function p(a){return function(c,e){if(!tinymce.isIDevice){var f=c.selection.getRng(),i=k(f);if(f.collapsed&&e.charCode>31&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&a(i)){var j=n(e.charCode);do i=c.selectionUtil.dfsNext(i,!1);while(i&&!d(i));" "==j&&/[ \xa0]/.test(h(i))&&(j=" ");for(var l=c.getDoc().createTextNode(j),m=k(f);b(m);)m=c.selectionUtil.dfsNext(m,!0);m.c.insertBefore(l,g(m)),f.setStart(l,j.length),f.collapse(!0),c.selectionUtil.setSelection(f,!0),e.preventDefault()}}}}function q(a,b){s.isSelectionFrozen=!1}function r(a){return 1==a.c.nodeType}this.ed=l,this.isSelectionFrozen=!1;var s=this;l.onFormatChange.add(function(a,b){a.inline&&!b&&(s.isSelectionFrozen=!0)}),l.onNodeChange.addToTop(function(a,b,c){s.isSelectionFrozen||a.selectionUtil.normalizeSelection()}),l.onKeyDown.add(q),l.onMouseDown.add(q),tinymce.isWebKit&&l.onKeyPress.add(p(r));var t=e("a"),u=function(a){return a.off>0?t({c:a.c,off:a.off-1}):!1},v=f("a"),w=function(a){return b(a)&&h(a)===l.plugins.jivemacros.zeroWidthSpace};l.onKeyPress.add(p(o)),l.onKeyDown.add(function(d,e){var f=e.keyCode;if(d.selection.isCollapsed()&&(37==f||39==f||8==f||46==f)){var h=d.selection.getRng(!0),l=k(h),m=d.selectionUtil.dfsNext(l,!0)||l,n=d.selectionUtil.dfsNext(l,!1)||l;w(m)&&(m=d.selectionUtil.dfsNext(m,!0)||m),w(n)&&(n=d.selectionUtil.dfsNext(n,!0)||n);var o=null;if(t(l)||b(l)&&c(l)&&t(m)){var p=t(l)?l:m;39==f?(o={c:g(p),off:0},e.preventDefault()):46==f&&(o={c:g(p),off:0})}else if(v(l)&&0==l.off||0==l.off&&null!==n&&0==n.off&&v(n)){var q=v(l)?l:n;37==f?(o=i(q.c),e.preventDefault()):8==f&&(o=i(q.c))}else if(v(l)&&c(l)||c(m)&&v(m)){var r=v(l)?l:m;39==f?(o=i(r.c),o.off+=1,e.preventDefault(),o&&o.c&&o.c.childNodes&&a(o.c.childNodes[o.off])?(o.c=o.c.childNodes[o.off],w(o)||(o.c.textContent=d.plugins.jivemacros.zeroWidthSpace+o.c.textContent),o.off=1):r&&r.c&&(d.plugins.jivemacros.putCursorAfter(d,r.c),o=null)):46==f&&(o=i(r.c),o.off+=1)}else if(u(l)||u(n)){var s=u(l)?l:n;if(37==f){var x=g({c:s.c,off:s.off-1});o={c:x,off:x.childNodes.length},e.preventDefault()}else 8==f&&(x=g({c:s.c,off:s.off-1}),o={c:x,off:x.childNodes.length})}o&&(j(h,o),h.collapse(!0),d.selection.setRng(h))}})},getInfo:function(){return{longname:"Jive Selection",author:"Jive Software",authorurl:"http://jivesoftware.com",infourl:"http://jivesoftware.com",version:tinyMCE.majorVersion+"."+tinyMCE.minorVersion}}}),tinymce.PluginManager.add("jiveselection",tinymce.plugins.JiveSelectionPlugin)}()}),define("tiny_mce3/plugins/jiveselection/editor_plugin_src",["tinyMCE"],function(){}),define("tiny_mce3/plugins/jivemouse/editor_plugin_src",["tinyMCE","jquery-private"],function(){!function(a){tinymce.create("tinymce.plugins.JiveMousePlugin",{rte:null,$mouseCatch:a("<div></div>"),setRTE:function(a){this.rte=a},init:function(b){var c=this;c.ed=b,this.reset=function(a,b){return function(c,d){a.$mouseCatch.parent().length&&(a.$mouseCatch.css("top",b.plugins.jivescroll.lastScrollY),a.$mouseCatch.css("left",b.plugins.jivescroll.lastScrollX),a.$mouseCatch.css("width",a.rte.getContentAreaWidth()),a.$mouseCatch.css("height",a.rte.getContentAreaHeight()))}}(this,b),b.onInit.add(function(a){c.$mouseCatch.css("position","absolute")},this),b.onScroll.add(this.reset,this),b.theme.onResize.add(function(){c.reset(b.plugins.jivescroll.lastScrollX,b.plugins.jivescroll.lastScrollY)},this),a(window).resize(function(){c.reset(b.plugins.jivescroll.lastScrollX,b.plugins.jivescroll.lastScrollY)})},hideMouseCatch:function(){this.$mouseCatch.remove()},showMouseCatch:function(){var a=this.rte.getPopOverContainer();a.append(this.$mouseCatch),this.reset(this.ed.plugins.jivescroll.lastScrollX,this.ed.plugins.jivescroll.lastScrollY)},getInfo:function(){return{longname:"Jive Mouse",author:"Jive Software",authorurl:"http://jivesoftware.com",infourl:"http://jivesoftware.com",version:tinyMCE.majorVersion+"."+tinyMCE.minorVersion}}}),tinymce.PluginManager.add("jivemouse",tinymce.plugins.JiveMousePlugin)}(jQuery)}),define("tiny_mce3/plugins/jivemouse/editor_plugin_src",["tinyMCE","jquery"],function(){}),define("tiny_mce3/plugins/jivevideo/editor_plugin_src",["tinyMCE","jquery-private"],function(){!function(){tinymce.create("tinymce.plugins.JiveVideoPlugin",{getInfo:function(){return{longname:"Video Picker",author:"Jive Software",authorurl:"http://www.jivesoftware.com",infourl:"http://www.jivesoftware.com/",version:"1.0"}},enabled:[],init:function(a,b){a.onInit.add(function(){var b=["youtube","dailymotion","vimeo","veoh","google","videomacro","kaltura","brightcove","showandshare"],c=0,d=this;if(this.enabled=[],jive.rte.macros.forEach(function(a){b.some(function(b){return b===a.getName()})&&a.isEnabled&&a.isEnabled()&&(c+=1,d.enabled.push(a))}),0==c){var e=a.controlManager.get("jivevideo");e&&e.setDisabled&&e.setDisabled(!0)}},this)},createControl:function(a,b){switch(a){case"jivevideo":var c=b.createButton("jivevideo",{title:"jivevideo.link_desc",cmd:"mceJiveVideo"});return c}return""},execCommand:function(a,b,c){switch(a){case"mceJiveVideo":var d=tinyMCE.activeEditor;return d.windowManager.open({url:CS_BASE_URL+"/upload-video!input.jspa"+_jive_video_picker__url,width:850+parseInt(d.getLang("jivevideo.delta_width",0)),height:700+parseInt(d.getLang("jivevideo.delta_height",0)),inline:1}),!0}return!1}}),tinymce.PluginManager.add("jivevideo",tinymce.plugins.JiveVideoPlugin)}()}),define("tiny_mce3/plugins/jivevideo/editor_plugin_src",["tinyMCE","jquery"],function(){}),define("tiny_mce3/plugins/jivetablebutton/editor_plugin_src",["tinyMCE","jquery-private"],function(){!function(a){tinymce.create("tinymce.plugins.JiveTableButtonPlugin",{$menu:null,cellWidth:0,cellHeight:0,isRtl:null!==document.querySelector('body[dir="rtl"]'),maxWidth:0,maxHeight:0,insertTable:function(a,b,c){var d=1,e="#C6C6C6",f="",g=a.getLang("jivetablebutton.header");"tinymce.jivetablebutton.header"===g&&(g="Header"),f+="<table ",f+='class="jiveBorder" ',f+='border="'+d+'" width="100%" ',f+='style="border: '+d+"px solid "+e+'" ',f+=">",f+="<tbody>",f+="<tr>";for(var h=0;b>h;h++)f+='<th valign="middle" style="text-align:'+("rtl"==a.settings.directionality?"right":"left")+';background-color:#F2F2F2;color:#505050;padding:6px;"><strong>'+g+" "+(h+1)+"</strong></th>";f+="</tr>";var i;i=!tinymce.isIE||tinymce.isIE11?'<td style="padding:6px;"><br mce_bogus="1"/></td>':'<td style="padding:6px;"></td>';for(var j=0;c>j;j++){f+="<tr>";for(var h=0;b>h;h++)f+=i;f+="</tr>"}f+="</tbody>",f+="</table>",a.focus(),this.book&&this.ed.selection.moveToBookmark(this.book),a.undoManager.add(),a.execCommand("mceInsertContent",!1,f),this.book=null,a.addVisual(),a.undoManager.add()},setMenuSize:function(b,c){var d=this.$menu.find(".mceMenu"),e=d.width();this.$menu.is(":visible")||d.children(":not(:nth(0))").remove();for(var f=0;c>f;f++){var g=d.find(".row:nth("+f+")");g.length||(g=a("<div class='row'></div>"),d.append(g));for(var h=g.children().length;b>h;h++){var i=a("<div class='cell'><div class='cellInner'></div></div>");i.css({top:f*this.cellHeight,left:h*this.cellWidth}),g.append(i),this.cellHeight||(this.cellHeight=i.outerHeight(!0)),this.cellWidth||(this.cellWidth=i.outerWidth(!0))}g.width(b*this.cellWidth),g.height(this.cellHeight)}g=a("<div class='row label'></div>"),d.append(g),d.height(c*this.cellHeight+g.outerHeight(!0)),d.width(b*this.cellWidth),this.isRtl&&d.offset({top:d.offset().top,left:d.offset().left-(d.width()-e)}),this.maxWidth=Math.max(this.maxWidth,b),this.maxHeight=Math.max(this.maxHeight,c)},hideMenu:function(){this.$menu&&this.$menu.hide(),this.maxWidth=0,this.maxHeight=0,this.$menu&&this.$menu.find(".blue").width(0).height(0)},resetMenu:function(b){function c(a){return a.originalEvent&&a.originalEvent.touches?a.originalEvent.touches[0].pageX:a.pageX}function d(a){return a.originalEvent&&a.originalEvent.touches?a.originalEvent.touches[0].pageY:a.pageY}function e(a,b){b=Math.max(b,1),a=Math.max(a,1),(b>=f.maxWidth-1||a>=f.maxHeight-1)&&f.setMenuSize(Math.max(b+1,f.maxWidth),Math.max(a+1,f.maxHeight)),f.$menu.find(".label").text(b+" x "+a),f.$menu.find(".blue").width(f.cellWidth*b),f.$menu.find(".blue").height(f.cellHeight*a)}if(!this.$menu){var f=this;this.$menu=a("<div class='defaultSkin'><a href='javascript:' class='tableMenuFocusTarget' tabindex='0' style='position: absolute;'>a</a><div class='mceMenu newTable'><div class='blue'></div></div></div>").css("position","absolute").appendTo(document.body),this.$menu.on("mousemove",function(a){var b=f.$menu.find(".mceMenu").offset(),g=d(a)-b.top,h=c(a)-b.left,i=b.left+f.$menu.find(".mceMenu").width()-c(a),j=Math.floor((g+f.cellHeight)/f.cellHeight),k=Math.floor(((f.isRtl?i:h)+f.cellWidth)/f.cellWidth);return e(j,k),!1}),this.$menu.on("click touchstart",function(a){var e=f.$menu.find(".mceMenu").offset(),g=d(a)-e.top,h=c(a)-e.left,i=e.left+f.$menu.find(".mceMenu").width()-c(a),j=Math.floor((g+f.cellHeight)/f.cellHeight),k=Math.floor(((f.isRtl?i:h)+f.cellWidth)/f.cellWidth);return f.hideMenu(),f.insertTable(b,k,j),!1}).keydown(function(a){var c=f.$menu.find(".blue"),d=c.width()/f.cellWidth,g=c.height()/f.cellHeight;return 37==a.keyCode?(e(g,d-1),!1):38==a.keyCode?(e(g-1,d),!1):39==a.keyCode?(e(g,d+1),!1):40==a.keyCode?(e(g+1,d),!1):13==a.keyCode?(f.hideMenu(),f.insertTable(b,d,g),!1):27==a.keyCode?(f.hideMenu(),f.ed.focus(),f.book&&(f.ed.selection.moveToBookmark(f.book),f.book=null),!1):void 0})}this.$menu.show(),this.setMenuSize(3,3)},init:function(b,c){var d=this;d.ed=b,d.book=null,b.onInit.add(function(){a(b.getContainer()).find("a.mce_jivetablebutton").click(function(){return!1}).keydown(function(a){return 13==a.keyCode?(d.showTableMenu(),d.$menu.find("a.tableMenuFocusTarget").focus(),!1):void 0})},this),a(document.body).click(function(){d.hideMenu()}),b.onClick.add(function(){this.hideMenu()},this)},mceJiveTableMenu:function(b,c,d,e){try{var f=a(b.getContainer()).find("a.mce_jivetablebutton");this.resetMenu(b);var g=f.offset();g.top+=f.height(),this.$menu.css(a.extend({zIndex:1e3},g))}catch(h){for(var i in h);}},createControl:function(a,b){var c=this;switch(a){case"jivetablebutton":var d=b.createButton("jivetablebutton",{title:"tabletoolbar.title",onclick:function(){c.showTableMenu()}});return d}return null},showTableMenu:function(){this.ed.focus(),this.book=this.ed.selection.getBookmark(BOOKMARKTYPE),this.mceJiveTableMenu(this.ed)},getInfo:function(){return{longname:"Jive Table Button",author:"Adam Wulf",authorurl:"http://www.jivesoftware.com",infourl:"",version:"1.0"}}}),tinymce.PluginManager.add("jivetablebutton",tinymce.plugins.JiveTableButtonPlugin)}(jQuery)}),define("tiny_mce3/plugins/jivetablebutton/editor_plugin_src",["tinyMCE","jquery"],function(){}),define("tiny_mce3/plugins/style/editor_plugin_src",["tinyMCE"],function(){!function(){tinymce.create("tinymce.plugins.StylePlugin",{init:function(a,b){a.addCommand("mceStyleProps",function(){a.windowManager.open({file:b+"/props.htm",width:480+parseInt(a.getLang("style.delta_width",0)),height:320+parseInt(a.getLang("style.delta_height",0)),inline:1},{plugin_url:b,style_text:a.selection.getNode().style.cssText,cs_resource_base_url:CS_RESOURCE_BASE_URL})}),a.addCommand("mceSetElementStyle",function(b,c){(e=a.selection.getNode())&&(a.dom.setAttrib(e,"style",c),a.execCommand("mceRepaint"))}),a.onNodeChange.add(function(a,b,c){b.setDisabled("styleprops","BODY"===c.nodeName)}),a.addButton("styleprops",{title:"style.desc",cmd:"mceStyleProps"})},getInfo:function(){return{longname:"Style",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/style",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("style",tinymce.plugins.StylePlugin)}()}),define("tiny_mce3/plugins/style/editor_plugin_src",["tinyMCE"],function(){}),define("tiny_mce3/plugins/table/editor_plugin_src",["tinyMCE","jquery-private"],function(){!function(a){var b=tinymce.each;tinymce.create("tinymce.plugins.TablePlugin",{putCursorInCell:function(a,b){var c=!1;0==b.childNodes.length&&0==b.childNodes.length&&(b.appendChild(a.plugins.jivemacros.createEmptyPara()),c=!0);for(var d=b.childNodes[0],e=b;1==d.nodeType&&d.childNodes.length;)e=d,d=d.childNodes[0];a.selection.select(tinymce.isIE?e:d),a.selection.collapse(!0),c&&b.removeChild(b.childNodes[0])},tempTable:null,fixTable:function(){if(null!=this.tempTable&&$def(this.tempTable)&&this.tempTable.getAttribute("width")){var a=this.tempTable.getAttribute("width");-1==a.indexOf("%")&&(a+="px"),this.tempTable.style.width=a,this.tempTable.removeAttribute("width"),this.tempTable.setAttribute("data-mce-style",this.tempTable.getAttribute("style"))}if(this.tempTable.childNodes.length){var b=this.tempTable.childNodes[0];if(b.childNodes.length){var c=b.childNodes[0];if(c.childNodes.length){var d=c.childNodes[0];if(c.nodeName==d.nodeName&&"tr"==c.nodeName.toLowerCase()){for(;c.childNodes.length;)b.appendChild(c.childNodes[0]);b.removeChild(c)}}}}},fixInvisibleTableBorders:function(a,b){if(1==b.nodeType&&"table"==b.nodeName.toLowerCase())"collapse"==b.style.borderCollapse&&(b.style.borderCollapse="separate",setTimeout(function(){b.style.borderCollapse="collapse"},330));else if(1==b.nodeType)for(var c=0;c<b.childNodes.length;c++)this.fixInvisibleTableBorders(a,b.childNodes[c])},init:function(a,c){var d=this;d.editor=a,d.url=c,b([["table","table.props_desc","mceInsertTable",!0],["delete_table","table.del","mceTableDelete"],["delete_col","table.delete_col_desc","mceTableDeleteCol"],["delete_row","table.delete_row_desc","mceTableDeleteRow"],["col_after","table.col_after_desc","mceTableInsertColAfter"],["col_before","table.col_before_desc","mceTableInsertColBefore"],["row_after","table.row_after_desc","mceTableInsertRowAfter"],["row_before","table.row_before_desc","mceTableInsertRowBefore"],["row_props","table.row_desc","mceTableRowProps",!0],["cell_props","table.cell_desc","mceTableCellProps",!0],["split_cells","table.split_cells_desc","mceTableSplitCells",!0],["merge_cells","table.merge_cells_desc","mceTableMergeCells",!0],["row_up","table.row_up","mceTableRowUp",!0],["row_down","table.row_down","mceTableRowDown",!0],["col_left","table.col_left","mceTableColLeft",!0],["col_right","table.col_right","mceTableColRight",!0]],function(b){a.addButton(b[0],{title:b[1],cmd:b[2],ui:b[3]})}),a.onInit.add(function(){tinymce.isGecko&&a.plugins.table.fixInvisibleTableBorders(a,a.getBody()),a&&a.plugins.contextmenu&&a.plugins.contextmenu.onContextMenu.add(function(b,c,d){var e,f=a.selection,g=f.getNode()||a.getBody();a.dom.getParent(d,"td")||a.dom.getParent(d,"th")?(c.removeAll(),"A"!=g.nodeName||a.dom.getAttrib(g,"name")||(c.add({title:"advanced.unlink_desc",icon:"unlink",cmd:"UnLink"}),c.addSeparator()),"IMG"==g.nodeName&&-1==g.className.indexOf("mceItem")&&(c.add({title:"advanced.image_desc",icon:"image",cmd:a.plugins.advimage?"mceAdvImage":"mceImage",ui:!0}),c.addSeparator()),c.add({title:"table.props_desc",icon:"table_props",cmd:"mceInsertTable",ui:!0}),c.add({title:"table.del",icon:"delete_table",cmd:"mceTableDelete",ui:!0}),c.addSeparator(),e=c.addMenu({title:"table.cell"}),e.add({title:"table.cell_desc",icon:"cell_props",cmd:"mceTableCellProps",ui:!0}),e.add({title:"table.split_cells_desc",icon:"split_cells",cmd:"mceTableSplitCells",ui:!0}),e.add({title:"table.merge_cells_desc",icon:"merge_cells",cmd:"mceTableMergeCells",ui:!0}),e=c.addMenu({title:"table.row"}),e.add({title:"table.row_desc",icon:"row_props",cmd:"mceTableRowProps",ui:!0}),e.add({title:"table.row_before_desc",icon:"row_before",cmd:"mceTableInsertRowBefore"}),e.add({title:"table.row_after_desc",icon:"row_after",cmd:"mceTableInsertRowAfter"}),e.add({title:"table.delete_row_desc",icon:"delete_row",cmd:"mceTableDeleteRow"}),e.addSeparator(),e.add({title:"table.cut_row_desc",icon:"cut",cmd:"mceTableCutRow"
}),e.add({title:"table.copy_row_desc",icon:"copy",cmd:"mceTableCopyRow"}),a.tableRowClipboard&&(e.add({title:"table.paste_row_before_desc",icon:"paste",cmd:"mceTablePasteRowBefore"}),e.add({title:"table.paste_row_after_desc",icon:"paste",cmd:"mceTablePasteRowAfter"})),e=c.addMenu({title:"table.col"}),e.add({title:"table.col_before_desc",icon:"col_before",cmd:"mceTableInsertColBefore"}),e.add({title:"table.col_after_desc",icon:"col_after",cmd:"mceTableInsertColAfter"}),e.add({title:"table.delete_col_desc",icon:"delete_col",cmd:"mceTableDeleteCol"})):null==a.dom.getParent(d,"img")&&c.add({title:"table.desc",icon:"table",cmd:"mceInsertTable",ui:!0,value:{action:"insert"}})})}),a.onKeyUp.add(function(a,b){if(9==b.keyCode&&!b.ctrlKey&&!b.altKey){var c=a.dom.getParent(a.selection.getNode(),"li,td,th,caption");if(null!=c&&"li"!=c.nodeName.toLowerCase()){if(b.shiftKey)if(null!=c.previousSibling)this.putCursorInCell(a,c.previousSibling);else{var d=a.dom.getParent(c,"tr");d.previousSibling?this.putCursorInCell(a,d.previousSibling.cells[d.previousSibling.childNodes.length-1]):this.putCursorInCell(a,c)}else if(null!=c.nextSibling)this.putCursorInCell(a,c.nextSibling);else{var d=a.dom.getParent(c,"tr");d.nextSibling?this.putCursorInCell(a,d.nextSibling.cells[0]):(a.execCommand("mceTableInsertRowAfter"),this.putCursorInCell(a,d.nextSibling.cells[0]))}a.nodeChanged(),tinymce.dom.Event.cancel(b)}}},this),a.onKeyDown.add(function(a,b){if(9!=b.keyCode||b.ctrlKey||b.altKey||!a.dom.getParent(a.selection.getNode(),"TABLE")||a.undoManager.add(),9==b.keyCode&&!b.ctrlKey&&!b.altKey){var c=a.dom.getParent(a.selection.getNode(),"td,th,caption");null!=c&&tinymce.dom.Event.cancel(b)}}),a.onKeyPress.add(function(a,b){if(9==b.keyCode&&!b.ctrlKey&&!b.altKey){var c=a.dom.getParent(a.selection.getNode(),"td,th,caption");null!=c&&tinymce.dom.Event.cancel(b)}}),tinymce.isIE||a.getParam("table_selection",!0)&&a.onClick.add(function(a,b){b=b.target,"TABLE"===b.nodeName&&a.selection.select(b)}),a.onMouseUp.add(function(a,b){var c=a.selection.getNode(),d=a.dom.getParent(c,"table");d&&(a.plugins.table.tempTable=d,"tr"!=b.target.nodeName.toLowerCase()&&"table"!=b.target.nodeName.toLowerCase()||a.plugins.table._doExecCommand("fixMissingCells",d),jive.ext.x.xTimer.set("timeout",a.plugins.table,"fixTable",33))}),a.onMouseUp.add(function(a,b){tinymce.isWebKit&&setTimeout(function(){var b=a.selection.getRng();if(b.collapsed&&"TABLE"===b.startContainer.nodeName){for(var c=b.startContainer,d=c;d.childNodes.length>0;)d=d.childNodes[0];b.setStart(d,0),b.setEnd(d,0),a.selection.setRng(b)}})}),a.onNodeChange.add(function(a,b,c){var d=a.dom.getParent(c,"td,th,caption"),e=a.dom.getParent(c,"td,th");if(e&&a.selection.isCollapsed()){var f=a.dom.getAttrib(e,"colspan"),g=a.dom.getAttrib(e,"rowspan");f=""==f?1:parseInt(f),g=""==g?1:parseInt(g),b.setDisabled("split_cells",1==f&&1==g),b.setDisabled("merge_cells",!(1==f&&1==g))}else e?(b.setDisabled("split_cells",!1),b.setDisabled("merge_cells",!1)):(b.setDisabled("split_cells",!0),b.setDisabled("merge_cells",!0));d&&"CAPTION"===d.nodeName&&(d=null),b.setDisabled("delete_table",!d),b.setDisabled("delete_col",!d),b.setDisabled("delete_table",!d),b.setDisabled("delete_row",!d),b.setDisabled("col_after",!d),b.setDisabled("col_before",!d),b.setDisabled("row_after",!d),b.setDisabled("row_before",!d),b.setDisabled("row_props",!d),b.setDisabled("cell_props",!d)}),tinymce.isIE&&!tinymce.isIE11||a.onBeforeSetContent.add(function(a,b){b.initial&&(b.content=b.content.replace(/<(td|th)([^>]+|)>\s*<\/(td|th)>/g,tinymce.isOpera?"<$1$2>&nbsp;</$1>":'<$1$2><br mce_bogus="1" /></$1>'))}),a.onKeyDown.addToTop(function(a,b){var c=a.selection.getRng(!0);if(c.collapsed)if(39==b.keyCode||40==b.keyCode){var d=a.dom.getParent(c.startContainer,"p");if(d&&a.selectionUtil.isEffectivelyEmpty(d)&&this.isFirst(a.getBody(),d)){for(var e=d.nextSibling;e&&1!=e.nodeType;)e=e.nextSibling;e&&"p"==e.nodeName.toLowerCase()&&(e=e.firstChild),e&&"table"==e.nodeName.toLowerCase()&&setTimeout(function(){d.parentNode.removeChild(d)},0)}}else if(38==b.keyCode){var f=a.dom.getParent(c.startContainer,"td, th");if(f){var g=a.dom.getParent(f,"table");if(this.isFirst(a.getBody(),g)){a.dom.getParent(f,"tr");if(this.isFirst(g,f)){for(var h=a.plugins.jivemacros.createEmptyPara(),i=g;"body"!=i.parentNode.nodeName.toLowerCase();)i=i.parentNode;i.parentNode.insertBefore(h,i)}}}}else if(37==b.keyCode&&tinymce.isWebKit){var f=a.dom.getParent(c.startContainer,"td, th");if(f){var g=a.dom.getParent(f,"table");if(0==c.startOffset&&0==c.endOffset&&this.isFirst(g,f))if(this.isFirst(a.getBody(),g)){for(var h=a.plugins.jivemacros.createEmptyPara(),i=g;"body"!=i.parentNode.nodeName.toLowerCase();)i=i.parentNode;i.parentNode.insertBefore(h,i),c.setStart(h,0),c.setEnd(h,0),a.selection.setRng(c)}else{var i=g.previousSibling;a.selection.select(i)}}}},this)},isFirst:function(a,b){return 0==a.childNodes.length?!1:a.childNodes[0]==b||this.isFirst(a.childNodes[0],b)},execCommand:function(a,b,c){var d=this.editor;switch(a){case"mceInsertTable":case"mceTableRowProps":case"mceTableCellProps":case"mceTableSplitCells":case"mceTableMergeCells":case"mceTableInsertRowBefore":case"mceTableInsertRowAfter":case"mceTableDeleteRow":case"mceTableInsertColBefore":case"mceTableInsertColAfter":case"mceTableDeleteCol":case"mceTableCutRow":case"mceTableCopyRow":case"mceTablePasteRowBefore":case"mceTablePasteRowAfter":case"mceTableDelete":case"JustifyLeft":case"JustifyCenter":case"JustifyRight":case"JustifyFull":case"mceTableRowUp":case"mceTableRowDown":case"mceTableColLeft":case"mceTableColRight":d.execCommand("mceBeginUndoLevel");var e=this._doExecCommand(a,b,c);return-1==e?!1:(e&&(d.execCommand("mceEndUndoLevel"),d.undoManager.add(!1,!0)),!0)}return!1},getInfo:function(){return{longname:"Tables",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/table",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_doExecCommand:function(c,d,e){function f(a,b){for(var c=0;c<a.length;c++){if(a[c].length>0&&f(a[c],b))return!0;if(a[c]==b)return!0}return!1}function g(a,b){var c;D=n(B),a=a||0,b=b||0,a=Math.max(H.cellindex+a,0),b=Math.max(H.rowindex+b,0),v.execCommand("mceRepaint"),c=k(D,b,a),c&&(v.selection.select(c.firstChild||c),v.selection.collapse(1))}function h(){var a=C.createElement("td");return tinymce.isIE&&!tinymce.isIE11||(a.innerHTML='<br mce_bogus="1"/>'),a}function i(a){var b,c=1,d=1;return(b=a.getAttribute("colspan"))&&(c="undefined"!=typeof b.nodeValue?b.nodeValue:b),(b=a.getAttribute("rowspan"))&&(d="undefined"!=typeof b.nodeValue?b.nodeValue:b),c=parseInt(c),d=parseInt(d),{colspan:c,rowspan:d}}function j(a,b){var c,d;for(d=0;d<a.length;d++)for(c=0;c<a[d].length;c++)if(a[d][c]==b)return{cellindex:c,rowindex:d};return null}function k(a,b,c){return a[b]&&a[b][c]?a[b][c]:null}function l(a,b){if("br"==a.nodeName.toLowerCase())return b;if(0==a.childNodes.length)return a;for(var c=0;c<a.childNodes.length;c++)3==a.childNodes[c].nodeType?(a.removeChild(a.childNodes[c]),c--):b=l(a.childNodes[c],a);return 0==a.childNodes.length?a:b}function m(a,b){var c=l(a,a);0==c.childNodes.length?c.appendChild(b):c.insertBefore(b,c.childNodes[c.childNodes.length-1]),v.focus()}function n(a){var b,c,d,e,f,g,h,j=[],k=a.rows;for(c=0;c<k.length;c++)if(0!=k[c].cells.length)for(b=0;b<k[c].cells.length;b++){for(d=k[c].cells[b],e=i(d),f=b;j[c]&&j[c][f];f++);for(h=c;h<c+e.rowspan;h++)for(j[h]||(j[h]=[]),g=f;g<f+e.colspan;g++)j[h][g]=d}else k[c].parentNode.removeChild(k[c]),c--;return j}function o(a,b,c,d){var e,g,h=n(a),l=j(h,c);if(d.cells.length!=b.childNodes.length){e=b.childNodes,g=null;for(var m=0;c=k(h,l.rowindex,m);m++){var o=i(c);if(f(e,c))d.childNodes[m]._delete=!0;else if((null==g||c!=g)&&o.colspan>1)for(var p=m;p<m+c.colSpan;p++)d.childNodes[p]._delete=!0;(null==g||c!=g)&&o.rowspan>1&&(c.rowSpan=o.rowspan+1),1==c.rowSpan&&c.removeAttribute("rowspan"),g=c}r(B)}}function p(a,b){for(;null!=(a=a.previousSibling);)if(a.nodeName==b)return a;return null}function q(a,b){for(var c=b.split(",");null!=(a=a.nextSibling);)for(var d=0;d<c.length;d++)if(a.nodeName.toLowerCase()==c[d].toLowerCase())return a;return null}function r(a){if(0!=a.rows)for(var b=a.rows[0],c=0;c<a.rows.length;c++){var b=a.rows[c];if(b._delete)b.parentNode.removeChild(b),c--;else{var d=b.cells[0];if(d.cells>1)do{var e=q(d,"TD,TH");d._delete&&d.parentNode.removeChild(d)}while(null!=(d=e))}}}function s(a,b,c){a.rowspan=1,a.setAttribute("rowSpan","1"),a.removeAttribute("rowSpan");for(var d=q(b,"TR"),e=1;c>e&&d;e++){var f=C.createElement("td");tinymce.isIE&&!tinymce.isIE11||(f.innerHTML='<br mce_bogus="1"/>'),tinymce.isIE?tinymce.isIE9&&"undefined"==typeof d.cells(a.cellIndex)?d.appendChild(f):d.insertBefore(f,d.cells(a.cellIndex)):d.insertBefore(f,d.cells[a.cellIndex]),d=q(d,"TR")}}function t(a,b,c){for(var d=n(b),e=c.cloneNode(!1),f=j(d,c.cells[0]),g=null,h=(v.dom.getAttrib(b,"border"),null),i=0;h=k(d,f.rowindex,i);i++){var l=null;if(g!=h)for(var m=0;m<c.cells.length;m++)if(h==c.cells[m]){l=h.cloneNode(!0);break}null==l&&(l=a.createElement("td"),tinymce.isIE&&!tinymce.isIE11||(l.innerHTML='<br mce_bogus="1"/>')),l.removeAttribute("colSpan"),l.removeAttribute("rowspan"),e.appendChild(l),g=h}return e}function u(a,b){b&&(a.setAttribute("style",b),a.setAttribute("data-mce-style",a.getAttribute("style")))}var v=this.editor,w=v,x=this.url,y=v.selection.getNode();"undefined"!=typeof e&&"undefined"!=typeof e.cell&&(y=e.cell);var z=v.dom.getParent(y,"tr"),A=v.dom.getParent(y,"td,th");"undefined"!=typeof e&&"undefined"!=typeof e.cell&&(A=e.cell);var B=v.dom.getParent(y,"table"),C=v.contentWindow.document;B?B.getAttribute("border"):"";switch(z&&null==A&&(A=z.cells[0]),c){case"fixMissingCells":for(var D=n(d),E=0,F=0;F<D.length;F++)D[F].length>E&&(E=D[F].length);for(var F=0;F<D.length;F++)D[F].length<E&&d.rows[F].appendChild(h());return!1;case"mceTableRowUp":if(null==z)return!1;if(null!=z.previousSibling){var G=v.selection.getNode();z.parentNode.insertBefore(z,z.previousSibling),G.childNodes.length&&!tinymce.isIE&&(G=G.childNodes[0]),v.selection.select(G),v.selection.collapse(!0),v.nodeChanged(!1,!0)}return!0;case"mceTableRowDown":if(null==z)return!1;if(null!=z.nextSibling){var G=v.selection.getNode();z.parentNode.insertBefore(z.nextSibling,z),G.childNodes.length&&!tinymce.isIE&&(G=G.childNodes[0]),v.selection.select(G),v.selection.collapse(!0),v.nodeChanged(!1,!0)}return!0;case"mceTableColRight":if(!z||!A)return!1;for(var D=n(B),H=j(D,A),I=null,G=v.selection.getNode(),J=0;A=k(D,J,H.cellindex);J++)if(A!=I){var K=a(A).next("td, th");K.length>0&&A.parentNode.insertBefore(K.get(0),A),I=A}return G.childNodes.length&&!tinymce.isIE&&(G=G.childNodes[0]),v.selection.select(G),v.selection.collapse(!0),v.nodeChanged(!1,!0),!0;case"mceTableColLeft":if(!z||!A)return!1;for(var D=n(B),H=j(D,A),I=null,G=v.selection.getNode(),J=0;A=k(D,J,H.cellindex);J++)if(A!=I){var L=a(A).prev("td, th");L.length>0&&A.parentNode.insertBefore(A,L.get(0)),I=A}return G.childNodes.length&&!tinymce.isIE&&(G=G.childNodes[0]),v.selection.select(G),v.selection.collapse(!0),v.nodeChanged(!1,!0),!0;case"mceTableRowProps":return null==z?!1:(d&&v.windowManager.open({url:CS_BASE_URL+"/resources/scripts/tiny_mce3/plugins/table/row.htm",width:400+parseInt(v.getLang("table.rowprops_delta_width",0)),height:245+parseInt(v.getLang("table.rowprops_delta_height",0)),inline:1},{plugin_url:x,cs_resource_base_url:CS_RESOURCE_BASE_URL}),!1);case"mceTableCellProps":return null==A?!1:(d&&v.windowManager.open({url:CS_BASE_URL+"/resources/scripts/tiny_mce3/plugins/table/cell.htm",width:400+parseInt(v.getLang("table.cellprops_delta_width",0)),height:275+parseInt(v.getLang("table.cellprops_delta_height",0)),inline:1},{plugin_url:x,cs_resource_base_url:CS_RESOURCE_BASE_URL}),!1);case"mceInsertTable":return d&&(e&&"insert"==e.action?v.windowManager.open({url:CS_BASE_URL+"/resources/scripts/tiny_mce3/plugins/table/table.htm",width:420+parseInt(v.getLang("table.table_delta_width",0)),height:298+parseInt(v.getLang("table.table_delta_height",0)),inline:1},{plugin_url:x,action:e?e.action:0,cs_resource_base_url:CS_RESOURCE_BASE_URL}):v.windowManager.open({url:CS_BASE_URL+"/resources/scripts/tiny_mce3/plugins/table/table_edit.htm",width:420+parseInt(v.getLang("table.table_delta_width",0)),height:258+parseInt(v.getLang("table.table_delta_height",0)),inline:1},{plugin_url:x,action:e?e.action:0,cs_resource_base_url:CS_RESOURCE_BASE_URL})),!1;case"mceTableDelete":var M=v.dom.getParent(v.selection.getNode(),"table");return M&&(M.parentNode.removeChild(M),v.nodeChanged(!1,!0),v.execCommand("mceRepaint")),!0;case"mceTableSplitCells":case"mceTableMergeCells":case"mceTableInsertRowBefore":case"mceTableInsertRowAfter":case"mceTableDeleteRow":case"mceTableInsertColBefore":case"mceTableInsertColAfter":case"mceTableDeleteCol":case"mceTableCutRow":case"mceTableCopyRow":case"mceTablePasteRowBefore":case"mceTablePasteRowAfter":case"JustifyLeft":case"JustifyCenter":case"JustifyRight":case"JustifyFull":if(!B)switch(c){case"JustifyLeft":case"JustifyCenter":case"JustifyRight":case"JustifyFull":return-1;default:return!0}if(z&&B!=z.parentNode&&(B=w.dom.getParent(z,"table")),B&&(z||tinymce.isIE||tinymce.isWebKit)){switch(c){case"JustifyLeft":case"JustifyCenter":case"JustifyRight":case"JustifyFull":var N=[],G=v.selection.getSel(),D=n(B);if(tinymce.isIE||tinymce.isWebKit){var O=w.dom.getParent(v.selection.getStart(),"td,th"),P=w.dom.getParent(v.selection.getEnd(),"td,th");O&&P&&v.plugins.jiveutil.walkDOMTree(O,P,function(a){if(1==a.nodeType&&("td"==a.nodeName.toLowerCase()||"th"==a.nodeName.toLowerCase())){var b=a;"JustifyLeft"==c?(b.style.textAlign="left",b.setAttribute("data-mce-style",b.getAttribute("style"))):"JustifyRight"==c?(b.style.textAlign="right",b.setAttribute("data-mce-style",b.getAttribute("style"))):"JustifyCenter"==c?(b.style.textAlign="center",b.setAttribute("data-mce-style",b.getAttribute("style"))):"JustifyFull"==c&&(b.style.textAlign="justify",b.setAttribute("data-mce-style",b.getAttribute("style")))}});break}if(1==G.rangeCount)for(var H=j(D,A),Q=B.rows,J=H.rowindex;J<D.length;J++){for(var R=[],S=H.cellindex;S<D[J].length;S++){var T=k(D,J,S);if(T&&!f(N,T)&&!f(R,T)){var U=j(D,T);U.cellindex<H.cellindex+1&&U.rowindex<H.rowindex+1&&(R[R.length]=T)}}R.length>0&&(N[N.length]=R)}else{for(var V,W,X=[],G=v.selection.getSel(),Y=-1,Z=-1,$=0;$<G.rangeCount;$++){var _=G.getRangeAt($),A=_.startContainer.childNodes[_.startOffset];if(!A)break;"TD"!=A.nodeName&&"TH"!=A.nodeName||(X[X.length]=A)}for(var Q=B.rows,J=0;J<Q.length;J++){for(var R=[],S=0;S<Q[J].cells.length;S++)for(var T=Q[J].cells[S],$=0;$<X.length;$++)T==X[$]&&(R[R.length]=T);R.length>0&&(N[N.length]=R)}}for(var J=0;J<N.length;J++)for(var S=0;S<N[J].length;S++){var T=N[J][S];"JustifyLeft"==c?(T.style.textAlign="left",T.setAttribute("data-mce-style",T.getAttribute("style"))):"JustifyRight"==c?(T.style.textAlign="right",T.setAttribute("data-mce-style",T.getAttribute("style"))):"JustifyCenter"==c?(T.style.textAlign="center",T.setAttribute("data-mce-style",T.getAttribute("style"))):"JustifyFull"==c&&(T.style.textAlign="justify",T.setAttribute("data-mce-style",T.getAttribute("style")))}break;case"mceTableCutRow":if(!z||!A)return!0;v.tableRowClipboard=t(C,B,z),v.execCommand("mceTableDeleteRow");break;case"mceTableCopyRow":if(!z||!A)return!0;v.tableRowClipboard=t(C,B,z);break;case"mceTablePasteRowBefore":if(!z||!A)return!0;var aa=v.tableRowClipboard.cloneNode(!0),ba=p(z,"TR");null!=ba&&o(B,ba,ba.cells[0],aa),z.parentNode.insertBefore(aa,z);break;case"mceTablePasteRowAfter":if(!z||!A)return!0;var ca=q(z,"TR"),aa=v.tableRowClipboard.cloneNode(!0);o(B,z,A,aa),null==ca?z.parentNode.appendChild(aa):ca.parentNode.insertBefore(aa,ca);break;case"mceTableInsertRowBefore":if(!z||!A)return!0;var da=w.selection.getBookmark(),D=n(B),H=j(D,A),aa=C.createElement("tr"),I=null;H.rowindex--,H.rowindex<0&&(H.rowindex=0);for(var S=0;A=k(D,H.rowindex,S);S++)if(A!=I){var ea=i(A);if(1==ea.rowspan){var fa=C.createElement("td"),ga=z&&z.firstChild?z.firstChild.getAttribute("data-mce-style"):null;u(fa,ga),tinymce.isIE&&!tinymce.isIE11||(fa.innerHTML='<br mce_bogus="1"/>'),fa.colSpan=A.colSpan,aa.appendChild(fa)}else A.rowSpan=ea.rowspan+1;1==A.rowSpan&&A.removeAttribute("rowspan"),1==A.colSpan&&A.removeAttribute("colSpan"),I=A}z.parentNode.insertBefore(aa,z),w.selection.moveToBookmark(da);break;case"mceTableInsertRowAfter":if(!z||!A)return!0;var da=w.selection.getBookmark(),D=n(B),H=j(D,A),aa=C.createElement("tr");u(aa,z.getAttribute("data-mce-style"));for(var I=null,S=0;A=k(D,H.rowindex,S);S++)if(A!=I){var ea=i(A);if(1==ea.rowspan){var fa=C.createElement("td"),ga=z&&z.firstChild?z.firstChild.getAttribute("data-mce-style"):null;u(fa,ga),tinymce.isIE&&!tinymce.isIE11||(fa.innerHTML='<br mce_bogus="1"/>'),fa.colSpan=A.colSpan,1==fa.colSpan&&fa.removeAttribute("colSpan"),aa.appendChild(fa)}else A.rowSpan=ea.rowspan+1;1==A.rowSpan&&A.removeAttribute("rowspan"),I=A}if(aa.hasChildNodes()){var ca=q(z,"TR");if(ca)ca.parentNode.insertBefore(aa,ca);else{var ha;ha=B.childNodes.length>0?B.childNodes[0]:B,"tbody"==ha.nodeName.toLowerCase()?ha.appendChild(aa):B.appendChild(aa)}}w.selection.moveToBookmark(da);break;case"mceTableDeleteRow":if(!z||!A)return!0;var D=n(B),H=j(D,A);if(1==D.length)return v.dom.remove(v.dom.getParent(B,"table")),!0;for(var X=z.cells,ca=q(z,"TR"),S=0;S<X.length;S++)if(X[S].rowSpan>1){var fa=X[S].cloneNode(!0),ea=i(X[S]);fa.rowSpan=ea.rowspan-1,1==fa.rowSpan&&fa.removeAttribute("rowspan");var ia=ca.cells[S];null==ia?ca.appendChild(fa):ca.insertBefore(fa,ia)}for(var I=null,S=0;A=k(D,H.rowindex,S);S++)if(A!=I){var ea=i(A);ea.rowspan>1?A.rowSpan=ea.rowspan-1:(z=A.parentNode,z.parentNode&&(z._delete=!0)),1==z.rowSpan&&z.removeAttribute("rowspan"),I=A}r(B),g(0,-1);break;case"mceTableInsertColBefore":if(!z||!A)return!0;for(var da=w.selection.getBookmark(),D=n(B),H=j(D,A),I=null,J=0;A=k(D,J,H.cellindex);J++)if(A!=I){var ea=i(A);if(1==ea.colspan){var fa=A.cloneNode(!0);"th"==fa.nodeName.toLowerCase()?m(fa,w.getDoc().createTextNode("Header "+(H.cellindex+J+1))):!tinymce.isIE||tinymce.isIE11?fa.innerHTML='<br mce_bogus="1"/>':fa.innerHTML="",fa.rowSpan=A.rowSpan,1==fa.rowSpan&&fa.removeAttribute("rowspan"),A.parentNode.insertBefore(fa,A)}else A.colSpan++;1==A.colSpan&&A.removeAttribute("colSpan"),I=A}w.selection.moveToBookmark(da);break;case"mceTableInsertColAfter":if(!z||!A)return!0;for(var da=w.selection.getBookmark(),D=n(B),H=j(D,A),I=null,J=0;A=k(D,J,H.cellindex);J++)if(A!=I){var ea=i(A);if(1==ea.colspan){var fa=A.cloneNode(!0);"th"==fa.nodeName.toLowerCase()?m(fa,w.getDoc().createTextNode("Header "+(H.cellindex+J+2))):!tinymce.isIE||tinymce.isIE11?fa.innerHTML='<br mce_bogus="1"/>':fa.innerHTML="",fa.rowSpan=A.rowSpan,1==fa.rowSpan&&fa.removeAttribute("rowspan");var ia=q(A,"TD,TH");null==ia?A.parentNode.appendChild(fa):ia.parentNode.insertBefore(fa,ia)}else A.colSpan++;1==A.colSpan&&A.removeAttribute("colSpan"),I=A}w.selection.moveToBookmark(da);break;case"mceTableDeleteCol":if(!z||!A)return!0;var D=n(B),H=j(D,A),I=null;if(D.length>1&&D[0].length<=1)return v.dom.remove(v.dom.getParent(B,"table")),!0;for(var J=0;A=k(D,J,H.cellindex);J++)if(A!=I){var ea=i(A);ea.colspan>1?A.colSpan=ea.colspan-1:A.parentNode&&A.parentNode.removeChild(A),1==A.colSpan&&A.removeAttribute("colSpan"),I=A}g(-1);break;case"mceTableSplitCells":if(!z||!A)return!0;var ja=i(A),ka=ja.colspan,la=ja.rowspan;if(ka>1||la>1){A.colSpan=1;for(var $=1;ka>$;$++){var fa=C.createElement("td");tinymce.isIE&&!tinymce.isIE11||(fa.innerHTML='<br mce_bogus="1"/>'),z.insertBefore(fa,q(A,"TD,TH")),la>1&&s(fa,z,la)}1==A.colSpan&&A.removeAttribute("colSpan"),s(A,z,la)}0==A.childNodes.length&&(A.innerHTML='<br mce_bogus="1"/>'),"undefined"!=typeof e&&"undefined"==typeof e.cell&&(v.selection.select(A.childNodes[0]),v.selection.collapse(!0),B=v.dom.getParent(v.selection.getNode(),"table"));break;case"mceTableMergeCells":var N=[],G=v.selection.getSel(),D=n(B);if(tinymce.isIE||G.rangeCount<=1){if(d){for(var ma=i(A),na=0,oa=0,pa=A;pa&&pa.nextSibling;){var qa=i(A);na+=qa.colspan,pa=pa.nextSibling}for(var pa=z;pa&&pa.nextSibling;)oa+=1,pa=pa.nextSibling;return v.windowManager.open({url:CS_BASE_URL+"/resources/scripts/tiny_mce3/plugins/table/merge_cells.htm",width:360+parseInt(v.getLang("table.merge_cells_delta_width",0)),height:140,inline:1},{action:"update",numcols:ma.colspan,numrows:ma.rowspan,maxcols:na,maxrows:oa,plugin_url:x,cs_resource_base_url:CS_RESOURCE_BASE_URL}),!1}var ra=parseInt(e.numrows),sa=parseInt(e.numcols),H=j(D,A);""+ra=="NaN"&&(ra=1),""+sa=="NaN"&&(sa=1);for(var Q=B.rows,J=H.rowindex;J<D.length;J++){for(var R=[],S=H.cellindex;S<D[J].length;S++){var T=k(D,J,S);if(T&&!f(N,T)&&!f(R,T)){var U=j(D,T);U.cellindex<H.cellindex+sa&&U.rowindex<H.rowindex+ra&&(R[R.length]=T)}}R.length>0&&(N[N.length]=R);var T=k(D,H.rowindex,H.cellindex);b(w.dom.select("br",T),function(a,b){b>0&&w.dom.getAttrib("mce_bogus")&&w.dom.remove(a)})}}else{var V,W,X=[],G=v.selection.getSel(),Y=-1,Z=-1;if(G.rangeCount<2)return!0;for(var $=0;$<G.rangeCount;$++){var _=G.getRangeAt($),A=_.startContainer.childNodes[_.startOffset];if(!A)break;"TD"!=A.nodeName&&"TH"!=A.nodeName||(X[X.length]=A)}for(var Q=B.rows,J=0;J<Q.length;J++){for(var R=[],S=0;S<Q[J].cells.length;S++)for(var T=Q[J].cells[S],$=0;$<X.length;$++)T==X[$]&&(R[R.length]=T);R.length>0&&(N[N.length]=R)}for(var J=0;J<D.length;J++)for(var S=0;S<D[J].length;S++){D[J][S]._selected=!1;for(var $=0;$<X.length;$++)D[J][S]==X[$]&&(-1==Y&&(Y=S,Z=J),V=S,W=J,D[J][S]._selected=!0)}for(var J=Z;W>=J;J++)for(var S=Y;V>=S;S++)if(!D[J][S]._selected)return alert("Invalid selection for merge."),!0}for(var ta=1,ua=1,va=-1,J=0;J<N.length;J++){for(var wa=0,S=0;S<N[J].length;S++){var ea=i(N[J][S]);if(wa+=ea.colspan,-1!=va&&ea.rowspan!=va)return alert("Invalid selection for merge."),!0;va=ea.rowspan}wa>ua&&(ua=wa),va=-1}for(var xa=-1,S=0;S<N[0].length;S++){for(var ya=0,J=0;J<N.length;J++){var ea=i(N[J][S]);if(ya+=ea.rowspan,-1!=xa&&ea.colspan!=xa)return alert("Invalid selection for merge."),!0;xa=ea.colspan}ya>ta&&(ta=ya),xa=-1}A=N[0][0],A.rowSpan=ta,A.colSpan=ua,1==A.rowSpan&&A.removeAttribute("rowspan"),1==A.colSpan&&A.removeAttribute("colSpan");for(var J=0;J<N.length;J++)for(var S=0;S<N[J].length;S++){var za=N[J][S].innerHTML,Aa=za.replace(/[ \t\r\n]/g,"");if("<br/>"!=Aa&&"<br>"!=Aa&&'<br mce_bogus="1"/>'!=Aa&&S+J>0&&(A.innerHTML+=za),N[J][S]!=A&&!N[J][S]._deleted){var H=j(D,N[J][S]),Ba=N[J][S].parentNode;if(Ba.removeChild(N[J][S]),N[J][S]._deleted=!0,!Ba.hasChildNodes()){Ba.parentNode.removeChild(Ba);for(var Ca=null,S=0;cellElm=k(D,H.rowindex,S);S++)cellElm!=Ca&&cellElm.rowSpan>1&&cellElm.rowSpan--,Ca=cellElm;A.rowSpan>1&&A.rowSpan--,1==A.rowSpan&&A.removeAttribute("rowspan")}}}b(w.dom.select("br",A),function(a,b){b>0&&w.dom.getAttrib(a,"mce_bogus")&&w.dom.remove(a)})}B=v.dom.getParent(v.selection.getNode(),"table"),v.addVisual(B),v.nodeChanged(!1,!0)}return!0}return!1}}),tinymce.PluginManager.add("table",tinymce.plugins.TablePlugin)}(jQuery)}),define("tiny_mce3/plugins/table/editor_plugin_src",["tinyMCE","jquery"],function(){}),define("tiny_mce3/plugins/html/editor_plugin_src",["tinyMCE"],function(){!function(){tinymce.create("tinymce.plugins.HTML",{thunks:[],registerToggleFunction:function(a){this.thunks.push(a)},toggleHTML:function(a){for(var b=a.plugins.html.thunks,c=0;c<b.length;c++)b[c](a.id)},prepForTab:!1,prepForDel:!1,prepForLargeDel:!1,init:function(a,b){function c(a){return a.ctrlKey||a.metaKey?!1:a.keyCode>=65&&a.keyCode<=90?!0:a.keyCode>=48&&a.keyCode<=57||a.keyCode>=96&&a.keyCode<=111?!0:13==a.keyCode||8==a.keyCode||46==a.keyCode}var d=this;d.editor=a,a.addCommand("mceToggleHTML",function(a,b){return function(){b.toggleHTML(a)}}(a,d)),a.onBeforeSetContent.add(function(a,b){b.content=b.content.replace(/  /g,"&nbsp; ")}),a.onGetContent.add(function(a,b){b.content=b.content.replace(/&nbsp;/g," ")}),a.onKeyDown.add(function(a,b){return this.prepForTab=!1,this.prepForDel=!1,this.prepForLargeDel=!1,9!=b.keyCode||b.ctrlKey||b.altKey||a.dom.getParent(a.selection.getNode(),"table")||a.dom.getParent(a.selection.getNode(),"ul,ol")||(tinymce.dom.Event.cancel(b),this.prepForTab=!0),tinymce.isGecko&&!a.selection.isCollapsed()&&c(b)?(this.prepForLargeDel=!0,this.keyCode=b.keyCode,!1):void 0},this),a.onKeyPress.add(function(a,b){function c(b){var e=b.parentNode;if(e){var f=!0;if(b.hasChildNodes())for(var g=0;g<b.childNodes.length;++g){var h=b.childNodes[g];if(1==h.nodeType||3==h.nodeType&&h.nodeValue.length>0){f=!1;break}}else 3==b.nodeType&&b.nodeValue.length>0?f=!1:(a.dom.is(b,"body, td, th")||!d&&a.dom.is(b,"a"))&&(f=!1);f&&(e.removeChild(b),c(e))}}if(this.prepForDel&&tinymce.dom.Event.cancel(b),this.prepForLargeDel){var d=8==this.keyCode||46==this.keyCode,e=a.selection.getRng(!0);e=a.selectionUtil.getShrunkenBlockRange(e,"tr, td, th");var f=e.startContainer,g=e.endContainer;e.deleteContents(),c(f),c(g),a.selectionUtil.isEffectivelyEmpty(a.getBody())&&(a.setContent("<p><br /></p>"),e=a.dom.createRng(),e.setStart(a.getBody().firstChild,0),e.collapse(!0),a.selection.setRng(e));var h=a.dom.getParent(a.selection.getNode(),"ol,ul");if(h){e=a.selection.getRng(!0);var i=e.startContainer.nodeName.toLowerCase();"li"!=i&&"#text"!=i&&(a.selectionUtil.atEndOf(h,a.selectionUtil.startPos(e))?e.setStart(h.lastChild,h.childNodes.length):e.setStart(h.childNodes[e.startOffset],0)),e.collapse(!0);var j=a.dom.getParent(a.selection.getNode(),"li");j&&(j.lastChild&&"br"==j.lastChild.nodeName.toLowerCase()||j.appendChild(a.dom.create("br")))}d&&tinymce.dom.Event.cancel(b)}else 9!=b.keyCode||b.ctrlKey||b.altKey||a.dom.getParent(a.selection.getNode(),"table")||a.dom.getParent(a.selection.getNode(),"ul,ol")||tinymce.dom.Event.cancel(b)},this),a.onKeyUp.add(function(a,b){if(this.prepForDel){tinymce.dom.Event.cancel(b);var c=a.selection.getStart(),d=c.previousSibling;if(d){for(c.parentNode.removeChild(c);"ol"==d.nodeName.toLowerCase()||"ul"==d.nodeName.toLowerCase();)d=d.childNodes[d.childNodes.length-1];d.childNodes.length>0?(a.selection.select(d.childNodes[d.childNodes.length-1]),a.selection.collapse()):(a.selection.select(d),a.selection.collapse())}}else this.prepForLargeDel&&(8!=this.keyCode&&46!=this.keyCode||tinymce.dom.Event.cancel(b));9!=b.keyCode||b.ctrlKey||b.altKey||!this.prepForTab||a.dom.getParent(a.selection.getNode(),"table")||a.dom.getParent(a.selection.getNode(),"ul,ol")||(tinymce.dom.Event.cancel(b),a.selection.setContent("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"))},this),a.onBeforeSetContent.add(function(a,b){function c(a){if(!tinymce.isIE)return a;var b=new RegExp("<[^<>]*style(\\s)*=(\\s)*[\\\"']{1}[^<>]*(\\/\\*){1}.*(\\*\\/){1}[^<>]*[\\\"']{1}[^<>]*>","ig");a=d(a,b,"/*","","*/");var c=new RegExp("<[^<>]*style(\\s)*=(\\s)*[\\\"']{1}[^<>]*:(\\s)*expression(\\s)*(\\(){1}[^<>]*[\\\"']{1}[^<>]*>","ig");return a=d(a,c,"expression","__")}function d(a,b,c,d,e){var f="",g=0;d=null==d?"":d;for(var h=b.exec(a);null!=h;h=b.exec(a)){var i=a.indexOf(c,h.index);if(-1!=i){f+=a.substr(g,i-g),f+=d;var j=d.length;if(""==d&&null!=e&&e.length>0){var k=a.indexOf(e,i);-1!=k&&(j=k-i+e.length)}f+=a.substr(i+j,b.lastIndex-i-j),g=b.lastIndex}}return f.length>0?f+a.substr(g):a}b.content=c(b.content)}),a.addButton("html",{title:"html.desc",cmd:"mceToggleHTML"})},getInfo:function(){return{longname:"HTML mode",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/fullpage",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("html",tinymce.plugins.HTML)}()}),define("tiny_mce3/plugins/html/editor_plugin_src",["tinyMCE"],function(){}),define("tiny_mce3/plugins/save/editor_plugin_src",["tinyMCE"],function(){!function(){tinymce.create("tinymce.plugins.Save",{init:function(a,b){var c=this;c.editor=a,a.addCommand("mceSave",c._save,c),a.addCommand("mceCancel",c._cancel,c),a.addButton("save",{title:"save.save_desc",cmd:"mceSave"}),a.addButton("cancel",{title:"save.cancel_desc",cmd:"mceCancel"}),a.onNodeChange.add(c._nodeChange,c),a.addShortcut("ctrl+s",a.getLang("save.save_desc"),"mceSave")},getInfo:function(){return{longname:"Save",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/save",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_nodeChange:function(a,b,c){var a=this.editor;a.getParam("save_enablewhendirty")&&(b.setDisabled("save",!a.isDirty()),b.setDisabled("cancel",!a.isDirty()))},_save:function(){var a,b,c=this.editor;return a=tinymce.DOM.get(c.id).form||tinymce.DOM.getParent(c.id,"form"),!c.getParam("save_enablewhendirty")||c.isDirty()?(tinyMCE.triggerSave(),(b=c.getParam("save_onsavecallback"))?void(c.execCallback("save_onsavecallback",c)&&(c.startContent=tinymce.trim(c.getContent({format:"raw"})),c.nodeChanged())):void(a?(c.isNotDirty=!0,$j(a).submit(),c.nodeChanged()):c.windowManager.alert("Error: No form element found."))):void 0},_cancel:function(){var a,b=this.editor,c=tinymce.trim(b.startContent);return(a=b.getParam("save_oncancelcallback"))?void b.execCallback("save_oncancelcallback",b):(b.setContent(c),b.undoManager.clear(),void b.nodeChanged())}}),tinymce.PluginManager.add("save",tinymce.plugins.Save)}()}),define("tiny_mce3/plugins/save/editor_plugin_src",["tinyMCE"],function(){}),define("tiny_mce3/plugins/advimage/editor_plugin_src",["tinyMCE"],function(){!function(){tinymce.create("tinymce.plugins.AdvancedImagePlugin",{init:function(a,b){a.addCommand("mceAdvImage",function(){-1==a.dom.getAttrib(a.selection.getNode(),"class").indexOf("mceItem")&&a.windowManager.open({file:CS_BASE_URL+"/resources/scripts/tiny_mce3/plugins/advimage/image.htm",width:560+parseInt(a.getLang("advimage.delta_width",0)),height:455+parseInt(a.getLang("advimage.delta_height",0)),inline:1},{plugin_url:b,cs_resource_base_url:CS_RESOURCE_BASE_URL})}),a.addButton("image",{title:"advimage.image_desc",cmd:"mceAdvImage"})},getInfo:function(){return{longname:"Advanced image",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advimage",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("advimage",tinymce.plugins.AdvancedImagePlugin)}()}),define("tiny_mce3/plugins/advimage/editor_plugin_src",["tinyMCE"],function(){}),define("tiny_mce3/plugins/advlink/editor_plugin_src",["tinyMCE"],function(){!function(){tinymce.create("tinymce.plugins.AdvancedLinkPlugin",{init:function(a,b){this.editor=a,a.addCommand("mceAdvLink",function(){var c=a.selection;c.isCollapsed()&&!a.dom.getParent(c.getNode(),"A")||a.windowManager.open({file:CS_BASE_URL+"/resources/scripts/tiny_mce3/plugins/advlink/link.htm",width:480+parseInt(a.getLang("advlink.delta_width",0)),height:400+parseInt(a.getLang("advlink.delta_height",0)),inline:1},{plugin_url:b,cs_resource_base_url:CS_RESOURCE_BASE_URL})}),a.addButton("link",{title:"advlink.link_desc",cmd:"mceAdvLink"}),a.onNodeChange.add(function(a,b,c,d){b.setDisabled("link",d&&"A"!=c.nodeName),b.setActive("link","A"==c.nodeName&&!c.name)})},getInfo:function(){return{longname:"Advanced link",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advlink",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("advlink",tinymce.plugins.AdvancedLinkPlugin)}()}),define("tiny_mce3/plugins/advlink/editor_plugin_src",["tinyMCE"],function(){}),define("tiny_mce3/plugins/directionality/editor_plugin_src",["tinyMCE"],function(){!function(){tinymce.create("tinymce.plugins.Directionality",{init:function(a,b){function c(b){var c,d=a.dom,e=a.selection.getSelectedBlocks();e.length&&(c=d.getAttrib(e[0],"dir"),tinymce.each(e,function(a){d.getParent(a.parentNode,"*[dir='"+b+"']",d.getRoot())||(c!=b?d.setAttrib(a,"dir",b):d.setAttrib(a,"dir",null));
}),a.nodeChanged())}var d=this;d.editor=a,a.addCommand("mceDirectionLTR",function(){c("ltr")}),a.addCommand("mceDirectionRTL",function(){c("rtl")}),a.addButton("ltr",{title:"directionality.ltr_desc",cmd:"mceDirectionLTR"}),a.addButton("rtl",{title:"directionality.rtl_desc",cmd:"mceDirectionRTL"}),a.onNodeChange.add(d._nodeChange,d)},getInfo:function(){return{longname:"Directionality",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/directionality",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_nodeChange:function(a,b,c){var d,e=a.dom;return(c=e.getParent(c,e.isBlock))?(d=e.getAttrib(c,"dir"),b.setActive("ltr","ltr"==d),b.setDisabled("ltr",0),b.setActive("rtl","rtl"==d),void b.setDisabled("rtl",0)):(b.setDisabled("ltr",1),void b.setDisabled("rtl",1))}}),tinymce.PluginManager.add("directionality",tinymce.plugins.Directionality)}()}),define("tiny_mce3/plugins/directionality/editor_plugin_src",["tinyMCE"],function(){}),define("tiny_mce3/plugins/inlinepopups/editor_plugin_src",["tinyMCE"],function(){!function(){var a=tinymce.DOM,b=tinymce.dom.Element,c=tinymce.dom.Event,d=tinymce.each,e=tinymce.is;tinymce.create("tinymce.plugins.InlinePopups",{init:function(a,b){a.onBeforeRenderUI.add(function(){a.windowManager=new tinymce.InlineWindowManager(a)})},getInfo:function(){return{longname:"InlinePopups",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/inlinepopups",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.create("tinymce.InlineWindowManager:tinymce.WindowManager",{InlineWindowManager:function(a){var b=this;b.parent(a),b.zIndex=3e5,b.count=0,b.windows={}},open:function(d,e){var f,g,h,i,j,k,l,m=this,n="",o=m.editor,p=0,q=0;return d=d||{},e=e||{},d.inline?(l=m._frontWindow(),l&&a.get(l.id+"_ifr")&&(l.focussedElement=a.get(l.id+"_ifr").contentWindow.document.activeElement),d.type||(m.bookmark=o.selection.getBookmark(1)),f=a.uniqueId("mce_inlinepopups_"),g=a.getViewPort(),d.width=parseInt(d.width||320),d.height=parseInt(d.height||240)+(tinymce.isIE?8:0),d.min_width=parseInt(d.min_width||150),d.min_height=parseInt(d.min_height||100),d.max_width=parseInt(d.max_width||2e3),d.max_height=parseInt(d.max_height||2e3),d.left=d.left||Math.round(Math.max(g.x,g.x+g.w/2-d.width/2)),d.top=d.top||Math.round(Math.max(g.y,g.y+g.h/2-d.height/2)),d.movable=d.resizable=!0,e.mce_width=d.width,e.mce_height=d.height,e.mce_inline=!0,e.mce_window_id=f,e.mce_auto_focus=d.auto_focus,m.features=d,m.params=e,m.onOpen.dispatch(m,d,e),d.type&&(n+=" mceModal",d.type&&(n+=" mce"+d.type.substring(0,1).toUpperCase()+d.type.substring(1)),d.resizable=!1),d.statusbar&&(n+=" mceStatusbar"),d.resizable&&(n+=" mceResizable"),d.minimizable&&(n+=" mceMinimizable"),d.maximizable&&(n+=" mceMaximizable"),d.movable&&(n+=" mceMovable"),m._addAll(a.doc.body,["div",{id:f,role:"dialog","aria-labelledby":d.type?f+"_content":f+"_title","class":(o.settings.inlinepopups_skin||"clearlooks2")+(tinymce.isIE&&window.getSelection?" ie9":""),style:"width:100px;height:100px"},["div",{id:f+"_wrapper","class":"mceWrapper"+n},["div",{id:f+"_top","class":"mceTop"},["div",{"class":"mceLeft"}],["div",{"class":"mceCenter"}],["div",{"class":"mceRight"}],["span",{id:f+"_title"},d.title||""]],["div",{id:f+"_middle","class":"mceMiddle"},["div",{id:f+"_left","class":"mceLeft",tabindex:"0"}],["span",{id:f+"_content","class":"mceMessage j-rc3"}],["div",{id:f+"_right","class":"mceRight",tabindex:"0"}]],["div",{id:f+"_bottom","class":"mceBottom"},["div",{"class":"mceLeft"}],["div",{"class":"mceCenter"}],["div",{"class":"mceRight"}],["span",{id:f+"_status"},"Content"]],["a",{"class":"mceMove",tabindex:"-1",href:"javascript:;"}],["a",{"class":"mceMin",tabindex:"-1",href:"javascript:;",onmousedown:"return false;"}],["a",{"class":"mceMax",tabindex:"-1",href:"javascript:;",onmousedown:"return false;"}],["a",{"class":"mceMed",tabindex:"-1",href:"javascript:;",onmousedown:"return false;"}],["label",{"class":"j-508-label",id:"close-modal-508"},o.translate("common.close_modal")],["a",{"class":"mceClose j-ui-elem",tabindex:"-1",href:"javascript:;",onmousedown:"return false;","aria-labelledby":"close-modal-508"}],["a",{id:f+"_resize_n","class":"mceResize mceResizeN",tabindex:"-1",href:"javascript:;"}],["a",{id:f+"_resize_s","class":"mceResize mceResizeS",tabindex:"-1",href:"javascript:;"}],["a",{id:f+"_resize_w","class":"mceResize mceResizeW",tabindex:"-1",href:"javascript:;"}],["a",{id:f+"_resize_e","class":"mceResize mceResizeE",tabindex:"-1",href:"javascript:;"}],["a",{id:f+"_resize_nw","class":"mceResize mceResizeNW",tabindex:"-1",href:"javascript:;"}],["a",{id:f+"_resize_ne","class":"mceResize mceResizeNE",tabindex:"-1",href:"javascript:;"}],["a",{id:f+"_resize_sw","class":"mceResize mceResizeSW",tabindex:"-1",href:"javascript:;"}],["a",{id:f+"_resize_se","class":"mceResize mceResizeSE",tabindex:"-1",href:"javascript:;"}]]]),a.setStyles(f,{top:-1e4,left:-1e4}),tinymce.isGecko&&a.setStyle(f,"overflow","auto"),d.type||(p+=a.get(f+"_left").clientWidth,p+=a.get(f+"_right").clientWidth,q+=a.get(f+"_top").clientHeight,q+=a.get(f+"_bottom").clientHeight),a.setStyles(f,{top:d.top,left:d.left,width:d.width+p,height:d.height+q}),k=d.url||d.file,k&&(tinymce.relaxedDomain&&(k+=(-1==k.indexOf("?")?"?":"&")+"mce_rdomain="+tinymce.relaxedDomain),k=tinymce._addVer(k)),d.type?(a.add(f+"_wrapper","a",{id:f+"_ok","class":"mceButton mceOk",href:"javascript:;",onmousedown:"return false;"},"Ok"),"confirm"==d.type&&a.add(f+"_wrapper","a",{"class":"mceButton mceCancel",href:"javascript:;",onmousedown:"return false;"},"Cancel"),a.add(f+"_middle","div",{"class":"mceIcon"}),a.setHTML(f+"_content",d.content.replace("\n","<br />")),c.add(f,"keyup",function(a){var b=27;return a.keyCode===b?(d.button_func(!1),c.cancel(a)):void 0}),c.add(f,"keydown",function(b){var d,e=9;return b.keyCode===e?(d=a.select("a.mceCancel",f+"_wrapper")[0],d&&d!==b.target?d.focus():a.get(f+"_ok").focus(),c.cancel(b)):void 0})):(a.add(f+"_content","iframe",{id:f+"_ifr",src:'javascript:""',frameBorder:0,style:"border:0;width:10px;height:10px"}),a.setStyles(f+"_ifr",{width:d.width,height:d.height}),a.setAttrib(f+"_ifr","src",k)),h=c.add(f,"mousedown",function(b){var d,e,g=b.target;if(d=m.windows[f],m.focus(f),"a"==g.nodeName.toLowerCase()||"input"==g.nodeName.toLowerCase()){if("mceClose j-ui-elem"==g.className)return m.close(null,f),c.cancel(b);if("mceMax"==g.className)d.oldPos=d.element.getXY(),d.oldSize=d.element.getSize(),e=a.getViewPort(),e.w-=2,e.h-=2,d.element.moveTo(e.x,e.y),d.element.resizeTo(e.w,e.h),a.setStyles(f+"_ifr",{width:e.w-d.deltaWidth,height:e.h-d.deltaHeight}),a.addClass(f+"_wrapper","mceMaximized");else if("mceMed"==g.className)d.element.moveTo(d.oldPos.x,d.oldPos.y),d.element.resizeTo(d.oldSize.w,d.oldSize.h),d.iframeElement.resizeTo(d.oldSize.w-d.deltaWidth,d.oldSize.h-d.deltaHeight),a.removeClass(f+"_wrapper","mceMaximized");else{if("mceMove"==g.className)return m._startDrag(f,b,g.className);if(a.hasClass(g,"mceResize"))return m._startDrag(f,b,g.className.substring(13))}}}),i=c.add(f,"click",function(a){var b=a.target;if(m.focus(f),"A"==b.nodeName||"a"==b.nodeName)switch(b.className){case"mceClose":return m.close(null,f),c.cancel(a);case"mceButton mceOk":case"mceButton mceCancel":return d.button_func("mceButton mceOk"==b.className),c.cancel(a)}}),c.add([f+"_left",f+"_right"],"focus",function(b){var c=a.get(f+"_ifr");if(c){var d=c.contentWindow.document.body,e=a.select(":input:enabled,*[tabindex=0]",d);b.target.id===f+"_left"?e[e.length-1].focus():e[0].focus()}else a.get(f+"_ok").focus()}),j=m.windows[f]={id:f,mousedown_func:h,click_func:i,element:new b(f,{blocker:1,container:o.getContainer()}),iframeElement:new b(f+"_ifr"),features:d,deltaWidth:p,deltaHeight:q},j.iframeElement.on("focus",function(){m.focus(f)}),0==m.count&&"modal"==m.editor.getParam("dialog_type","modal")?(a.add(a.doc.body,"div",{id:"mceModalBlocker","class":(m.editor.settings.inlinepopups_skin||"clearlooks2")+"_modalBlocker",style:{zIndex:m.zIndex-1}}),a.show("mceModalBlocker"),a.setAttrib(a.doc.body,"aria-hidden","true")):a.setStyle("mceModalBlocker","z-index",m.zIndex-1),(tinymce.isIE6||/Firefox\/2\./.test(navigator.userAgent)||tinymce.isIE&&!a.boxModel)&&a.setStyles("mceModalBlocker",{position:"absolute",left:g.x,top:g.y,width:g.w-2,height:g.h-2}),a.setAttrib(f,"aria-hidden","false"),m.focus(f),m._fixIELayout(f,1),a.get(f+"_ok")&&a.get(f+"_ok").focus(),m.count++,j):m.parent(d,e)},focus:function(b){var c,d=this;(c=d.windows[b])&&(c.zIndex=this.zIndex++,c.element.setStyle("zIndex",c.zIndex),c.element.update(),b+="_wrapper",a.removeClass(d.lastId,"mceFocus"),a.addClass(b,"mceFocus"),d.lastId=b,c.focussedElement?c.focussedElement.focus():a.get(b+"_ok")?a.get(c.id+"_ok").focus():a.get(c.id+"_ifr")&&a.get(c.id+"_ifr").focus())},_addAll:function(a,b){var c,d=this,f=tinymce.DOM;if(e(b,"string"))a.appendChild(f.doc.createTextNode(b));else if(b.length)for(a=a.appendChild(f.create(b[0],b[1])),c=2;c<b.length;c++)d._addAll(a,b[c])},_startDrag:function(d,e,f){function g(){j||(x._fixIELayout(d,0),a.add(y.body,"div",{id:"mceEventBlocker","class":"mceEventBlocker "+(x.editor.settings.inlinepopups_skin||"clearlooks2"),style:{zIndex:x.zIndex+1}}),(tinymce.isIE6||tinymce.isIE&&!a.boxModel)&&a.setStyles("mceEventBlocker",{position:"absolute",left:o.x,top:o.y,width:o.w-2,height:o.h-2}),j=new b("mceEventBlocker"),j.update(),k=A.getXY(),l=A.getSize(),p=n.x+k.x-o.x,q=n.y+k.y-o.y,a.add(j.get(),"div",{id:"mcePlaceHolder","class":"mcePlaceHolder",style:{left:p,top:q,width:l.w,height:l.h}}),m=new b("mcePlaceHolder"))}var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=this,y=a.doc,z=x.windows[d],A=z.element;A.getXY();return n={x:0,y:0},o=a.getViewPort(),o.w-=2,o.h-=2,r=e.screenX,s=e.screenY,t=u=v=w=0,h=c.add(y,"mouseup",function(b){return c.remove(y,"mouseup",h),c.remove(y,"mousemove",i),j&&j.remove(),A.moveBy(t,u),A.resizeBy(v,w),l=A.getSize(),a.setStyles(d+"_ifr",{width:l.w-z.deltaWidth,height:l.h-z.deltaHeight}),x._fixIELayout(d,1),c.cancel(b)}),"Move"!=f&&g(),i=c.add(y,"mousemove",function(a){var b,d,e;switch(g(),b=a.screenX-r,d=a.screenY-s,f){case"ResizeW":t=b,v=0-b;break;case"ResizeE":v=b;break;case"ResizeN":case"ResizeNW":case"ResizeNE":"ResizeNW"==f?(t=b,v=0-b):"ResizeNE"==f&&(v=b),u=d,w=0-d;break;case"ResizeS":case"ResizeSW":case"ResizeSE":"ResizeSW"==f?(t=b,v=0-b):"ResizeSE"==f&&(v=b),w=d;break;case"mceMove":t=b,u=d}return v<(e=z.features.min_width-l.w)&&(0!==t&&(t+=v-e),v=e),w<(e=z.features.min_height-l.h)&&(0!==u&&(u+=w-e),w=e),v=Math.min(v,z.features.max_width-l.w),w=Math.min(w,z.features.max_height-l.h),t=Math.max(t,o.x-(p+o.x)),u=Math.max(u,o.y-(q+o.y)),t=Math.min(t,o.w+o.x-(p+l.w+o.x)),u=Math.min(u,o.h+o.y-(q+l.h+o.y)),t+u!==0&&(0>p+t&&(t=0),0>q+u&&(u=0),m.moveTo(p+t,q+u)),v+w!==0&&m.resizeTo(l.w+v,l.h+w),c.cancel(a)}),c.cancel(e)},resizeBy:function(a,b,c){var d=this.windows[c];d&&(d.element.resizeBy(a,b),d.iframeElement.resizeBy(a,b))},close:function(b,d){var e,f,d,g=this,h=a.doc;return d=g._findId(d||b),g.windows[d]?(g.count--,0==g.count&&(a.remove("mceModalBlocker"),a.setAttrib(a.doc.body,"aria-hidden","false"),g.editor.focus()),void((e=g.windows[d])&&(g.onClose.dispatch(g),c.remove(h,"mousedown",e.mousedownFunc),c.remove(h,"click",e.clickFunc),c.clear(d),c.clear(d+"_ifr"),a.setAttrib(d+"_ifr","src",'javascript:""'),e.element.remove(),delete g.windows[d],f=g._frontWindow(),f&&g.focus(f.id)))):void g.parent(b)},_frontWindow:function(){var a,b=0;return d(this.windows,function(c){c.zIndex>b&&(a=c,b=c.zIndex)}),a},setTitle:function(b,c){var d;if(b=this._findId(b),d=a.get(b+"_title")){d.innerHTML=a.encode(c);var e=this.windows[b];e&&e.element.resizeBy(0,d.clientHeight)}},alert:function(b,c,d){var e,f=this;e=f.open({title:f,type:"alert",button_func:function(a){c&&c.call(a||f,a),f.close(null,e.id)},content:a.encode(f.editor.getLang(b,b)),inline:1,width:400,height:130})},confirm:function(b,c,d){var e,f=this;e=f.open({title:f,type:"confirm",button_func:function(a){c&&c.call(a||f,a),f.close(null,e.id)},content:a.encode(f.editor.getLang(b,b)),inline:1,width:400,height:130})},_findId:function(b){var c=this;return"string"==typeof b?b:(d(c.windows,function(c){var d=a.get(c.id+"_ifr");return d&&b==d.contentWindow?(b=c.id,!1):void 0}),b)},_fixIELayout:function(b,c){var e,f;tinymce.isIE6&&(d(["n","s","w","e","nw","ne","sw","se"],function(d){var e=a.get(b+"_resize_"+d);a.setStyles(e,{width:c?e.clientWidth:"",height:c?e.clientHeight:"",cursor:a.getStyle(e,"cursor",1)}),a.setStyle(b+"_bottom","bottom","-1px"),e=0}),(e=this.windows[b])&&(e.element.hide(),e.element.show(),d(a.select("div,a",b),function(a,b){"none"!=a.currentStyle.backgroundImage&&(f=new Image,f.src=a.currentStyle.backgroundImage.replace(/url\(\"(.+)\"\)/,"$1"))}),a.get(b).style.filter=""))}}),tinymce.PluginManager.add("inlinepopups",tinymce.plugins.InlinePopups)}()}),define("tiny_mce3/plugins/inlinepopups/editor_plugin_src",["tinyMCE"],function(){}),define("tiny_mce3/plugins/paste/editor_plugin_src",["tinyMCE"],function(){!function(){function a(a,b){return a.getParam(b,d[b])}var b=tinymce.each,c=null,d={paste_auto_cleanup_on_paste:!0,paste_block_drop:!1,paste_retain_style_properties:"none",paste_strip_class_attributes:"mso",paste_remove_spans:!1,paste_remove_styles:!1,paste_remove_styles_if_webkit:!1,paste_convert_middot_lists:!0,paste_convert_headers_to_strong:!1,paste_dialog_width:"450",paste_dialog_height:"400",paste_max_consecutive_linebreaks:2,paste_text_use_dialog:!1,paste_text_sticky:!1,paste_text_notifyalways:!1,paste_text_linebreaktype:"combined",paste_text_replacements:[[/\u2026/g,"..."],[/[\x93\x94\u201c\u201d]/g,'"'],[/[\x60\x91\x92\u2018\u2019]/g,"'"]]};tinymce.create("tinymce.plugins.PastePlugin",{init:function(c,d){function e(b,d){var e=c.dom;g.onPreProcess.dispatch(g,b),b.node=e.create("div",0,b.content),g.onPostProcess.dispatch(g,b),b.content=c.serializer.serialize(b.node,{getInner:1,forced_root_block:""}),b.content=b.content.replace(/\n/gi,"").replace(/\r/gi,""),c.undoManager.beforeChange(),!d&&c.pasteAsPlainText?(g._insertPlainText(c,e,b.content),a(c,"paste_text_sticky")||(c.pasteAsPlainText=!1,c.controlManager.setActive("pastetext",!1))):/<(p|h[1-6]|ul|ol)/.test(b.content)?g._insertBlockContent(c,e,b.content):g._insert(b.content,1),g.onPasteComplete.dispatch(g,c),c.undoManager.add()}function f(a){function d(a){a.preventDefault()}var f,g,h,i,j,k,l=c.selection,m=c.dom,n=c.getBody();if(a.clipboardData||m.doc.dataTransfer){if(c.pasteAsPlainText)return k=(a.clipboardData||a.originalEvent.clipboardData||m.doc.dataTransfer).getData("Text"),a.preventDefault(),void e({content:k.replace(/\r?\n/g,"<br />")});if(tinymce.isWebKit){var o,p=(a.clipboardData||a.originalEvent.clipboardData).items;if(p)for(var q=0;q<p.length;q++)if(0===p[q].type.indexOf("image")&&(o=p[q].getAsFile()),p[q].kind&&p[q].kind.toLowerCase&&"string"==p[q].kind.toLowerCase()){o=null;break}if(o){var r=new FileReader;return r.onload=function(a){e({content:'<img src="'+a.target.result+'">'})},void r.readAsDataURL(o)}}}if(!m.get("_mcePaste"))return f=m.add(n,"div",{id:"_mcePaste","class":"mcePaste","data-mce-bogus":"1"},"\ufeff\ufeff"),j=n!=c.getDoc().body?m.getPos(c.selection.getStart(),n).y:n.scrollTop+m.getViewPort().y,m.setStyles(f,{position:"absolute",left:-1e4,top:j,width:1,height:1,overflow:"hidden"}),tinymce.isIE?(i=l.getRng(),h=m.doc.body.createTextRange(),h.moveToElementText(f),h.execCommand("Paste"),m.unbind(f),m.remove(f),"\ufeff\ufeff"===f.innerHTML?(c.execCommand("mcePasteWord"),void a.preventDefault()):(setTimeout(function(){l.setRng(i),l.setContent(""),e({content:f.innerHTML})},0),tinymce.dom.Event.cancel(a))):(m.bind(c.getDoc(),"mousedown",d),m.bind(c.getDoc(),"keydown",d),g=c.selection.getRng(),f=f.firstChild,h=c.getDoc().createRange(),h.setStart(f,0),h.setEnd(f,2),l.setRng(h),window.setTimeout(function(){var a="",f=m.select("div.mcePaste");f.length>1&&(f=m.select("div.mcePaste:not(:first)")),b(f,function(c){var d=c.firstChild;d&&"DIV"==d.nodeName&&d.style.marginTop&&d.style.backgroundColor&&m.remove(d,1),b(m.select("div.mcePaste",c),function(a){m.remove(a,1)}),b(m.select("span.Apple-style-span",c),function(a){m.remove(a,1)}),b(m.select("span.Apple-tab-span",c),function(a){for(var b=a.innerHTML;b!=b.replace("	","     ");)b=b.replace("	","     ");a.parentNode.insertBefore(a.ownerDocument.createTextNode(b),a),m.remove(a,1)}),b(m.select("br[_mce_bogus]",c),function(a){m.remove(a)}),a+=c.innerHTML+"<br/>"}),b(f,function(a){m.remove(a)}),b(m.select("div.mcePaste"),function(a){m.remove(a)}),g&&l.setRng(g),e({content:a}),m.unbind(c.getDoc(),"mousedown",d),m.unbind(c.getDoc(),"keydown",d)},0),void 0)}var g=this;g.editor=c,g.url=d,g.onPreProcess=new tinymce.util.Dispatcher(g),g.onPostProcess=new tinymce.util.Dispatcher(g),g.onPasteComplete=new tinymce.util.Dispatcher(g),g.onPreProcess.add(g._preProcess),g.onPostProcess.add(g._postProcess),g.onPreProcess.add(function(a,b){c.execCallback("paste_preprocess",a,b)}),g.onPostProcess.add(function(a,b){c.execCallback("paste_postprocess",a,b)}),c.pasteAsPlainText=!1,c.addCommand("mceInsertClipboardContent",function(a,b){e(b,!0)}),a(c,"paste_text_use_dialog")||c.addCommand("mcePasteText",function(b,d){var e=tinymce.util.Cookie;c.pasteAsPlainText=!c.pasteAsPlainText,c.controlManager.setActive("pastetext",c.pasteAsPlainText),c.pasteAsPlainText&&!e.get("tinymcePasteText")&&(a(c,"paste_text_sticky")?c.windowManager.alert(c.translate("paste.plaintext_mode_sticky")):c.windowManager.alert(c.translate("paste.plaintext_mode_sticky")),a(c,"paste_text_notifyalways")||e.set("tinymcePasteText","1",new Date((new Date).getFullYear()+1,12,31)))}),c.addButton("pastetext",{title:"paste.paste_text_desc",cmd:"mcePasteText"}),c.addButton("selectall",{title:"paste.selectall_desc",cmd:"selectall"}),a(c,"paste_auto_cleanup_on_paste")&&(tinymce.isOpera||/Firefox\/2/.test(navigator.userAgent)?c.onKeyDown.add(function(a,b){((tinymce.isMac?b.metaKey:b.ctrlKey)&&86==b.keyCode||b.shiftKey&&45==b.keyCode)&&f(b)}):c.onPaste.addToTop(function(a,b){return f(b)})),a(c,"paste_block_drop")&&c.onInit.add(function(){c.dom.bind(c.getBody(),["dragend","dragover","draggesture","dragdrop","drop","drag"],function(a){return a.preventDefault(),a.stopPropagation(),!1})}),a(c,"paste_legacy_support")&&g._legacySupport()},getInfo:function(){return{longname:"Paste text/word",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/paste",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_preProcess:function(c,d){function e(a){b(a,function(a){k=a.constructor==RegExp?k.replace(a,""):k.replace(a[0],a[1])})}function f(a,c){c.push("<tr>"),b(a,function(a){c.push("<td>"),c.push(a),c.push("</td>")}),c.push("</tr>")}function g(a,b){if("all"===i)return"";var c=l(m(b.replace(/^(["'])(.*)\1$/,"$2")," "),function(a){return/^(?!mso)/i.test(a)});return c.length?' class="'+c.join(" ")+'"':""}var h,i,j=this.editor,k=d.content,l=tinymce.grep,m=tinymce.explode,n=tinymce.trim;if(function(){var a=/\x0a\x20((?:\x0a\x20\x20[^<\x0a]*)+)\x0a\x20/g,b=a.exec(k);if(b){var c=[k.substring(0,b.index),"<table><tbody>"];a.lastIndex=0;var d=b.index;k.replace(a,function(a,b,e,g){e>d&&(c.push("</tbody></table>"),c.push(g.substring(d,e)),c.push("<table><tbody>")),d=e+a.length;var h=b.split(/\x0a\x20\x20/).slice(1);return f(h,c),a}),c.push(k.substring(d)),k=c.join("")}}(),function(){function a(a,b){for(b.push("<table><tbody>"),e.lastIndex=0;a.length&&e.test(a[0]);){var c=a.shift().split(g);f(c,b)}b.push("</tbody></table>")}function b(b){for(var c=b.split(/<br *\/?>/gi),d=[];c.length;)e.lastIndex=0,e.test(c[0])?a(c,d):(d.push(c.shift()),d.push("<br />"));return d.join("")}var c="	";if(tinymce.isGecko)c="(?:(?:&nbsp;){3} )";else if(tinymce.isWebKit)c="(?: *	)";else if(tinymce.isIE)return;var d=new RegExp("^(?:[^<>]*?"+c+")+[^<>]*<br */?>","i"),e=new RegExp("(?:[^<>]*?"+c+")+[^<>]*","i"),g=new RegExp(c,"i");d.test(k)&&(k=b(k))}(),k=k.replace(/<style([^>]*)>([^<]*?)<\/style>/gi,""),tinymce.isIE&&document.documentMode>=9&&/<(h[1-6r]|p|div|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|blockquote|center|dl|dt|dd|dir|fieldset)/.test(d.content)&&e([[/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6r]|p|div|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|blockquote|center|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1"]]),e([[/^([^<]+)<br\s*\/?>$/gi,"$1"]]),e([[/(<[a-z][^>]*)\sid="?_mcePaste"?/gi,"$1"]]),function(){var a=/^https?:\/\/(?:[^:]+:[^@])?[\w\.]+(?::\d+)?\S*$/,b=/<br[^>]*>/;a.test(k)&&!b.test(k)&&(k="<a href='"+k+"' title='"+k+"' class='loading'>"+k+"</a>")}(),/class="?Mso|style="[^"]*\bmso-|w:WordDocument/i.test(k)||d.wordContent){if(d.wordContent=!0,e([/^\s*(?:&nbsp;)+/gi,/(?:&nbsp;|<br[^>]*>)+\s*$/gi]),a(j,"paste_convert_headers_to_strong")&&(k=k.replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>")),a(j,"paste_convert_middot_lists")){e([[/<!--\[if !supportLists\]-->/gi,"$&__MCE_ITEM__"],[/(<span[^>]+(?:mso-list:|:\s*symbol|:\s*wingdings)[^>]+>)/gi,"$1__MCE_ITEM__"],[/<span[^>]+mso-list:\s+Ignore[^>]+>/gi,'<span class="pasted-list-info">']]);do{var o=k;e([[/<span[^>]*>((?:&nbsp;|\s|\u00a0)*)<\/span>/gi,"$1"],[/<span[^>]+(?:mso-list:|:\s*symbol|:\s*wingdings)[^>]+>(__MCE_ITEM__)([^<]*?)<\/span>/gi,"$1$2"],[/(__MCE_ITEM__)(?:&nbsp;|\s|\u00a0)*/gi,"$1"]])}while(o!=k)}e([/<!--[\s\S]+?-->/gi,/<(?:!|script[^>]*>.*?<\/script(?=[>\s])|\/?(?:\?xml(?::\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "]]);do h=k.length,k=k.replace(/(<?!(ol|ul)[^>]*\s)(?:id|name|language|type|on\w+|\w+:\w+)=(?:"[^"]*"|\w+)\s?/gi,"$1"),k=k.replace(/(<(ol|ul)[^>]*\s)(?:id|name|language|on\w+|\w+:\w+)=(?:"[^"]*"|\w+)\s?/gi,"$1");while(h!=k.length);k=k.replace(/<strong><span([^>]*)font-weight:([^<;"]*)normal[;]?([^>]*)>([^<]*?)<\/span><\/strong>/gi,"<span$1$3>$4</span>"),k=k.replace(/<strong><span([^>]*)font-weight:([^<;"]*)bold[er]?[;]?([^>]*)>([^<]*?)<\/span><\/strong>/gi,"<strong><span$1$3>$4</span></strong>"),0==a(j,"paste_retain_style_properties").replace(/^none$/i,"").length?k=k.replace(/<\/?span[^>]*>/gi,""):e([[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(a,b){return b.length>0?b.replace(/./," ").slice(Math.floor(b.length/2)).split("").join(" "):""}]])}e([[/(<[a-z][^>]*)\sstyle="([^"]*)"/gi,function(c,d,e){var f=[],g=0,h=m(n(e).replace(/&quot;/gi,"'"),";"),i=!1,k=!1,l=!1;return b(h,function(b){function c(a){return a+("0"!==a&&/\d$/.test(a)?"px":"")}var e,h,o=m(b,":");if(2==o.length){e=o[0].toLowerCase(),h=o[1].toLowerCase();var p=d.toLowerCase();switch(e){case"text-decoration":return void("none"!=h&&(f[g++]=e+":"+h));case"font-style":return void(0!==p.indexOf("<em")&&0!==p.indexOf("<i")||"normal"!=n(h)?(0!==p.indexOf("<em")&&0!==p.indexOf("<i")||"oblique"!=n(h))&&(f[g++]=e+":"+h):l=!0);case"font-weight":return void(0!==p.indexOf("<strong")&&0!==p.indexOf("<b")||"normal"!=n(h)?(0===p.indexOf("<strong")||0===p.indexOf("<b"))&&n(h).indexOf("bold")>=0||(f[g++]=e+":"+h):l=!0);case"list-style":case"list-style-type":case"list-style-image":case"list-style-position":return void(0!==p.indexOf("<ul")&&0!==p.indexOf("<ol")&&0!==p.indexOf("<li")||(f[g++]=e+":"+h));case"border-collapse":return;case"border":case"border-width":case"border-style":case"border-color":return void(0!==p.indexOf("<table")&&0!==p.indexOf("<tr")&&0!==p.indexOf("<td")&&0!==p.indexOf("<th")&&0!==p.indexOf("<img")||"inherit"!=h&&"initial"!=h&&(h=h.replace(/(?:^|\s*)-moz[-\w]+\b/g,""),f[g++]=e+":"+h));case"margin":case"margin-left":case"margin-right":case"margin-top":case"margin-bottom":case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-table-layout-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":if(h=h.replace(/^0(?:[\w]+)/gi,"0").replace(/(?:\s)0(?:[\w]+)/gi," 0").replace(/(?:\s)0\.00(?:[\d|\w]+)/gi," 0"),h=h.replace(/^[0\s]*$/gi,"0"),"0"!=h)if(e=e.replace(/^mso-|-alt$/g,"").toLowerCase(),"margin-left"==e&&"<p"==n(p)){var q=parseFloat(h),r=h.replace(/[\d\.]*([^\d]*)$/g,"$1").toLowerCase();if("in"==r)return q=90*q,void(f[g++]="padding-left:"+q+"px")}else"0"!=o[1]&&"initial"!=o[1]&&(0===p.indexOf("<table")||0===p.indexOf("<tr")||0===p.indexOf("<td")||0===p.indexOf("<th")||0===p.indexOf("<img")?0!==h.indexOf("-")&&(f[g++]=e+":"+h):f[g++]=e+":"+h);return;case"mso-list":return void(i=h.replace(/.*level(\d*).*/gi,"$1"));case"mso-bidi-theme-font":return void(k=!0);case"horiz-align":case"text-align":return void(f[g++]="text-align:"+h);case"text-indent":return void(f[g++]="text-indent:"+h);case"vert-align":return void(f[g++]="vertical-align:"+h);case"color":case"font-color":case"mso-foreground":return void("transparent"!=h&&(f[g++]="color:"+h));case"mso-background":case"mso-highlight":return void(f[g++]="background:"+h);case"background-color":return void("transparent"!=h&&"rgb(255, 255, 255)"!=h&&(f[g++]="background-color:"+h));case"background-position":case"background-repeat":return void("initial initial"!=h&&"repeat repeat"!=h&&"0px 0px"!=h&&(f[g++]="background-position:"+h));case"background-image":return;case"font-size":return void("1em"!=h&&(f[g++]="font-size:"+h));case"mso-default-height":return void("0px"!=h&&(f[g++]="min-height:"+c(h)));case"mso-default-width":return void("0px"!=h&&(f[g++]="min-width:"+c(h)));case"mso-padding-between-alt":return void(f[g++]="border-collapse:separate;border-spacing:"+c(h));case"text-line-through":return void("single"!=h&&"double"!=h||(f[g++]="text-decoration:line-through"));case"mso-zero-height":return void("yes"==h&&(f[g++]="display:none"))}if(/^(?:mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?!decor|trans)|top-bar|version|vnd|word-break)/.test(e))return;if(0===p.indexOf("<p")&&("min-height"==e||"height"==e))return;o[1]=o[1].replace(/^0(?:[\w]+)/gi,"0").replace(/(?:\s)0(?:[\w]+)/gi," 0").replace(/(?:\s)0.00(?:[\d|\w]+)/gi," 0"),o[1]=o[1].replace(/^[0\s]*$/gi,"0");var s=a(j,"paste_retain_style_properties");s=tinymce.is(s,"string")&&"all"!==s&&"*"!==s?tinymce.explode(s.replace(/^none$/i,"")):[],(!s.length||tinymce.inArray(s,e))>=0&&"0"!=o[1]&&"initial"!=o[1]&&(f[g++]=e+":"+o[1])}}),d=d+(k?" jive-list-ol='1'":"")+(i?" jive-list-info='"+i+"'":"")+(l?" jive-remove-tag='1'":""),g>0?d+' style="'+f.join(";")+'"':d}]]),a(j,"paste_convert_headers_to_strong")&&e([[/<h[1-6][^>]*>/gi,"<p><strong>"],[/<\/h[1-6][^>]*>/gi,"</strong></p>"]]),i=a(j,"paste_strip_class_attributes"),"none"!==i&&(k=k.replace(/ class="([^"]+)"/gi,g),k=k.replace(/ class=([\w-]+)/gi,g)),a(j,"paste_remove_spans")&&(k=k.replace(/<\/?span[^>]*>/gi,"")),e([[/<li[^>]*>(.*)<\/li>/gi,function(a,b){var c=a.substr(0,a.indexOf(">")+1),d=a.substr(c.length+b.length);b=b.replace(/<p([^>]*)>(.*?)<\/p>/gi,"<span$1>$2</span>"),b=b.replace(/<div([^>]*)>(.*?)<\/div>/gi,"<span$1>$2</span>"),b=b.replace(/<br><\/span>/gi,"</span>");do{var e=b;b=b.replace(/<span[^>]*><\/span>/gi,"")}while(e!=b);return c+b+d}]]),k=k.replace(/<meta[^>]*>/gi,""),k=k.replace(/<\/meta>/gi,""),k=k.replace(/<br[^>]*>$/i,"");var p=/^<pre[^>]*>([\s\S]*)<\/pre[^>]*>$/i,q=p.exec(k);if(null!=q)k=q[1].replace(/\n/g,"<br />");else{k=k.replace(/\r/gi,"\n");var r=k.split("\n"),s=[];b(r,function(a){s.push(n(a))}),k=s.join(" ")}k=k.replace(/<title([^>]*)>([^<]*?)<\/title>/gi,""),k=k.replace(/\n/gi,"").replace(/\r/gi,"");var t=k;do k=t,t=k.replace(/<span>(.*?)<\/span>/gi,"$1");while(t!=k);k=k.replace(/<pre>/gi,"<pre class='jive-pre'>"),k=k.replace(/<div><br><\/div>/gi,""),k=k.replace(/<div([^>]*)>(\s?)<\/div>/gi,""),k=k.replace(/<li[^>]*>(.*?)<\/li>/gi,"<li>$1</li>"),k=k.replace(/<ul[^>]*>(.*?)<\/ul>/gi,"<ul>$1</ul>"),k=k.replace(/<li[^>]*>(.*?)<p(\s[^>]*)?>(.*?)<\/li>/gi,"<li>$1$2</li>"),k=k.replace(/<li[^>]*>(.*?)<\/p>(.*?)<\/li>/gi,"<li>$1$2</li>"),k=k.replace(/<li><p>(.*?)<\/p><\/li>/gi,"<li>$1</li>"),k=k.replace(/<ul><\/ul>/gi,""),k=k.replace(/<ol><\/ol>/gi,""),k=k.replace(/>([\s|^\u00a0]*)<td/gi,"><td"),k=k.replace(/<\/td>([\s|^\u00a0]*)</gi,"</td><"),k=k.replace(/<\/li>([\s&&[^\u00a0]]*)<\/ul>/gi,"</li></ul>"),k=k.replace(/<\/li>([\s&&[^\u00a0]]*)<\/ol>/gi,"</li></ol>"),k=k.replace(/<ul>([\s&&[^\u00a0]]*)<li>/gi,"<ul><li>"),k=k.replace(/<ol>([\s&&[^\u00a0]]*)<li>/gi,"<ol><li>"),k=k.replace(/<\/li>([\s&&[^\u00a0]]*)<li>/gi,"<li><li>");var u="(?:H[1-6R]|P|DIV|ADDRESS|PRE|FORM|TABLE|TBODY|THEAD|TFOOT|TH|TR|TD|LI|OL|UL|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|NOSCRIPT|MENU|ISINDEX|SAMP)";k=k.replace(new RegExp("(</?"+u+"[^>]*>)\\s+(?=<"+u+")","gi"),"$1"),k=k.replace(new RegExp("(</"+u+"[^>]*>)\\s+(?=</"+u+")","gi"),"$1"),k=k.replace(/> /gi,">&nbsp;"),k=k.replace(/ </gi,"&nbsp;<"),e([[/<div([^>]*)>((.(?!<div))*?)<\/div>/gi,function(a,b,c){var d=c.toLowerCase();return d.indexOf("<ul")>=0||d.indexOf("<ol")>=0||d.indexOf("<blockquote")>=0||d.indexOf("<p")>=0?c:a}]]),k=k.replace(/<div([^>]*)>(.*?)<\/div>/gi,"<p$1>$2</p>"),k=k.replace(/<\/strong><strong(?:\s*)>/gi,""),k=k.replace(/<\/b><b(?:\s*)>/gi,""),k=k.replace(/<\/u><u(?:\s*)>/gi,""),k=k.replace(/<\/em><em(?:\s*)>/gi,""),k=k.replace(/<\/i><i(?:\s*)>/gi,""),k=k.replace(/(_jivemacro_uid_\d+)/gi,""),k=k.replace(/(_jivemacro_uid=['"][^"']*['"])/gi,""),k=k.replace(/<br class="Apple-interchange-newline">/gi,""),d.content=k},_postProcess:function(c,d){function e(a,b){for(var c=a.firstChild;c;){var d=c;c=c.nextSibling,b.test(d.nodeName)||a.removeChild(d)}}var f,g,h=this,i=h.editor,j=i.dom;if(h._removeNodes(c,d),h._fixOrphanLIs(c,d),d.wordContent&&(b(j.select("a",d.node),function(a){a.href&&-1==a.href.indexOf("#_Toc")||j.remove(a,1)}),a(i,"paste_convert_middot_lists")&&h._convertLists(c,d),b(j.select("*",d.node),function(a){"SPAN"!=a.nodeName||a.className||j.getAttrib(a,"style")||j.remove(a,!0)})),a(i,"paste_remove_styles")||a(i,"paste_remove_styles_if_webkit")&&tinymce.isWebKit?b(j.select("*[style]",d.node),function(a){a.removeAttribute("style"),a.removeAttribute("data-mce-style")}):tinymce.isWebKit&&b(j.select("*",d.node),function(a){a.getAttribute("data-mce-style")&&a.setAttribute("style",a.getAttribute("data-mce-style")),a.removeAttribute("data-mce-style")}),d.node.childNodes.length>1){for(var k=!1,l=[],m=d.node.firstChild,n=0;null!=m;){f=m.nextSibling;var o=m.nodeName.toLowerCase(),p=f?f.nodeName.toLowerCase():null;if(3==m.nodeType||!j.isBlock(m)&&"br"!=o?(f&&"p"==p&&0==f.innerHTML.length?f.parentNode.removeChild(f):f&&"br"==p&&(f.parentNode.removeChild(f),k=!0),l.push(m)):"br"==o&&(g=j.create("p"),m.parentNode.insertBefore(g,m),g.appendChild(m),m=g,++n),(f&&1==f.nodeType&&j.isBlock(f)||k)&&l.length){g=l[0].ownerDocument.createElement("p"),d.node.insertBefore(g,l[0]);do g.appendChild(l.shift());while(l.length);m=g,++n,l=[]}k=!1,m=m.nextSibling}if(l.length&&n>0){g=l[0].ownerDocument.createElement("p"),d.node.insertBefore(g,l[0]);do g.appendChild(l.shift());while(l.length)}}b(j.select("table",d.node),function(a){for(var b=a.firstChild;b;){var c=b;if(b=b.nextSibling,1!=c.nodeType)a.removeChild(c);else{var d=c.nodeName.toLowerCase();"thead"!=d&&"tbody"!=d&&"tr"!=d&&a.removeChild(c)}}}),b(j.select("tr",d.node),function(a){e(a,/t[hd]/i)}),b(j.select("tbody",d.node),function(a){e(a,/tr/i)});var q=j.select("p p",d.node);b(q,function(a){var b=j.getParent(a,"p",d.node);j.split(b,a)}),b(j.select("a.jive_macro",d.node),function(a){if(j.getAttrib(a,"href")&&j.setAttrib(a,"href","javascript:;"),!j.getAttrib(a,"jivemacro")){var c=a.className.split(/\s+/);b(c,function(b){if(0===b.indexOf("jive_macro_")){var c=b.substr("jive_macro_".length);j.setAttrib(a,"jivemacro",c)}})}}),i.plugins.jiveimage&&b(j.select("img",d.node),function(a){
j.hasClass(a,"jive_emote")||j.addClass(a,"jive-image"),/^(?:data|blob):/.test(a.src)?(j.addClass(a,"toUpload"),j.setStyles(a,{"max-width":"1200px","max-height":"900px"})):/^(?:file|webkit-fake-url):/.test(a.src)&&j.remove(a)});var r=function(){return"function"==typeof"a".endsWith?function(a,b){return a.endsWith(b)}:function(a,b){return a.length>=b.length?a.substring(a.length-b.length)==b:!1}}();if(1==d.node.childNodes.length&&"a"==d.node.firstChild.nodeName.toLowerCase()){var s=d.node.firstChild;if(!j.hasClass(s,"jive_macro")&&!j.getAttrib(s,"jivemacro")){var t=j.getAttrib(s,"href"),u=i.convertURL(tinymce.trim(s.textContent));(r(t,u)||r(u,t))&&j.addClass(s,"loading")}}1==d.node.childNodes.length&&"p"==d.node.firstChild.nodeName.toLowerCase()&&j.remove(d.node.firstChild,!0),i.addVisual(d.node)},_fixOrphanLIs:function(a,c){var d=a.editor.dom;"li"!==a.editor.selection.getNode().nodeName.toLowerCase()&&b(d.select("li",c.node),function(a){if("ul"!=a.parentNode.nodeName.toLowerCase()&&"ol"!=a.parentNode.nodeName.toLowerCase()){var b=a.ownerDocument.createElement("ul");a.parentNode.insertBefore(b,a),b.appendChild(a)}})},_removeNodes:function(a,c){var d=a.editor.dom;b(d.select("[jive-remove-tag=1]",c.node),function(a){if(1==a.nodeType){for(;a.childNodes.length;)a.parentNode.insertBefore(a.childNodes[0],a);a.parentNode.removeChild(a)}})},_convertLists:function(a,c){function d(a){var b=j.create(a.listType),c="list-style-type: "+a.subType;return tinymce.isIE?b.style.setAttribute("cssText",c):b.setAttribute("style",c),b}function e(a){var b,c=j.select(".pasted-list-info",a);b=c.length>0?c[0].textContent:a.innerHTML.replace(/<\/?\w+[^>]*>/gi,"").replace(/&nbsp;/g," ");var d={isListItem:/__MCE_ITEM__+/.test(b)||/^(\d)+\./.test(b)||/^v\s+/.test(b)||/^[a-z]+\./i.test(b)},e=null;if(j.select("span[jive-list-ol=1]",a).length&&(e="ol"),j.select("span[jive-list-ul=1]",a).length&&(e="ul"),d.isListItem){var f=b.match(/^[^\s]+/)[0].replace(/^(?:__MCE_ITEM__)*/,"");d.subType||(d.subType=function(){return/^0\d/.test(f)?"decimal-leading-zero":/^\d/.test(f)?"decimal":/^[i]/.test(f)?"lower-roman":/^[I]/.test(f)?"upper-roman":!/^v/.test(f)||e&&"ul"!=e?!/^o/.test(f)||e&&"ul"!=e?/^[a-z]/.test(f)?"lower-alpha":/^[A-Z]/.test(f)?"upper-alpha":/^[\u03b1-\u03c8]/.test(f)?"lower-greek":"disc":"circle":"disc"}()),d.listType=/disc|circle|square/.test(d.subType)?"ul":"ol"}return d}var f,g,h,i,j=a.editor.dom,k=-1,l=[];b(j.select("p",c.node),function(a){var c,i,m,n=e(a);if(n.isListItem){var o=parseFloat(a.getAttribute("jive-list-info")||0);if(o>k&&l.push(o),!f||n.listType!=h&&o==k)f=d(n),j.insertAfter(f,a);else if(o>k){var p=f;f=d(n),p.appendChild(f)}else if(k>o)if(i=tinymce.inArray(l,o),m=j.getParents(f.parentNode,"ol,ul"),f=m[m.length-1-i]||f,f.nodeName.toLowerCase()==n.listType);else{var p=f;f=d(n),j.insertAfter(f,p)}b(j.select(".pasted-list-info",a),function(a){j.remove(a)}),b(j.select("span",a),function(a){if(0==a.childNodes.length)return void j.remove(a);var b=a.innerHTML.replace(/<\/?\w+[^>]*>/gi,"");"ul"==n.listType&&/^.?\s*(&nbsp;|\u00a0)+\s*/.test(b)?j.remove(a):/^__MCE_ITEM__[\s\S]*\w+[\.|\)|:]?(&nbsp;|\u00a0)+\s*/.test(b)&&j.remove(a)}),/alpha$/.test(n.subType)&&(a.innerHTML=a.innerHTML.replace(/^[a-z]+\.(\s|\u00a0|&nbsp;)+/i,"")),c=a.innerHTML,"ul"==n.listType?c=c.replace(/(__MCE_ITEM__)+.?\s*(&nbsp;|\u00a0|\u00b7)+\s*/,""):(c=c.replace(/(__MCE_ITEM__)+\s*\w+[\.|\)|:]?(&nbsp;|\u00a0)+\s*/,"").replace(/^\d+\.(\s|\u00a0|&nbsp;)+/,""),c=c.replace(/__MCE_ITEM__(\w)+\.\s?/,"")),g=f.appendChild(j.create("li",0,c)),j.remove(a),k=o,h=n.listType}else f=k=0}),i=c.node.innerHTML,i=i.replace(/__MCE_ITEM__/g,"");do{var m=i;i=i.replace(/<(\w+)[^>]*?>\s*<\/[^>]*>/gi,"")}while(m!=i);c.node.innerHTML=i},_insertBlockContent:function(a,c,d){function e(b){var c;if(tinymce.isIE){c=a.getDoc().body.createTextRange();try{c.moveToElementText(b)}catch(d){try{c.moveToElementText(b.parentNode)}catch(e){}}c.collapse(!1),c.select()}else o.select(b,1),o.collapse(!1)}function f(a){var b=c.select("."+a);return b&&b.length>0?b[0]:null}function g(a){if(c.isEmpty(a))return!0;for(var b=a.firstChild;b;){if(1==b.nodeType&&c.isEmpty(b)&&"img"!=b.nodeName.toLowerCase())return!0;b=b.firstChild}return!1}var h,i,j,k,l,m,n,o=a.selection,p="mce_paste_marker",q=a.selectionUtil.atStartOf(o.getNode()),r='<span class="'+p+'"></span>';if(this._insert(r,1),i=f(p),i||(a.execCommand("mceInsertContent",!1,r,{skip_undo:1}),i=f(p)),h=c.getParent(i,"p,h1,h2,h3,h4,h5,h6,ul,ol,th,td"),a.dom.getParent(o.getNode(),"li")){var s=a.dom.getParent(o.getNode(),"li"),t=a.dom.getParent(s,"ol,ul");q?(t.insertBefore(i,s),h=t):a.selectionUtil.atEndOf(s)&&(t.insertBefore(i,s.nextSibling),h=t),g(s)&&t.removeChild(s)}h&&!/TD|TH/.test(h.nodeName)&&(i=c.split(h,i)),b(c.create("div",0,d).childNodes,function(a){j=a.cloneNode(!0),i.parentNode.insertBefore(j,i)}),e(j),b(c.select("."+p),function(a){c.remove(a)}),k=o.getStart(),l=c.getViewPort(a.getWin()),m=a.dom.getPos(k).y,n=k.clientHeight,(m<l.y||m+n>l.y+l.h)&&a.getWin().scrollTo(0,m<l.y?m:m-l.h+n)},_insert:function(a,b){var c=this.editor,d=c.selection.getRng();c.selection.isCollapsed()||d.startContainer==d.endContainer||c.getDoc().execCommand("Delete",!1,null),c.execCommand("mceInsertContent",!1,a,{skip_undo:b})},_insertPlainText:function(d,e,f){function g(a){b(a,function(a){f=a.constructor==RegExp?f.replace(a,""):f.replace(a[0],a[1])})}var h,i,j,k,l,m,n,o,p=d.getWin(),q=d.getDoc(),r=d.selection,s=tinymce.is,t=tinymce.inArray,u=a(d,"paste_text_linebreaktype"),v=a(d,"paste_text_replacements");if("string"==typeof f&&f.length>0){c||(c=("34,quot,38,amp,39,apos,60,lt,62,gt,"+d.serializer.settings.entities).split(",")),g(/<(?:p|br|h[1-6]|ul|ol|dl|table|t[rdh]|div|blockquote|fieldset|pre|address|center)[^>]*>/i.test(f)?[/[\n\r]+/g]:[/\r+/g]),g([[/<\/(?:p|h[1-6]|ul|ol|dl|table|div|blockquote|fieldset|pre|address|center)>/gi,"\n\n"],[/<br[^>]*>|<\/tr>/gi,"\n"],[/<\/t[dh]>\s*<t[dh][^>]*>/gi,"	"],/<[a-z!\/?][^>]*>/gi,[/&nbsp;/gi," "],[/&(#\d+|[a-z0-9]{1,10});/gi,function(a,b){return"#"===b.charAt(0)?String.fromCharCode(b.slice(1)):(a=t(c,b))>0?String.fromCharCode(c[a-1]):" "}],[/(?:(?!\n)\s)*(\n+)(?:(?!\n)\s)*/gi,"$1"],[/\n{3,}/g,"\n\n"],/^\s+|\s+$/g]),r.isCollapsed()||q.execCommand("Delete",!1,null);var w=Number(a(d,"paste_max_consecutive_linebreaks"));if(w>-1){for(var x=new RegExp("\n{"+(w+1)+",}","g"),y="";y.length<w;)y+="\n";g([[x,y]])}if(content=d.dom.decode(tinymce.html.Entities.encodeRaw(content)),s(v,"array")||s(v,"array")?g(v):s(v,"string")&&g(new RegExp(v,"gi")),g("none"==u?[[/\n+/g," "]]:"br"==u?[[/\n/g,"<br />"]]:"p"==u?[[/\n+/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"]]:[/^\s+|\s+$/g,[/\n\n/g,"</p><p>"],[/\n/g,"<br />"]]),-1!=(j=f.indexOf("</p><p>"))){k=f.lastIndexOf("</p><p>"),l=r.getNode(),m=[];do if(1==l.nodeType){if("TD"==l.nodeName||"BODY"==l.nodeName)break;m[m.length]=l}while(l=l.parentNode);if(m.length>0){for(n=f.substring(0,j),o="",h=0,i=m.length;i>h;h++)n+="</"+m[h].nodeName.toLowerCase()+">",o+="<"+m[m.length-h-1].nodeName.toLowerCase()+">";f=j==k?n+o+f.substring(j+7):n+f.substring(j+4,k+4)+o+f.substring(k+7)}}d.execCommand("mceInsertRawHTML",!1,f+'<span id="_plain_text_marker">&nbsp;</span>'),window.setTimeout(function(){var a,b,c,d,f=e.get("_plain_text_marker");r.select(f,!1),q.execCommand("Delete",!1,null),f=null,a=r.getStart(),b=e.getViewPort(p),c=e.getPos(a).y,d=a.clientHeight,(c<b.y||c+d>b.y+b.h)&&(q.body.scrollTop=c<b.y?c:c-b.h+25)},0)}},_legacySupport:function(){var b=this,c=b.editor;c.addCommand("mcePasteWord",function(){c.windowManager.open({file:CS_RESOURCE_BASE_URL+"/resources/scripts/tiny_mce3/plugins/paste/pasteword.htm",width:parseInt(a(c,"paste_dialog_width")),height:parseInt(a(c,"paste_dialog_height")),inline:1})}),a(c,"paste_text_use_dialog")&&c.addCommand("mcePasteText",function(){c.windowManager.open({file:b.url+"/pastetext.htm",width:parseInt(a(c,"paste_dialog_width")),height:parseInt(a(c,"paste_dialog_height")),inline:1})}),c.addButton("pasteword",{title:"paste.paste_word_desc",cmd:"mcePasteWord"})}}),tinymce.PluginManager.add("paste",tinymce.plugins.PastePlugin)}()}),define("tiny_mce3/plugins/paste/editor_plugin_src",["tinyMCE"],function(){}),define("tiny_mce3/plugins/spellchecker/editor_plugin_src",["tinyMCE"],function(){!function(){var a=tinymce.util.JSONRequest,b=tinymce.each,c=tinymce.DOM;tinymce.create("tinymce.plugins.SpellcheckerPlugin",{getInfo:function(){return{longname:"Spellchecker",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/spellchecker",version:tinymce.majorVersion+"."+tinymce.minorVersion}},init:function(a,c){var d=this;if(d.url=c,d.editor=a,d.rpcUrl=a.getParam("spellchecker_rpc_url","{backend}"),a.onBeginSpelling=new tinymce.util.Dispatcher(a),a.onEndSpelling=new tinymce.util.Dispatcher(a),a.onSpellCheckFinished=new tinymce.util.Dispatcher(a),"{backend}"==d.rpcUrl){if(tinymce.isIE)return;d.hasSupport=!0,a.onContextMenu.addToTop(function(a,b){return d.active?!1:void 0})}a.addCommand("mceSpellCheck",function(){return"{backend}"==d.rpcUrl?void(d.editor.getBody().spellcheck=d.active=!d.active):void(d.active?d._done():(a.onBeginSpelling.dispatch(),a.setProgressState(1),d._sendRPC("checkWords",[d.selectedLang,d._getWords()],function(b){b.length>0?(d.active=1,d._markWords(b),a.setProgressState(0),a.nodeChanged(),a.onSpellCheckFinished.dispatch()):(a.setProgressState(0),a.getParam("spellchecker_report_no_misspellings",!0)&&a.windowManager.alert("spellchecker.no_mpell"),a.onEndSpelling.dispatch())})))}),a.onInit.add(function(){a.settings.content_css!==!1&&a.dom.loadCSS(window.CS_RESOURCE_BASE_URL+"/styles/tiny_mce3/plugins/spellchecker/css/content.css")}),a.onClick.add(d._showMenu,d),a&&a.plugins.contextmenu&&a.onContextMenu.add(d._showMenu,d),a.onNodeChange.add(function(a,b){b.setActive("spellchecker",d.active)}),a.onSetContent.add(function(){d._done()}),a.onBeforeGetContent.add(function(){d._done()}),a.onBeforeExecCommand.add(function(a,b){"mceFullScreen"==b&&d._done()}),d.languages={},b(a.getParam("spellchecker_languages","+English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr,German=de,Italian=it,Polish=pl,Portuguese=pt,Spanish=es,Swedish=sv","hash"),function(a,b){0===b.indexOf("+")&&(b=b.substring(1),d.selectedLang=a),d.languages[b]=a});var e=_jive_locale.toLowerCase();_.contains(_.values(d.languages),e)&&(d.selectedLang=e)},createControl:function(a,c){var d,e=this;e.editor;return"spellchecker"==a?"{backend}"==e.rpcUrl?(e.hasSupport&&(d=c.createButton(a,{title:"spellchecker.desc",cmd:"mceSpellCheck",scope:e})),d):(d=c.createSplitButton(a,{title:"spellchecker.desc",cmd:"mceSpellCheck",scope:e}),d.onRenderMenu.add(function(a,c){c.add({title:"spellchecker.langs","class":"mceMenuItemTitle"}).setDisabled(1),b(e.languages,function(a,b){var d,f={icon:1};f.onclick=function(){a!=e.selectedLang&&(d.setSelected(1),e.selectedItem.setSelected(0),e.selectedItem=d,e.selectedLang=a)},f.title=b,d=c.add(f),d.setSelected(a==e.selectedLang),a==e.selectedLang&&(e.selectedItem=d)})}),d):void 0},_walk:function(a,b){var c,d=this.editor.getDoc();if(d.createTreeWalker)for(c=d.createTreeWalker(a,NodeFilter.SHOW_TEXT,null,!1);null!=(a=c.nextNode());)b.call(this,a);else tinymce.walk(a,b,"childNodes")},_getSeparators:function(){var a,b="",c=this.editor.getParam("spellchecker_word_separator_chars",'\\s!"#$%&()*+,-./:;<=>?@[]^_{|}����������������”“');for(a=0;a<c.length;a++)b+="\\"+c.charAt(a);return b},_cleanBody:function(){var a=this.editor;a.dom;this._walk(a.getBody(),function(a){for(;$def(a)&&3==a.nodeType&&a.nextSibling&&3==a.nextSibling.nodeType;)a.nodeValue=a.nodeValue+a.nextSibling.nodeValue,a.nextSibling.parentNode.removeChild(a.nextSibling)})},_getWords:function(){var a=this.editor,c=[],d="",e={},f=a.dom,g=a.plugins.jivemacros;return this._walk(a.getBody(),function(a){if(3==a.nodeType){var b=f.getParent(a,"span"),c=f.getParent(a,"pre");null!=b&&g.isMacro(b)||null!=c&&g.isMacro(c)&&"quote"!=g.getMacroFor(c).getName()||(d+=a.nodeValue+" ")}}),d=d.replace(new RegExp("([0-9]|["+this._getSeparators()+"])","g")," "),d=tinymce.trim(d.replace(/(\s+)/g," ")),b(d.split(" "),function(a){e[a]||(c.push(a),e[a]=1)}),c},_removeWords:function(a){var c=this.editor,d=c.dom,e=c.selection,f=e.getBookmark();b(d.select("span").reverse(),function(b){b&&(d.hasClass(b,"mceItemHiddenSpellWord")||d.hasClass(b,"mceItemHidden"))&&(a&&d.decode(b.innerHTML)!=a||d.remove(b,1))}),e.moveToBookmark(f)},_markWords:function(a){var c=this.editor,d=this._getSeparators(),e=c.dom,f=[],g=c.selection,h=g.getBookmark(BOOKMARKTYPE),i=c.plugins.jivemacros,j=a.join("|"),k=new RegExp("(^|["+d+"])("+j+")(?=["+d+"]|$)","g");this._walk(this.editor.getBody(),function(a){3==a.nodeType&&f.push(a)}),b(f,function(a){var b=e.getParent(a,"span"),c=e.getParent(a,"pre");if(!(null!=b&&i.isMacro(b)||null!=c&&i.isMacro(c)&&"quote"!=i.getMacroFor(c).getName())){var d=a.nodeValue;k.lastIndex=0,k.test(d)&&(d=e.encode(d),d=d.replace(k,'$1<span class="mceItemHiddenSpellWord">$2</span>'),e.replace(e.create("span",{"class":"mceItemHidden"},d),a))}}),g.moveToBookmark(h)},_showMenu:function(a,d){var e,f=this,a=f.editor,g=f._menu,h=a.dom,i=h.getViewPort(a.getWin()),j=d.target;return d=0,g||(g=a.controlManager.createDropMenu("spellcheckermenu",{"class":"mceNoIcons"}),f._menu=g),h.hasClass(j,"mceItemHiddenSpellWord")?(g.removeAll(),g.add({title:"spellchecker.wait","class":"mceMenuItemTitle"}).setDisabled(1),f._sendRPC("getSuggestions",[f.selectedLang,h.decode(j.innerHTML)],function(c){var d;g.removeAll(),c.length>0?(g.add({title:"spellchecker.sug","class":"mceMenuItemTitle"}).setDisabled(1),b(c,function(b){g.add({title:b,onclick:function(){h.replace(a.getDoc().createTextNode(b),j),f._checkDone()}})}),g.addSeparator()):g.add({title:"spellchecker.no_sug","class":"mceMenuItemTitle"}).setDisabled(1),d=f.editor.getParam("spellchecker_enable_ignore_rpc",""),g.add({title:"spellchecker.ignore_word",onclick:function(){var b=j.innerHTML;h.remove(j,1),f._checkDone(),d&&(a.setProgressState(1),f._sendRPC("ignoreWord",[f.selectedLang,b],function(b){a.setProgressState(0)}))}}),g.add({title:"spellchecker.ignore_words",onclick:function(){var b=j.innerHTML;f._removeWords(h.decode(b)),f._checkDone(),d&&(a.setProgressState(1),f._sendRPC("ignoreWords",[f.selectedLang,b],function(b){a.setProgressState(0)}))}}),f.editor.getParam("spellchecker_enable_learn_rpc")&&g.add({title:"spellchecker.learn_word",onclick:function(){var b=j.innerHTML;h.remove(j,1),f._checkDone(),a.setProgressState(1),f._sendRPC("learnWord",[f.selectedLang,b],function(b){a.setProgressState(0)})}}),g.update()}),e=c.getPos(a.getContentAreaContainer()),g.settings.offset_x=e.x,g.settings.offset_y=e.y,a.selection.select(j),e=h.getPos(j),g.showMenu(e.x,e.y+j.offsetHeight-i.y),tinymce.dom.Event.cancel(d)):void g.hideMenu()},_checkDone:function(){var a,c=this,d=c.editor,e=d.dom;b(e.select("span"),function(b){return b&&e.hasClass(b,"mceItemHiddenSpellWord")?(a=!0,!1):void 0}),a||c._done()},_done:function(){var a=this,b=a.active;a.active&&(a.editor.onEndSpelling.dispatch(),a.active=0,a._removeWords(),a._menu&&a._menu.hideMenu(),b&&a.editor.nodeChanged())},_sendRPC:function(b,c,d){var e=this;a.sendRPC({url:e.rpcUrl,method:b,params:c,success:d,error:function(a,b){e.editor.setProgressState(0),e.editor.windowManager.alert(a.errstr||"Error response: "+b.responseText)}})}}),tinymce.PluginManager.add("spellchecker",tinymce.plugins.SpellcheckerPlugin)}()}),define("tiny_mce3/plugins/spellchecker/editor_plugin_src",["tinyMCE"],function(){}),define("tiny_mce3/themes/advanced/editor_template_src",["tinyMCE","jquery-private","jive/ext/x/x_timer"],function(){!function(a){var b,c=tinymce.DOM,d=tinymce.dom.Event,e=tinymce.extend,f=tinymce.each,g=tinymce.util.Cookie,h=tinymce.explode;tinymce.ThemeManager.requireLangPack("advanced"),tinymce.create("tinymce.themes.AdvancedTheme",{controls:{bold:["bold_desc","Bold"],italic:["italic_desc","Italic"],underline:["underline_desc","Underline"],strikethrough:["striketrough_desc","Strikethrough"],justifyleft:["justifyleft_desc","JustifyLeft"],justifycenter:["justifycenter_desc","JustifyCenter"],justifyright:["justifyright_desc","JustifyRight"],justifyfull:["justifyfull_desc","JustifyFull"],bullist:["bullist_desc","jiveInsertUnorderedList"],numlist:["numlist_desc","jiveInsertOrderedList"],outdent:["outdent_desc","mceOutdent"],indent:["indent_desc","mceIndent"],cut:["cut_desc","Cut"],copy:["copy_desc","Copy"],paste:["paste_desc","Paste"],link:["link_desc","mceLink"],unlink:["unlink_desc","unlink"],image:["image_desc","mceImage"],undo:["undo_desc","Undo"],redo:["redo_desc","Redo"],sub:["sub_desc","subscript"],sup:["sup_desc","superscript"],code:["code_desc","mceCodeEditor"],hr:["hr_desc","InsertHorizontalRule"],removeformat:["removeformat_desc","mceRemoveFullFormat"],forecolor:["forecolor_desc","ForeColor"],forecolorpicker:["forecolor_desc","mceForeColor"],backcolor:["backcolor_desc","HiliteColor"],backcolorpicker:["backcolor_desc","mceBackColor"],blockquote:["blockquote_desc","mceBlockQuote"]},stateControls:["bold","italic","underline","strikethrough","bullist","numlist","justifyleft","justifycenter","justifyright","justifyfull","blockquote"],removeListsFromHelper:function(a,b,c,d){var e=!1;if(null==c)return!0;c==d&&(e=!0);var f=a.getDoc();if(3==c.nodeType||"ol"!=c.nodeName.toLowerCase()&&"ul"!=c.nodeName.toLowerCase())return b.appendChild(c),!1;for(;c.childNodes.length>0;){var g=c.childNodes[0];if(this.removeListsFromHelper(a,b,g,d))return"ol"!=c.nodeName.toLowerCase()&&"ul"!=c.nodeName.toLowerCase()||c.removeChild(g),!0;"ol"!=c.nodeName.toLowerCase()&&"ul"!=c.nodeName.toLowerCase()||c.removeChild(g)}return this.shouldEndLine(c)&&b.appendChild(f.createTextNode("\n")),e?e:!(null==c.nextSibling||!this.removeListsFromHelper(a,b,c.nextSibling,d))},getParentNode:function(a,b){return new tinymce.dom.DOMUtils(a.getDoc()).getParent(b,function(c){return c==a.getBody()||c!=b})},removeListsFrom:function(a,b,c,d){var e=!1;if(null==c)return!0;c==d&&(e=!0);var f=a.getDoc();if(3==c.nodeType||"ol"!=c.nodeName.toLowerCase()&&"ul"!=c.nodeName.toLowerCase())return b.appendChild(c),!1;for(;c.childNodes.length>0;){var g=c.childNodes[0];if(this.removeListsFromHelper(a,b,g,d))return"ol"!=c.nodeName.toLowerCase()&&"ul"!=c.nodeName.toLowerCase()||c.removeChild(g),!0;"ol"!=c.nodeName.toLowerCase()&&"ul"!=c.nodeName.toLowerCase()||c.removeChild(g)}if(this.shouldEndLine(c)&&b.appendChild(f.createTextNode("\n")),e){if("ol"==c.nodeName.toLowerCase()||"ul"==c.nodeName.toLowerCase()){var h=this.getParentNode(a,c);h.removeChild(c)}return e}if(null!=c.nextSibling){var i=c.nextSibling;if("ol"==c.nodeName.toLowerCase()||"ul"==c.nodeName.toLowerCase()){var h=this.getParentNode(a,c);h.removeChild(c)}if(this.removeListsFromHelper(a,b,i,d))return!0}var i=this.getNextSibling(a,c);if("ol"==c.nodeName.toLowerCase()||"ul"==c.nodeName.toLowerCase()){var h=this.getParentNode(a,c);h.removeChild(c)}return!!this.removeListsFrom(a,b,i,d)},init:function(a,b){var d,g,i=this;a.addCommand("mceRemoveFullFormat",function(){if(!a.selection.isCollapsed()){a.execCommand("RemoveFormat");var b=a.selection.getNode(),c=a.dom.getParent(b,"table");null==c&&a.execCommand("FormatBlock",!1,"p")}}),i.editor=a,i.url=b,i.onResolveName=new tinymce.util.Dispatcher(this),i.onResize=new tinymce.util.Dispatcher(this),i.settings=d=e({theme_advanced_path:!0,theme_advanced_toolbar_location:"bottom",theme_advanced_blockformats:"p,address,pre,h1,h2,h3,h4,h5,h6",theme_advanced_toolbar_align:"center",theme_advanced_fonts:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",theme_advanced_font_sizes:"1,2,3,4,5,6,7",theme_advanced_more_colors:1,theme_advanced_row_height:23,theme_advanced_resize_horizontal:1,theme_advanced_resizing_use_cookie:1},a.settings),(g=d.theme_advanced_path_location)&&"none"!=g&&(d.theme_advanced_statusbar_location=d.theme_advanced_path_location),"none"==d.theme_advanced_statusbar_location&&(d.theme_advanced_statusbar_location=0),a.onInit.add(function(){a.onNodeChange.add(i._nodeChanged,i),a.onKeyDown.add(i._keyDown,i),jive.ext.x.xTimer.set("timeout",i,"_refreshFont",33),jive.ext.x.xTimer.set("timeout",i,"_refreshFont",500),jive.ext.x.xTimer.set("timeout",i,"_refreshFontColor",33),jive.ext.x.xTimer.set("timeout",i,"_refreshFontColor",500),jive.ext.x.xTimer.set("timeout",i,"_refreshFontSize",33),jive.ext.x.xTimer.set("timeout",i,"_refreshFontSize",500),a.addCommand("jiveInsertUnorderedList",function(){a.execCommand("mceInsertUnorderedList"),window.focus(),a.focus()}),a.addCommand("jiveInsertOrderedList",function(){a.execCommand("mceInsertOrderedList"),window.focus(),a.focus()});var b=a.controlManager.get("fontsizeselect");if(b){var c=document.createElement("DIV"),d=["8 pt","10 pt","12 pt","14 pt","18 pt","24 pt","36 pt"],e=[8,10,12,14,18,24,36];b.computed=new Array,document.body.appendChild(c),f(h(i.settings.theme_advanced_font_sizes),function(a){c.style.fontSize=e[a-1]+"pt";var f=jive.ext.x.xGetCS(c,"font-size");b.computed.push(f),b.add(d[parseInt(a)-1],a,{style:"font-size:"+e[a-1]+"pt","class":"mceFontSize"+a})}),document.body.removeChild(c),a.onKeyUp.add(function(a){var b=a.controlManager;b.setActive("bold",a.queryCommandState("Bold")),b.setActive("italic",a.queryCommandState("Italic")),b.setActive("underline",a.queryCommandState("Underline")),b.setActive("strikethrough",a.queryCommandState("Strikethrough"))}),a.onBeforeExecCommand.add(function(a,b,c,d){var e=a.controlManager;if("Bold"==b&&e.get("bold").setActive(a.queryCommandState("Bold")),"Italic"==b&&e.get("italic").setActive(a.queryCommandState("Italic")),"Underline"==b&&e.get("underline").setActive(a.queryCommandState("Underline")),"Strikethrough"==b&&e.get("strikethrough").setActive(a.queryCommandState("Strikethrough")),"mceOutdentComplete"!=b&&"mceIndentComplete"!=b||e.setDisabled("outdent",!a.queryCommandState("Outdent")),"FontSize"==b&&!a.selection.isCollapsed()){var f=a.selection.getRng(!0);a.plugins.jiveutil.walkDOMTree(f.startContainer,f.endContainer,function(a){!tinymce.isWebKit&&a.style&&(a.style.fontSize=""),1==a.nodeType&&"font"==a.nodeName.toLowerCase()&&a.getAttribute("size")!=d&&a.setAttribute("size",d)})}})}}),a.onSetProgressState.add(function(a,b,d){var e,f,g=a.id;b?i.progressTimer=setTimeout(function(){e=a.getContainer(),e=e.insertBefore(c.create("DIV",{style:"position:relative"}),e.firstChild),f=c.get(a.id+"_tbl"),c.add(e,"div",{id:g+"_blocker","class":"mceBlocker",style:{width:f.clientWidth+2,height:f.clientHeight+2}}),c.add(e,"div",{id:g+"_progress","class":"mceProgress",style:{left:f.clientWidth/2,top:f.clientHeight/2}})},d||0):(c.remove(g+"_blocker"),c.remove(g+"_progress"),clearTimeout(i.progressTimer))}),null!==d.editor_css&&c.loadCSS(window.CS_RESOURCE_BASE_URL+"/"+(d.editor_css||"styles/tiny_mce3/themes/advanced/skins/"+a.settings.skin+"/ui.css")),d.ui_css&&c.loadCSS(d.ui_css),null!==d.editor_css&&c.loadCSS(window.CS_RESOURCE_BASE_URL+"/"+(d.editor_css||"styles/tiny_mce3/themes/advanced/skins/"+a.settings.skin+"/content.css")),d.skin_variant&&c.loadCSS(a.baseURI.toAbsolute(d.editor_css||"themes/advanced/skins/"+a.settings.skin+"/ui_"+d.skin_variant+".css"))},createControl:function(a,b){var c,d;if(d=b.createControl(a))return d;switch(a){case"styleselect":return this._createStyleSelect();case"formatselect":return this._createBlockFormats();case"fontselect":return this._createFontSelect();case"fontsizeselect":return this._createFontSizeSelect();case"forecolor":return this._createForeColorMenu();case"backcolor":return this._createBackColorMenu()}return(c=this.controls[a])?b.createButton(a,{title:"advanced."+c[0],cmd:c[1],ui:c[2],value:c[3]}):void 0},execCommand:function(a,b,c){var d=this["_"+a];return d?(d.call(this,b,c),!0):!1},_importClasses:function(){var a=this.editor,b=a.controlManager.get("styleselect");0==b.getLength()&&f(a.dom.getClasses(),function(a){b.add(a["class"],a["class"])})},_createStyleSelect:function(a){var b=this,c=b.editor,e=c.controlManager,g=e.createListBox("styleselect",{title:"advanced.style_select",onselect:function(a){return g.selectedValue===a?(c.execCommand("mceSetStyleInfo",0,{command:"mceRemoveFullFormat"}),g.select(),!1):void c.execCommand("mceSetCSSClass",0,a)}});return g&&(f(c.getParam("theme_advanced_styles","","hash"),function(a,c){a&&g.add(b.editor.translate(c),a)}),g.onPostRender.add(function(a,c){d.add(c,"focus",b._importClasses,b),d.add(c,"mousedown",b._importClasses,b)})),g},_createFontSelect:function(){var a,b=this,c=b.editor;return a=c.controlManager.createListBox("fontselect",{title:"advanced.fontdefault",cmd:"FontName"}),a&&f(c.getParam("theme_advanced_fonts",b.settings.theme_advanced_fonts,"hash"),function(b,d){a.add(c.translate(d),b.toLowerCase(),{style:-1==b.indexOf("dings")?"font-family:"+b:""})}),a},_createFontSizeSelect:function(){var a=this,b=a.editor,c=b.controlManager.createListBox("fontsizeselect",{title:"advanced.font_size",cmd:"FontSize"});return c},_createBlockFormats:function(){var a,b={p:"advanced.paragraph",address:"advanced.address",pre:"advanced.pre",h1:"advanced.h1",h2:"advanced.h2",h3:"advanced.h3",h4:"advanced.h4",h5:"advanced.h5",h6:"advanced.h6",div:"advanced.div",blockquote:"advanced.blockquote",code:"advanced.code",dt:"advanced.dt",dd:"advanced.dd",samp:"advanced.samp"},c=this;return a=c.editor.controlManager.createListBox("formatselect",{title:"advanced.block",cmd:"FormatBlock"}),a&&f(c.editor.getParam("theme_advanced_blockformats",c.settings.theme_advanced_blockformats,"hash"),function(d,e){a.add(c.editor.translate(e!=d?e:b[d]),d,{"class":"mce_formatPreview mce_"+d})}),a},_createForeColorMenu:function(){var a,b,c=this,d=c.settings,e={};return d.theme_advanced_more_colors&&(e.more_colors_func=function(){c._mceColorPicker(0,{color:a.value,func:function(b){a.setColor(b)}})}),(b=d.theme_advanced_text_colors)&&(e.colors=b),d.theme_advanced_grid_width&&(e.grid_width=d.theme_advanced_grid_width),e.title="advanced.forecolor_desc",e.cmd="ForeColor",e.scope=this,a=c.editor.controlManager.createColorSplitButton("forecolor",e),a.oldSetColor=a.setColor,a.setColor=function(a){c.ignoreRefreshCommand=!0,this.oldSetColor(a),c.ignoreRefreshCommand=!1},a},_createBackColorMenu:function(){var a,b,c=this,d=c.settings,e={};return d.theme_advanced_more_colors&&(e.more_colors_func=function(){c._mceColorPicker(0,{color:a.value,func:function(b){a.setColor(b)}})}),(b=d.theme_advanced_background_colors)&&(e.colors=b),e.title="advanced.backcolor_desc",e.cmd="HiliteColor",e.scope=this,a=c.editor.controlManager.createColorSplitButton("backcolor",e),a.oldSetColor=a.setColor,a.setColor=function(a){c.ignoreRefreshCommand=!0,this.oldSetColor(a),c.ignoreRefreshCommand=!1},a},renderUI:function(a){var b,e,g,h,i,j,k=this,l=k.editor,m=k.settings;switch(b=i=c.create("span",{id:l.id+"_parent","class":"mceEditor "+l.settings.skin+"Skin"+(m.skin_variant?" "+l.settings.skin+"Skin"+k._ufirst(m.skin_variant):"")}),c.boxModel||(b=c.add(b,"div",{"class":"mceOldBoxModel"})),b=h=c.add(b,"table",{id:l.id+"_tbl","class":"mceLayout",cellSpacing:0,cellPadding:0}),b=g=c.add(b,"tbody"),(m.theme_advanced_layout_manager||"").toLowerCase()){case"rowlayout":e=k._rowLayout(m,g,a);break;case"customlayout":e=l.execCallback("theme_advanced_custom_layout",m,g,a,i);break;default:e=k._simpleLayout(m,g,a,i)}return b=a.targetNode,j=c.stdMode?h.getElementsByTagName("tr"):h.rows,c.addClass(j[0],"mceFirst"),c.addClass(j[1],"mceIframeRow"),c.addClass(j[j.length-1],"mceLast"),f(c.select("tr",g),function(a){c.addClass(a.firstChild,"mceFirst"),c.addClass(a.childNodes[a.childNodes.length-1],"mceLast")}),c.get(m.theme_advanced_toolbar_container)?c.get(m.theme_advanced_toolbar_container).appendChild(i):c.insertAfter(i,b),d.add(l.id+"_path_row","click",function(a){return a=a.target,"A"==a.nodeName?(k._sel(a.className.replace(/^.*mcePath_([0-9]+).*$/,"$1")),d.cancel(a)):void 0}),l.getParam("accessibility_focus")&&!l.getParam("tab_focus")||d.add(c.add(i,"a",{href:"#"},"<!-- IE -->"),"focus",function(){tinyMCE.get(l.id).focus()}),"external"==m.theme_advanced_toolbar_location&&(a.deltaHeight=0),k.deltaHeight=a.deltaHeight,a.targetNode=null,l.onKeyDown.add(function(a,b){var c=121;return b.altKey&&b.keyCode===c?(tinymce.isWebKit&&window.focus(),k.toolbarGroup.focus(),d.cancel(b)):void 0}),l.addShortcut("ctrl+shift+q","Jump to Toolbar",function(){tinymce.isWebKit&&window.focus(),k.toolbarGroup.focus()}),{iframeContainer:e,editorContainer:l.id+"_parent",sizeContainer:h,deltaHeight:a.deltaHeight}},getInfo:function(){return{longname:"Advanced theme",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}},resizeBy:function(a,b){var d=c.get(this.editor.id+"_tbl");this.resizeTo(d.clientWidth+a,d.clientHeight+b)},resizeTo:function(a,b){var d,e=this.editor,f=e.settings,g=c.get(e.id+"_tbl"),h=c.get(e.id+"_ifr");a=Math.max(f.theme_advanced_resizing_min_width||100,a),b=Math.max(f.theme_advanced_resizing_min_height||100,b),a=Math.min(f.theme_advanced_resizing_max_width||65535,a),b=Math.min(f.theme_advanced_resizing_max_height||65535,b),d=g.clientHeight-h.clientHeight,c.setStyle(h,"height",b-d),c.setStyles(g,{width:a,height:b})},destroy:function(){var a=this.editor.id;d.clear(a+"_resize"),d.clear(a+"_path_row"),d.clear(a+"_external_close")},_simpleLayout:function(a,e,f,g){var h,i,j,k,l=this,m=l.editor,n=a.theme_advanced_toolbar_location,o=a.theme_advanced_statusbar_location;return"top"==n&&l._addToolbars(e,f),"external"==n&&(h=k=c.create("div",{style:"position:relative"}),h=c.add(h,"div",{id:m.id+"_external","class":"mceExternalToolbar"}),c.add(h,"a",{id:m.id+"_external_close",href:"javascript:;","class":"mceExternalClose"}),h=c.add(h,"table",{id:m.id+"_tblext",cellSpacing:0,cellPadding:0}),j=c.add(h,"tbody"),"mceOldBoxModel"==g.firstChild.className?g.firstChild.appendChild(k):g.insertBefore(k,g.firstChild),l._addToolbars(j,f),m.onMouseUp.add(function(){var a=c.get(m.id+"_external");c.show(a),c.hide(b);var e=d.add(m.id+"_external_close","click",function(){c.hide(m.id+"_external"),d.remove(m.id+"_external_close","click",e)});c.show(a),c.setStyle(a,"top",0-c.getRect(m.id+"_tblext").h-1),c.hide(a),c.show(a),a.style.filter="",b=m.id+"_external",a=null})),"top"==o&&l._addStatusBar(e,f),h=c.add(e,"tr"),h=i=c.add(h,"td",{"class":"mceIframeContainer"}),"bottom"==n&&l._addToolbars(e,f),"bottom"==o&&l._addStatusBar(e,f),i},_rowLayout:function(a,b,d){var e,g,i,j,k,l,m=this,n=m.editor,o=n.controlManager;return e=a.theme_advanced_containers_default_class||"",g=a.theme_advanced_containers_default_align||"center",f(h(a.theme_advanced_containers||""),function(f,h){var n=a["theme_advanced_container_"+f]||"";switch(f.toLowerCase()){case"mceeditor":i=c.add(b,"tr"),i=j=c.add(i,"td",{"class":"mceIframeContainer"});break;case"mceelementpath":m._addStatusBar(b,d);break;default:l=a["theme_advanced_container_"+f+"_align"].toLowerCase(),l="mce"+m._ufirst(l),i=c.add(c.add(b,"tr"),"td",{"class":"mceToolbar "+(a["theme_advanced_container_"+f+"_class"]||e)+" "+l||g}),k=o.createToolbar("toolbar"+h),m._addControls(n,k),c.setHTML(i,k.renderHTML()),d.deltaHeight-=a.theme_advanced_row_height}}),j},_addControls:function(a,b){var c,d=this,e=d.settings,g=d.editor.controlManager;e.theme_advanced_disable&&!d._disabled?(c={},f(h(e.theme_advanced_disable),function(a){c[a]=1}),d._disabled=c):c=d._disabled,f(h(a),function(a){var e;if(!c||!c[a]){if("tablecontrols"==a)return void f(["table","delete_table","|","row_props","cell_props","|","row_before","row_after","delete_row","|","col_before","col_after","delete_col","|","row_up","row_down","col_left","col_right","|","split_cells","merge_cells"],function(a){
a=d.createControl(a,g),a&&b.add(a)});e=d.createControl(a,g),e&&b.add(e)}})},_addToolbars:function(a,b){var d,e,f,g,h,i,j=this,k=j.editor,l=j.settings,m=k.controlManager,n=[];for(i=m.createToolbarGroup("toolbargroup",{name:k.getLang("advanced.toolbar"),tab_focus_toolbar:k.getParam("theme_advanced_tab_focus_toolbar")}),j.toolbarGroup=i,h=l.theme_advanced_toolbar_align.toLowerCase(),h="mce"+j._ufirst(h),g=c.add(c.add(a,"tr"),"td",{"class":"mceToolbar "+h}),k.getParam("accessibility_focus")&&!k.getParam("tab_focus")||n.push(c.createHTML("a",{href:"#",onfocus:"tinyMCE.get('"+k.id+"').focus();"},"<!-- IE -->")),n.push(c.createHTML("a",{href:"#",title:k.getLang("advanced.toolbar_focus"),onclick:"this.focus(); return false;","class":"js-toolbarFocus",tabindex:"-1"},"<!-- IE -->")),d=1;f=l["theme_advanced_buttons"+d];d++)e=m.createToolbar("toolbar"+d,{"class":"mceToolbarRow"+d}),l["theme_advanced_buttons"+d+"_add"]&&(f+=","+l["theme_advanced_buttons"+d+"_add"]),l["theme_advanced_buttons"+d+"_add_before"]&&(f=l["theme_advanced_buttons"+d+"_add_before"]+","+f),j._addControls(f,e),i.add(e),b.deltaHeight-=l.theme_advanced_row_height;n.push(i.renderHTML()),n.push(c.createHTML("a",{href:"#",accesskey:"z",title:k.getLang("advanced.toolbar_focus"),onfocus:"tinyMCE.getInstanceById('"+k.id+"').focus();",tabindex:"-1"},"<!-- IE -->")),g.innerHTML=n.join("")},_addStatusBar:function(a,b){var e,f,h,i,j,k=this,l=k.editor,m=k.settings;e=c.add(a,"tr"),e=j=c.add(e,"td",{"class":"mceStatusbar"}),e=c.add(e,"div",{id:l.id+"_path_row"}),c.add(e,"a",{href:"#",accesskey:"x"}),m.theme_advanced_resizing&&!tinymce.isOldWebKit&&(c.add(j,"a",{id:l.id+"_resize",href:"javascript:;",onclick:"return false;","class":"mceResize",tabindex:"-1"}),m.theme_advanced_resizing_use_cookie&&l.onPostRender.add(function(){var a=g.getHash("TinyMCE_"+l.id+"_size"),b=c.get(l.id+"_tbl");a&&(m.theme_advanced_resize_horizontal&&(b.style.width=Math.max(10,a.cw)+"px"),b.style.height=Math.max(10,a.ch)+"px",c.get(l.id+"_ifr").style.height=Math.max(10,parseInt(a.ch)+k.deltaHeight)+"px")}),l.onPostRender.add(function(){d.add(l.id+"_resize","mousedown",function(a){var b,e,j,k;return b=c.get(l.id+"_tbl"),j=b.clientWidth,k=b.clientHeight,miw=m.theme_advanced_resizing_min_width||100,mih=m.theme_advanced_resizing_min_height||100,maw=m.theme_advanced_resizing_max_width||65535,mah=m.theme_advanced_resizing_max_height||65535,e=c.add(c.get(l.id+"_parent"),"div",{"class":"mcePlaceHolder"}),c.setStyles(e,{width:j,height:k}),c.hide(b),c.show(e),f={x:a.screenX,y:a.screenY,w:j,h:k,dx:null,dy:null},h=d.add(c.doc,"mousemove",function(a){var b,c;return f.dx=a.screenX-f.x,f.dy=a.screenY-f.y,b=Math.max(miw,f.w+f.dx),c=Math.max(mih,f.h+f.dy),b=Math.min(maw,b),c=Math.min(mah,c),m.theme_advanced_resize_horizontal&&(e.style.width=b+"px"),e.style.height=c+"px",d.cancel(a)}),i=d.add(c.doc,"mouseup",function(a){var j;d.remove(c.doc,"mousemove",h),d.remove(c.doc,"mouseup",i),b.style.display="",c.remove(e),null!==f.dx&&(j=c.get(l.id+"_ifr"),m.theme_advanced_resize_horizontal&&(b.style.width=Math.max(10,f.w+f.dx)+"px"),b.style.height=Math.max(10,f.h+f.dy)+"px",j.style.height=Math.max(10,j.clientHeight+f.dy)+"px",m.theme_advanced_resizing_use_cookie&&g.setHash("TinyMCE_"+l.id+"_size",{cw:f.w+f.dx,ch:f.h+f.dy}),l.theme.onResize.dispatch(l.theme,!0))}),d.cancel(a)})})),b.deltaHeight-=21,e=a=null},_getCurrentNode:function(a){var b=a.selection.getNode();return null==b||b==a.getDoc()?a.getBody().childNodes.length>0?a.getBody().childNodes[0]:null:b},ignoreRefreshCommand:!1,_refreshFontColor:function(b){if(!this.ignoreRefreshCommand){var c,d=tinyMCE.activeEditor,e=a('[id="'+d.id+'_forecolor_preview"]',d.getContainer());if(e.length>0){if("function"!=typeof b){var f=this._getCurrentNode(d);c=jive.ext.x.xGetCS(f,"color")}else c=b("color");e.css("background-color",c);var g=d.controlManager;g.get("forecolor").value=c}}},_refreshFont:function(b){var c,d=tinyMCE.activeEditor,e=d.controlManager,g=e.get("fontselect");if(g){if("function"!=typeof b){var h=this._getCurrentNode(d);c=jive.ext.x.xGetCS(h,"font-family")}else c=b("font-family").replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();if(c.indexOf(",")>=0)g.select(c.toLowerCase());else{var i=!1;if(f(d.getParam("theme_advanced_fonts",this.settings.theme_advanced_fonts,"hash"),function(b,d){if(!i){var e=b.split(",");0==a.inArray(c,e)&&(i=!0,g.select(b.toLowerCase()))}}),i)return;f(d.getParam("theme_advanced_fonts",this.settings.theme_advanced_fonts,"hash"),function(b,d){if(!i){var e=b.split(",");a.inArray(c,e)>=0&&(i=!0,g.select(b.toLowerCase()))}})}}},_refreshFontSize:function(a){var b,c=tinyMCE.activeEditor,d=c.controlManager,e=d.get("fontsizeselect");if(e){if("function"!=typeof a){var f=this._getCurrentNode(c);b=jive.ext.x.xGetCS(f,"font-size")}else b=a("font-size");var g=tinyMCE.inArray(e.computed,b);e.select(g+1)}},_keyDown:function(a,b){13==b.keyCode},_nodeChanged:function(a,b,d,e){var f,g,h,i=this,j=0,k=i.settings;tinymce.each(i.stateControls,function(c){b.setActive(c,a.queryCommandState(i.controls[c][1]))}),b.setActive("visualaid",a.hasVisual),b.setDisabled("undo",!a.undoManager.hasUndo()&&!a.typing),b.setDisabled("redo",!a.undoManager.hasRedo()),b.setDisabled("outdent",!a.queryCommandState("Outdent")),f=c.getParent(d,"A"),(h=b.get("link"))&&(f&&f.name||(h.setDisabled(!f&&e),h.setActive(!!f))),(h=b.get("unlink"))&&(h.setDisabled(!f&&e),h.setActive(!!f&&!f.name)),(h=b.get("anchor"))&&(h.setActive(!!f&&f.name),tinymce.isWebKit&&(f=c.getParent(d,"IMG"),h.setActive(!!f&&"a"==c.getAttrib(f,"_mce_name")))),f=c.getParent(d,"IMG"),(h=b.get("image"))&&h.setActive(!!f&&-1==d.className.indexOf("mceItem")),(h=b.get("styleselect"))&&(d.className?(i._importClasses(),h.select(d.className)):h.select()),(h=b.get("formatselect"))&&(f=c.getParent(d,c.isBlock),f&&h.select(f.nodeName.toLowerCase()));var l=this._getCurrentNode(a),m=jive.ext.x.xGetCSFunc(l);(h=b.get("fontselect"))&&(h.select(a.queryCommandValue("FontName")),this._refreshFont(m)),(h=b.get("forecolor"))&&this._refreshFontColor(m),(h=b.get("fontsizeselect"))&&this._refreshFontSize(m),k.theme_advanced_path&&k.theme_advanced_statusbar_location&&(f=c.get(a.id+"_path")||c.add(a.id+"_path_row","span",{id:a.id+"_path"}),c.setHTML(f,""),a.dom.getParent(d,function(a){var b,d=a.nodeName.toLowerCase(),e="";if(1==a.nodeType&&!c.hasClass(a,"mceItemHidden")&&!c.hasClass(a,"mceItemRemoved")){switch((g=c.getAttrib(a,"_mce_name"))&&(d=g),tinymce.isIE&&"HTML"!==a.scopeName&&(d=a.scopeName+":"+d),d=d.replace(/mce\:/g,"")){case"b":d="strong";break;case"i":d="em";break;case"img":(g=c.getAttrib(a,"src"))&&(e+="src: "+g+" ");break;case"a":(g=c.getAttrib(a,"name"))&&(e+="name: "+g+" ",d+="#"+g),(g=c.getAttrib(a,"href"))&&(e+="href: "+g+" ");break;case"font":k.convert_fonts_to_spans&&(d="span"),(g=c.getAttrib(a,"face"))&&(e+="font: "+g+" "),(g=c.getAttrib(a,"size"))&&(e+="size: "+g+" "),(g=c.getAttrib(a,"color"))&&(e+="color: "+g+" ");break;case"span":(g=c.getAttrib(a,"style"))&&(e+="style: "+g+" ")}(g=c.getAttrib(a,"id"))&&(e+="id: "+g+" "),(g=a.className)&&(g=g.replace(/(webkit-[\w\-]+|Apple-[\w\-]+|mceItem\w+|mceVisualAid)/g,""),g&&-1==g.indexOf("mceItem")&&(e+="class: "+g+" ",(c.isBlock(a)||"img"==d||"span"==d)&&(d+="."+g))),d=d.replace(/(html:)/g,""),d={name:d,node:a,title:e},i.onResolveName.dispatch(i,d),e=d.title,d=d.name,b=c.create("a",{href:"javascript:;",onmousedown:"return false;",title:e,"class":"mcePath_"+j++},d),f.hasChildNodes()?(f.insertBefore(c.doc.createTextNode(" » "),f.firstChild),f.insertBefore(b,f.firstChild)):f.appendChild(b)}},a.getBody())),this.prepForReturn=!1},_sel:function(a){this.editor.execCommand("mceSelectNodeDepth",!1,a)},_mceInsertAnchor:function(a,b){var c=this.editor;c.windowManager.open({url:tinymce.baseURL+"/themes/advanced/anchor.htm",width:320+parseInt(c.getLang("advanced.anchor_delta_width",0)),height:90+parseInt(c.getLang("advanced.anchor_delta_height",0)),inline:!0},{theme_url:this.url})},_mceCharMap:function(){var a=this.editor;a.windowManager.open({url:tinymce.baseURL+"/themes/advanced/charmap.htm",width:550+parseInt(a.getLang("advanced.charmap_delta_width",0)),height:250+parseInt(a.getLang("advanced.charmap_delta_height",0)),inline:!0},{theme_url:this.url})},_mceHelp:function(){var a=this.editor;a.windowManager.open({url:tinymce.baseURL+"/themes/advanced/about.htm",width:480,height:380,inline:!0},{theme_url:this.url})},_mceColorPicker:function(a,b){var c=this.editor;b=b||{},c.windowManager.open({url:tinymce.baseURL+"/themes/advanced/color_picker.htm",width:385+parseInt(c.getLang("advanced.colorpicker_delta_width",0)),height:260+parseInt(c.getLang("advanced.colorpicker_delta_height",0)),close_previous:!1,inline:!0},{input_color:b.color,func:b.func,theme_url:this.url,cs_resource_base_url:CS_RESOURCE_BASE_URL})},_mceCodeEditor:function(a,b){var c=this.editor;c.windowManager.open({url:tinymce.baseURL+"/themes/advanced/source_editor.htm",width:parseInt(c.getParam("theme_advanced_source_editor_width",720)),height:parseInt(c.getParam("theme_advanced_source_editor_height",580)),inline:!0,resizable:!0,maximizable:!0},{theme_url:this.url})},_mceImage:function(a,b){var c=this.editor;-1==c.dom.getAttrib(c.selection.getNode(),"class").indexOf("mceItem")&&c.windowManager.open({url:tinymce.baseURL+"/themes/advanced/image.htm",width:355+parseInt(c.getLang("advanced.image_delta_width",0)),height:275+parseInt(c.getLang("advanced.image_delta_height",0)),inline:!0},{theme_url:this.url})},_mceLink:function(a,b){var c=this.editor;c.windowManager.open({url:tinymce.baseURL+"/themes/advanced/link.htm",width:310+parseInt(c.getLang("advanced.link_delta_width",0)),height:200+parseInt(c.getLang("advanced.link_delta_height",0)),inline:!0},{theme_url:this.url})},_mceNewDocument:function(){var a=this.editor;a.windowManager.confirm("advanced.newdocument",function(b){b&&a.execCommand("mceSetContent",!1,"")})},_mceForeColor:function(){var a=this;this._mceColorPicker(0,{color:a.fgColor,func:function(b){a.fgColor=b,a.editor.execCommand("ForeColor",!1,b)}})},_mceBackColor:function(){var a=this;this._mceColorPicker(0,{color:a.bgColor,func:function(b){a.bgColor=b,a.editor.execCommand("HiliteColor",!1,b)}})},_ufirst:function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}}),tinymce.ThemeManager.add("advanced",tinymce.themes.AdvancedTheme)}(jQuery)}),define("tiny_mce3/themes/advanced/editor_template_src",["tinyMCE","jquery","jive/ext/x/x_timer"],function(){}),define("jive/bundles/rte_plugins",["tiny_mce3/plugins/jivelists/editor_plugin_src","tiny_mce3/plugins/jivestyle/editor_plugin_src","tiny_mce3/plugins/jivemacros/editor_plugin_src","tiny_mce3/plugins/jiveattachment/editor_plugin_src","tiny_mce3/plugins/jiveemoticons/editor_plugin_src","tiny_mce3/plugins/jivemention/editor_plugin_src","tiny_mce3/plugins/jiveapps/editor_plugin_src","tiny_mce3/plugins/jivetable/editor_plugin_src","tiny_mce3/plugins/jivetablecontrols/editor_plugin_src","tiny_mce3/plugins/jivescroll/editor_plugin_src","tiny_mce3/plugins/jiveblackout/editor_plugin_src","tiny_mce3/plugins/jivecontextmenu/editor_plugin_src","tiny_mce3/plugins/jiveresize/editor_plugin_src","tiny_mce3/plugins/jivebuttons/editor_plugin_src","tiny_mce3/plugins/jivekeyboard/editor_plugin_src","tiny_mce3/plugins/jivelink/editor_plugin_src","tiny_mce3/plugins/jiveimage/editor_plugin_src","tiny_mce3/plugins/jivequote/editor_plugin_src","tiny_mce3/plugins/jiveutil/editor_plugin_src","tiny_mce3/plugins/jiveselection/editor_plugin_src","tiny_mce3/plugins/jivemouse/editor_plugin_src","tiny_mce3/plugins/jivevideo/editor_plugin_src","tiny_mce3/plugins/jivetablebutton/editor_plugin_src","tiny_mce3/plugins/style/editor_plugin_src","tiny_mce3/plugins/table/editor_plugin_src","tiny_mce3/plugins/html/editor_plugin_src","tiny_mce3/plugins/save/editor_plugin_src","tiny_mce3/plugins/advimage/editor_plugin_src","tiny_mce3/plugins/advlink/editor_plugin_src","tiny_mce3/plugins/directionality/editor_plugin_src","tiny_mce3/plugins/inlinepopups/editor_plugin_src","tiny_mce3/plugins/paste/editor_plugin_src","tiny_mce3/plugins/spellchecker/editor_plugin_src","tiny_mce3/themes/advanced/editor_template_src"]),define("jive/rte/main",["jquery","tinyMCE","./getSettings","./multiRTE","jiverscripts/conc/synchronize","jiverscripts/conc/next_tick","jive/accessibility","jive/bundles/rte_plugins","jive/ext/x/x_core","jive/ext/y/y_core","vendor/jquery/plugins/jquery.autosize","jive/namespace"],function(a,b,c,d,e,f,g){return jive.namespace("rte"),window.BOOKMARKTYPE=2,window.errorHandlerMessage="An error occurred:",window.editorErrorHandler=function(b,c){-1==b.indexOf("Timeout")&&(a("#dwr-error-text").text(errorHandlerMessage+" Error Code: "+b),a("#dwr-error-table").fadeIn(),setTimeout(function(){a("#dwr-error-table").fadeOut()},1e4))},window.RawHTMLSaveFunction=function(b,c,d){var e=a("#"+b);return e.is(":not(:visible)")?c:e.val()},window.refreshLinks=function(){d.forEach(function(b){return a("#"+b+"_parent").length<1?(a("#"+b+"_toggle_html").hide(),void a("#jivePreferredEditorModeLinkHREF").hide()):("rawhtml"==currentMode?a("#"+b+"_toggle_html").css("display","block"):a("#"+b+"_toggle_html").hide(),void(preferredMode==currentMode?a("#jivePreferredEditorModeLinkHREF").hide():a("#jivePreferredEditorModeLinkHREF").css("display","block")))})},window.editor=new jive.ext.y.HashTable,jive.rte.RTE=function(d,h,i,j){function k(){if(r)p();else{E=a.extend({},c(i),{mode:"exact",elements:h,oninit:function(){p()},oninitFail:function(){F.reject("rte initialization failed")}},q.options),q.options.comment&&(E.body_class+=" j-rte-comment");try{"undefined"!=typeof window._editor_lang&&(E.language=_editor_lang),E.jive_image_picker_url||"undefined"==typeof window._jive_image_picker_url||(E.jive_image_picker_url=_jive_image_picker_url)}catch(d){}if("undefined"==typeof b)F.reject("tinymce is undefined");else try{b.init(E)}catch(e){F.reject(e)}F.fail(function(a){u=!0,w.hide(),v.show(),v.height("200px")})}}function l(a){return d&&d[a]?d[a]:null}function m(){var b=[];return a.each(d||{},function(){if(this.teardown){var a=this.teardown();a&&b.push(a)}}),e(b)}function n(){var b=p();if(b){var c=a("iframe",b.getContentAreaContainer());B=c.outerHeight(),C=c.outerWidth(),A.css({height:q.getHeight()-q.getToolbarHeight()});var d=b.plugins.jivescroll;q.scrollRichContent(d.lastScrollX,d.lastScrollY)}}function o(){I||(I=!0,setTimeout(function(){n(),I=!1},0))}function p(){if(!q.isTextOnly()&&D){if(r||(r=b.get(h)),!$def(r)||!r)return null;D=!1,a("#"+h+"_tbl td.mceIframeContainer").prepend(A).append(x).append(y).closest("span.mceEditor").append(z),B=a("iframe",p().getContentAreaContainer()).outerHeight(),C=a("iframe",p().getContentAreaContainer()).outerWidth(),a.each(r.plugins,function(){try{this.setRTE&&this.setRTE(q)}catch(a){}}),w.keyup(function(a){q.notifyOnKeyUp(a.keyCode)}),w.change(function(a){q.notifyOnChange(a.keyCode)}),r.onKeyUp.add(function(a,b){q.notifyOnKeyUp(b.keyCode)}),r.onChange.add(function(a,b){q.notifyOnChange(b.keyCode)}),r.onNodeChange.add(function(){q.notifyOnNodeChange()}),function(c){c.id==h&&q.notifyInitFinished(q),c.getContainer().childNodes[0].style.width="";var d=c.getBody();0===d.childNodes.length&&d.appendChild(c.plugins.jivemacros.createEmptyPara()),b.isIE&&(a(window.document.body).find(".tiny_mce_content").addClass("ie"),a(c.getBody()).addClass("ie"))}(r),r.onBeginSpelling.add(function(){H=!0}),r.onEndSpelling.add(function(){H=!1}),r.theme.onResize.add(function(){J?(J=!1,q.resizeTo(q.getHeight()),r.theme.onResize.dispatch()):(J=!0,q.notifyResized()),o()}),r.plugins.html.registerToggleFunction(q.toggleEditorMode),F.resolve(q)}return r}var q=this;this.options=j=a.extend({scrollIntoView:function(a){a.scrollIntoView(!0)},iOSorAndroid:/iPhone|iPod|iPad|Android/.test(navigator.userAgent)},j);var r=null;"object"==typeof h&&(r=h,h=r.id);var s=!1,t=!1,u=!1,v=a("#"+h);""==v.val()&&v.val("<p></p>"),j.rteLayout||(j.rteLayout=new jive.rte.RTELayout({domExists:!0,$editorPanel:v.parent(),rte:q,id:h})),j.theme_advanced_toolbar_container=j.rteLayout.getEditorPanel().get(0);var w=j.rteLayout.getUserTextarea().hide(),x=a('<div class="rte_wrap tiny_mce_content"><div class="popOverContent"></div></div>').css({position:"absolute",top:0,left:0,width:"100%"}),y=a("<div class='gutter'></div>"),z=a("<div class='belowEditor'></div>"),A=a('<div class="rte_wrap tiny_mce_content"><div class="superRichContent"></div></div>').css({position:"absolute",overflow:"hidden",top:0,left:0,width:"100%"});$def(i)||(i=0);var B=0,C=0,D=!0,E=null,F=new a.Deferred;this.getSettings=function(){return E},this.isTextOnly=function(){return u},this.isMobileOnly=function(){return t},this.setMobileOnly=function(a){t=a},this.isDisabled=function(){return s},this.setDisabled=function(a){s=a},this.getImageService=function(){return l("imageService")},this.getLinkService=function(){return l("linkService")},this.getFormService=function(){return l("formService")},this.getEntitlementService=function(){return l("entitlementService")},this.getAttachmentService=function(){return l("attachmentService")};var G=!0,H=!1;this.scrollRichContent=function(a,b){this.getHiddenContainer().css("top",-1*b).css("left",-1*a),this.getPopOverContainer().css("top",-1*b).css("left",-1*a)};var I=!1;this.scheduleRichHeightUpdate=o,j.rteLayout.addListener("resized",o);var J=!0;this.isSpellChecking=function(){return H},this.toggleSpellChecker=function(){p().execCommand("mceSpellCheck")},this.closeAllDialogs=function(){var a=p();if(a){for(var b=a.windowManager.windows,c=Object.keys(b),d=0;d<c.length;d++)a.windowManager.close(null,b[c[d]].id);return a.plugins.jivemacros.removeDuplicateMacros(a,!1),a.plugins.jivemacros.fixBodyParagraphs(),b}},this.getMacroForName=function(a){return window.jive.rte.macros.filter(function(b){return b.getName()==a}).first()||null},this.addMacro=function(b,c,d){var e=p();if(!e)return null;if(e.undoManager.add(),"html"==e.selection.getNode().nodeName.toLowerCase()){var f=e.getBody();f.childNodes.length&&(f=f.childNodes[0]),e.selection.select(f),e.selection.collapse(!0)}var g=e.plugins.jivemacros.insertMacro(e,b,null,d);e.plugins.jivemacros.applyParameterSet(g,b,c),e.plugins.jivemacros.validateMacroElements(g);var h=q.getUIDForElement(a(g)),i=q.getHiddenElementFor(h);return b.refreshPosition(q,g,i),b.refresh(q,g),e.nodeChanged(),g},this.applyParamSet=function(a,b,c){var d=p();return d?void d.plugins.jivemacros.applyParameterSet(a,b,c):null},this.addTable=function(a,c){var d=p();if(!d)return null;var e,f,g,h="";for(h+="<table",e=0;e<a.length;e++)h+=" "+a[e].name+"='"+a[e].value+"'";for(h+=">",h+="<tbody>",e=0;e<c.length;e++){var i=c[e];if(h+="<tr>",0===e)for(f=0;f<i.length;f++)g=i[f],h+='<th align="center" valign="middle" style="background-color:#6690BC;"><font color="#ffffff"><strong>'+g+"</strong></font></th>";else for(f=0;f<i.length;f++)g=i[f],h+="<td><p>"+g+(b.isIE?"":'<br mce_bogus="1"/>')+"</p></td>";h+="</tr>"}return h+="</tbody>",h+="</table>",d.execCommand("mceBeginUndoLevel"),d.execCommand("mceInsertContent",!1,h),d.addVisual(),d.execCommand("mceEndUndoLevel"),!0},this.getCurrentNode=function(){var b=p();return b?a(b.selection.getNode()):null},this.destroy=function(){this.killYourself(),this.teardownServices(),a(window).focus(),r&&b.remove(r),x.remove(),A.remove(),a(this.getDOM()).parent().html(""),a(this.getTextArea()).remove(),j.rteLayout.teardown()},this.teardownServices=function(){m()},this.getLang=function(a,b){var c=p();return c?c.getLang(a,b):null},this.isReady=function(){if(q.isTextOnly())return!0;var a=p();return!!a},this.getReadyPromise=function(){return F.promise()},this.getDOM=function(){var a=p();return a?a.getContainer():null},this.getID=function(){return h},this.setHTML=function(a){a=this.replaceWhiteSpace(a);var c;if(q.isMobileOnly())c=w.val(a);else if(q.isTextOnly())c=v.val(a);else{w.val(a);var d=p(),e=null;b.isIE&&(e=document.activeElement,d.focus()),c=d.setContent(a.replace(/>\n/g,">")),e&&e.focus(),""===a&&d.plugins.jiveplaceholder&&d.plugins.jiveplaceholder.onBlur()}return this.notifyOnChange(),c},this.getOriginalTextBox=function(){return v},this.getHTML=function(){if(q.isMobileOnly())return w.val();if(q.isTextOnly())return v.val();if(q.isDisabled())return v.val();var c=p();this.isHidden()&&c.setContent(w.val().replace(/>\n/g,">"));var d=b.isIDevice?c.getContent().replace(/&zwnj\;/,""):c.getContent();return a.trim(d).length>0&&0!==d.indexOf("<body")&&(d="<body>"+d+"</body>"),d},this.replaceWhiteSpace=function(a){for(var b=[],c=0,d=-1;(d=a.indexOf("  ",c))>=0&&!(c>d);)b.push(a.substring(c,d)),b.push("&nbsp;"),c=d+1;return c<a.length&&b.push(a.substring(c)),b.join("")},this.show=function(){var a=p();return a?(a.show(),void q.notifyShowing()):null},this.getWindow=function(){var a=p();return a?a.getWin():null},this.getDoc=function(){var a=p();return a?a.getDoc():null};var K=null;this.getHiddenContainer=function(){return K?K:K=A.find("div.superRichContent")};var L=null;this.getPopOverContainer=function(){return L?L:L=x.find("div.popOverContent")},this.getGutter=function(){return y.get(0)},this.getBelowEditorArea=function(){return z.get(0)},this.getHiddenElementFor=function(a){var b=q.getHiddenContainer(),c=b.find("#"+a);return c.length?c:null};var M=/\b_jivemacro_uid(\w+)\b/;this.getUIDForElement=function(a){var b=M.exec(a.attr("class"));return b?b[1]:null};var N=new jive.ext.y.HashTable;this.getRTEElementFor=function(b){if(b){var c=N.get(b);if(c){if(1==c.length&&c.get(0).parentNode)return c;N.clear(b)}if(c=a("._jivemacro_uid"+b,q.getBody()),1==c.length&&N.put(b,c),c.length>0)return c}return null},this.removeMacroWithUID=function(a){var b=N.get(a);b&&b.remove(),N.clear(a);var c=q.getHiddenContainer();c.children("#"+a).remove()},this.setAttributeForMacroWithUID=function(a,b,c){var d=N.get(a);d&&d.attr(b,c)},this.generateUID=function(){return"_"+(new Date).getTime()+Math.round(1e4*Math.random())},this.getBody=function(){var a=p();return a?a.getBody():null},this.getTextArea=function(){return v},this.appendHTML=function(b){a(this.getBody()).append(b)},this.insertHTMLAtCursor=function(b){b.indexOf("<body>")>=0&&(b=b.replace(/<body>/g,"")),b.indexOf("</body>")>=0&&(b=b.replace(/<\/body>/g,"")),p().selection.getNode()&&"body"!=p().selection.getNode().nodeName.toLowerCase()?a(p().selection.getNode()).after(b):q.appendHTML(b)},this.selection=function(){return p().selection.getRng(!0)},this.focus=function(){try{var b=p();if(!b||b.destroyed)return;var c=a("label[for='"+this.getID()+"'] .jive-error-message"),d=[];if(c.each(function(){d.push(a(this).text())}),d.length&&g.speak(d.join("\n")),this.isHidden())w.focus();else{var e=q.getBody();b.focus();var f=a(p().getContainer()).find("table:first");if(j.scrollIntoView(f.get(0)),q.options.pinToolbar){var h=a(window).scrollTop();a(window).scrollTop(h-this.getToolbarHeight())}if(0===e.childNodes.length)return e.appendChild(b.plugins.jivemacros.createEmptyPara()),b.selection.select(e.childNodes[0].childNodes[0]),void b.selection.collapse(!0);if(1==e.childNodes.length){var i,k=e.childNodes[0];if(1==k.childNodes.length&&(i=k.childNodes[0])&&"br"==i.nodeName.toLowerCase())return b.selection.select(i),void b.selection.collapse(!0)}if(!q.options.iOSorAndroid&&"body"==q.getCurrentNode()[0].nodeName.toLowerCase()){for(var l=q.getBody();1==l.nodeType&&l.childNodes.length>0;)l=l.childNodes[0];b.selection.select(l),b.selection.collapse(!0)}}}catch(m){}},this.tinymceFocus=function(){p().focus()},this.collapseSelection=function(){var a=p(),b=a.selection.getNode();b&&!a.selection.isCollapsed()&&(q.focus(),a.selection.collapse())},this.select=function(a){var b=p();b.selection.select(a)},this.hide=function(){var a=p();a&&!a.destroyed&&a.hide()},this.isHidden=function(){return w.is(":visible")},this.resizeTo=function(a){j.rteLayout.resizeTo(a)},this.autoReposition=function(){j.rteLayout.reposition()},this.getHeight=function(){var b=a(p().getContainer()),c=b.find("table:first").get(0);return c?a(c).height():100},this.getToolbarHeight=function(){var b=a(p().getContainer()).find("table:eq(0) > tbody > tr"),c=b.eq(0).find("td:first, th:first").height();return b.length>2&&(c+=b.last().find("td:first, th:first").height()),c},this.getContentAreaHeight=function(){return B},this.getContentAreaWidth=function(){return C},this.killYourself=function(){var b=p();b&&a.each(b.plugins,function(){this.killYourself&&this.killYourself()})},this.toggleEditorMode=function(b){var c,d;b==h&&(q.isHidden()?(c=w.height(),w.hide(),q.show(),q.setHTML(w.val()),q.focus(),q.resizeTo(c),p().plugins.jivemacros.removeDuplicateMacros(p(),!1),p().plugins.jivemacros.fixBodyParagraphs()):(d=a("#"+h+"_tbl"),c=d.height(),w.val(q.getHTML(!0)),q.hide(),w.height(c),w.autosize(),w.show(),_.defer(function(){w.trigger("autosize")}),v.hide(),q.focus()),o(),q.notifyDoneTogglingMode())},this.i18n=function(a,b){"undefined"==typeof b&&(b=a);var c=p();return c.getLang(a,b)};var O=[],P=[];this.addListener=function(a){$def(a.onShow)&&a.onShow(),O.push(a),q.initted&&a.initFinished&&a.initFinished(q)},this.addListenerAction=function(a){P.push(a)},this.executeListenerActions=function(){for(;P.length>0;)P[0](),P.splice(0,1)},this.removeListener=function(a){for(var b=0;b<O.length;b++)O[b]==a&&O.splice(b,1)},this.initted=!1,this.notifyInitFinished=function(a){if(!q.initted){q.initted=!0;for(var b=0;b<O.length;b++)O[b].initFinished(a);q.executeListenerActions()}},this.notifyOnKeyUp=function(a){for(var b=0;b<O.length;b++)O[b].onKeyUp(a);q.executeListenerActions()},this.notifyOnChange=function(){if(G)return void(G=!1);for(var a=0;a<O.length;a++)O[a].onChange();q.executeListenerActions()},this.notifyResized=function(){for(var a=0;a<O.length;a++)O[a].onResize();q.executeListenerActions()},this.notifyShowing=function(){for(var a=0;a<O.length;a++)O[a].onShow();q.executeListenerActions()},this.notifyOnNodeChange=function(){for(var a=0;a<O.length;a++)O[a].onNodeChange();q.executeListenerActions()},this.notifyDoneTogglingMode=function(){for(var a=0;a<O.length;a++)O[a].doneTogglingMode();q.executeListenerActions()},f(k)},jive.rte.RTE}),define("jive/rte/paramset",["jive/namespace"],function(){return jive.namespace("rte"),jive.rte.ParamSet=function(){var a=this;this.name="",this.deleteAll=!1,this.params=[],this.addParam=function(b,c){a.params.push({name:b,value:c})}},jive.rte.ParamSet}),define("jive/rte/syntax/syntaxhighlightmacro",["jquery","../paramset","jive/rtl","jive/namespace"],function(a,b,c){return jive.namespace("rte.plugin"),jive.rte.plugin.code=function(d,e,f,g,h,i,j,k,l){function m(a,b){for(;b.parentNode;){if(b.parentNode==a)return!0;b=b.parentNode}return!1}function n(a){for(var b="",c=0;c<a.childNodes.length;c++)if(4==a.childNodes[c].nodeType)b+=a.childNodes[c].nodeValue;else if(3==a.childNodes[c].nodeType)b+=a.childNodes[c].nodeValue;else{var d=a.childNodes[c],e=n(d);tinymce.activeEditor.dom.isBlock(d)?e+="\n":"br"==d.nodeName.toLowerCase()&&null!=d.nextSibling&&(e+="\n"),b+=e}return b}var o=this,p=a("<span style='height:12px;width:1px;background-color:black;position:absolute;top:0px;'></span>");setInterval(function(){p.parents("body").length>0&&(p.is(":visible")?p.hide():p.show())},500);var q=null;j=[{name:"__default_attr",value:"plain"}],this.getName=function(){return d},this.getUrl=function(){return e},this.isButton=function(){return l},this.isEnabled=function(){return k},this.isShowSettings=function(){return g},this.isShowInMacroList=function(){return h},this.getMacroType=function(){return f},this.getParameterSets=function(){var a=[];a.push({name:"html",deleteAll:!0,params:[{name:"__default_attr",value:"html"}]}),a.push({name:"xml",deleteAll:!1,params:[{name:"__default_attr",value:"xml"}]}),a.push({name:"sql",deleteAll:!1,params:[{name:"__default_attr",value:"sql"}]}),a.push({name:"java",deleteAll:!1,params:[{name:"__default_attr",value:"java"}]}),a.push({name:"plain",deleteAll:!1,params:[{name:"__default_attr",value:"plain"}]}),a.push({name:"c++",deleteAll:!1,params:[{name:"__default_attr",value:"c++"}]}),a.push({name:"c#",deleteAll:!1,params:[{name:"__default_attr",value:"c#"}]}),a.push({name:"css",deleteAll:!1,params:[{name:"__default_attr",value:"css"}]}),a.push({name:"javascript",deleteAll:!1,params:[{name:"__default_attr",value:"javascript"}]}),a.push({name:"php",deleteAll:!1,params:[{name:"__default_attr",value:"php"}]}),a.push({name:"python",deleteAll:!1,params:[{name:"__default_attr",value:"python"}]}),a.push({name:"ruby",deleteAll:!1,params:[{name:"__default_attr",value:"ruby"}]});for(var c=[],d=0;d<a.length;d++){var e=new b;e.name=a[d].name,e.deleteAll=a[d].deleteAll,e.params=a[d].params,c.push(e)}return c},this.getAllowedParameters=function(){return j},this.usesCustomBackground=function(){return!0},this.updateCursor=function(b,d,e){if(q!=b.selection()||0==p.parents("body").length){var f=q=b.selection();if(f&&f.collapsed){var g=f.startContainer;if(g){var h=f.startOffset;if(3!=g.nodeType){h=0;for(var i=0;i<f.startOffset&&i<g.childNodes.length;i++)h+=a(g.childNodes[i]).text().length}else for(;g.previousSibling;)h+=a(g.previousSibling).text().length,g=g.previousSibling;var j=a(3==g.nodeType?g.parentNode:g);if(j=j.parents().addBack().filter("p:first"),m(d,g)){p.show(),p.height(j.height());for(var k=0;j.prev().length;)j=j.prev(),k++;e.data("line",k),e.data("offset",h);var l=e.find("li:nth("+k+") span:first");if(l.prepend(p.remove()),0==l.length)return;if(1==l.contents().length)p.css(c("left"),0);else{for(var n=l.get(0).childNodes[1],o=0,r=null;h>o;)if(3!=n.nodeType)if(o+a(n).text().length<h){if(o+=a(n).text().length,!n.nextSibling){var s=document.createElement("span");n.parentNode.insertBefore(s,n),n.parentNode.insertBefore(n,s),n=s,r=s;break}n=n.nextSibling}else{if(0==n.childNodes.length)break;n=n.childNodes[0]}else if(o+n.nodeValue.length<h){if(o+=n.nodeValue.length,!n.nextSibling){var s=document.createElement("span");n.parentNode.insertBefore(s,n),n.parentNode.insertBefore(n,s),n=s,r=s;break}n=n.nextSibling}else{if(o+n.nodeValue.length==h){o+=n.nodeValue.length;var s=document.createElement("span");n.parentNode.insertBefore(s,n),n.parentNode.insertBefore(n,s),n=s,r=s;break}if(o+n.nodeValue.length>h){var t=h-o,u=n.nodeValue.substr(t);n.nodeValue=n.nodeValue.substr(0,t);var v=document.createTextNode(u);n.parentNode.insertBefore(v,n),n.parentNode.insertBefore(n,v),s=document.createElement("span"),n.parentNode.insertBefore(s,n),n.parentNode.insertBefore(n,s),n=s,r=s,o+=t;break}}p.css(c("left"),o?a(n).position()[c("left")]:l.position()[c("left")]),r&&r.parentNode.removeChild(r)}}else p.remove()}else p.remove()}else p.remove()}},this.refreshPosition=function(b,d,e,f){var g=a(d),h=f.top,i=f.left,j=g.outerHeight(),k=Math.max.apply(Math,e.find("span").add(g).map(function(){return a(this).outerWidth()}).get());e.css("width",k),e.css("height",j),e.css("top",h),e.css(c("left"),i),"true"==e.data("needrefresh")&&(e.data("needrefresh","false"),o.refresh(b,d)),o.updateCursor(b,d,e)},this.refresh=function(b,c){var d,e=b.getUIDForElement(a(c)),f=b.getHiddenElementFor(e);0==f.children().length?(d=a("<pre name='_code_"+e+"'></pre>"),f.append(d)):d=f.children("pre");var g=a(c).attr("___default_attr");g||(g="plain"),d.attr("class",g);var h=n(c);if(""==h&&(h="\n"),d.data("text")!=h||g!=d.data("lang")){d.text(h.replace(/\n/g," \n")),d.data("text",h),d.data("lang",g);b.getCurrentNode().parents(".jive_macro_code");f.children("div").remove(),require(["jive/rte/syntax/SyntaxHighlighter"],function(d){d.HighlightAll("_code_"+e),o.refreshPosition(b,c,f,a(c).offset())})}else o.refreshPosition(b,c,f,a(c).offset())},this.caresAboutChangeTo=function(a,b,c){return!1}},jive.rte.plugin.code}),define("jive/bundles/tinymce3",["jive/rte/emote","jive/rte/externalLinkModal","jive/rte/FormAttachmentService","jive/rte/FormService","jive/rte/getSettings","jive/rte/ImageService","jive/rte/LinkService","jive/rte/macro","jive/rte/main","jive/rte/paramset","jive/rte/rte_layout","jive/rte/rte_listener","jive/rte/syntax/syntaxhighlightmacro","jive/rte/EntitlementService"]);
//# sourceMappingURL=tinymce3.js.map