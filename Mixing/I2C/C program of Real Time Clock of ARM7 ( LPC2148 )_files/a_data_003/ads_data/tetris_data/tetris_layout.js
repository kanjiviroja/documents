(function(){var g,k=this,aa=function(a){a=a.split(".");for(var b=k,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b},l=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==
c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b},m=function(a){return"array"==l(a)},ba=function(a){var b=l(a);return"array"==b||"object"==b&&"number"==typeof a.length},n=function(a){return"string"==typeof a},ca=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b},da="closure_uid_"+(1E9*Math.random()>>>0),ea=0,fa=function(a,
b,c){return a.call.apply(a.bind,arguments)},ha=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}},p=function(a,b,c){p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fa:ha;return p.apply(null,arguments)},r=Date.now||function(){return+new Date},
t=function(a,b){var c=a.split("."),d=k;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b},u=function(a,b){function c(){}c.prototype=b.prototype;a.D=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Lb=function(a,c,f){for(var h=Array(arguments.length-2),q=2;q<arguments.length;q++)h[q-2]=arguments[q];return b.prototype[c].apply(a,h)}};var ia={VIDEO_THUMB_INITIALIZED:"Video thumb initialized",VIDEO_THUMB_INITIALIZED_1S:"Video thumb initialized 1s",VIDEO_THUMB_INITIALIZED_3S:"Video thumb initialized 3s",VIDEO_THUMB_INITIALIZED_5S:"Video thumb initialized 5s",VIDEO_THUMB_INITIALIZED_10S:"Video thumb initialized 10s",VIDEO_THUMB_INITIALIZED_20S:"Video thumb initialized 20s",AUTO_PREVIEW_STARTED_PLAYING:"Autopreview started playing",AUTO_PREVIEW_PLAYING_2S:"Autopreview playing 2s"},ja={};var ka=function(a,b){Enabler.invokeExternalJsFunction("CreativeToolset.internals.gen204."+(b?"sampledError":"sampledInfo")+'("'+a+'", {}, 1);')};var la=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,la);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))};u(la,Error);var ma;var na=function(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")},oa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},wa=function(a){if(!pa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(qa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(ra,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(sa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(ta,"&quot;"));-1!=a.indexOf("'")&&
(a=a.replace(ua,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(va,"&#0;"));return a},qa=/&/g,ra=/</g,sa=/>/g,ta=/"/g,ua=/'/g,va=/\x00/g,pa=/[\x00&<>"']/,xa=function(a,b){return a<b?-1:a>b?1:0},ya=function(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})},za=function(a){var b=n(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};var Aa=function(a,b){b.unshift(a);la.call(this,na.apply(null,b));b.shift()};u(Aa,la);var Ba=function(a,b,c,d){var e="Assertion failed";if(c)var e=e+(": "+c),f=d;else a&&(e+=": "+a,f=b);throw new Aa(""+e,f||[]);},v=function(a,b,c){a||Ba("",null,b,Array.prototype.slice.call(arguments,2))},Ca=function(a,b){throw new Aa("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));},Da=function(a,b,c){n(a)||Ba("Expected string but got %s: %s.",[l(a),a],b,Array.prototype.slice.call(arguments,2));return a};var Ea=Array.prototype.indexOf?function(a,b,c){v(null!=a.length);return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(n(a))return n(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Fa=Array.prototype.map?function(a,b,c){v(null!=a.length);return Array.prototype.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=n(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Ga=function(a,
b){var c=Ea(a,b),d;if(d=0<=c)v(null!=a.length),Array.prototype.splice.call(a,c,1);return d},Ha=function(a){return Array.prototype.concat.apply(Array.prototype,arguments)},Ia=function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(ba(d)){var e=a.length||0,f=d.length||0;a.length=e+f;for(var h=0;h<f;h++)a[e+h]=d[h]}else a.push(d)}};var Ja=function(a,b,c){for(var d in a)b.call(c,a[d],d,a)},Ka=function(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b},La=function(a,b){for(var c in a)if(a[c]==b)return!0;return!1},Ma="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Na=function(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Ma.length;f++)c=Ma[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var w;a:{var Oa=k.navigator;if(Oa){var Pa=Oa.userAgent;if(Pa){w=Pa;break a}}w=""}var x=function(a){return-1!=w.indexOf(a)};var y=function(){this.Ya="";this.ab=Qa;this.jb=null};y.prototype.nb=function(){return this.jb};y.prototype.toString=function(){return"SafeHtml{"+this.Ya+"}"};var Qa={};var Ra=function(a,b){this.width=a;this.height=b};Ra.prototype.toString=function(){return"("+this.width+" x "+this.height+")"};Ra.prototype.ba=function(){return!(this.width*this.height)};var Sa=function(){return x("iPhone")&&!x("iPod")&&!x("iPad")};var Ta=x("Opera"),z=x("Trident")||x("MSIE"),Ua=x("Edge"),A=x("Gecko")&&!(-1!=w.toLowerCase().indexOf("webkit")&&!x("Edge"))&&!(x("Trident")||x("MSIE"))&&!x("Edge"),B=-1!=w.toLowerCase().indexOf("webkit")&&!x("Edge"),Va=function(){var a=k.document;return a?a.documentMode:void 0},Wa;
a:{var Xa="",Ya=function(){var a=w;if(A)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Ua)return/Edge\/([\d\.]+)/.exec(a);if(z)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(B)return/WebKit\/(\S+)/.exec(a);if(Ta)return/(?:Version)[ \/]?(\S+)/.exec(a)}();Ya&&(Xa=Ya?Ya[1]:"");if(z){var Za=Va();if(null!=Za&&Za>parseFloat(Xa)){Wa=String(Za);break a}}Wa=Xa}
var $a=Wa,ab={},C=function(a){var b;if(!(b=ab[a])){b=0;for(var c=oa(String($a)).split("."),d=oa(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",q=d[f]||"",ga=RegExp("(\\d*)(\\D*)","g"),sc=RegExp("(\\d*)(\\D*)","g");do{var T=ga.exec(h)||["","",""],U=sc.exec(q)||["","",""];if(0==T[0].length&&0==U[0].length)break;b=xa(0==T[1].length?0:parseInt(T[1],10),0==U[1].length?0:parseInt(U[1],10))||xa(0==T[2].length,0==U[2].length)||xa(T[2],U[2])}while(0==b)}b=ab[a]=0<=b}return b},
bb=k.document,cb=bb&&z?Va()||("CSS1Compat"==bb.compatMode?parseInt($a,10):5):void 0;!A&&!z||z&&9<=Number(cb)||A&&C("1.9.1");z&&C("9");var db=function(){var a=window.document,a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new Ra(a.clientWidth,a.clientHeight)},eb=function(a){this.M=a||k.document||document};eb.prototype.getElement=function(a){return n(a)?this.M.getElementById(a):a};eb.prototype.createElement=function(a){return this.M.createElement(a)};eb.prototype.appendChild=function(a,b){a.appendChild(b)};var D=function(){this.Y=this.Y;this.ea=this.ea};D.prototype.Y=!1;D.prototype.dispose=function(){this.Y||(this.Y=!0,this.w())};D.prototype.w=function(){if(this.ea)for(;this.ea.length;)this.ea.shift()()};var E=function(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.I=!1;this.Za=!0};E.prototype.preventDefault=function(){this.defaultPrevented=!0;this.Za=!1};var fb=function(a){fb[" "](a);return a};fb[" "]=function(){};var gb=!z||9<=Number(cb),hb=z&&!C("9");!B||C("528");A&&C("1.9b")||z&&C("8")||Ta&&C("9.5")||B&&C("528");A&&!C("8")||z&&C("9");var F=function(a,b){E.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.Z=this.state=null;if(a){var c=this.type=a.type,d=a.changedTouches?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;var e=a.relatedTarget;if(e){if(A){var f;a:{try{fb(e.nodeName);f=!0;break a}catch(h){}f=
!1}f||(e=null)}}else"mouseover"==c?e=a.fromElement:"mouseout"==c&&(e=a.toElement);this.relatedTarget=e;null===d?(this.offsetX=B||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=B||void 0!==a.offsetY?a.offsetY:a.layerY,this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,
this.screenY=d.screenY||0);this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.Z=a;a.defaultPrevented&&this.preventDefault()}};u(F,E);
F.prototype.preventDefault=function(){F.D.preventDefault.call(this);var a=this.Z;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,hb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var ib="closure_listenable_"+(1E6*Math.random()|0),G=function(a){return!(!a||!a[ib])},jb=0;var kb=function(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.W=!!d;this.$=e;this.key=++jb;this.removed=this.V=!1},lb=function(a){a.removed=!0;a.listener=null;a.proxy=null;a.src=null;a.$=null};var H=function(a){this.src=a;this.o={};this.U=0};H.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.o[f];a||(a=this.o[f]=[],this.U++);var h=mb(a,b,d,e);-1<h?(b=a[h],c||(b.V=!1)):(b=new kb(b,this.src,f,!!d,e),b.V=c,a.push(b));return b};H.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.o))return!1;var e=this.o[a];b=mb(e,b,c,d);return-1<b?(lb(e[b]),v(null!=e.length),Array.prototype.splice.call(e,b,1),0==e.length&&(delete this.o[a],this.U--),!0):!1};
var nb=function(a,b){var c=b.type;c in a.o&&Ga(a.o[c],b)&&(lb(b),0==a.o[c].length&&(delete a.o[c],a.U--))};H.prototype.removeAll=function(a){a=a&&a.toString();var b=0,c;for(c in this.o)if(!a||c==a){for(var d=this.o[c],e=0;e<d.length;e++)++b,lb(d[e]);delete this.o[c];this.U--}return b};H.prototype.N=function(a,b,c,d){a=this.o[a.toString()];var e=-1;a&&(e=mb(a,b,c,d));return-1<e?a[e]:null};var mb=function(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.removed&&f.listener==b&&f.W==!!c&&f.$==d)return e}return-1};var ob="closure_lm_"+(1E6*Math.random()|0),pb={},qb=0,I=function(a,b,c,d,e){if(m(b)){for(var f=0;f<b.length;f++)I(a,b[f],c,d,e);return null}c=rb(c);return G(a)?a.listen(b,c,d,e):sb(a,b,c,!1,d,e)},sb=function(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var h=!!e,q=J(a);q||(a[ob]=q=new H(a));c=q.add(b,c,d,e,f);if(c.proxy)return c;d=tb();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)a.addEventListener(b.toString(),d,h);else if(a.attachEvent)a.attachEvent(ub(b.toString()),d);else throw Error("addEventListener and attachEvent are unavailable.");
qb++;return c},tb=function(){var a=vb,b=gb?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b},wb=function(a,b,c,d,e){if(m(b)){for(var f=0;f<b.length;f++)wb(a,b[f],c,d,e);return null}c=rb(c);return G(a)?a.Ua(b,c,d,e):sb(a,b,c,!0,d,e)},xb=function(a,b,c,d,e){if(m(b))for(var f=0;f<b.length;f++)xb(a,b[f],c,d,e);else c=rb(c),G(a)?a.Ca(b,c,d,e):a&&(a=J(a))&&(b=a.N(b,c,!!d,e))&&yb(b)},yb=function(a){if("number"!=typeof a&&a&&!a.removed){var b=
a.src;if(G(b))nb(b.u,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.W):b.detachEvent&&b.detachEvent(ub(c),d);qb--;(c=J(b))?(nb(c,a),0==c.U&&(c.src=null,b[ob]=null)):lb(a)}}},ub=function(a){return a in pb?pb[a]:pb[a]="on"+a},Ab=function(a,b,c,d){var e=!0;if(a=J(a))if(b=a.o[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.W==c&&!f.removed&&(f=zb(f,d),e=e&&!1!==f)}return e},zb=function(a,b){var c=a.listener,d=a.$||a.src;a.V&&yb(a);return c.call(d,b)},
vb=function(a,b){if(a.removed)return!0;if(!gb){var c=b||aa("window.event"),d=new F(c,this),e=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var f=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(ga){f=!0}if(f||void 0==c.returnValue)c.returnValue=!0}c=[];for(f=d.currentTarget;f;f=f.parentNode)c.push(f);for(var f=a.type,h=c.length-1;!d.I&&0<=h;h--){d.currentTarget=c[h];var q=Ab(c[h],f,!0,d),e=e&&q}for(h=0;!d.I&&h<c.length;h++)d.currentTarget=c[h],q=Ab(c[h],f,!1,d),e=e&&q}return e}return zb(a,new F(b,
this))},J=function(a){a=a[ob];return a instanceof H?a:null},Bb="__closure_events_fn_"+(1E9*Math.random()>>>0),rb=function(a){v(a,"Listener can not be null.");if("function"==l(a))return a;v(a.handleEvent,"An object listener must have handleEvent method.");a[Bb]||(a[Bb]=function(b){return a.handleEvent(b)});return a[Bb]};var K=function(){D.call(this);this.u=new H(this);this.cb=this;this.Ba=null};u(K,D);K.prototype[ib]=!0;g=K.prototype;g.addEventListener=function(a,b,c,d){I(this,a,b,c,d)};g.removeEventListener=function(a,b,c,d){xb(this,a,b,c,d)};
g.dispatchEvent=function(a){Cb(this);var b,c=this.Ba;if(c){b=[];for(var d=1;c;c=c.Ba)b.push(c),v(1E3>++d,"infinite loop")}c=this.cb;d=a.type||a;if(n(a))a=new E(a,c);else if(a instanceof E)a.target=a.target||c;else{var e=a;a=new E(d,c);Na(a,e)}var e=!0,f;if(b)for(var h=b.length-1;!a.I&&0<=h;h--)f=a.currentTarget=b[h],e=Db(f,d,!0,a)&&e;a.I||(f=a.currentTarget=c,e=Db(f,d,!0,a)&&e,a.I||(e=Db(f,d,!1,a)&&e));if(b)for(h=0;!a.I&&h<b.length;h++)f=a.currentTarget=b[h],e=Db(f,d,!1,a)&&e;return e};
g.w=function(){K.D.w.call(this);this.u&&this.u.removeAll(void 0);this.Ba=null};g.listen=function(a,b,c,d){Cb(this);return this.u.add(String(a),b,!1,c,d)};g.Ua=function(a,b,c,d){return this.u.add(String(a),b,!0,c,d)};g.Ca=function(a,b,c,d){return this.u.remove(String(a),b,c,d)};
var Db=function(a,b,c,d){b=a.u.o[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var h=b[f];if(h&&!h.removed&&h.W==c){var q=h.listener,ga=h.$||h.src;h.V&&nb(a.u,h);e=!1!==q.call(ga,d)&&e}}return e&&0!=d.Za};K.prototype.N=function(a,b,c,d){return this.u.N(String(a),b,c,d)};var Cb=function(a){v(a.u,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")};var Eb=function(a,b){b&&(a=p(a,b));var c=null;return function(b){k.clearTimeout(c);var e=arguments;c=k.setTimeout(function(){a.apply(null,e)},500)}};var L=function(a,b,c){if("function"==l(a))c&&(a=p(a,c));else if(a&&"function"==typeof a.handleEvent)a=p(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:k.setTimeout(a,b||0)};var Fb=!1,Gb="[Innovation Logger]";t("common.utils.logger.setEnabled",function(a){Fb=a});t("common.utils.logger.setPrefix",function(a){Gb="["+a+"]"});t("common.utils.logger.error",function(a,b){Fb&&([].unshift.call(arguments,Gb),console.error.apply(console,arguments))});var M=function(a,b){Fb&&([].unshift.call(arguments,Gb),console.log.apply(console,arguments))};t("common.utils.logger.log",M);var Hb=function(a,b){Fb&&([].unshift.call(arguments,Gb),console.warn.apply(console,arguments))};
t("common.utils.logger.warn",Hb);var N=function(){K.call(this);this.Fa=studio.Enabler.getInstance();this.id="";this.l=this.type=this.path=null;this.Ka={}};u(N,K);g=N.prototype;g.addPropertyChangeListener=function(a,b){var c=function(a){M("[propertyChangeHandler] "+this.path+" - "+b+": "+a)}.bind(this);studio.sdk.configurable.binding.addPropertyChangeListener(a,b,c);this.Ka[b]=c};g.counter=function(a){M("["+this.getPath()+"] counter: "+a);studio.sdk.configurable.counter(this.l,a)};
g.exit=function(a,b){M("["+this.getPath()+"] exit: "+a);/^[\s\xa0]*$/.test(null==b?"":String(b))?studio.sdk.configurable.exit(this.l,a):studio.sdk.configurable.exit(this.l,a,b)};g.getPath=function(){return this.path};g.getType=function(){return this.type};var Ib=function(a,b){var c=typeof b;return"string"==c||"number"==c||"boolean"==c||void 0==b||void 0!==b["@type"]&&"color"==b["@type"].toLowerCase()||void 0!==b["@type"]&&"url"==b["@type"].toLowerCase()||void 0!==b["@value"]&&Ib(a,b["@value"])};
g=N.prototype;g.register=function(a,b){if(ca(a)){this.l&&this.unregister();this.l=a[b];this.id=this.l["@id"];this.path=studio.sdk.configurable.config.getPath(this.l);this.type=studio.sdk.configurable.config.getType(this.l);for(var c in this.l)Ib(this,this.l[c])&&"@id"!=c&&this.addPropertyChangeListener.call(this,a[b],c);M("[register] id: "+this.path+" - type: "+this.type)}};g.removePropertyChangeListener=function(a,b){studio.sdk.configurable.binding.removePropertyChangeListener(a,b,this.Ka[b])};
g.startTimer=function(a){M("["+this.getPath()+"] startTimer: "+a);studio.sdk.configurable.startTimer(this.l,a)};g.stopTimer=function(a){M("["+this.getPath()+"] stopTimer: "+a);studio.sdk.configurable.stopTimer(this.l,a)};g.unregister=function(){if(this.l){M("[unregister] id: "+this.path+" - type: "+this.type);var a=this.l,b;for(b in this.l)Ib(this,this.l[b])&&"@id"!=b&&this.removePropertyChangeListener.call(this,a,b);this.id="";this.l=this.type=this.path=null}};var Jb=function(a){N.call(this);this.hb=n(a)?document.getElementById(a):a};u(Jb,N);var O=function(a,b,c){Jb.call(this,a);this.m=null;this.T=b;this.Da=this.ja=-1;this.L=c};u(O,Jb);var Kb={};g=O.prototype;g.prepare=function(){this.m.prepare()};g.activate=function(){null==this.m||this.m.getIsActive()||(this.m.activate(),this.Da=r(),0<this.L?(k.clearTimeout(this.ja),this.ja=L(p(this.$a,this,!1),this.L)):this.m.stopAnimation())};g.deactivate=function(){null!=this.m&&this.m.getIsActive()&&this.$a(!0)};g.invalidateSize=function(){this.m.invalidateSize()};
g.register=function(a,b){O.D.register.call(this,a,b);this.update()};g.Ab=function(a,b){var c=a.type;"Element interacted"==c&&this.dispatchEvent("userinteracted");La(ja,c)?ka(c,!0):La(ia,c)?ka(c,!1):studio.sdk.configurable.counter(b,a.type,!a.deDupe)};g.fb=function(a,b){this.dispatchEvent("userinteracted");studio.sdk.configurable.exit(b,a.type,a.href)};
g.wb=function(a){Enabler.invokeExternalJsFunction("googlecreative.reporting.sharedReporter.reportEvents(["+JSON.stringify({unifiedReportingEvent:{type:"CUSTOM_EVENT",name:a.type},count:1})+"]);")};
g.update=function(){if(null!=this.m){k.clearTimeout(this.ja);this.deactivate();var a=this.m.getElement();a&&a.parentNode&&a.parentNode.removeChild(a);Ga(Kb[this.T],this.m);this.m.dispose();this.m=null}a={};a[tetris.factory.RenderPresenterArg.DATA]=this.l;a[tetris.factory.RenderPresenterArg.PARENT_EL]=this.hb;a[tetris.factory.RenderPresenterArg.PRESENTER_TYPE]=this.T;a[tetris.factory.RenderPresenterArg.GET_TYPE_FN]=studio.sdk.configurable.config.getType;a[tetris.factory.RenderPresenterArg.HANDLE_PINGBACK_FN]=
p(this.Ab,this);a[tetris.factory.RenderPresenterArg.HANDLE_CLICK_THROUGH_FN]=p(this.fb,this);a[tetris.factory.RenderPresenterArg.HANDLE_LATENCY_FN]=p(this.wb,this);a[tetris.factory.RenderPresenterArg.RESOLVE_URL_FN]=p(this.Fa.getUrl,this.Fa);this.m=tetris.factory.renderPresenter(a);null==Kb[this.T]&&(Kb[this.T]=[]);Kb[this.T].push(this.m);this.dispatchEvent("updated")};
g.$a=function(a){this.m.getIsAnimating()&&(k.clearTimeout(this.ja),a?this.m.deactivate():this.m.stopAnimation(),0<this.L&&(a=r()-this.Da,this.L-=a))};t("presenters",Kb);var Lb=function(){N.call(this)};u(Lb,N);Lb.prototype.register=function(a,b){Lb.D.register.call(this,a,b);tetris.themer.uninstall();var c=this.l.common;tetris.themer.install(c.theme,c.fontFamily,c.fontStyle,c.fontWeight,c.fontLockerFontName)};var Mb=function(){this.ga=void 0},Nb=function(a,b,c){if(null==b)c.push("null");else{if("object"==typeof b){if(m(b)){var d=b;b=d.length;c.push("[");for(var e="",f=0;f<b;f++)c.push(e),e=d[f],Nb(a,a.ga?a.ga.call(d,String(f),e):e,c),e=",";c.push("]");return}if(b instanceof String||b instanceof Number||b instanceof Boolean)b=b.valueOf();else{c.push("{");f="";for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&(e=b[d],"function"!=typeof e&&(c.push(f),Ob(d,c),c.push(":"),Nb(a,a.ga?a.ga.call(b,d,e):e,c),
f=","));c.push("}");return}}switch(typeof b){case "string":Ob(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?String(b):"null");break;case "boolean":c.push(String(b));break;case "function":c.push("null");break;default:throw Error("Unknown type: "+typeof b);}}},Pb={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},Qb=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,Ob=function(a,b){b.push('"',a.replace(Qb,
function(a){var b=Pb[a];b||(b="\\u"+(a.charCodeAt(0)|65536).toString(16).substr(1),Pb[a]=b);return b}),'"')};var P=function(){K.call(this)};u(P,K);P.getInstance=function(){return P.Na?P.Na:P.Na=new P};
var Rb=parseInt(1E4*Math.random(),10).toString(),Sb=["touchstart","touchend","click","mousedown","mouseup"],Ub=function(a){Enabler.invokeExternalJsFunction("CreativeToolset.internals.enableRemoteEvents(true);");I(document.body,Sb,function(a){Enabler.invokeExternalJsFunction('(function(e) {var sink = CreativeToolset.internals.creativeBodyRemoteEventSink;if (typeof sink == "function") { sink(e); }})('+Tb(a)+")")},!1,a)},Tb=function(a){var b=a.Z,c={type:b.type,ctrlKey:b.ctrlKey,shiftKey:b.shiftKey,altKey:b.altKey,
metaKey:b.metaKey,timeStamp:b.timeStamp||r()};switch(a.type){case "touchstart":case "touchend":Na(c,{touches:Vb(b.touches),targetTouches:Vb(b.targetTouches),changedTouches:Vb(b.changedTouches)});break;case "click":case "mousedown":case "mouseup":Na(c,{screenX:b.screenX,screenY:b.screenY,clientX:b.clientX,clientY:b.clientY,button:b.button,buttons:b.buttons})}a=[];Nb(new Mb,c,a);return a.join("")},Vb=function(a){return null!==a&&void 0!==a?Fa(a,function(a){return{identifier:a.identifier,screenX:a.screenX,
screenY:a.screenY,clientX:a.clientX,clientY:a.clientY,pageX:a.pageX,pageY:a.pageY,radiusX:a.radiusX,radiusY:a.radiusY,force:a.force}}):[]};P.prototype.sa=function(){clearInterval(this.tb);xb(window,"message",this.Va,!1,this);this.dispatchEvent("init")};P.prototype.Va=function(a){(a=a.Z)&&a.origin&&-1<a.origin.indexOf("adspreview.googleusercontent.com")?this.sa():a&&a.data&&a.data.seed==Rb&&null!=a.data.ctp&&this.sa()};var Xb=function(){return!Wb()&&(x("iPod")||x("iPhone")||x("Android")||x("IEMobile"))},Wb=function(){return x("iPad")||x("Android")&&!x("Mobile")||x("Silk")};var Zb=function(a){var b={cursor:"pointer",position:"absolute",zIndex:1E3,top:0,right:0};if(n(b))(b=Yb(a,b))&&(a.style[b]=void 0);else for(var c in b){var d=a,e=b[c],f=Yb(d,c);f&&(d.style[f]=e)}},$b={},Yb=function(a,b){var c=$b[b];if(!c){var d=ya(b),c=d;void 0===a.style[d]&&(d=(B?"Webkit":A?"Moz":z?"ms":Ta?"O":null)+za(d),void 0!==a.style[d]&&(c=d));$b[b]=c}return c};var Q=function(a,b,c){K.call(this);this.F=document.getElementById(a);this.va=document.getElementById(b);if(!this.F||!this.va)throw"[FullExpansionController] Invalid collapsed/expanded element ID";this.Ia=c||"hover_or_click";this.Pa=this.O=this.P=!1;this.ia=new Ra(0,0);this.wa=this.xa=void 0;this.ca=this.da=!1;a=studio.common.Environment;this.Qa=a.hasType(a.Type.LOCAL);this.aa=db();this.Qa&&(a=document.createElement("IMG"),a.src="https://pagead2.googlesyndication.com/pagead/bf/images/close_circle.png",
Zb(a),I(a,"click",function(){this.P=!0;window.setTimeout(p(function(){this.P=!1},this),2E3);this.Ma()},!1,this),this.va.appendChild(a));ac(this,!1);Enabler.addEventListener(studio.events.StudioEvent.FULLSCREEN_SUPPORT,this.Eb,!1,this);Enabler.addEventListener(studio.events.StudioEvent.ABOUT_TO_EXPAND,this.bb,!1,this);I(Enabler,studio.events.StudioEvent.FULLSCREEN_EXPAND_START,this.lb,!1,this);I(Enabler,studio.events.StudioEvent.FULLSCREEN_COLLAPSE_START,this.oa,!1,this);I(Enabler,studio.events.StudioEvent.FULLSCREEN_COLLAPSE_FINISH,
this.na,!1,this);(Sa()||x("iPad")||x("iPod"))&&studio.common.Environment.hasType(studio.common.Environment.Type.IN_APP)||I(Enabler,studio.events.StudioEvent.EXIT,this.Ma,!1,this);bc()};u(Q,K);var cc=14/9,dc=1/cc;g=Q.prototype;g.enableExpansion=function(a,b){this.xa=a;this.wa=b;Enabler.isInitialized()?Enabler.queryFullscreenSupport():I(Enabler,studio.events.StudioEvent.INIT,function(){Enabler.queryFullscreenSupport()},!1,this)};
g.lb=function(){this.da=!1;ac(this,!0);Enabler.counter("Lightbox Expand",!0);Enabler.startTimer("Lightbox Expansion Timer");Enabler.finishFullscreenExpand()};g.Ma=function(){Enabler.requestFullscreenCollapse()};g.oa=function(){ec(this)};g.na=function(){this.O&&ec(this);bc()};g.isExpanded=function(){return this.O};var ec=function(a){Enabler.counter("Lightbox Collapse",!0);Enabler.stopTimer("Lightbox Expansion Timer");ac(a,!1)},bc=function(){Enabler.invokeExternalJsFunction('studioV2.api.creatives[0].getAssets()[0].getContainerElement().firstChild.style.overflow="visible"')};
Q.prototype.ha=function(){if(!this.O&&!this.P){var a=null!=this.xa&&null!=this.wa;if(a||this.ca){this.da&&this.Ea();if(a)var a=this.xa,b=this.wa;else{var a=this.ia.width,b=this.ia.height,c=a/b;c>cc?a=b*cc:c<dc&&(b=a/dc)}Enabler.requestFullscreenExpand(a,b);this.da=!0;this.dispatchEvent("requestExpand")}else this.ca=!0,Enabler.queryFullscreenDimensions()}};Q.prototype.Ea=function(){this.da=!1;this.dispatchEvent("cancelExpand")};
var ac=function(a,b){a.va.style.left=b?"0":"-9999px";a.O=b;a.O?a.F.style.display="none":L(function(){this.F.style.display="";Enabler.finishFullscreenCollapse()},0,a)};Q.prototype.bb=function(){this.ha()};Q.prototype.Eb=function(a){if(this.Pa=a.supported)Enabler.addEventListener(studio.events.StudioEvent.FULLSCREEN_DIMENSIONS,this.Cb,!1,this),Enabler.queryFullscreenDimensions()};
Q.prototype.Cb=function(a){this.ia.width=a.width;this.ia.height=a.height;"hover"!=this.Ia&&I(this.F,"click",this.ha,!1,this);Xb()||Wb()||"click"==this.Ia||I(this.F,"mouseenter",this.ha,!1,this);this.Qa||I(this.F,"mouseleave",this.Ea,!1,this);a=-(this.aa.width/2)+"px";var b=-(this.aa.height/2)+"px",c;c='studioV2.api.creatives[0].getAssets()[0].getContainerElement().style.position="absolute";studioV2.api.creatives[0].getAssets()[0].getContainerElement().style.left="50%";studioV2.api.creatives[0].getAssets()[0].getContainerElement().style.top="50%";'+
('studioV2.api.creatives[0].getAssets()[0].getContainerElement().style.marginLeft="'+a+'";')+('studioV2.api.creatives[0].getAssets()[0].getContainerElement().style.marginTop="'+b+'";')+'studioV2.api.creatives[0].getAssets()[0].getContainerElement().firstChild.style.position="absolute";';c+='studioV2.api.creatives[0].getAssets()[0].getContainerElement().firstChild.style.left="50%";';c+='studioV2.api.creatives[0].getAssets()[0].getContainerElement().firstChild.style.top="50%";';c=c+('studioV2.api.creatives[0].getAssets()[0].getContainerElement().firstChild.style.marginLeft="'+
a+'";')+('studioV2.api.creatives[0].getAssets()[0].getContainerElement().firstChild.style.marginTop="'+b+'";')+'studioV2.api.creatives[0].getAssets()[0].getContainerElement().parentNode.style.position="relative";';c+='studioV2.api.creatives[0].getAssets()[0].getContainerElement().parentNode.style.width="'+this.aa.width+'px";';c+='studioV2.api.creatives[0].getAssets()[0].getContainerElement().parentNode.style.height="'+this.aa.height+'px";';Enabler.invokeExternalJsFunction(c);this.dispatchEvent("ready");
this.ca&&(this.ha(),this.ca=!1)};var fc=function(a,b,c){E.call(this,a);this.visibilityParams=b.visibilityParams;this.isFirstEvent=c};u(fc,E);t("studioinnovation.visibility.VisibilityEvent",fc);var R=function(a){K.call(this);this.Fb=a||1500;this.xb=r();this.Oa=this.ya=!1;Enabler.addEventListener("visibilityChangeWithInfo",p(this.rb,this));L(p(this.yb,this),this.Fb)};u(R,K);t("studioinnovation.visibility.OsdBroadcaster.IS_FIRST_EVENT_KEY","isFirstEvent");t("studioinnovation.visibility.OsdBroadcaster.VISIBILITY_PARAMS_KEY","visibilityParams");
t("studioinnovation.visibility.OsdBroadcaster.VISIBILITY_FRACTION_KEY","visibilityFraction");t("studioinnovation.visibility.OsdBroadcaster.VISIBLE_BOX_KEY","visibleBox");t("studioinnovation.visibility.OsdBroadcaster.VISIBLITY_CHANGE_WITH_INFO_STUDIO_EVENT_TYPE","visibilityChangeWithInfo");R.prototype.rb=function(a){this.Oa&&Hb("OsdBroadcaster received an osd message after declaringitself disconnected.");a=new fc("innovationvisibilitychange",a,!this.ya);this.ya=!0;this.dispatchEvent(a)};
R.prototype.yb=function(){this.ya||(this.Oa=!0,this.dispatchEvent(new E("innovationvisibilitytimeout")))};R.prototype.Ja=function(){return this.xb};R.prototype.getLoadTime=R.prototype.Ja;var gc={Nb:!0},hc={Ob:!0},ic=function(){throw Error("Do not instantiate directly");};ic.prototype.pa=null;ic.prototype.toString=function(){return this.content};var kc=function(){var a=jc({ub:"invitation",ib:"cta",mb:"expanded"});if(!ca(a))return String(a);if(a instanceof ic){if(a.qa===gc)return Da(a.content);if(a.qa===hc)return wa(a.content)}Ca("Soy template output is unsafe for use as HTML: "+a);return"zSoyz"};var lc="StopIteration"in k?k.StopIteration:{message:"StopIteration",stack:""},mc=function(){};mc.prototype.next=function(){throw lc;};mc.prototype.la=function(){return this};var S=function(a,b){this.s={};this.j=[];this.ka=this.G=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)};S.prototype.H=function(){nc(this);for(var a=[],b=0;b<this.j.length;b++)a.push(this.s[this.j[b]]);return a};S.prototype.ba=function(){return 0==this.G};
S.prototype.remove=function(a){return Object.prototype.hasOwnProperty.call(this.s,a)?(delete this.s[a],this.G--,this.ka++,this.j.length>2*this.G&&nc(this),!0):!1};var nc=function(a){if(a.G!=a.j.length){for(var b=0,c=0;b<a.j.length;){var d=a.j[b];Object.prototype.hasOwnProperty.call(a.s,d)&&(a.j[c++]=d);b++}a.j.length=c}if(a.G!=a.j.length){for(var e={},c=b=0;b<a.j.length;)d=a.j[b],Object.prototype.hasOwnProperty.call(e,d)||(a.j[c++]=d,e[d]=1),b++;a.j.length=c}};
S.prototype.set=function(a,b){Object.prototype.hasOwnProperty.call(this.s,a)||(this.G++,this.j.push(a),this.ka++);this.s[a]=b};S.prototype.addAll=function(a){var b;if(a instanceof S)nc(a),b=a.j.concat(),a=a.H();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Ka(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};
S.prototype.la=function(a){nc(this);var b=0,c=this.ka,d=this,e=new mc;e.next=function(){if(c!=d.ka)throw Error("The map has changed since the iterator was created");if(b>=d.j.length)throw lc;var e=d.j[b++];return a?e:d.s[e]};return e};var oc=function(a){if(a.H&&"function"==typeof a.H)return a.H();if(n(a))return a.split("");if(ba(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Ka(a)};var pc=function(a){this.s=new S;a&&this.addAll(a)},qc=function(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+(a[da]||(a[da]=++ea)):b.substr(0,1)+a};g=pc.prototype;g.add=function(a){this.s.set(qc(a),a)};g.addAll=function(a){a=oc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};g.removeAll=function(a){a=oc(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};g.remove=function(a){return this.s.remove(qc(a))};g.ba=function(){return this.s.ba()};g.H=function(){return this.s.H()};g.la=function(){return this.s.la(!1)};var V=function(a){D.call(this);this.za=a;this.j={}};u(V,D);var rc=[];V.prototype.listen=function(a,b,c,d){m(b)||(b&&(rc[0]=b.toString()),b=rc);for(var e=0;e<b.length;e++){var f=I(a,b[e],c||this.handleEvent,d||!1,this.za||this);if(!f)break;this.j[f.key]=f}return this};V.prototype.Ua=function(a,b,c,d){return tc(this,a,b,c,d)};var tc=function(a,b,c,d,e,f){if(m(c))for(var h=0;h<c.length;h++)tc(a,b,c[h],d,e,f);else{b=wb(b,c,d||a.handleEvent,e,f||a.za||a);if(!b)return a;a.j[b.key]=b}return a};
V.prototype.Ca=function(a,b,c,d,e){if(m(b))for(var f=0;f<b.length;f++)this.Ca(a,b[f],c,d,e);else c=c||this.handleEvent,e=e||this.za||this,c=rb(c),d=!!d,b=G(a)?a.N(b,c,d,e):a?(a=J(a))?a.N(b,c,d,e):null:null,b&&(yb(b),delete this.j[b.key]);return this};V.prototype.removeAll=function(){Ja(this.j,function(a,b){this.j.hasOwnProperty(b)&&yb(a)},this);this.j={}};V.prototype.w=function(){V.D.w.call(this);this.removeAll()};
V.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};var W=function(a,b){K.call(this);this.ta=[];this.Gb=!!b;this.ua=new V(this);this.vb=window.parent!=window;if(a)if(m(a))for(var c=0;c<a.length;c++)uc(this,a[c].M);else uc(this,a.M);else c=ma||(ma=new eb),uc(this,c.M);this.Ra=r()};u(W,K);W.prototype.Wa=0;var vc=["click","dblclick","mousedown","mousemove","mouseup"],wc=["touchend","touchmove","touchstart"],xc=["keydown","keyup"];W.prototype.w=function(){W.D.w.call(this);this.ua.dispose();this.ua=null;delete this.ta};
var uc=function(a,b){if(!(0<=Ea(a.ta,b))){a.ta.push(b);var c=!a.Gb,d=Ha(xc,vc);a.vb||Ia(d,wc);a.ua.listen(b,d,a.qb,c)}};W.prototype.qb=function(a){var b=!1;switch(a.type){case "mousemove":if("number"==typeof this.Sa&&this.Sa!=a.clientX||"number"==typeof this.Ta&&this.Ta!=a.clientY)b=!0;this.Sa=a.clientX;this.Ta=a.clientY;break;default:b=!0}b&&(Da(a.type),yc(this))};var yc=function(a){var b=r();a.Ra=b;b>a.Wa&&(a.dispatchEvent("activity"),a.Wa=b+3E3)};var Y=function(a,b){K.call(this);var c;(c=b)||(zc.add(this),null==X&&(X=new W),c=X);this.sb=a;this.K=c;this.eb=p(this.zb,this);Ac(this)};u(Y,K);Y.prototype.Aa=!1;var X=Y.prototype.S=null,zc=new pc,Ac=function(a){var b=a.sb+1-(r()-a.K.Ra);0<b?a.S=L(a.eb,b):(I(a.K,"activity",a.Xa,!1,a),a.Aa=!0,a.dispatchEvent("idle"))};Y.prototype.zb=function(){this.S=null;Ac(this)};Y.prototype.Xa=function(){Bc(this);this.dispatchEvent("active");Ac(this)};
var Bc=function(a){a.Aa&&(xb(a.K,"activity",a.Xa,!1,a),a.Aa=!1)};Y.prototype.w=function(){Bc(this);null!=this.S&&(k.clearTimeout(this.S),this.S=null);zc.remove(this);null!=X&&zc.ba()&&(X.dispose(),X=null);Y.D.w.call(this)};z&&C(8);var Cc=function(a){if(null!=a)switch(a.pa){case 1:return 1;case -1:return-1;case 0:return 0}return null},Dc=function(){ic.call(this)};u(Dc,ic);Dc.prototype.qa=gc;
var Fc=function(a){if(null!=a&&a.qa===gc)return v(a.constructor===Dc),a;if(a instanceof y){var b=Ec,c;a instanceof y&&a.constructor===y&&a.ab===Qa?c=a.Ya:(Ca("expected object of type SafeHtml, got '"+a+"' of type "+l(a)),c="type_error:SafeHtml");a=b(c,a.nb())}else a=Ec(wa(String(String(a))),Cc(a));return a},Ec=function(a){function b(a){this.content=a}b.prototype=a.prototype;return function(a,d){var e=new b(String(a));void 0!==d&&(e.pa=d);return e}}(Dc);
(function(a){function b(a){this.content=a}b.prototype=a.prototype;return function(a,d){var e=String(a);if(!e)return"";e=new b(e);void 0!==d&&(e.pa=d);return e}})(Dc);var jc=function(a){return'<div id="'+Fc(a.ub)+'" class="view-container"><div id="'+Fc(a.ib)+'" class="view-container"></div><div id="'+Fc(a.Mb)+'" class="view-container"></div></div><div id="'+Fc(a.mb)+'" class="view-container" style="width:100%; height: 100%;"></div>'};jc.Pb="studioinnovation.layouts.lightbox.tetris.templates.creative";var Z=function(){var a=document.body;v(jc,"Soy template may not be null.");a.innerHTML=kc();this.tetris=this.v=this.themer=null;this.R=!1;this.A=this.Ha=this.B=null;this.J=0;this.X=this.ra=this.ma=!1;this.fa=null;this.C=!1;aa("studio.sdk.gdn")?studio.sdk.gdn.getInitializedConfigByCallback(p(this.gb,this)):Gc(this)};t("studioinnovation.layouts.lightbox.tetris.Tetris",Z);
Z.prototype.gb=function(a){var b=a.getActiveExperimentLabels(),c=(a.getClientEnvironment()||{}).language,d=(a.getClientEnvironment()||{}).browserClass,e={};e[tetris.config.Field.ACTIVE_EXPERIMENTS]=b||[];e[tetris.config.Field.LOCALE]=c||"en-US";e[tetris.config.Field.BROWSER_CLASS]=d||(Xb()||Wb()?studio.common.Environment.hasType(studio.common.Environment.Type.IN_APP)?tetris.config.BrowserClass.IN_APP:tetris.config.BrowserClass.MOBILE_WEB:tetris.config.BrowserClass.DESKTOP);tetris.config.set(e);tetris.config.isEnabled(tetris.config.Experiment.VIEWABLE_THRESHOLD_1_PERCENT)?
this.J=.01:tetris.config.isEnabled(tetris.config.Experiment.VIEWABLE_THRESHOLD_25_PERCENT)?this.J=.25:tetris.config.isEnabled(tetris.config.Experiment.VIEWABLE_THRESHOLD_50_PERCENT)?this.J=.5:tetris.config.isEnabled(tetris.config.Experiment.VIEWABLE_THRESHOLD_75_PERCENT)&&(this.J=.75);this.ma=tetris.config.isEnabled(tetris.config.Experiment.ACTIVATE_WHEN_VIEWABLE);this.ra=tetris.config.isEnabled(tetris.config.Experiment.DEACTIVATE_WHEN_UNVIEWABLE);this.X=tetris.config.isEnabled(tetris.config.Experiment.DISABLE_EXPANSION_WHEN_UNVIEWABLE);
Hc(this)&&(this.fa=new R);this.Ha=L(p(this.Ga,this,null),2E3);a.retrieveCurrentEngagementState(p(this.Ga,this))};Z.prototype.Ga=function(a){k.clearTimeout(this.Ha);null!=a?this.R=a==studio.sdk.gdn.EngagementPhase.INVITATION_LARGE_CANVAS:Enabler.counter("Engagement state failure");Gc(this)};Z.prototype.Hb=function(){this.R&&Enabler.counter("GENERIC_ENGAGEMENT");null!=this.A&&null!=this.A.K&&yc(this.A.K)};Z.prototype.Ib=function(){(this.R||this.B.isExpanded())&&this.tetris.activate()};
var Gc=function(a){a.themer=new Lb;a.tetris=new O("expanded",tetris.factory.PresenterType.EXPANDED,24E4);I(a.tetris,"updated",p(a.Ib,a));I(a.tetris,"userinteracted",p(a.Hb,a));a.R||(a.v=new O("cta",tetris.factory.PresenterType.INVITATION,3E4),a.B=new Q("invitation","expanded","hover_or_click"),Hc(a)&&(I(a.fa,"innovationvisibilitychange",p(a.Jb,a)),I(a.fa,"innovationvisibilitytimeout",p(a.Kb,a))));if(studio.sdk.configurable.getRuntimeMode()==studio.sdk.configurable.RUNTIME_MODE.TRAFFICK){var b=P.getInstance();
wb(b,"init",a.La,!1,a);I(window,"message",b.Va,!1,b);a=window.document.location.origin;a='(function(seed, origin){window.Creative = {};window.Creative.seed = seed;window.Creative.targetOrigin = origin;var s = document.createElement("script");s.src = "'+Enabler.getUrl("https://www.gstatic.com/doubleclick/studio/innovation/h5/layouts/creativeproxy/1/creativeproxy_min.js")+'";var t = document.getElementsByTagName("script")[0];t.parentNode.insertBefore(s, t);})("'+Rb+'", "'+a+'")';b.tb=setInterval(b.sa.bind(b),
2500);Enabler.invokeExternalJsFunction(a);window.disableEventBubbling||Ub(b)}else a.La()};Z.prototype.Bb=function(){(Sa()||x("iPad")||x("iPod"))&&tetris.config.getNumber(tetris.config.Field.BROWSER_CLASS,tetris.config.BrowserClass.DESKTOP)==tetris.config.BrowserClass.IN_APP||this.tetris.prepare()};var Ic=function(a){null!==a.A&&(a.A.dispose(),a.A=null)};g=Z.prototype;
g.kb=function(){this.tetris.activate();Ic(this);tetris.config.isEnabled(tetris.config.Experiment.LOG_IDLE_IN_TETRIS)&&(this.A=new Y(5E3),this.A.listen("idle",this.pb,!1,this),this.A.listen("active",this.ob,!1,this))};g.pb=function(){Enabler.counter("Tetris became idle")};g.ob=function(){Enabler.counter("Tetris became active")};g.oa=function(){this.tetris.deactivate();Ic(this)};g.na=function(){this.v.invalidateSize()};
g.Jb=function(a){var b=a.visibilityParams.visibilityFraction;!this.C&&b>=this.J?(this.C=!0,Jc(this)):this.C&&b<this.J&&(this.C=!1,Kc(this));a.isFirstEvent&&(a={delayMs:r()-this.fa.Ja(),visFraction:b,context:"Tetris.visibilityChangeHandler_"},a='CreativeToolset.internals.gen204.sampledInfo("reportFirstOsdEvent", '+JSON.stringify(a)+", 1);",Enabler.invokeExternalJsFunction(a))};g.Kb=function(){Enabler.counter("Osd timed out");this.C=!0;Jc(this)};
var Jc=function(a){a.B&&a.X&&(a.B.P=!1);a.v&&a.v.activate()},Kc=function(a){a.B&&a.X&&(a.B.P=!0);a.v&&a.ra&&a.v.deactivate()};
Z.prototype.La=function(){this.R||(this.B.enableExpansion(),Enabler.addEventListener(studio.events.StudioEvent.ABOUT_TO_EXPAND,this.Bb,!1,this),Enabler.addEventListener(studio.events.StudioEvent.FULLSCREEN_EXPAND_FINISH,this.kb,!1,this),Enabler.addEventListener(studio.events.StudioEvent.FULLSCREEN_COLLAPSE_START,this.oa,!1,this),Enabler.addEventListener(studio.events.StudioEvent.FULLSCREEN_COLLAPSE_FINISH,this.na,!1,this));Hc(this)&&(this.C=!this.ma);studio.sdk.configurable.config.declare("CustomHeaders",
{"350x75":{"@type":"image"},"900x125":{"@type":"image"},"1200x150":{"@type":"image"}});studio.sdk.configurable.config.declare("CustomInvites",{"160x600":{"@type":"image"},"300x250":{"@type":"image"},"320x50":{"@type":"image"},"728x90":{"@type":"image"},"120x600":{"@type":"image"},"200x200":{"@type":"image"},"250x250":{"@type":"image"},"300x600":{"@type":"image"},"320x100":{"@type":"image"},"336x280":{"@type":"image"},"468x60":{"@type":"image"},"580x400":{"@type":"image"},"970x90":{"@type":"image"},
"970x250":{"@type":"image"}});studio.sdk.configurable.config.declare("ImageGalleryImage",{image:{"@type":"image"},title:"",text:"",cta:"",href:""});studio.sdk.configurable.config.declare("ImageGalleryAsset",{"@counter":["Image gallery CTA clicked","Image gallery card interacted","Thumb selected","Image gallery image selected"],"@exit":["Image gallery CTA clicked"],images:{"@type":"ImageGalleryImage","@array":!0}});studio.sdk.configurable.config.declare("ProductGalleryProduct",{image:{"@type":"image"},
title:"",text:"",price:"",href:""});studio.sdk.configurable.config.declare("ProductGalleryAsset",{"@counter":["Product gallery product clicked","Product gallery card interacted","Product gallery scrolled"],"@exit":["Product gallery product clicked"],products:{"@type":"ProductGalleryProduct","@array":!0}});studio.sdk.configurable.config.declare("MapLocation",{latitude:0,longitude:0,address:"",name:"",featureId:"",phoneNumber:"",mapImageUrlSmall:"",mapImageUrlBig:"",exitUrlPlace:"",exitUrlDirections:""});
studio.sdk.configurable.config.declare("MapAsset",{"@counter":["Map card interacted","Thumb selected","Map location selected","Google Maps API failure"],locations:{"@type":"MapLocation","@array":!0},startingAddress:""});studio.sdk.configurable.config.declare("VideoAsset",{"@counter":"Video card interacted;Video paused;Video played 0%;Video played 25%;Video played 50%;Video played 75%;Video played 100%;Thumb selected;Video playing;Video buffering;Video unmuted;YouTube Iframe API failure".split(";"),
videoId:{"@type":"string","@required":!0},videoUrl:{"@type":"string","@required":!0},image:{"@type":"image"}});studio.sdk.configurable.config.declare("Message",{text:{"@type":"string","@required":!0}});studio.sdk.configurable.config.declare("Cta",{text:{"@type":"string","@required":!0},href:{"@type":"string"}});studio.sdk.configurable.config.declare("Common",{demoId:"",bordered:{"@value":!0,"@type":"bool","@required":!0},accentColor:{"@value":"#555555","@type":"color","@required":!0},theme:"dark",
fontFamily:"Roboto",fontStyle:"",fontWeight:"",backgroundColor:{"@value":"#7B7B7B","@type":"color","@required":!0},backgroundFadeOpacity:{"@value":15,"@type":"double","@required":!0},logo:{"@type":"image","@required":!0},logoHref:"",captions:{"@type":["Message","Cta"],"@array":!0},fontLockerFontName:""});studio.sdk.configurable.config.declare("Assets",{cards:{"@type":["VideoAsset","ImageGalleryAsset","ProductGalleryAsset","MapAsset"],"@array":!0}});studio.sdk.configurable.config.declare("Creative",
{"@counter":["Header CTA clicked","Logo clicked","Social link clicked","Element interacted"],"@exit":["Header CTA clicked","Logo clicked","Social link clicked"],common:{"@type":"Common","@required":!0},assets:{"@type":"Assets","@required":!0},customInvites:{"@type":"CustomInvites","@required":!0},customHeaders:{"@type":"CustomHeaders","@required":!0}});studio.sdk.configurable.config.declare("root",{tetris:{"@type":"Creative"}});var a=studio.sdk.configurable.config.instantiate("root",{});studio.sdk.configurable.register(a,
p(this.Db,this))};Z.prototype.Db=function(a){studio.sdk.configurable.setTranslationMethod(aa("GdnPreview.getConfig"));Lc(this,a);studio.sdk.configurable.binding.addValueChangeListener(a,p(Eb(function(){Lc(this,a)},this),this))};var Lc=function(a,b){a.themer.register(b,"tetris");a.tetris.register(b,"tetris");null!=a.v&&(a.v.register(b,"tetris"),Hc(a)||a.v.activate());Hc(a)&&(a.C?Jc(a):Kc(a))},Hc=function(a){return a.ma||a.ra||a.X};})();
